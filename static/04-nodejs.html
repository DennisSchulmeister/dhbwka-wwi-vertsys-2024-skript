<section data-chapter="h1" data-title="Backend-Programmierung mit Node.js" data-background-color="rgb(210,190,210)">
    <article class="markdown">
        #### Erste Schritte mit Node.js {.dhbw-lightblue}

        <table>
            <tbody>
                <tr>
                    <td class="lernziel-art">Wissen</td>
                    <td>Die Struktur eines Node.js-Projekts mit kennen</td>
                </tr>
                <tr>
                    <td class="lernziel-art">Zeigen</td>
                    <td>Node.js-Projekt anlegen, ausf√ºhren und bearbeiten</td>
                </tr>
                <tr>
                    <td class="lernziel-art">Zeigen</td>
                    <td>Einfache Konsolenprogramme mit Node.js programmieren</td>
                </tr>
            </tbody>
        </table>

        #### Das Express Web-Framework {.dhbw-lightblue .mt-4}

        <table>
            <tbody>
                <tr>
                    <td class="lernziel-art">Wissen</td>
                    <td>Den Funktionsumfang von Express im Vergleich zu anderen Frameworks einordnen</td>
                </tr>
                <tr>
                    <td class="lernziel-art">Verstehen</td>
                    <td>App-Objekt, Request Handler und Middleware-Funktionen verstehen</td>
                </tr>
                <tr>
                    <td class="lernziel-art">Zeigen</td>
                    <td>Einfache serverseitige Webanwendungen mit Express programmieren</td>
                </tr>
                <tr>
                    <td class="lernziel-art">Zeigen</td>
                    <td>Auf alle Daten einer HTTP-Anfrage und HTTP-Antwort zugreifen</td>
                </tr>
            </tbody>
        </table>

        <span style="font-size: 240px; color: white;" class="dhbw-text-shadow" >üèÅ</span>
    </article>
    <aside class="markdown">
        Verteilte Anwendungen besitzen oft eine Backend genannte Serverumgebung, die f√ºr die Anwender*innen
        unsichtbar Anfragen verarbeitet, Daten verwaltet, APIs bereit stellt und insgesamt einen gro√üen Teil
        der Anwendungsfunktionalit√§t zur Verf√ºgung stellt. Die hierf√ºr notwendigen Programme k√∂nnen im Grunde
        genommen mit jeder Programmiersprache entwickelt werden. In diesem Kapitel lernen wir mit Node.js
        jedoch eine besonders leistungsf√§hige und dennoch leichtgewichtige Laufzeitumgebung kennen, die genau
        f√ºr diesen Zweck geschaffen wurde.

        Im ersten Teil lernen wir die Grundlagen von Node.js kennen und erfahren, wie ein Node.js-Projekt
        strukturiert ist, wie wir es anlegen und bearbeiten k√∂nnen und wie wir einfache Konsolenprogramme
        damit schreiben k√∂nnen. Zus√§tzlich lernen wir, externe Bibliotheken zu suchen und als Abh√§ngigkeiten
        einbinden, um diese in unserem Programmen nutzen zu k√∂nnen.

        Ein gro√üer Teil dieser Vorlesung dreht sich um die Bereitstellung und Nutzung von Webservices,
        wof√ºr wir ein serverseitiges Web Framework ben√∂tigten. Unsere Wahl f√§llt dabei auf Express, dem
        vermutlich am weitesten verbreiteten Web Framework f√ºr Node.js √ºberhaupt. Denn es ist, genau wie
        Node.js, leichtgewichtig und leistungsstark und vereinfacht die Entwicklung somit enorm. Im zweiten
        Teil werden wir daher alle die wichtigsten Funktionen von Express kennenlernen und im Handumdrehen
        unseren ersten eigenen HTTP-Server programmieren.

        ##### Warum ist dieses Kapitel wichtig?

        Verteilte Anwendungen sind heute in der Regel internetbasierte Anwendungen auf Basis von TCP/IP und
        den darauf aufbauenden h√∂heren Protokollen. Sehr h√§ufig kommt dabei HTTP als √úbertragungsprotokoll
        vom Einsatz. Node.js und Express bieten uns hier eine sehr leistungsf√§hige Laufzeitumgebung, die es
        mit wenigen Codezeilen erlaubt, hoch-skalierbare Serverprogramme zu entwickeln. üèéÔ∏è
    </aside>
</section>

<!-- ========================== -->
<!-- Backendseitiges JavaScript -->
<!-- ========================== -->
<section data-use-template="teilkapitel" data-titel="Backendseitiges JavaScript"></section>

<section data-title="Nutzung der Kommandozeile">
    <section data-title="In einem Land vor unserer Zeit"
        data-background-color = "#111111"
        data-title-color      = "gold"
        data-subtitle-color   = "rgb(170, 0, 170)"
        data-text-color       = "lightgrey"
    >
        <article>
            <style>
                @font-face {
                    font-display: swap;
                    font-family: "terminal";
                    src: url("04-nodejs/terminal-simulation/VT323-Regular.woff2") format("woff2");
                }
    
                @keyframes blinking {
                    50% {
                        opacity: 0;
                    }
                }
    
                #terminal-output {
                    padding: 0.5em;
                    border: 1px solid rgba(0,0,0,0);
    
                    font-family: terminal, monospace;
                    font-size: 130%;
                    line-height: normal;
    
                    height: 100%;
    
                    &:focus {
                        background-color: rgba(255,255,255, 0.05);
                        border-color: rgba(255,255,255, 0.1);
                        border-radius: 0.125em;
                    }
    
                    .cursor::after {   
                        content: '_';
                        animation: blinking 1s step-start infinite;
                    }
    
                    pre {
                        font-family: terminal, monospace;
                        font-size: 100%;
                        margin: 0;
                        padding: 0;
                        overflow: hidden;
                    }
                }
            </style>
    
            <script>
                // Event wird anscheinend zwei mal ausgel√∂st ...
                window.terminal_simulation_init = (event) => {
                    let terminalOutput = document.querySelector("#terminal-output");
                    if (!terminalOutput) return;
    
                    let environment = {
                        drive:     "C",
                        directory: "\\",
                        pwd:       {},
                        filesystem: {
                            type: "dir",  size: "  <DIR>", date: "09.10.1994", content: {
                                "COMMAND  COM":     {type: "file", size: " 54.645", date: "31.05.1994"},
                                "CONFIG   SYS":     {type: "file", size: "     71", date: "03.06.1994"},
                                "AUTOEXEC BAT":     {type: "file", size: "     78", date: "17.06.1994"},
                                "DOS":              {type: "dir",  size: "  <DIR>", date: "09.10.1994", content: {
                                    "HELP     EXE": {type: "file", size: " 32.452", date: "09.10.1994"},
                                    "MEM      COM": {type: "file", size: "    845", date: "09.10.1994"},
                                    "VER      COM": {type: "file", size: "     74", date: "09.10.1994"},
                                }},
                                "WINDOWS":          {type: "dir",  size: "  <DIR>", date: "09.10.1994", content: {
                                    "WIN      COM": {type: "file", size: " 48.512", date: "09.10.1994"},
                                    "WINDOWS  INI": {type: "file", size: "  7.514", date: "09.10.1994"},
                                    "SYSTEM   INI": {type: "file", size: " 18.561", date: "09.10.1994"},
                                }},
                            },
                        },
                    };
    
                    environment.pwd = environment.filesystem;
    
                    function _scrollToBottom() {
                        window.scrollTo(0, document.body.scrollHeight);
                    }
    
                    function _println(str) {
                        let pre = document.createElement("pre");
                        pre.textContent = str;
                        if (!str) pre.innerHTML = "&nbsp;";
                        terminalOutput.append(pre);
                        _scrollToBottom();
                    }
    
                    function _confirmUserInput() {
                        let prompt = terminalOutput.querySelector(".prompt");
                        prompt.remove();
                        _println(prompt.textContent);
                    }
    
                    function _displayPrompt() {
                        terminalOutput.querySelector(".prompt")?.remove();
    
                        let prompt = document.createElement("pre");
                        prompt.classList.add("prompt");
                        prompt.textContent = `${environment.drive}:${environment.directory}>`;
    
                        let cursor = document.createElement("span");
                        cursor.classList.add("cursor");
                        prompt.append(cursor);
                        
                        terminalOutput.append(prompt);
                        _scrollToBottom();
                    }
    
                    async function commandHelp() {
                        _println(" Eingebaute Befehle:");
                        _println();
                        _println("   HELP      Hilfetext anzeigen");
                        _println("   CLS       Bildschirm leeren");
                        _println("   DIR       Verzeichnisinhalt ausgeben");
                        _println("   CD dir    Verzeichnis wechseln");
                        _println("   VER       MS-DOS Version anzeigen");
                        _println("   MEM       Freien Hauptspeicher anzeigen");
                        _println("   WIN       Microsoft Windows starten");
                        _println("   A:        Zu Laufwerk A wechseln");
                        _println("   B:        Zu Laufwerk B wechseln");
                        _println("   C:        Zu Laufwerk C wechseln");
                        _println("   D:        Zu Laufwerk D wechseln");
                        _println();
                    }
    
                    async function commandCls() {
                        terminalOutput.innerHTML = "";
                    }
    
                    async function commandDir() {
                        _println(` Datentr√§ger in Laufwerk ${environment.drive}: ist Festplatte`);
                        _println(" Volumenseriennummer: 008E-4711");
                        _println();
                        _println( `Verzeichnis von ${environment.drive}:${environment.directory}`);
                        _println();
    
                        let i = 0;
                        for (let filename in environment.pwd.content || {}) {
                            let fsEntry = environment.pwd.content[filename];
                            _println(`${filename.padEnd(12)}    ${fsEntry.size}    ${fsEntry.date}`);
                            i++;
                        }
    
                        _println(`        ${i} Datei(en)`);
                        _println();
                    }
    
                    async function commandCd(target) {
                        if (!target) {
                            environment.directory = "\\";
                            environment.pwd = environment.filesystem;
                            return;
                        } else if (target === ".") {
                            return;
                        }
    
                        let absPath   = `${environment.directory}\\${target}`;
                        let parts     = absPath.split("\\");
                        let subdirs   = [];
                        let directory = environment.filesystem;
                        let newDir    = "";
    
                        for (let part of parts) {
                            if (!part) continue;
                            if (part === "..") subdirs = subdirs.slice(0, subdirs.length - 1);
                            else subdirs = [...subdirs, part];
                        }
    
                        for (let subdir of subdirs) {
                            subdir = subdir.toUpperCase();
                            directory = directory.content[subdir];
    
                            if (!directory) {
                                _println("Verzeichnis nicht gefunden");
                                return;
                            } else if (directory.type !== "dir") {
                                _println("Kein Verzeichnis");
                                return;
                            }
    
                            newDir += `\\${subdir}`;
                        }
    
                        environment.pwd = directory || environment.filesystem;
                        environment.directory = newDir || "\\";
    
                        console.log(environment.pwd);
                    }
    
                    async function commandVer() {
                        _println("MS-DOS Version 6.22");
                    }
    
                    async function commandMem() {
                        _println();
                        _println("        632 KB freier konventioneller Speicher");
                        _println("         63 KB freier oberer Speicher in 1 Bl√∂cken (gr√∂√üter UMB 63 KB)");
                        _println("      14912 KB freier zus√§tzlicher Speicher");
                        _println("      14912 KB freier erweiterter Speicher");
                        _println();
                    }
    
                    async function commandWin() {
                        _println("Windows wird gestartet...");
                        await new Promise(resolve => setTimeout(resolve, 3000));
                        _println("Fehler!");
                    }
    
                    async function commandDriveLetter() {
                        for (let i = 0; i < 4; i++) {
                            await new Promise(resolve => setTimeout(resolve, 2500));
                            _println("Fehler: Medium oder Laufwerk nicht bereit!");
                        }
                    }
    
                    async function unknownCommand() {
                        _println("Befehl oder Dateiname nicht gefunden");
                    }
    
                    _displayPrompt();
    
                    terminalOutput.addEventListener("keyup", async event => {
                        event.stopPropagation();
                        event.stopImmediatePropagation();
                        event.preventDefault();
    
                        let cursor = terminalOutput.querySelector(".cursor");
                        if (!cursor) return;
    
                        if (event.key === "Enter") {
                            // Befehl ausf√ºhren
                            let command = cursor.textContent.trim().split(" ");
                            _confirmUserInput();
    
                            switch (command?.[0]?.toUpperCase()) {
                                case "HELP":     await commandHelp();               break;
                                case "CLS":      await commandCls();                break;
                                case "DIR":      await commandDir();                break;
                                case "CD":       await commandCd(command[1] || ""); break;
                                case "VER":      await commandVer();                break;
                                case "MEM":      await commandMem();                break;
                                case "WIN":      await commandWin();                break;
                                case "A:":       await commandDriveLetter();        break;
                                case "B:":       await commandDriveLetter();        break;
                                case "D:":       await commandDriveLetter();        break;
                                case "C:":                                          break;
                                case "COMMAND":                                     break;
                                case "AUTOEXEC":                                    break;
                                default:         await unknownCommand();
                            }
    
                            _displayPrompt();
                        } else if (event.key === "Backspace") {
                            // Letztes Zeichen l√∂schen
                            cursor.textContent = cursor.textContent.slice(0, cursor.textContent.length - 1);
                        } else if (event.key.length === 1) {
                            // Neues Zeichen anh√§ngen
                            cursor.textContent += event.key;
                        }
                    });
                };
    
                window.addEventListener("ls-slide-changed", () => {
                    window.setTimeout(terminal_simulation_init, 1000);
                });
            </script>
    
            <div id="terminal-output" tabindex="1">
                <pre>Starten von MS-DOS ...</pre>
                <pre>&nbsp;</pre>
                <pre>HIMEM testet den erweiterten Speicher...beendet.</pre>
                <pre>&nbsp;</pre>
                <pre>MSCDEX Version 2.23</pre>
                <pre>Copyright (C) Microsoft Corp. 1986-1993. Alle Rechte vorbehalten.</pre>
                <pre>       Laufwerk D: = Treiber CDROM Ger√§t 0</pre>
                <pre>&nbsp;</pre>
            </div>
        </article>
        <aside class="markdown">
            Ganz fr√ºher vor vielen Jahrzehnten hatten die meisten Computer noch keine grafische
            Benutzeroberfl√§che. Teilweise konnten die Computer neben einer einfachen Textausgabe
            auch gar keine Grafiken erzeugen und selbst eine Maus war nicht immer vorhanden.
            Stattdessen erfolgte die Bedienung ausschlie√ülich √ºber die Tastatur durch die Eingabe
            von Befehlen.

            Heute mag uns das eigenartig erscheinen. Doch die Bedienung war in vierlerlei Hinsicht
            effektiver als heute. Mit wenigen Befehlen konnte man zwischen Laufwerken und Verzeichnissen
            navigieren und die wichtigsten Aufgaben wie das Anlegen oder L√∂schen von Dateien erledigen.
            Um ein Programm zu starten, musste man lediglich seinen Namen eingeben und <kbd>Enter</kbd>
            dr√ºcken. Und nicht zuletzt beinhalteten die eingebauten Befehlsinterpreter der Betriebssysteme
            eine vollwertige Programmiersprache, mit der selbst komplexe Aufgaben vollst√§ndig automatisiert
            werden konnten.

            Wie wir gleich sehen werden, ist diese Art der Bedienung nie verschwunden. Sie versteckt sich
            heute nur besser. Doch gerade in der Softwareentwicklung ist das Terminal (auch Konsole oder
            Eingabeaufforderung genannt) immer noch unerl√§sslich!

            #### Probiere es aus

            Auf dieser Seite kannst du mit einem einfachen Remake von MS-DOS, dem Vorl√§ufer der heutigen
            Windows-Betriebssysteme spielen. Probier es gleich einmal aus!

            1. Klicke auf den rechten Bereich, um Tastatureingaben zu erm√∂glichen.
            1. Gib den Befehl <code>help</code> ein und dr√ºcke <kbd>Enter</kbd>.
            1. Probiere die eingebauten Befehle aus und beobachte, was passiert.
            1. Versuche, zwischen den Verzeichnissen zu wechseln und ihre Inhalte auszugeben.

            Achte dabei auf die Zeichen vor dem blinkenden Cursor. In diesem sog. Prompt siehst du immer,
            wo du dich gerade befindest. Dies werden wir ab sofort immer ben√∂tigen!
        </aside>
    </section>

    <section data-title="Wo ein Terminal ist, ist ein Weg" class="centered-content">
        <div class="markdown limited-width mb-5" detail-content>
            Obwohl heutige Betriebssysteme l√§ngst √ºber komfortable, grafische Benutzeroberfl√§chen
            verf√ºgen, besitzen sie immer noch ein klassisches Terminal f√ºr Power-User. Insbesondere
            unter Linux (sowie allen anderen von [Unix](https://de.wikipedia.org/wiki/Unix){target="_blank"}
            abgeleiteten Betriebssystemen) geh√∂rt das Terminal zu den unverzichtbaren Werkzeugen, da hier
            auf eine seit Jahrzehnten gepflegte Werzkzeugsammlung zur√ºckgegriffen werden kann. Die
            Grundbefehle haben sich dabei unter allen Betriebssystemen seit den fr√ºhen Tagen nicht
            ver√§ndert!

            Die meisten Entwicklungswerkzeuge werden heute nach wie vor im Terminal ausgef√ºhrt.
            Der Grund hierf√ºr ist, dass die fr√ºheren Betriebssysteme von Programmierer*innen f√ºr
            Programmierer*innen geschrieben wurden. Die Programme k√∂nnen dadurch aber auch √ºber
            Shell-Skripte automatisiert oder in CI/CD-Pipelines integriert werden. Und schlussendlich
            sind Konsolenausgaben deutlich einfacher zu programmieren, als grafische Benutzeroberfl√§chen.

            ### Windows {.dhbw-lightblue}

            Unter Windows kann das Terminal aufgerufen werden, indem man im Startmen√º nach einem
            der Begriffe <i>cmd</i>, <i>Eingabeaufforderung</i> oder <i>PowerShell</i> sucht und
            dann <kbd>Enter</kbd> dr√ºckt. Das Terminalfenster startet dabei immer mit dem
            Benutzerverzeichnis als Arbeitsverzeichnis. Alternativ kann man in die Adresszeile
            des Explorers <span class="cmd">cmd</span> eingeben, um innerhalb des aktuellen
            Verzeichnisses ein Terminal zu √∂ffnen.

            ### Andere Betriebssysteme {.dhbw-lightblue}

            Bei den anderen Betriebssystemen gibt es keinen einheitlichen Mechanismus zum Starten
            eines Terminals. Meistens findet man es aber vorinstalliert in der Programm√ºbersicht.
        </div>
        <div class="centered-content flex-row flex-wrap gap-3 mb-5">
            <!-- Windows CMD -->
            <lsx-modal>
                <lsx-thumbnail style="height: 15em;" class="mw-100">
                    <img src="04-nodejs/terminal-windows-cmd.png" class="d-block h-100 mw-100 dhbw-thumbnail p-1"/>
                    <span class="lsx-modal-image-thumbnail">Die traditionalle Windows-Eingabeaufforderung</span>
                </lsx-thumbnail>
                <lsx-content>
                    <img src="04-nodejs/terminal-windows-cmd.png" class="img-responsive img-thumbnail"/>
                </lsx-content>
            </lsx-modal>

            <!-- Windows PowerShell -->
            <lsx-modal>
                <lsx-thumbnail style="height: 15em;" class="mw-100">
                    <img src="04-nodejs/terminal-windows-powershell.png" class="d-block h-100 mw-100 dhbw-thumbnail p-1"/>
                    <span class="lsx-modal-image-thumbnail">Die moderne Windows PowerShell</span>
                </lsx-thumbnail>
                <lsx-content>
                    <img src="04-nodejs/terminal-windows-powershell.png" class="img-responsive img-thumbnail"/>
                </lsx-content>
            </lsx-modal>

            <!-- Linux -->
            <lsx-modal>
                <lsx-thumbnail style="height: 15em;" class="mw-100">
                    <img src="04-nodejs/terminal-gnome.png" class="d-block h-100 mw-100 dhbw-thumbnail p-1"/>
                    <span class="lsx-modal-image-thumbnail">Typisches Terminalfenster unter Linux</span>
                </lsx-thumbnail>
                <lsx-content>
                    <img src="04-nodejs/terminal-gnome.png" class="img-responsive img-thumbnail"/>
                </lsx-content>
            </lsx-modal>
             
            <!-- VS Code-->
            <lsx-modal>
                <lsx-thumbnail style="height: 15em;" class="mw-100">
                    <img src="04-nodejs/terminal-vscode.png" class="d-block h-100 mw-100 dhbw-thumbnail p-1"/>
                    <span class="lsx-modal-image-thumbnail">Eingebautes Terminal in Visual Studio Code</span>
                </lsx-thumbnail>
                <lsx-content>
                    <img src="04-nodejs/terminal-vscode.png" class="img-responsive img-thumbnail"/>
                </lsx-content>
            </lsx-modal>
        </div>
    </section>

    <section data-title="Aufgabe: Deine neue Superkraft!" data-background-color="rgb(231, 221, 141)">
        <article>
            <p>
                Besuche deinen Lieblings-Chatbot und gib folgenden Prompt ein. Den farblich hervorgehobenen
                Platzhalter musst du nat√ºrlich durch den Namen deines Betriebssystems ersetzen. Lasse dir
                auf diese Weise die grundlegende Bedienung des Terminals erkl√§ren und vor allem, wie du darin
                zwischen Laufwerken und Verzeichnissen wechseln, sowie Programme ausf√ºhren kannst. Probiere
                die Tipps sogleich in einem Konsolenfesnter auf deinem Rechner aus.
            </p>
            <lsx-card class="mb-4">
                <p class="fst-italic text-muted m-0">
                    Wo ein Terminal ist, ist ein Weg. Bitte hilf mir, diese neue Super-Power zu erlangen und mich im
                    Terminal unter <span class="red text-decoration-underline">Betriebssystem</span> zurecht zu finden.
                </p>
            </lsx-card>
            
            <lsx-grid-fluid class="p-0">
                <lsx-row>
                    <lsx-col size="md">
                        <lsx-modal-image src="04-nodejs/terminal-chatgpt.png" caption="Beispiel-Unterhaltung mit ChatGPT" style="width: auto;"></lsx-modal-image>
                    </lsx-col>
                    <lsx-col size="md">
                        <lsx-modal-image src="04-nodejs/terminal-tldr.png" caption="Ausgabe des <code>tldr</code>-Befehls unter Linux" style="width: auto;"></lsx-modal-image>
                    </lsx-col>
                </lsx-row>
            </lsx-grid-fluid>
        </article>
        <aside>
            <p>
                Bist du bereit f√ºr deine neue Superkraft? Dein freundlicher KI-Chatbot steht schon
                zur Stelle. √ñffne ein neues Fenster mit deinem Lieblings-Chatbot und lass dir zeigen,
                was du im Terminal alles anstellen kannst. ü§ñ
            </p>
            <img src="shared/ai-assistant.png" class="img-fluid d-block" style="width: 15em; margin-bottom: 0.5em;"/>
            <p>
                <small>
                    Bildnachweis:
                    <a href="https://pixabay.com/illustrations/robot-drawing-art-job-money-8614567/" target="_blank">pixabay: Comic-Generator-Pro</a>
                </small>
            </p>
        </aside>
    </section>
</section>

<section data-title="Unser erstes Node.js-Projekt" class="centered-content">
    <section data-title="Was ist Node.js?">
        <div>
            <lsx-ul>
                <li>JavaScript wurde 1995 als Sprache zur Ausf√ºhrung im Browser entwickelt.</li>
                <li>Daraus wurde 2009 Node.js als plattformunabh√§ngige Laufzeitumgebung au√üerhalb des Browsers abgeleitet.</li>
                <li>Haupteinsatzgebiet ist die leichtgewichtige Entwicklung skalierbarer Server-Programme.</li>
                <li>Node.js besitzt daher keine eingebauten Funktionen f√ºr grafische Benutzeroberfl√§chen.</li>
                <li>Durch externe Bibliotheken l√§sst sich diese Funktion allerdings nachr√ºsten.</li>
                <li>Node.js kommt daher auch vermehrt zur Entwicklung von Desktop-Applikationen zum Einsatz.</li>
            </lsx-ul>
        
            <div class="d-flex align-items-stretch" style="gap: 1em;">
                <img src="04-nodejs/nodejs-1.png" class="d-block w-100 img-thumbnail"/>
                <img src="04-nodejs/nodejs-2.png" class="d-block w-100 img-thumbnail"/>
            </div>
        </div>        
    </section>

    <section data-title="Troubleshooting">
        <div class="limited-width">
            <p class="mb-4">
                √ñffnen Sie ein Terminal-Fenster und versuchen Sie, den Befehl <code>npm --version</code> auszuf√ºhren.
                Im Idealfall erscheint dann die installierte Version des Node Package Managers. In vielen F√§llen
                erscheint stattdessen aber eine der unten gezeigten Fehlermeldungen. In diesem Fall soll Ihnen dieses
                Seite einen Hinweis zur Fehlerbehebung geben.
            </p>

            <lsx-accordion>
                <lsx-accordion-page title="Skript-Ausf√ºhrung nicht erlaubt" class="dhbw-fontsize-small">
                    <p>
                        Unter Windows kommt es meistens vor, dass die Fehlermeldung <span class="dhbw-tt fst-italic">Die Datei ‚Ä¶
                        kann nicht geladen werden, da die Ausf√ºhrung von Skripts auf diesem System deaktiviert ist</span>
                        erscheint. Dies ist eine Sicherheitseinstellung von Windows, die normale DAUs¬π davor bewahren soll,
                        sich in den Fu√ü zu schie√üen oder ausversehen Mallware auszuf√ºhren.
                    </p>
                    <img src="04-nodejs/troubleshooting-powershell1.png" alt="" class="d-block w-100 mb-2">

                    <p>
                        Zur Behebung des Problems m√ºssen Sie im Windows-Startmen√º nach ‚ÄûPowerShell‚Äù suchen und diese mit
                        Administrator-Rechten ausf√ºhren. Dort geben Sie dann folgenden Befehl ein und best√§tigen die daraufhin
                        erscheinende R√ºckfrage mit <kbd>J</kbd> f√ºr ‚ÄûJa‚Äú:
                    </p>
                    <p class="cmd">
                        Set-ExecutionPolicy RemoteSigned -Scope CurrentUser
                    </p>

                    <img src="04-nodejs/troubleshooting-powershell2.png" alt="" class="d-block w-100">

                    <small>
                        ¬π
                        <small>
                            D√ºmmste*r anzunehmender User*in üò≤
                        </small>
                    </small>
                </lsx-accordion-page>
    
                <lsx-accordion-page title="Konflikt mit OpenJDK" class="dhbw-fontsize-small">
                    <p>
                        Falls Sie auf Ihrem Windows-Rechner das OpenJDK installiert haben, kann der Versuch,
                        <span class="cmd">npm</span> auszuf√ºhren zu folgender Fehlermeldung f√ºhren:
                    </p>
                    <p class="dhbw-tt fst-italic">
                        Der Befehl "CALL ‚Ä¶\\node.exe ist entweder falsch geschrieben oder konnte nicht gefunden werden.
                    </p>
                    <img src="04-nodejs/troubleshooting-openjdk1.png" alt="" class="d-block img-thumbnail w-100 mb-2">
                    <p>
                        Die Ursache liegt darin, dass das OpenJDK die System-Umgebungsvariable <span class="fn">ComSpec</span>
                        √ºberschreibt. Diese steuert unter Windows, welches Programm ausgef√ºhrt wird, wenn ein neues Terminal-Fenster
                        ge√∂ffnet wird. Genauer gesagt definiert Sie den Kommandozeileninterpreter, der innerhalb des Terminals
                        ausgef√ºhrt wird, um die Benutzereingaben zu verarbeiten. Der vom OpenJDK eingesetzte Kommandozeileninterpreter
                        √ºbersteuert aber die <span class="fn">Path</span>-Umgebungsvariable, die wiederum steuert, in welchen Verzeichnissen
                        nach ausf√ºhrbaren Programmen gesucht wird ‚Ä¶
                    </p>
                    <img src="04-nodejs/troubleshooting-openjdk2.png" alt="" class="d-block img-thumbnail w-100 mb-2">
                    <p>
                        Lange Reder kurzer Sinn. Suchen Sie im Windows-Startmen√º nach ‚ÄûUmgebungsvariable‚Äú und pr√ºfen Sie, ob die
                        Umgebungsvariable <span class="fn">ComSpec</span> √ºberschrieben wurde. Falls ja, l√∂schen Sie den Eintrag.
                        Tats√§chlich funktioniert das OpenJDK auch ohne die Variable, Node.js aber nicht, wenn sie gesetzt ist.
                    </p>
                </lsx-accordion-page>
            </lsx-accordion>
        </div>
    </section>

    <section data-title="Ein neues Projekt anlegen">
        <div class="limited-width">
            <div class="markdown mb-4" detail-content>
                Einfache JavaScript-Quellcodes ohne externe Abh√§ngigkeiten k√∂nnen ganz ohne ein Projekt hierf√ºr
                anzulegen ausgef√ºhrt werden. In den wenigsten F√§llen kommt man damit aber sehr weit, da auf diese
                Weise weder externe Bibliotheken eingebunden werden, noch Start-Skripte definiert, noch das Projekt
                als Code-Bibliothek auf [npmjs.com](https://www.npmjs.com/){target=_blank} ver√∂ffentlicht werden kann.
    
                Erfreulicherweise ben√∂tigt ein Node.js-Projekt nicht sehr viel. Lediglich eine Datei mit dem Namen
                <span class="fn">package.json</span> und ein paar festen Inhalten muss vorhanden sein, wobei die
                Datei mit dem Konsolenbefehl <span class="cmd">npm init</span> leicht angelegt werden kann.
            </div>

            <lsx-accordion class="dhbw-fontsize-small">
                <lsx-accordion-page title="Datei anlegen mit&nbsp;<span class='cmd'>npm init</span>">
                    <lsx-ul>
                        <li>
                            Ein neues Node.js-Projekt wird mit dem Befehl <span class="cmd">npm init</span> angelegt.
                        </li>
                        <li>
                            Das Arbeitsverzeichnis darf noch keine Datei mit dem Namen <span class="fn">package.json</span> beinhalten.
                        </li>
                        <li>
                            Das Skript fragt ein paar allgemeine Parameter ab und legt die <span class="fn">package.json</span> damit an.
                        </li>
                        <li>
                            Dadurch k√∂nnen dann alle Funktionen von Node.js vollumf√§nglich genutzt werden.
                        </li>
                    </lsx-ul>

                    <img src="04-nodejs/anlegen-npm-init.png" alt="Screenshot von npm init" class="d-block w-100 img-thumbnail">
                </lsx-accordion-page>

                <lsx-accordion-page title="Inhalt des Projektverzeichnisses">
                    <lsx-ul>
                        <li>
                            Der Konsolenbefehlt legt tats√§chlich nur die eine Datei an.
                        </li>
                        <li>
                            Sp√§ter kommen lediglich noch Verzeichnis namens <span class="fn">node_modules</span> hinzu.
                        </li>
                        <li>
                            Alle anderen Dateien schreiben wir selbst.
                        </li>
                    </lsx-ul>
                    <img src="04-nodejs/anlegen-verzeichnisinhalt.png" alt="Projektverzeichnis kurz nach der Anlage" class="d-block w-100 img-thumbnail">
                </lsx-accordion-page>

                <lsx-accordion-page title="Inhalt der neuen Datei&nbsp;<spn class='fn'>package.json</span>">
                    <source-code language="JSON">
                    {
                        "name": "@dschulmeis/hallo-welt",
                        "version": "1.0.0",
                        "description": "Hallo Welt f√ºr Node.js",
                        "main": "index.js",
                        "scripts": {
                          "test": "echo \"Error: no test specified\" && exit 1"
                        },
                        "repository": {
                          "type": "git",
                          "url": "git+https://github.com/DennisSchulmeister/dhbwka-wwi-vertsys-2024-quellcodes.git"
                        },
                        "author": "Dennis Schulmeister-Zimolong &lt;dhbw@windows3.de&gt;",
                        "license": "CC-BY-4.0",
                        "bugs": {
                          "url": "https://github.com/DennisSchulmeister/dhbwka-wwi-vertsys-2024-quellcodes/issues"
                        },
                        "homepage": "https://github.com/DennisSchulmeister/dhbwka-wwi-vertsys-2024-quellcodes#readme"
                    }                      
                    </source-code>
                </lsx-accordion-page>

                <lsx-accordion-page title="Dieselbe Datei aufger√§umt und erweitert">
                    <lsx-ul>
                        <li>
                            Die Datei <span class="fn">package.json</span> sieht noch etwas unaufger√§umt aus.
                        </li>
                        <li>
                            Au√üerdem wollen wir die ‚Äûneue‚Äú <code>import</code>/<code>export</code>-Syntax f√ºr JavaScript-Module verwenden.
                        </li>
                        <li>
                            Das erste Problem l√∂sen wir durch verschieben von ein paar Zeilen.
                        </li>
                        <li>
                            Das zweite Problem durch hinzuf√ºgen des Werts <code>"type": "module"</code>.
                        </li>
                    </lsx-ul>

                    <source-code language="JSON">
                    {
                        "name": "@dschulmeis/hallo-welt",
                        "version": "1.0.0",
                        "description": "Hallo Welt f√ºr Node.js",
                        "author": "Dennis Schulmeister-Zimolong &lt;dhbw@windows3.de&gt;",
                        "license": "CC-BY-4.0",

                        "repository": {
                          "type": "git",
                          "url": "git+https://github.com/DennisSchulmeister/dhbwka-wwi-vertsys-2024-quellcodes.git"
                        },

                        "type": "module",

                        "scripts": {
                            "test": "echo \"Error: no test specified\" && exit 1"
                        }
                    }                      
                    </source-code>
                </lsx-accordion-page>
            </lsx-accordion>
        </div>
    </section>

    <section data-title="Typische Verzeichnisse und Dateien">
        <div class="limited-width">
            <p class="mb-4 dhbw-text-columns" detail-content>
                √úber die Datei <span class="fn">package.json</span> und das automatisch verwaltete
                Verzeichnise <span class="fn">node_modules</span> hinaus schreibt Node.js keine
                feste Verzeichnisstruktur vor. H√§ufig findet sich aber folgende Aufteilung. Nat√ºrlich
                k√∂nnen beliebig weiter Dateien, Verzeichnisse und Unterverzeichnisse hinzu kommen.
            </p>
            <table class="dhbw-filetable mb-3">
                <tbody>
                    <tr class="text-muted">
                        <td>üìÇ</td>
                        <td>node_modules</td>
                        <td>Installationsverzeichnis f√ºr externe Abh√§ngigkeiten</td>
                    </tr>
                    <tr>
                        <td>üìÇ</td>
                        <td>src</td>
                        <td>Ausf√ºhrbare Quellcodes des Projekts</td>
                    </tr>
                    <tr>
                        <td>üìÇ</td>
                        <td>test</td>
                        <td>Unit Tests zum Durchtesten des Quellcodes</td>
                    </tr>
                    <tr>
                        <td>üìù</td>
                        <td>package.json</td>
                        <td>Projekt-Konfiguration</td>
                    </tr>
                    <tr>
                        <td>üìù</td>
                        <td>README.md</td>
                        <td>Beschreibung und Hinweise zum Projekt</td>
                    </tr>
                    <tr>
                        <td>üìù</td>
                        <td>LICENSE.md</td>
                        <td>Lizenztext des Projekts</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>

    <section data-title="Unsere erste Quellcode-Datei">
        <div class="limited-width">
            <p>
                Unsere erste Quellcodedatei f√§llt noch ganz bescheiden aus. Lediglich eine Zeile: üôÉ
            </p>
            <lsx-card title="<span class='fn'>src/main.js</span>" class="mt-4 mb-4">
                <source-code language="javascript">
                    console.log("Hallo Node.js");
                </source-code>
            </lsx-card>
            <p>
                Ausf√ºhren k√∂nnen wir die Datei mit folgendem Befehl:
            </p>
            <p>
                <span class="cmd">node src/main.js</span>
            </p>

            <img src="04-nodejs/hallo-nodejs.png" alt="Ergebnis des obigen Befehls" class="d-block img-thumbnail">
        </div>
    </section>
    
    <section data-title="Definition von NPM Run Skripten">
        <div class="limited-width">
            <lsx-ul>
                <li>H√§ufig ben√∂tigte Konsolenbefehle lassen sich mit NPM Run Skripten automatisieren.</li>
                <li>Hierf√ºr muss lediglich das <code>scripts</code>-Objekt in der Datei <span class="fn">package.json</span> erweitert werden.</li>
            </lsx-ul>

            <lsx-accordion class="dhbw-fontsize-small mt-4 mb-4">
                <lsx-accordion-page title="Anpassungen an der&nbsp;<span class='fn'>package.json</span>">
                    <p class="dhbw-text-columns">
                        Das <code>scripts</code>-Objekt beinhaltet eine Menge von Kurzbefehlen, die √ºber ihren
                        Namen links vom Doppelpunkt angesprochen werden k√∂nnen, um die Befehle rechts davon
                        auszuf√ºhren. Erlaubt ist alles, was in der Kommandozeile des eigenen Betriebssystems
                        auch erlaubt ist. Best Practice ist jedoch, die Run-Skripte plattformunabh√§ngig zu halten
                        und daher nur einfache Konsolenbefehle oder in JavaScript programmierte Hilfsfunktionen
                        aufzurufen. Mit Hilfe der Zeichenkette <span class="screen">&amp;&amp;</span> k√∂nnen unter
                        alle Betriebssystemen sequentiell (hintereinander) ausgef√ºhrt weredn.
                    </p>
                    <source-code language="json">
                    "scripts": {
                        "start": "node src/main.js",
                        "git-auto-commit": "git add . && git commit -m 'Code-√Ñnderungen' && git push"
                    }
                    </source-code>
                    <p class="dhbw-text-columns">
                        Das obige Beispiel definiert ein Start-Skript mit dem fest vorgegebenen Namen
                        <code>start</code> und ein <code>git-auto-commit</code> genanntes Skript, das
                        automatisch alle Quellcode√§nderungen in Git eincheckt und auf GitHub hochl√§dt.
                    </p>
                    <lsx-info-box style="warning">
                        <p>Achtung!</p> Macht das nicht zuhause nach, liebe Kinder. Ein Commit sollte
                        immer eine eindeutige Nachricht besitzen, damit man die √Ñnderungen besser
                        nachvollziehen kann.
                    </lsx-info-box>
                </lsx-accordion-page>

                <lsx-accordion-page title="Ausf√ºhren mit&nbsp;<span class='cmd'>npm run ‚Ä¶</span>">
                    <p>
                        Die in der Datei <span class="fn">package.json</span> definierten Skripte k√∂nnen
                        mit dem Konsolenbefehl <span class="cmd">npm run ‚Ä¶</span> ausgef√ºhrt werden. Die
                        drei Punkte m√ºssen dabei mit dem Namen des Skripts, exakt so, wie es links vom
                        Doppelpunkt innerhalb des <code>scripts</code>-Block genannt wurde.
                    </p>
                    <img src="04-nodejs/hallo-npm-run-start.png" alt="" class="d-block w-100 shadow">
                </lsx-accordion-page>

                <lsx-accordion-page title="Ausf√ºhren mit&nbsp;<span class='cmd'>npm start</span>">
                    <p>
                        F√ºr das <cmd>start</cmd> genannte Start-Skript gibt es einen Shortcut. Es kann statt
                        mit <span class="cmd">npm run start</span> auch einfach mit <span class="cmd">npm start</span>
                        ausgef√ºhrt werden.
                    </p>
                    <img src="04-nodejs/hallo-npm-start.png" alt="" class="d-block w-100 shadow">
                </lsx-accordion-page>
            </lsx-accordion>

            <img src="04-nodejs/hallo-run-scripts.png" alt="Angepasste Datei package.jspn" class="d-block img-thumbnail">
        </div>
    </section>

    <section data-title="Weitere typische NPM-Kommandos">
        <div class="limited-width2">
            <table class="table table-striped border limited-width mb-4">
                <tbody>
                    <tr>
                        <td>
                            <span class="cmd">npm init</span>
                        </td>
                        <td>
                            Datei <span class="fn">package.json</span> im aktuellen Codeverzeichnis neu anlegen
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span class="cmd">npm add ‚Ä¶</span>
                        </td>
                        <td>
                            Weitere Bibliothek aus der Registry hinzuf√ºgen
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span class="cmd">npm install</span>
                        </td>
                        <td>
                            Abh√§ngige Bibliotheken und Werkzeuge installieren
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span class="cmd">npm update</span>
                        </td>
                        <td>
                            Abh√§ngigkeiten auf ihre erlaubte neuste Version aktualisieren
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span class="cmd">npm audit fix</span>
                        </td>
                        <td>
                            Abh√§ngigkeiten mit bekannten Sicherheitsl√ºcken aktualisieren
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span class="cmd">npm start</span>
                        </td>
                        <td>
                            Ausf√ºhren eines in der <span class="fn">package.json</span> definierten <code>start</code>-Skripts
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span class="cmd">npm run ‚Ä¶</span>
                        </td>
                        <td>
                            Ausf√ºhren beliebiger in der <span class="fn">package.json</span> definierter Run-Skripte
                        </td>
                    </tr>
                </tbody>
            </table>

            <terminal-cast url="04-nodejs/npm.cast" poster="npt:2.0" style="height: 30em;"></terminal-cast>
        </div>
    </section>
</section>

<section data-title="Externe Abh√§ngigkeiten" class="centered-content">
    <section data-title="Bibliotheken suchen auf npmjs.com">
        <div class="limited-width markdown mb-4">
            [npmjs.org](https://npmjs.org){target="_blank"} ist das offizielle Package Repository f√ºr
            Node.js, auf dem sogut wie alle mit Node.js kompatiblen Open-Source Bibliotheken abgelegt
            sind. Die Verwendung einer neuen Bibliothek beginnt daher meistens auf dieser Seite, um
            nach geeigneten Kandidaten zu suchen.
        </div>

        <img src="04-nodejs/npmjs.com.png" class="d-block img-thumbnail limited-width"/>
    </section>

    <section data-title="Abh√§ngigkeiten installieren und deinstallieren">
        <div class="limited-width">
            <lsx-tab-pages>
                <lsx-tab-page title="Allgemeines Vorgehen">
                    <div class="markdown mb-4">
                        Kennt man den Namen einer Bibliothek, kann sie ganz einfach mit dem Befehl <span class="cmd">npm add ‚Ä¶</span>
                        bzw. <span class="cmd">npm install ‚Ä¶</span> einem Projekt hinzugef√ºgt werden. Dies bewirkt zwei Dinge:
            
                        1. Die Bibliothek wird mit ihrer aktuellen Versionsnummer in der Datei <span class="fn">package.json</span>
                           als Abh√§ngigkeit des Projekts registriert. Dadurch kann die Installation auf einem anderen Computer
                           jederzeit wiederholt werden.
            
                        1. Die Bibliothek wird heruntergeladen und innerhalb des <span class="fn">node_modules</span>-Verzeichnisses
                           entpackt. Dadurch findet Node.js den Quellcode, wenn die Bibliothek innerhalb des Projekts verwendet wird.
                        
                        Auf einem anderen Computer, oder nachdem das <span class="fn">node_modules</span>-Verzeichnis gel√∂scht wurde,
                        kann die Installation mit einem einfach <span class="cmd">npm install</span> ohne weitere Angaben jederzeit
                        wiederholt werden.
                    </div>
                </lsx-tab-page>

                <lsx-tab-page title="Abh√§ngigkeitsarten">
                    <div class="markdown">
                        Node.js unterscheidet verschiedene Arten von Abh√§ngigkeiten, je nachdem, zu welchem
                        Zeitpunkt eine Bibliothek ben√∂tigt wird:

                        #### Laufzeitabh√§ngigkeiten {.dhbw-lightblue}
    
                        Dies ist der Normalfall. Es handelt sich dabei um Bibliotheken, die zur <i>Ausf√ºhrung</i>
                        des Projekts ben√∂tigt werden und daher bei einer Produktivinstallation ebenfalls installiert
                        werden m√ºssen.
    
                        #### Entwicklungsabh√§ngigkeiten {.dhbw-lightblue}
                        
                        Diese werden nur auf der Entwicklermaschine ben√∂tigt. Bei einer Produktivinstallation werden
                        sie, um Speicherplatz und Bandbreite zu sparen, nicht mitinstalliert. Meistens handelt es sich
                        hierbei um Entwicklungswerkzeuge wie CSS-Pr√§prozessoren, Code-Checker, Compiler usw.
                    </div>
                </lsx-tab-page>
            </lsx-tab-pages>

            <table class="table table-striped border limited-width">
                <tbody>
                    <tr>
                        <td>
                            <span class="cmd">npm add</span>
                        </td>
                        <td>
                            Alias f√ºr <span class="cmd">npm install</span>. Versteht daher dieselben Parameter.
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span class="cmd">npm install</span>
                        </td>
                        <td>
                            Installation aller in der <span class="fn">package.json</span> aufgelisteten Bibliotheken
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span class="cmd">npm install ‚Ä¶</span>
                        </td>
                        <td>
                            Hinzuf√ºgen einer Bibliothek als <i>Laufzeitabh√§ngigkeit</i>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span class="cmd">npm install -D ‚Ä¶</span>
                        </td>
                        <td>
                            Hinzuf√ºgen einer Bibliothek als <i>Entwicklungsabh√§ngigkeit</i>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span class="cmd">npm install --save-dev ‚Ä¶</span>
                        </td>
                        <td>
                            Langform des Befehls <span class="cmd">npm install -D ‚Ä¶</span>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <span class="cmd">npm remove ‚Ä¶</span>
                        </td>
                        <td>
                            Deinstallation einer Bibliothek
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>

    <section data-title="Manuelle √Ñnderung der Datei package.json">
        <lsx-ul>
            <li>
                Abh√§ngigkeiten k√∂nnen problemlos auch manuell in die Datei <span class="fn">package.json</span> eingetragen werden.
            </li>
            <li>
                Dies kann insbesondere sinnvoll sein, um die Versionsnummer vorhandener Bibliotheken hochzusetzen.
            </li>
            <li>
                Anschlie√üend muss <span class="cmd">npm install</span> ausgef√ºhrt werden, um die
                √Ñnderungen wirksam werden zu lassen.
            </li>
        </lsx-ul>

        <div class="limited-width">
            <lsx-card title="<span class='fn'>package.json</span>" class="mb-4">
                <source-code language="json">
                {
                    "name": "@dschulmeis/Express-tutorial",
                    ‚Ä¶,
                    "dependencies": {
                        "dotenv": "^16.4.7",
                        "Express": "^5.0.1",
                        "logging": "^3.3.0"
                    },
                    "devDependencies": {
                        "nodemon": "^3.1.9"
                    }
                }              
                </source-code>
            </lsx-card>

            <lsx-info-box>
                Laufzeitabh√§ngigkeiten stehen im Block <code>dependencies</code>.
            </lsx-info-box>
            
            <lsx-info-box>
                Entwicklungsabh√§ngigkeiten stehen im Block <code>devDependencies</code>.
            </lsx-info-box>
        </div>
    </section>

    <section data-title="Fallbeispiel: Formatierte Konsolenausgabe">
        <div class="limited-width">
            <p detail-content>
                An dieser Stelle wollen wir unser kleines Programm erweitern und dabei auf eine
                externe Bibliothek zugreifen. Am Ende soll das Programm √∂ffentlich zug√§ngliche
                Daten aus dem Internet abrufen und als formatierte Ausgabe auf der Konsole ausgeben.
                Mache mit, um den Umgang mit Node.js zu √ºben! üßë‚Äçüíª
            </p>

            <lsx-carousel class="mb-5">
                <lsx-carousel-page>
                    <div class="markdown">
                        F√ºr dieses Beispiel ben√∂tigen wir eine Bibliothek, die ein Datenobjekt oder
                        Array f√ºr die Anzeige auf der Konsole leserlich formatieren kann. Nach einer
                        kleinen Weile finden wir hierf√ºr auf [npmjs.org](https://npmjs.org){target="_blank"}
                        die Bibliothek [prettyoutput](https://www.npmjs.com/package/prettyoutput){target="_blank"}.
                    </div>

                    <lsx-info-box title="Du bist dran!" class="markdown">
                        Schaue dir die Informationen zur Bibliothek
                        [prettyoutput](https://www.npmjs.com/package/prettyoutput){target="_blank"}
                        an. Was kannst du alles entdecken?
                    </lsx-info-box>

                    <img src="04-nodejs/dependencies-npmjs.png" alt="" class="d-block w-100 border shadow">
                </lsx-carousel-page>
                <lsx-carousel-page>
                    <p>
                        Als n√§chstes dr√ºcke <kbd>Strg</kbd>+<kbd>√∂</kbd>, um das Terminal in Visual Studio Code
                        zu √∂ffnen und gebe folgenden Befehl ein: <span class="cmd">npm add prettyoutput</span>
                    </p>
                    <p>
                        Dadurch wird die Bibliothek installiert und in die <span class="fn">package.json</span>
                        eingetragen. Wo wir schon dabei sind: F√ºge der <span class="fn">package.json</span> noch
                        die Zeile <code>"type": "module"</code> hinzu, damit wir die neurere
                        <code>import</code>/<code>export</code>-Syntax in JavaScript nutzen k√∂nnen.
                    </p>

                    <lsx-info-box type="warning" title="Merke">
                        Visual Studio Code wird in der Schweiz entwickelt. Das √ñ in <kbd>Strg</kbd>+<kbd>√∂</kbd>
                        steht f√ºr ‚ÄûT√∂rminal‚Äù. üá®üá≠
                    </lsx-info-box>

                    <img src="04-nodejs/dependencies-npm-install.png" alt="" class="d-block w-100 shadow">
                </lsx-carousel-page>
                <lsx-carousel-page>
                    <div class="markdown">
                        Nun k√∂nnen wir die Bibliothek nutzen. Zuvor suchen wir uns aber auf
                        https://github.com/jdorfman/awesome-json-datasets eine API mit interessanten
                        Daten aus.
                    </div>
                    <img src="04-nodejs/dependencies-json-datasets.png" alt="" class="d-block w-100 border shadow">
                </lsx-carousel-page>
                <lsx-carousel-page>
                    <p>
                        Weiter geht es mit der Datei <span class="fn">src/main.js</span>. Gebe dort folgenden
                        Quellcode ein. Dieser importiert die Bibliothek in der ersten Zeile und ruft die von
                        ihr zur Verf√ºgung gestellte Funktion <code>prettyoutput()</code> auf, um die abgerufenen
                        Daten vor der Ausgabe zu formatieren.
                    </p>
                    <lsx-card title="<span class='fn'>src/main.js</span>">
                        <source-code language="javascript">
                            import prettyoutput from "prettyoutput";
    
                            try {
                                console.log("People in Space");
                                console.log("===============");
                                console.log();
                            
                                // Daten abrufen
                                let response = await fetch("http://api.open-notify.org/astros.json");
                                let peopleInSpace = await response.json();
                            
                                // Daten formatieren mit der prettyoutput-Bibliothek
                                let formatedOutput = prettyoutput(peopleInSpace);
                                console.log(formatedOutput);
                            } catch (error) {
                                console.error("Fehler beim Abruf der Daten!");
                                console.error(error);
                            }
                        </source-code>
                    </lsx-card>
                </lsx-carousel-page>
                <lsx-carousel-page>
                    <p>
                        Zum Testen √∂ffne nun das T√∂√∂√∂rminal und gebe <span class="cmd">npm start</span> ein.
                        Mit etwas Gl√ºck sollten kurz darauf die abgerufenen Daten erscheinen. ü•¥
                    </p>
                    <img src="04-nodejs/dependencies-vscode2.png" alt="" class="d-block w-100 border shadow">
                </lsx-carousel-page>
                <lsx-carousel-page>
                    <p>
                        Das war es schon. So einfach ist das! ü§∑‚Äç‚ôÇÔ∏è
                    </p>
                    <img class="active d-block w-25 m-auto" src="shared/finish.svg" />
                    <p>
                        <small>
                            <small>
                                Bildnachweis: <a href="https://pixabay.com/en/symbol-gui-internet-internet-page-2480163/" target="_blank">Pixabay: janf93</a>
                            </small>
                        </small>
                    </p>
                </lsx-carousel-page>
            </lsx-carousel>
        </div>

        <div class="centered-content flex-row flex-wrap gap-3 mb-5">
            <!-- Quellcode -->
            <lsx-modal>
                <lsx-thumbnail style="height: 15em;" class="mw-100">
                    <img src="04-nodejs/dependencies-vscode1.png" class="d-block h-100 mw-100 dhbw-thumbnail p-1"/>
                    <span class="lsx-modal-image-thumbnail">Quellcode in Visual Studio Code</span>
                </lsx-thumbnail>
                <lsx-content>
                    <img src="04-nodejs/dependencies-vscode1.png" class="img-responsive img-thumbnail"/>
                </lsx-content>
            </lsx-modal>

            <!-- Konsolenausgabe -->
            <lsx-modal>
                <lsx-thumbnail style="height: 15em;" class="mw-100">
                    <img src="04-nodejs/dependencies-vscode2.png" class="d-block h-100 mw-100 dhbw-thumbnail p-1"/>
                    <span class="lsx-modal-image-thumbnail">Konsolenausgabe des Programms</span>
                </lsx-thumbnail>
                <lsx-content>
                    <img src="04-nodejs/dependencies-vscode2.png" class="img-responsive img-thumbnail"/>
                </lsx-content>
            </lsx-modal>
        </div>
    </section>
</section>

<section data-title="Quellcode modularisieren" class="centered-content">
    <section data-title="Vorsicht, Falle!">
        <div class="limited-width">
            <div class="markdown mb-4" detail-content>
                Bereits im letzten Semester haben wir gelernt, dass JavaScript aufgrund seines Alters einige
                Design-Schw√§chen besitzt, die einen schnell bei√üen k√∂nnen, wenn man sie nicht kennt. üêä
                Der Grund ist wie immer, dass JavaScript urspr√ºnglich als einfache Skript-Sprache zur
                Ausf√ºhrung kleiner Code-Schnippsel im Browser, eigentlich aber gar nicht als gro√üe
                Allzweck-Programmiersprache entworfen wurde.
    
                Eines dieser Probleme ist die globale Sichtbarkeit aller Dinge, die nicht innerhalb einer
                Funktion oder eines anderen mit geschweiften Klammern abgegrenzten Code-Blocks definiert
                werden. Stellen wir uns hierf√ºr eine Webseite mit zwei JavaScript-Dateien vor.
            </div>

            <lsx-tab-pages>
                <lsx-tab-page title="Beispiel">
                    <lsx-card title="<span class='fn'>index.html</span>" class="w-100 mb-4">
                        <source-code language="html">
                            &lt;!DOCTYPE html&gt;
                            &lt;html lang="de"&gt;
                                &lt;head&gt;
                                    &lt;meta charset="utf-8"&gt;
                                    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
                                    &lt;title&gt;Beispiel&lt;/title&gt;
            
                                    &lt;!-- Zwei JavaScript-Dateien --&gt;
                                    &lt;script src="script1.js"&gt;&lt;/script&gt;
                                    &lt;script src="script2.js"&gt;&lt;/script&gt;
        
                                    &lt;!-- Aufruf der Funktion, die in beiden JavaScript-Dateien definiert ist --&gt;
                                    &lt;script&gt;
                                        meineFunktion();
                                    &lt;/script&gt;
                                &lt;/head&gt;
                            &lt;/html&gt;
                        </source-code>
                    </lsx-card>
            
                    <lsx-grid-fluid class="p-0">
                        <lsx-row>
                            <lsx-col size="lg">
                                <lsx-card title="<span class='fn'>script1.js</span>" class="w-100 h-100">
                                    <source-code language="javascript">
                                        function meineFunktion() {
                                            alert('Hallo aus script1.js');
                                        }
                                    </source-code>
                                </lsx-card>
                            </lsx-col>
                            <lsx-col size="lg">
                                <lsx-card title="<span class='fn'>script2.js</span>" class="w-100 h-100">
                                    <source-code language="javascript">
                                        function meineFunktion() {
                                            alert('Hallo aus script2.js');
                                        }
                                    </source-code>
                                </lsx-card>
                            </lsx-col>
                        </lsx-row>
                    </lsx-grid-fluid>
                </lsx-tab-page>

                <lsx-tab-page title="Problem">
                    <div class="markdown">
                        Das Problem ist, dass in beiden Dateien eine Funktion mit demselben Namen definiert wird.
                        Da die im Top-Level einer Datei definierten Dinge aber immer global (in allen Code-Dateien)
                        sichtbar und benutzbar sind, √ºberschreibt die eine Funktion die andere mit demselben Namen.
                        Technisch gesehen, weil sie beide als <code>window.meineFunktion</code> an das globale
                        <code>window</code>-Objekt angeh√§ngt werden.

                        #### Die gro√üe Preisfrage {.dhbw-lightblue .mt-5}

                        Die gro√üe Frage ist nun: Welche Funktion wird beim Start der Seite ausgef√ºhrt?
                    </div>

                    <button onclick="alert('Hallo aus script2.js')">Probiere es aus!</button>

                    <img src="04-nodejs/preisfrage.jpg" alt="" class="d-block w-100 mt-4">
                    <p>
                        <small>
                            <small>
                                Bildnachweis:
                                <a href="https://pixabay.com/illustrations/ai-generated-trophy-cup-award-8248632/" target="_blank">Pixabay: TheDigitalArtist</a>
                            </small>
                        </small>
                    </p>
                </lsx-tab-page>
            </lsx-tab-pages>
        </div>
    </section>

    <section data-title="ES6-Module mit import/export">
        <div class="limited-width">
            <div class="markdown mb-4" detail-content>
                Wie so oft, haben die Macher*innen hinter JavaScript das Problem erkannt und eine neue
                Syntax eingef√ºhrt, die das Problem l√∂st. Auf diese Weise funktionieren alte Programme
                weiter wie gewohnt, neue Programme k√∂nnen die Stolperfalle aber umgehen. In diesem Fall
                hei√üt das Zauberwort: Module üé© Indem wir dem Browser sagen, dass es sich bei den Skripten
                um Module handelt, wird der Namenskonflikt vermieden. Denn die Inhalte eines Moduls werden
                niemals automatisch im globalen Namensraum angelegt!

                Die Kehrseite ist allerdings, dass wir uns mit den Schl√ºsselw√∂rtern <code>export</code> und
                <code>import</code> auseinander setzen m√ºssen, um zu entscheiden, welche Teile einer Code-Datei
                sozusagen ‚Äû√∂ffentlich‚Äú und somit auch aus anderen Code-Dateien heraus sichtbar sein sollen und
                welche Teile einer anderen Code-Datei in der eigenen Datei genutzt werden sollen. Klingt kompliziert?
                Ist es am Ende gar nicht, l√∂st aber sehr viele Probleme. ü•π
            </div>

            <lsx-accordion>
                <lsx-accordion-page title="ES6-Module im Browser nutzen">
                    <div class="markdown mb-4">
                        Nat√ºrlich k√∂nnen die Browser ihr Standardverhalten nicht r√ºckw√§rtskompatibel √§ndern.
                        Um ES6-Module zu aktivieren, m√ºssen die verwendeten Skript-Bl√∂cker daher explizit
                        mit <code>type="module"</code> gekennzeichnet werden. Dies bewirkt, dass
                        keine Inhalte des Skript-Blocks unwillentlich global geteilt werden.

                        Geteilt wird dann nur, was explizit mit dem Schl√ºsselwort <code>export</code> gekennzeichnet
                        wurde. Alle anderen Inhalte sind nur innerhalb derselben Datei sichtbar. Umgekehrt m√ºssen
                        die in einer Datei exportieren Inhalte in einer anderen Datei mit <code>import</code> explizit
                        importiert werden, um tats√§chlich genutzt werden zu k√∂nnen. Das Beispiel unten zeigt, wie es geht.
                    </div>

                    <div class="mb-4">
                        <button onclick="alert('Hallo aus script1.js')">Probiere es aus!</button>
                    </div>

                    <lsx-card title="<span class='fn'>index.html</span>" class="w-100 mb-4">
                        <source-code language="html">
                            &lt;!DOCTYPE html&gt;
                            &lt;html lang="de"&gt;
                                &lt;head&gt;
                                    &lt;meta charset="utf-8"&gt;
                                    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
                                    &lt;title&gt;Beispiel&lt;/title&gt;
            
                                    &lt;!-- Die Skript-Dateien werden hier nicht mehr eingebunden!      --&gt;        
                                    &lt;!-- Daf√ºr ist dieser Skript-Block nun als Modul gekennzeichnet. --&gt;
                                    &lt;script type="module"&gt;
                                        // Bevor die Funktion genutzt werden kann, muss sie importiert werden.
                                        import {meineFunktion} from "./script1.js";
                                        
                                        // Hier wird die zuvor importierte Funktion aufgerufen.
                                        meineFunktion();
                                    &lt;/script&gt;
                                &lt;/head&gt;
                            &lt;/html&gt;
                        </source-code>
                    </lsx-card>
            
                    <lsx-grid-fluid class="p-0">
                        <lsx-row>
                            <lsx-col size="lg">
                                <lsx-card title="<span class='fn'>script1.js</span>" class="w-100">
                                    <source-code language="javascript">
                                    // Beachte das export-Schl√ºsselwort!
                                    export function meineFunktion() {
                                        alert('Hallo aus script1.js');
                                    }
                                    </source-code>
                                </lsx-card>
                            </lsx-col>
                            <lsx-col size="lg">
                                <lsx-card title="<span class='fn'>script2.js</span>" class="w-100">
                                    <source-code language="javascript">
                                    // Beachte das export-Schl√ºsselwort!
                                    export function meineFunktion() {
                                        alert('Hallo aus script2.js');
                                    }
                                    </source-code>
                                </lsx-card>
                            </lsx-col>
                        </lsx-row>
                    </lsx-grid-fluid>
                </lsx-accordion-page>

                <lsx-accordion-page title="ES6-Module mit Node.js nutzen">
                    <div class="makrdown mb-4">
                        Die L√∂sung f√ºr Node.js sieht genau so aus, wie die f√ºr den Browser. Es f√§llt lediglich
                        die HTML-Datei weg und wir m√ºssen in der <span class="fn">package.json</span> angeben,
                        dass wir mit ES6-Modulen arbeiten wollen. Denn traditionall besitzt Node.js seit jeher
                        sein eigenes Modulsystem, da ES6-Module erst sp√§ter spezifiziert wurden.
                    </div>

                    <lsx-card title="<span class='fn'>package.json</span>" class="w-100 mb-4">
                        <source-code language="json">
                            {
                                "type": "module",
                                ‚Ä¶,
                            }
                        </source-code>
                    </lsx-card>
            
                    <lsx-grid-fluid class="p-0">
                        <lsx-row>
                            <lsx-col size="lg">
                                <lsx-card title="<span class='fn'>script1.js</span>" class="w-100 h-100">
                                    <source-code language="javascript">
                                    // Beachte das export-Schl√ºsselwort!
                                    export function meineFunktion() {
                                        alert('Hallo aus script1.js');
                                    }
                                    </source-code>
                                </lsx-card>
                            </lsx-col>
                            <lsx-col size="lg">
                                <lsx-card title="<span class='fn'>script2.js</span>" class="w-100 h-100">
                                    <source-code language="javascript">
                                    import {meineFunktion} from "./script1.js";
                                    meineFunktion();
                                    </source-code>
                                </lsx-card>
                            </lsx-col>
                        </lsx-row>
                    </lsx-grid-fluid>
                </lsx-accordion-page>

                <lsx-accordion-page title="Beide Funktionen gleichzeitig importieren">
                    <p>
                        Was, wenn ich beide Funktionen importieren will? Kein Problem! Die importierten Objekte k√∂nnen
                        beim Import einfach lokal umbenannt werden, um Namenskonflikte aufzul√∂sen.
                    </p>
                    <source-code language="javascript">
                        import {meineFunktion as funktion1} from "./script1.js";
                        import {meineFunktion as funktion2} from "./script2.js";

                        funktion1();
                        funktion2();
                    </source-code>
                </lsx-accordion-page>

                <lsx-accordion-page title="Import ohne geschweifte Klammern">
                    <p>
                        Warum haben manche Import geschweifte Klammern und andere nicht? Ganz einfach:
                    </p>

                    <h4 class="dhbw-lightblue mt-4">Mit geschweiften Klammern</h4>
                    <p>
                        Import eines einzelnen Objekts aus der anderen Datei. Der Name des zu importierenden Objekts
                        steht in den Klammern und muss exakt dem Namen in der anderen Datei entsprechen.
                    </p>
                    <lsx-grid-fluid class="p-0">
                        <lsx-row>
                            <lsx-col size="lg">
                                <lsx-card title="<span class='fn'>script1.js</span>" class="w-100 h-100">
                                    <source-code language="javascript">
                                        export function meineFunktion() {
                                            alert('Hallo aus script1.js');
                                        }
                                    </source-code>
                                </lsx-card>
                            </lsx-col>
                            <lsx-col size="lg">
                                <lsx-card title="<span class='fn'>script2.js</span>" class="w-100 h-100">
                                    <source-code language="javascript">
                                        import {meineFunktion} from "./script1.js";
                                    </source-code>
                                </lsx-card>
                            </lsx-col>
                        </lsx-row>
                    </lsx-grid-fluid>

                    <h4 class="dhbw-lightblue mt-4">Ohne geschweifte Klammern</h4>
                    <p>
                        Es wird der sog. Default Export der anderen Datei importiert. Dabei handelt es sich oft um ein
                        Objekt mit mehreren Methoden. Tats√§chlich kann aber alles als Default Export exportiert werden,
                        was auch normal exportiert werden kann. Eine Datei kann auch beide Export-Arten gleichzeitig
                        nutzen.
                    </p>
                    
                    <lsx-card title="<span class='fn'>utils.js</span>" class="w-100 h-100 mb-4">
                        <source-code language="javascript">
                            function sayHello() { ‚Ä¶ };
                            function sayGoodbye() { ‚Ä¶ };

                            export default {sayHello, sayGoodbye};
                        </source-code>
                    </lsx-card>

                    <lsx-card title="<span class='fn'>script2.js</span>" class="w-100 h-100">
                        <source-code language="javascript">
                            // Der Name myUtils kann frei gew√§hlt werden
                            import myUtils from "./utils.js";
                        </source-code>
                    </lsx-card>
                </lsx-accordion-page>
            </lsx-accordion>
        </div>
    </section>

    <section data-title="Fallbeispiel: Abruf von JSON-Daten">
        <div class="limited-width">
            <div class="markdown mb-4" detail-content>
                Im n√§chsten Schritt wollen wir das eben Gelernte gleich in unserem Beispielprogramm einsetzen
                und eine kleine Funktion schreiben, die den Abruf der JSON-Daten vereinfacht. Diese lagern wir
                in eine neue Quellcode-Datei mit dem Namen <span class="fn">utils/fetch.js</span> aus.
            </div>

            <lsx-carousel class="mb-5">
                <lsx-carousel-page>
                    <p>
                        Lege im <span class="fn">src</span>-Verzeichnis ein neues Unterverzeichnis namens
                        <span class="fn">utils</span> und darin eine neue Datei mit dem Namen
                        <span class="fn">fetch.js</span> an. Folgenden Quellcode soll die Datei beinhalten.
                        Beachte insbesondere die <code>export</code>-Anweisung.
                    </p>

                    <lsx-card title="<span class='fn'>src/utils/fetch.js</span>">
                        <source-code language="javascript">
                            /**
                             * Kleine Hilfsfunktion zum Abruf von JSON-Daten aus dem Internet. Zwar m√ºsste
                             * man hierf√ºr keine neue Funktion definieren. Auf diese Weise k√∂nnen wir jedoch
                             * zeigen, wie "gr√∂√üere" JavaScript-Programme in einzelne Module (Quellcode-Dateien)
                             * aufgeteilt werden k√∂nnen.
                             * 
                             * @param {string} url Abzurufende URL
                             * @returns Die abgerufenen, deserialisierten Daten
                             * @throws Dieselben Exceptions wie fetch() bei einem Fehler
                             */
                            export async function fetchJson(url) {
                                let response = await fetch(url);
                                return await response.json();
                            }
                        </source-code>
                    </lsx-card>
                </lsx-carousel-page>
                <lsx-carousel-page>
                    <p>
                        Passe nun die Datei <span class="fn">src/main.js</span> wie folgt an, um die neue Funktion
                        zu importieren und zu nutzen.
                    </p>

                    <lsx-card title="<span class='fn'>src/main.js</span>">
                        <source-code language="javascript">
                            import {fetchJson}  from "./utils/fetch.js";
                            import prettyoutput from "prettyoutput";
                        
                            try {
                                console.log("People in Space");
                                console.log("===============");
                                console.log();
                        
                                // Daten abrufen (zweite Version mit Modulen)
                                let peopleInSpace = await fetchJson("http://api.open-notify.org/astros.json");
                        
                                // Daten formatieren mit der prettyoutput-Bibliothek
                                let formatedOutput = prettyoutput(peopleInSpace);
                                console.log(formatedOutput);
                            } catch (error) {
                                console.error("Fehler beim Abruf der Daten!");
                                console.error(error);
                            }
                        </source-code>
                    </lsx-card>
                </lsx-carousel-page>
                <lsx-carousel-page>
                    <p>
                        Das war auch schon alles. Na das war ja einfach! ü§´
                    </p>
                    <img class="active d-block w-25 m-auto" src="shared/finish.svg" />
                    <p>
                        <small>
                            <small>
                                Bildnachweis: <a href="https://pixabay.com/en/symbol-gui-internet-internet-page-2480163/" target="_blank">Pixabay: janf93</a>
                            </small>
                        </small>
                    </p>
                </lsx-carousel-page>
            </lsx-carousel>
        </div>

        <div class="centered-content flex-row flex-wrap gap-3 mb-5">
            <!-- main.js -->
            <lsx-modal>
                <lsx-thumbnail class="mw-100">
                    <img src="04-nodejs/module-main.png" class="d-block mw-100 dhbw-thumbnail p-1" style="height: 15em;"/>
                    <span class="lsx-modal-image-thumbnail">Die angepasste Datei <span class="fn">main.js</span></span>
                </lsx-thumbnail>
                <lsx-content>
                    <img src="04-nodejs/module-main.png" class="img-responsive img-thumbnail"/>
                </lsx-content>
            </lsx-modal>

            <!-- utils/fetch.js -->
            <lsx-modal>
                <lsx-thumbnail class="mw-100">
                    <img src="04-nodejs/module-fetch.png" class="d-block mw-100 dhbw-thumbnail p-1" style="height: 15em;"/>
                    <span class="lsx-modal-image-thumbnail">Die neue Datei <span class="fn">utils/fetch.js</span></span>
                </lsx-thumbnail>
                <lsx-content>
                    <img src="04-nodejs/module-fetch.png" class="img-responsive img-thumbnail"/>
                </lsx-content>
            </lsx-modal>
        </div>
    </section>
</section>

<section data-title="Debugging mit Visual Studio Code" class="centered-content">
    <section data-title="Fehlersuche im eigenen Quellcode">
        <div class="limited-width mb-4">
            <lsx-info-box class="mb-4">
                <blockquote class="blockquote fst-italic">
                    <p>
                        Einen Quellcode zu debuggen ist wie einen Krimi zu l√∂sen, bei dem man gleichzeitig
                        auch der M√∂rder ist.
                    </p>
                    <figcaption class="blockquote-footer">
                        <cite>Programmiererweisheit</cite>
                    </figcaption>
                </blockquote>
            </lsx-info-box>

            <p detail-content>
                Egal, wie sehr man sich anstregt. Beim Programmieren schleichen sich immer wieder kleine
                und gro√üe Fehler ein. Oft fallen sie beim Testen direkt auf und man wei√ü sofort, wo sie
                zu beheben sind. Es gibt aber auch hartn√§ckige Fehler, die nicht sofort auffallen bzw.
                bei denen nicht auf Anhieb klar ist, wie sie zustande kommen. In diesem Fall hilft uns der
                <i>Debugger</i> bei der Fehlersuche. üîç
            </p>
        </div>

        <div class="d-flex align-items-stretch" style="gap: 1em;">
            <img src="04-nodejs/debugging-comic1.png" class="d-block w-100 img-thumbnail"/>
            <img src="04-nodejs/debugging-comic2.jpg" class="d-block w-100 img-thumbnail"/>
            <img src="04-nodejs/debugging-comic3.jpg" class="d-block w-100 img-thumbnail"/>
        </div>
        <p class="w-100">
            <small>
                <small>
                    Bildnachweise:
                    <a href="https://geek-and-poke.com/geekandpoke/2017/8/13/just-happened" target="_blank">Geek&Poke: Just Happened</a>,
                    <a href="https://geek-and-poke.com/geekandpoke/2013/12/3/yesterdays-regex" target="_blank">Geek&Poke: Yesterdays Regex</a>,
                    <a href="https://geek-and-poke.com/geekandpoke/2013/8/13/coders-part-213" target="_blank">Geek&Poke: Coders (Part 213)</a>
                </small>
            </small>
        </p>
    </section>

    <section data-title="Video-Tutorial f√ºr Visual Studio Code">
        <div class="limited-width">
            <p class="mb-4" detail-content>
                Den Ablauf einer Codestelle mit dem Debugger nachvollziehen zu k√∂nnen ist eine der
                wichtigsten F√§higkeiten bei der Software-Entwicklung. Das nachfolgende Video zeigt
                in weniger als sechs Minuten, wie es f√ºr Node.js-Anwendungen mit Visual Studio Code geht.
            </p>

            <lsx-youtube video="o-L1OCmWPDA"></lsx-youtube>
            <a href="https://www.youtube.com/watch?v=o-L1OCmWPDA" target="_blank">Link zum Video</a>
        </div>
    </section>

    <section data-title="Den Debugger in Visual Studio Code starten">
        <div class="limited-width">
            <div class="markdown mb-5">
                ![Breakpoint setzen in VS Code](04-nodejs/breakpoint-setzen.png){.float-start .me-4 .mb-4 .shadow}

                <span class="red">1)</span>
                Haben wir eine Codezeile in Verdacht, dass hier ein Fehler stecken k√∂nnte, oder wollen
                wir den Ablauf des Quellcodes an dieser Stelle aus einem anderen Grund untersuchen,
                muss hierf√ºr zun√§chst ein _Breakpoint_ (deutsch: Haltepunkt) gesetzt werden, damit das
                Programm im Debugger an dieser Stelle stehen bleibt.

                <span class="red">2)</span>
                In Visual Studio Code und den meisten anderen IDEs reicht es aus, hierf√ºr einfach in den
                leeren Bereich links der Zeilennummer zu klicken. Ein roter Punkt symbolisiert daraufhin
                den Breakpoint an dieser Stelle.

                <span class="red">3)</span>
                Anschlie√üend muss der Debugger noch mit dem laufenden Programm verbunden werden. Hierf√ºr
                gibt es mehrere M√∂glichkeiten in Visual Studio Code.
            </div>

            <lsx-accordion style="clear: both;">
                <lsx-accordion-page title="<b>Alternative 1:</b>&nbsp;An laufenden Prozess anh√§ngen">
                    <p>
                        Bei langlaufenden Server-Programmen sitzen die Breakpoints meistens in einer Handler-Funktion,
                        die bestimmte Client-Anfragen bearbeiten soll. Die Codezeilen werden daher nur ausgef√ºhrt, wenn
                        eine entsprechende Anfrage an den Server geschickt wird. In diesem Fall gen√ºgt es, das Programm
                        wie gewohnt √ºber das Terminal zu starten, wenn es nicht sowieso schon l√§uft, und den Debugger mit
                        dem laufenden Prozess zu verbinden.
                    </p>

                    <img src="04-nodejs/debugger-attach-1.png" alt="" class="dhbw-border w-100 mb-2">
                    <img src="04-nodejs/debugger-attach-2.png" alt="" class="dhbw-border w-100 mb-3">

                    <p>
                        Hierf√ºr √∂ffnen wir mit <kbd>F1</kbd> die <i>Command Palette</i> und w√§hlen dort <span class="cmd">Debug:
                        Attach to Node Process</span> und dann den passenden Node.js-Prozess aus. Handelt es sich um den richtigen
                        Prozess, erscheint im Terminal daraufhin eine Meldung, dass der Debugger verbunden ist.
                    </p>
                </lsx-accordion-page>

                <lsx-accordion-page title="<b>Alternative 2:</b>&nbsp;Start der Anwendung im Debugger">
                    <p>
                        Soll eine Codestelle √ºberpr√ºft werden, die direkt nach dem Programmstart ausgef√ºhrt wird,
                        funktioniert es nat√ºrlich nicht, den Debugger nachtr√§glich mit dem laufenden Prozess zu
                        verbinden. Stattdessen muss der Debugger zusammen mit dem Programm gestartet werden. In
                        Visual Studio Code kann hierf√ºr im Debug Panel der Button <span class="cmd">Run and Debug</span>
                        verwendet werden.
                    </p>

                    <img src="04-nodejs/run-and-debug.png" alt="" class="dhbw-border w-100">
                </lsx-accordion-page>

                <lsx-accordion-page title="<b>Alternative 3:</b>&nbsp;Anlegen einer Launch-Konfiguration">
                    <p>
                        Besitzt ein Projekt mehrere ausf√ºhrbare Dateien oder ben√∂tigt eine besondere Konfiguration,
                        bietet es sich an, im Debug Panel auf <span class="cmd">create launch.json file</span> und
                        dann auf <span class="cmd">Node.js</span> zu klicken, um eine Launch-Konfiguration f√ºr
                        Visual Studio Code anzulegen.
                    </p>

                    <img src="04-nodejs/debugger-launch-config-1.png" alt="" class="dhbw-border w-100 mb-2">
                    <img src="04-nodejs/debugger-launch-config-2.png" alt="" class="dhbw-border w-100 mb-3">

                    <p>
                        Hierdurch entsteht eine <span class="fn">.vscode/launch.json</span> genannte Datei, in
                        der alle Befehle zum Starten der einzelnen Programme hinterlegt werden k√∂nnen. Beim Aufruf
                        des Debug Panel erscheint dadurch gleich die Debugger-Ansicht, in der das Programm mit dem
                        gr√ºnen Play-Button oben neben <span class="cmd">RUN AND DEBUG</span> gestartet werden kann.
                    </p>
                </lsx-accordion-page>
            </lsx-accordion>
        </div>
    </section>

    <section data-title="Bedienung des Debuggers in Visual Studio Code">
        <div class="limited-width">
            <p class="mb-4" detail-content>
                Die Debugging-Ansicht von Visual Studio Code bietet alle wichtigen Funktionen auf
                einen Blick. Hier siehst du, welche Informationen die einzelnen Bereiche zeigen.
            </p>

            <lsx-carousel>
                <lsx-carousel-page>
                    <p>
                        Durch den Start des Debuggers wechselt Visual Studio Code in die Debugging-Ansicht.
                    </p>
                    <img src="04-nodejs/debugger-vscode-01.png" alt="" class="img-thumbnail w-100">
                </lsx-carousel-page>
                <lsx-carousel-page>
                    <p>
                        Das Programm bleibt beim n√§chsten Breakpoint stehen, wobei die aktuelle Zeile
                        farblich hervorgehoben wird. Die Hervorhebung bedeutet, dass die Zeile noch nicht
                        oder ‚Äì wenn Sie mehrere Teilanweisungen beinhaltet ‚Äì noch nicht vollst√§ndig
                        ausgef√ºhrt wurde.
                    </p>
                    <img src="04-nodejs/debugger-vscode-02.png" alt="" class="img-thumbnail w-100">
                </lsx-carousel-page>
                <lsx-carousel-page>
                    <p>
                        Links oben sind die Variablen des aktuellen Codeblocks sichtbar. Dort sehen wir,
                        welche Variablen an der aktuellen Stelle des Programms existieren und welchen
                        Wert sie derzeit haben. Der Wert kann per Doppelklick auf eine Zeile √ºberschrieben
                        werden.
                    </p>
                    <img src="04-nodejs/debugger-vscode-03.png" alt="" class="img-thumbnail w-100">
                </lsx-carousel-page>
                <lsx-carousel-page>
                    <p>
                        Im Watch-Panel k√∂nnen beliebige Ausdr√ºcke und Variablen hinterlegt werden, deren
                        aktueller Wert √ºberwacht werden soll. Auf diese Weise sieht man immer den aktuellen
                        Wert, den ein Ausdruck oder eine Variable gerade hat.
                    </p>
                    <img src="04-nodejs/debugger-vscode-04.png" alt="" class="img-thumbnail w-100">
                </lsx-carousel-page>
                <lsx-carousel-page>
                    <p>
                        Der ‚ÄûCall Stack‚Äú zeigt die Aufrufkette, wie die aktuelle Codezeile erreicht wurde.
                        Ruft eine Funktion beispielsweise eine andere Funktion auf, wird dies hier durch
                        eine geschachtelte Baumstruktur sichtbar gemacht.
                    </p>
                    <img src="04-nodejs/debugger-vscode-05.png" alt="" class="img-thumbnail w-100">
                </lsx-carousel-page>
                <lsx-carousel-page>
                    <p>
                        Links unten befindet sich eine Liste der Breakpoints. Hier k√∂nnen einzelne Breakpoints
                        tempor√§r abgeschaltet oder komplett entfernt werden.
                    </p>
                    <img src="04-nodejs/debugger-vscode-06.png" alt="" class="img-thumbnail w-100">
                </lsx-carousel-page>
                <lsx-carousel-page>
                    <p>
                        Der Programmablauf wird √ºber die Buttons in der Floating Toolbar gesteuert.
                        Die Buttons haben folgende Bedeutung (von links nach rechts):
                    </p>
                    <ol>
                        <li>Ausf√ºhrung bis zum n√§chsten Breakpoint fortsetzen</li>
                        <li>N√§chste Anweisung ausf√ºhren ohne im Debugger hineinzuspringen</li>
                        <li>N√§chste Anweisung ausf√ºhren und hineinspringen, falls es eine Funktion ist</li>
                        <li>Aktuelle Funktion zu Ende ausf√ºhren und kurz vor dem Verlassen wieder anhalten</li>
                        <li>Programm neustarten</li>
                        <li>Programm stoppen</li>
                    </ol>
                    <img src="04-nodejs/debugger-vscode-07.png" alt="" class="img-thumbnail w-100">
                </lsx-carousel-page>
                <lsx-carousel-page>
                    <p>
                        Unten in der <span class="cmd">Debug Console</span> gibt es noch eine kleine √úberraschung.
                        Am rechten Rand wird dort jeweils angezeigt, welche Codezeile eine bestimmte Konsolenausgabe
                        erzeugt hat. Die Codestelle kann per Klick auf den Link direkt angesprungen werden.
                    </p>
                    <img src="04-nodejs/debugger-vscode-08.png" alt="" class="img-thumbnail w-100">
                </lsx-carousel-page>
                <lsx-carousel-page>
                    <p>
                        Das war es schon. Jetzt kannst du direkt loslegen und dein erstes Programm debuggen. ‚ú®
                    </p>
                    <img class="active d-block w-25 m-auto" src="shared/finish.svg" />
                    <p>
                        <small>
                            <small>
                                Bildnachweis: <a href="https://pixabay.com/en/symbol-gui-internet-internet-page-2480163/" target="_blank">Pixabay: janf93</a>
                            </small>
                       </small>
                    </p>
                </lsx-carousel-page>
            </lsx-carousel>
        </div>
    </section>

    <section data-title="Aufgabe: Wo ist die ISS?" data-background-color="rgb(231, 221, 141)">
        <article>
            <lsx-github-edit
                class        = "mb-4"
                url          = "Beispiele/Erste%20Schritte%20mit%20Node.js"
                download     = "Beispiele/Erste%20Schritte%20mit%20Node.js"
            >
            </lsx-github-edit>
            <p>
                Starte das Beispiel ‚ÄûErste Schritte mit Node.js‚Äú im Debugger und sorge daf√ºr, dass anstelle der
                Personen im Weltall die aktuelle Position der ISS abgerufen und auf der Konsole ausgegeben wird.
                Folgende Schritte sind hierzu notwendig.
            </p>
            <ol class="mb-4">
                <li>
                    √ñffne das Beispiel ‚ÄûErste Schritte mit Node.js‚Äú in Visual Studio Code.
                </li>
                <li>
                    Setze einen Breakpoint auf die Zeile <src-code language="javascript">let peopleInSpace = await ‚Ä¶</src-code>.
                </li>
                <li>
                    Starte das Programm im Debugger, damit die Ausf√ºhrung an der markierten Zeile unterbrochen wird.
                </li>
                <li>
                    Springe mit den Buttons in der Floating Toolbar in die Funktion hinein.
                </li>
                <li>
                    √Ñndere dort den Wert der Variablen <code>url</code> auf <src-code language="javascript">'http://api.open-notify.org/iss-now.json'</src-code>.
                </li>
                <li>
                    Lasse das Programm anschlie√üend zu Ende laufen.
                </li>
            </ol>
            <div class="d-flex gap-2 align-items-center justify-content-center mt-4 mb-4 flex-column flex-md-row align-items-md-end">
                <lsx-modal-image src="04-nodejs/debugger-aufgabe-1.png" caption="Quellcode mit gesetztem Breakpoint"></lsx-modal-image>
                <lsx-modal-image src="04-nodejs/debugger-aufgabe-2.png" caption="√úberschreiben der URL im Debugger"></lsx-modal-image>
                <lsx-modal-image src="04-nodejs/debugger-aufgabe-3.png" caption="Ver√§nderte Konsolenausgabe"></lsx-modal-image>
            </div>
        </article>
        <aside>
            <p>
                Debuggen ist eine der wichtigsten Aktivit√§ten beim Programmieren. Du solltest dich
                daher auf jeden Fall mit dem Debugger in Visual Studio Code vertraut machen, um
                Fehler schnell und sicher auffinden zu k√∂nnen. In dieser Aufgabe kannst du es anhand
                eines einfachen Beispiels √ºben.
            </p>
            <img src="04-nodejs/inspector.png" class="img-fluid d-block" style="max-width: 17em;"/>
            <p>
                <small>
                    Bildnachweis:
                    <a href="https://pixabay.com/illustrations/ai-generated-spy-detective-9352970/" target="_blank">Pixabay: olenchic</a>
                </small>
            </p>
            <lsx-youtube video="afDo-MnNyBg"></lsx-youtube>
        </aside>
    </section>
</section>

<section data-title="√úbungsaufgaben" data-background-color="rgb(231, 221, 141)">
    <section data-title="Aufgabe 1: Ein kleines Node.js-Quiz">
        <article>
            <lsx-tab-pages>
                <lsx-tab-page title="Aufgabe 1.1">
                    <lsx-quiz>
                        <lsx-exercise title="Nutzung der Kommandozeile">
                            <lsx-question
                                type = "single-choice"
                                text = "a) Woher stammt die Idee der Kommandozeile urspr√ºnglich?"
                            >
                                <lsx-answer>Aus grafischen Benutzeroberfl√§chen (GUIs) von Smartphones</lsx-answer>
                                <lsx-answer correct>Aus fr√ºhen Betriebssystemen ohne grafische Oberfl√§che</lsx-answer>
                                <lsx-answer>Aus Textverarbeitungsprogrammen der 1990er-Jahre</lsx-answer>
                                <lsx-answer>Aus Webbrowsern der ersten Generation</lsx-answer>
                            </lsx-question>

                            <lsx-question
                                type = "multiple-choice"
                                text = "b) Welche Aussagen beschreiben den Hauptzweck der Kommandozeile am besten?"
                            >
                                <lsx-answer>Die Kommandozeile dient ausschlie√ülich der Eingabe von Passw√∂rtern.</lsx-answer>
                                <lsx-answer>Die Kommandozeile dient der Fernsteuerung grafischer Anwendungsoberfl√§chen.</lsx-answer>
                                <lsx-answer correct>Die Kommandozeile dient zum Ausf√ºhren von Befehlen und Programmen √ºber Tastatureingaben.</lsx-answer>
                                <lsx-answer>Die Kommandozeile ist √ºberwiegend dazu da, um Retro-Spiele zu spielen.</lsx-answer>
                                <lsx-answer>Die Kommandozeile dient ausschlie√ülich der System-Konfiguration.</lsx-answer>
                                <lsx-answer correct>Die Kommandozeile dient die Automatisierung h√§ufiger Aktionen mit Hilfe von Skripten.</lsx-answer>
                            </lsx-question>

                            <lsx-question
                                type = "single-choice"
                                text = "c) Warum ist es hilfreich, die Kommandozeile zu kennen, auch wenn moderne Betriebssysteme grafische Oberfl√§chen besitzen?"
                            >
                                <lsx-answer correct>Viele Aufgaben lassen sich damit effizienter oder automatisiert erledigen.</lsx-answer>
                                <lsx-answer>Moderne Endger√§te verf√ºgen nicht immer √ºber eine grafische Benutzeroberfl√§che.</lsx-answer>
                                <lsx-answer>Viele Webanwendungen lassen sich statt √ºber den Browser mit der Kommandozeile bedienen.</lsx-answer>
                                <lsx-answer>Die Kommandozeile kann hervorragend zum Debuggen von Hardwarefehlern genutzt werden.</lsx-answer>
                                <lsx-answer>Weil sie ein veraltetes √úberbleibsel ist, das kaum noch verwendet wird.</lsx-answer>
                            </lsx-question>

                            <lsx-question
                                type = "single-choice"
                                text = "d) Die Prompt zeigt (oft zus√§tzlich zu anderen Informationen), in welchem Arbeitsverzeichnis man sich gerade befindet."
                            >
                                <lsx-question-line>
                                    <lsx-answer correct>Wahr</lsx-answer>
                                    <lsx-answer>Falsch</lsx-answer>
                                </lsx-question-line>
                            </lsx-question>

                            <lsx-question
                                type = "single-choice"
                                text = "e) Was bedeutet der Befehl <code>cd ..</code> in den meisten Kommandozeilensystemen?"
                            >
                                <lsx-answer>Der Befehl macht eine Sicherungskopie des aktuellen Verzeichnisses.</lsx-answer>
                                <lsx-answer>Der Befehl zeigt eine Liste aller Dateien im aktuellen Verzeichnis an.</lsx-answer>
                                <lsx-answer correct>Der Befehl wechselt ins √ºbergeordnete Verzeichnis (eine Ebene nach oben).</lsx-answer>
                                <lsx-answer>Der Befehl zeigt verborgene Dateien und Verzeichnisse an.</lsx-answer>
                                <lsx-answer>Der Befehl pr√ºft, ob eine CD im Laufwerk liegt und spielt diese ab.</lsx-answer>
                                <lsx-answer>Der Befehl versetzt den Rechner in den erweiterten Stromsparmodus.</lsx-answer>
                                <lsx-answer>Den Befehl gibt es gar nicht.</lsx-answer>
                            </lsx-question>
                        </lsx-exercise>
                    </lsx-quiz>
                </lsx-tab-page>

                <lsx-tab-page title="Aufgabe 1.2">
                    <lsx-quiz>
                        <lsx-exercise title="Erst Schritte mit Node.js">
                            <lsx-question
                                type = "single-choice"
                                text = "a) Was ist Node.js?"
                            >
                                <lsx-answer>Eine Laufzeitumgebung von JavaScript innerhalb des Browsers</lsx-answer>
                                <lsx-answer correct>Eine Laufzeitumgebung von JavaScript au√üerhalb des Browsers</lsx-answer>
                                <lsx-answer>Eine Laufzeitumgebung zur Entwicklung von Mobile Apps</lsx-answer>
                                <lsx-answer>Eine Laufzeitumgebung zur Ausf√ºhrung verschiedener Programmiersprachen</lsx-answer>
                            </lsx-question>

                            <lsx-question
                                type = "single-choice"
                                text = "b) Was bewirkt der Konsolenbefehl <span class="cmd">npm init</span>?"
                            >
                                <lsx-answer>Der Befehl l√∂scht den Inhalt des aktuellen Verzeichnisses.</lsx-answer>
                                <lsx-answer>Der Befehl legt eine neue Quellcode-Datei f√ºr Node.js an.</lsx-answer>
                                <lsx-answer correct>Der Befehl legt die Datei <span class="fn">package.json</span> an.</lsx-answer>
                                <lsx-answer>Der Befehl installiert die Abh√§ngigkeiten des Projekts.</lsx-answer>
                            </lsx-question>

                            <lsx-question
                                type = "multiple-choice"
                                text = "c) Welchen Zweck erf√ºllt die Datei <span class='fn'>package.json</span>?"
                            >
                                <lsx-answer correct>Sie definiert allgemeine Metadaten wie Name und Version des Projekts.</lsx-answer>
                                <lsx-answer correct>Sie verweist auf des Online-Repository mit dem Quellcode des Projekts.</lsx-answer>
                                <lsx-answer correct>Sie definiert Skripte zur Automatisierung h√§ufiger Aufgaben.</lsx-answer>
                                <lsx-answer correct>Sie listet die Abh√§ngigkeiten eines Node.js-Projekts auf.</lsx-answer>
                                <lsx-answer correct>Sie definiert die erlaubten Versionen der installierten Abh√§ngigkeiten.</lsx-answer>
                                <lsx-answer correct>Sie erm√∂glicht es, das Projekt auf npmjs.org zu ver√∂ffentlichen.</lsx-answer>
                            </lsx-question>

                            <lsx-question
                                type = "single-choice"
                                text = "d) In welches Verzeichnis werden die externe Abh√§ngigkeiten eines Projekts installiert?"
                            >
                                <lsx-question-line>
                                    <lsx-answer correct><code>node_modules</code></lsx-answer>
                                    <lsx-answer><code>node_libraries</code></lsx-answer>
                                    <lsx-answer><code>external_modules</code></lsx-answer>
                                    <lsx-answer><code>packages</code></lsx-answer>
                                    <lsx-answer><code>environment</code></lsx-answer>
                                </lsx-question-line>
                            </lsx-question>

                            <lsx-question
                                type          = "assignment"
                                text          = "e) Ordne den folgenden Aufgaben den richtigen Konsolenbefehl zu."
                                label-length  = "28em"
                            >
                                <lsx-assignment answer="npm install">Installation aller Abh√§ngigkeiten eines Projekts</lsx-assignment>
                                <lsx-assignment answer="npm start">Ausf√ºhren des Start-Skripts, um das Projekt zu starten</lsx-assignment>
                                <lsx-assignment answer="npm run ‚Ä¶">Ausf√ºhren eines in der <span class="fn">package.json</span> definierten Skripts</lsx-assignment>
                                <lsx-assignment answer="npm add -D ‚Ä¶">Hinzuf√ºgen einer weiteren Entwicklungsabh√§ngigkeit</lsx-assignment>
                                <lsx-assignment answer="npm remove ‚Ä¶">Entfernen und Deinstallation einer Abh√§ngigkeit</lsx-assignment>
                                <lsx-assignment answer="npm update">Aktualisierung aller installierten Abh√§ngikeiten</lsx-assignment>
                            </lsx-question>

                            <lsx-question
                                type = "single-choice"
                                text = "f) Worin unterscheiden sich normale Abh√§ngigkeiten von Entwicklungsabh√§ngigkeiten in Node.js?"
                            >
                                <lsx-answer correct>Entwicklungsabh√§ngigkeiten werden zur Entwicklung aber nicht zur Ausf√ºhrung ben√∂tigt.</lsx-answer>
                                <lsx-answer>Normale Ah√§ngigkeiten werden zur Ausf√ºhrung aber nicht w√§hrend der Entwicklung ben√∂tigt.</lsx-answer>
                                <lsx-answer>Es gibt keinen Unterschied. Beide verhalten sich exakt gleich.</lsx-answer>
                            </lsx-question>
                        </lsx-exercise>
                    </lsx-quiz>
                </lsx-tab-page>

                <lsx-tab-page title="Aufgabe 1.3">
                    <lsx-quiz>
                        <lsx-exercise title="Quellcode modularisieren">
                            <lsx-question
                                type = "single-choice"
                                text = "a) Was passiert in JavaScript ohne ES6-Module, wenn zwei Dateien dieselbe Funktion definieren?"
                            >
                                <lsx-answer correct>Die Funktion der einen Datei √ºberschreibt die gleichnamige Funktion der anderen Datei.</lsx-answer>
                                <lsx-answer>Innerhalb jeder Datei wird die gleichnamige Funktion der anderen Datei ausgef√ºhrt.</lsx-answer>
                                <lsx-answer>Nichts. Die Inhalte beider Dateien existieren v√∂llig unabh√§ngig voneinander.</lsx-answer>
                                <lsx-answer>Das Programm bricht mit einem Laufzeitfehler ab, da dieser Fall nicht erlaubt ist.</lsx-answer>
                            </lsx-question>

                            <lsx-question
                                type = "single-choice"
                                text = "b) Welche der folgenden Zeilen bindet eine Quellcode-Datei als ES6-Modul in HTML ein?"
                            >
                                <lsx-answer><src-code language="html">&lt;script src="file.js"&gt;&lt;/script&gt;</src-code></lsx-answer>
                                <lsx-answer correct><src-code language="html">&lt;script src="file.js" type="module"&gt;&lt;/script&gt;</src-code></lsx-answer>
                                <lsx-answer><src-code language="html">&lt;script src="file.js" format="es6"&gt;&lt;/script&gt; </src-code></lsx-answer>
                            </lsx-question>

                            <lsx-question
                                type = "single-choice"
                                text = "c) Welche der folgenden Zeilen innerhalb der package.json aktiviert ES6-Module in Node.js?"
                            >
                                <lsx-question-line>
                                    <lsx-answer correct><src-code language="json">"type": "module"</src-code></lsx-answer>
                                    <lsx-answer><src-code language="json">"format": "es6"</src-code></lsx-answer>
                                    <lsx-answer><src-code language="json">"version": "nodejs-next"</src-code></lsx-answer>
                                </lsx-question-line>
                            </lsx-question>

                            <lsx-question
                                type = "single-choice"
                                text = "d) Die Inhalte eines ES6-Moduls werden automatisch exportiert und anderen Modulen sichtbar gemacht?"
                            >
                                <lsx-question-line>
                                    <lsx-answer>Wahr</lsx-answer>
                                    <lsx-answer correct>Falsch</lsx-answer>
                                </lsx-question-line>
                            </lsx-question>

                            <lsx-question
                                type = "single-choice"
                                text = "e) Welche der folgenden Zeilen importiert den Default Export des angegebenen Moduls?"
                            >
                                <lsx-answer correct><src-code language="javascript">import routes from "./routes.js";</src-code></lsx-answer>
                                <lsx-answer><src-code language="javascript">import {routes} from "./routes.js";</src-code></lsx-answer>
                                <lsx-answer><src-code language="javascript">import [routes] from "./routes.js";</src-code></lsx-answer>
                                <lsx-answer><src-code language="javascript">import (routes) from "./routes.js";</src-code></lsx-answer>
                                <lsx-answer><src-code language="javascript">import &lt;routes&gt; from "./routes.js";</src-code></lsx-answer>
                            </lsx-question>

                            <lsx-question
                                type = "single-choice"
                                text = 'f) Was bewirken die geschweiften Klammern im Befehl <src-code language="javascript">import {logWarning} from "./logging.js"</src-code>?'
                            >
                                <lsx-answer>Der Default Export des genannten Moduls wird importiert.</lsx-answer>
                                <lsx-answer>Es werden alle Inhalte des genannten Moduls importiert.</lsx-answer>
                                <lsx-answer corret>Es wird eine Funktion oder eine Variable mit dem Namen <code>logWarning</code> importiert.</lsx-answer>
                            </lsx-question>

                            <lsx-question
                                type = "single-choice"
                                text = "g) Mit welchem Schl√ºsselwort lassen sich Funktionen und Variablen in einem Modul exportieren?"
                            >
                                <lsx-question-line>
                                    <lsx-answer><src-code language="javascript">public</src-code></lsx-answer>
                                    <lsx-answer><src-code language="javascript">extends</src-code></lsx-answer>
                                    <lsx-answer><src-code language="javascript">import</src-code></lsx-answer>
                                    <lsx-answer correct><src-code language="javascript">export</src-code></lsx-answer>
                                    <lsx-answer><src-code language="javascript">share</src-code></lsx-answer>
                                </lsx-question-line>
                            </lsx-question>
                        </lsx-exercise>
                    </lsx-quiz>
                </lsx-tab-page>

                <lsx-tab-page title="Aufgabe 1.4">
                    <lsx-quiz>
                        <lsx-exercise title="Fehlersuche">
                            <lsx-question
                                type = "single-choice"
                                text = "a) Wof√ºr ben√∂tigt man einen Debugger?"
                            >
                                <lsx-answer>Zum Anzeigen der Onlinedokumentation</lsx-answer>
                                <lsx-answer>Zum Auffinden von Fehlern durch statische Codeanalyse</lsx-answer>
                                <lsx-answer>Zum √úberwachen des Speicherverbrauchs eines Programms</lsx-answer>
                                <lsx-answer>Zum Messen der Laufzeit eines Programms</lsx-answer>
                                <lsx-answer correct>Zum schrittweisen Nachvollziehen des Programmablaufs</lsx-answer>
                            </lsx-question>

                            <lsx-question
                                type = "single-choice"
                                text = "b) Was ist ein Breakpoint?"
                            >
                                <lsx-answer correct>Ein Haltepunkt, an dem das Programm im Debugger unterbrochen wird</lsx-answer>
                                <lsx-answer>Eine Sollbruchstelle im Programm, um es beim Auftreten von Fehler geordnet zu beenden</lsx-answer>
                                <lsx-answer>Eine Codestelle, an der der aktuelle Speicherverbrauch des Programms gemessen wird</lsx-answer>
                                <lsx-answer>Eine Codestelle, bis zu deren Ereichen die Laufzeit gemessen wird</lsx-answer>
                            </lsx-question>

                            <lsx-question
                                type = "single-choice"
                                text = "c) Wie wird ein Breakpoint in Visual Studio Code gesetzt?"
                            >
                                <lsx-answer>Durch Doppelklicken der Zeilennummer</lsx-answer>
                                <lsx-answer correct>Durch Anklicken des Bereichs links der Zeilennummer</lsx-answer>
                                <lsx-answer>Durch Rechtsklick auf dei entsprechende Codezeile</lsx-answer>
                            </lsx-question>

                            <lsx-question
                                type = "single-choice"
                                text = "d) Um ein Node.js-Programm zu debuggen, muss es zwingend im Debugger neu gestartet werden."
                            >
                                <lsx-question-line>
                                    <lsx-answer>Wahr</lsx-answer>
                                    <lsx-answer correct>Falsch</lsx-answer>
                                </lsx-question-line>
                            </lsx-question>

                            <lsx-question
                                type = "single-choice"
                                text = "e) Der Wert einer Variable kann im Debugger nicht ver√§ndert werden."
                            >
                                <lsx-question-line>
                                    <lsx-answer>Wahr</lsx-answer>
                                    <lsx-answer correct>Falsch</lsx-answer>
                                </lsx-question-line>
                            </lsx-question>

                            <lsx-question
                                type = "single-choice"
                                text = "f) Was zeigt der Call Stack innerhalb der Debugging-Ansicht?"
                            >
                                <lsx-answer>Die an der aktuelle Codestelle sichtbaren Variablen</lsx-answer>
                                <lsx-answer>Den aktuellen Wert frei definierbarer Ausdr√ºcke und Variablen</lsx-answer>
                                <lsx-answer correct>Die Aufrufkette bis zur Ausf√ºhrung der aktuellen Codezeile</lsx-answer>
                                <lsx-answer>Den aktuellen Speicherverbrauch des Programms</lsx-answer>
                                <lsx-answer>Die aktuelle Laufzeit des Programms</lsx-answer>
                            </lsx-question>

                            <lsx-question
                                type = "assignment"
                                text = "g) Ordne den folgenden Buttons ihre jeweilige Funktion in Visual Studio Code zu."
                            >
                                <lsx-question-line>
                                    <lsx-assignment answer="Ausf√ºhrung fortsetzen">
                                        <img src="04-nodejs/debugger-button-1.png" alt="" class="img-thumbnail">
                                    </lsx-assignment>
                                    <lsx-assignment answer="Anweisung ausf√ºhren und √ºberspringen">
                                        <img src="04-nodejs/debugger-button-2.png" alt="" class="img-thumbnail">
                                    </lsx-assignment>
                                    <lsx-assignment answer="Anweisung ausf√ºhren und hineinspringen">
                                        <img src="04-nodejs/debugger-button-3.png" alt="" class="img-thumbnail">
                                    </lsx-assignment>
                                </lsx-question-line>
                                <lsx-question-line>
                                    <lsx-assignment answer="Aktuelle Funktion verlassen">
                                        <img src="04-nodejs/debugger-button-4.png" alt="" class="img-thumbnail">
                                    </lsx-assignment>
                                    <lsx-assignment answer="Programm neustarten">
                                        <img src="04-nodejs/debugger-button-5.png" alt="" class="img-thumbnail">
                                    </lsx-assignment>
                                    <lsx-assignment answer="Programm stoppen">
                                        <img src="04-nodejs/debugger-button-6.png" alt="" class="img-thumbnail">
                                    </lsx-assignment>
                                </lsx-question-line>
                            </lsx-question>
                        </lsx-exercise>
                    </lsx-quiz>
                </lsx-tab-page>
            </lsx-tab-pages>
        </article>
        <aside>
            <p>
                Bevor du dich auf die benoteten Lernkontrollen st√ºrzt, l√∂se erst einmal dieses
                Quiz. Das ist eine super √úbung f√ºr den gro√üen Test. üìù
            </p>
            <img src="shared/quiz.png" class="img-fluid d-block" style="max-width: 20em;"/>
            <p>
                <small>
                    Bildnachweis:
                    <a href="https://pixabay.com/illustrations/quiz-tiles-letters-red-game-test-2058883/" target="_blank">Pixabay: 905513</a>
                </small>
            </p>
        </aside>
    </section>

    <section data-title="Aufgabe 2: 12-Faktor Apps">
        <article>
            <lsx-tab-pages>
                <lsx-tab-page title="Aufgabe">
                    <lsx-ul>
                        <li>
                            <p>
                                Besuche die Seite <a href="https://www.12factor.net/" target="_blank">12factor.net</a>
                                und lese dir das Manifest und die 12 Faktoren durch.
                            </p>
                        </li>
                        <li>
                            <p>
                                Die Reihenfolge der 12 Faktoren ist leider etwas chaotisch. Versuche sie daher in folgende Kategorien
                                einzuteilen:
                            </p>
                            <ol class="mb-3">
                                <li>Entwicklung</li>
                                <li>Konfiguration</li>
                                <li>Ausf√ºhrung</li>
                            </ol>
                        </li>
                        <li>
                            <p>
                                Frage anschlie√üen einen KI-Chatassistenten nach der Bedeutung der 12 Faktoren und wie
                                diese mit Node.js umgesetzt werden k√∂nnen.
                            </p>
                        </li>
                    </lsx-ul>

                    <img src="04-nodejs/12factor.net.png" class="d-block w-100 dhbw-border shadow">
                </lsx-tab-page>

                <lsx-tab-page title="L√∂sung: Entwicklung" class="markdown">
                    * Zentral verwalteter Quellcode
                    * Abh√§ngigkeiten explizit deklarieren
                    * Getrennte Build-, Release- und Run-Phasen
                    * Vergleichbare Entwicklungs- und Produktivumgebungen

                    Microservices werden mit modernen Werkzeugen und modernen Programmierpraktiken entwickelt. Ihr Quellcode
                    wird deshalb mit Werkzeugen wie Git versioniert, so dass jede √Ñnderung daran nachvollziehbar ist. Werkzeuge
                    wie `npm`, `pip` oder `maven` verwalten dar√ºber hinaus die Abh√§ngigkeiten zu externen Bibliotheken und sorgen
                    f√ºr automatisierte Build- und Releaseprozesse.
                    
                    Zus√§tzlich finden Entwicklung und Test und vergleichbaren Bedingungen wie der sp√§tere Produktiveinsatz statt,
                    wof√ºr die Produktivumgebung auf den Entwicklungs- und Testmaschinen so gut wie m√∂glich nachgebildet wird.
                </lsx-tab-page>

                <lsx-tab-page title="L√∂sung: Konfiguration" class="markdown">
                    * Nutzung fremder Dienste √ºber das Netzwerk
                    * Unterst√ºtzende Dienste sind Ressourcen
                    * Konfiguration durch Umgebungsvariablen
                    * Adminprozesse sind einmalige Vorg√§nge

                    Microservices kommunizieren grunds√§tzlich √ºber das Netzwerk bzw. das Internet mit anderen Microservices.
                    Andere Schnittstellen sind nicht vorgesehen, um die Microservices auf getrennten virtuellen Maschinen und
                    oft sogar getrennten physischen Maschinen betreiben zu k√∂nnen. √úber die Konfiguration der Services, welche
                    innerhalb der Cloudumgebung vorgenommen wird, werden jedem Microservice die Netzadressen der von ihm ben√∂tigten
                    anderen Services mitgeteilt. Diese stehen dann zur Laufzeit als Umgebungsvariablen des Betriebssystems zur
                    Verf√ºgung, da es sich hierbei um eine universale, einfache M√∂glichkeit handelt.

                    Falls administrative Aktionen wie die Reorganisation einer Datenbank oder das L√∂schen veralteter Daten
                    notwendig sind, erfolgen diese durch einmalig aufgerufene, vom eigentlichen Microservice getrennt laufende
                    Werkzeugprogramme.
                </lsx-tab-page>

                <lsx-tab-page title="L√∂sung: Ausf√ºhrung" class="markdown">
                    * Ausf√ºhrung als einzelner Betriebssystemprozess
                    * Parallelit√§t durch weitere Betriebssystemprozesse
                    * Robuster und schneller Start bzw. Stopp der Prozesse
                    * Protokollierung durch zeitbezogene Ereignisse

                    Microservices sind immer in sich geschlossen und bringen s√§mtliche Laufzeitumgebungen, Bibliotheken und
                    Hilfsprogramme mit, um ausgef√ºhrt werden zu k√∂nnen. Sie k√∂nnen dadurch als einzelner Betriebssystemprozess
                    leicht gestartet und gestoppt werden, beispielsweise indem sie in ein Container-Image verpackt werden.
                    Start und Stopp m√ºssen besonders schnell gehen, damit die Skalierung jederzeit elastisch angpasst werden
                    kann.

                    F√ºr die Fehlersuche schreiben Microservices umfangreiche Protokollmeldungen in die Konsole (ihre Standardausgabe).
                    Jede Meldung wird dabei mit einem eindeutigen Zeitstempel am Anfang versehen, so dass die Protokollmeldungen
                    von der Cloud wie ein kontinuierlicher Datenstrom von zeitpunktbezogenen Ereignissen behandelt und archiviert
                    werden k√∂nnen.
                </lsx-tab-page>
            </lsx-tab-pages>
        </article>
        <aside>
            <p>
                Skalierbare Anwendungen, die daf√ºr gemacht sind, in einer automatisierten Cloud-Umgebung
                ausgef√ºhrt zu werden, werden meistens nach dem Prinzip der 12-Faktor-Apps programmiert.
                In dieser Aufgabe findest du heraus, was damit gemeint ist. ü•≥
            </p>
            <img src="shared/ai-assistant.png" class="img-fluid d-block" style="width: 15em; margin-bottom: 0.5em;"/>
            <p>
                <small>
                    Bildnachweis:
                    <a href="https://pixabay.com/illustrations/robot-drawing-art-job-money-8614567/" target="_blank">pixabay: Comic-Generator-Pro</a>
                </small>
            </p>
        </aside>
    </section>

    <!-- TODO: Codespaces Link funktioneirt mit Dateipfad statt Verzeichnis ??? (pr√ºfen) -->
    <section data-title="Aufgabe 3: Textzeilen sortieren">
        <article>
            <lsx-github-edit
                class        = "mb-3"
                url          = "Aufgaben/Zeilen%20sortieren/README.md"
                download     = "Aufgaben/Zeilen%20sortieren"
            >
            </lsx-github-edit>

            <lsx-tab-pages>
                <lsx-tab-page title="Hintergrundwissen">
                    <p>
                        Die Unix-Kommandozeilentools folgenden dem Prinzip ‚ÄûDo one thing and do it well‚Äú.
                        Gemeint ist, dass jedes Programm m√∂glichst einfach gehalten ist und nur ein kleines
                        Problem l√∂sen kann. Die Programme k√∂nnen aber in einer Befehlskette so kombiniert werden,
                        dass nahezu jede gr√∂√üere Aufgabe damit gel√∂st werden kann. Ein typisches Kommando ist
                        daher <span class="cmd">sort</span>, das Textzeilen alphabetisch sortiert. Zum Beispiel
                        ein einer Befehlskette wie dieser:
                    </p>
                    <p class="cmd">
                        cat textdatei.txt | sort | less
                    </p>
                    <p>
                        Dies funktioniert, weil jedes Programm automatisch drei Datenstr√∂me mit folgenden Funktionen
                        besitzt:
                    </p>
                    <lsx-ul>
                        <li>
                            <b>Standard Input:</b> Eingabe des Programms, standardm√§√üig √ºber die Tastatur
                        </li>
                        <li>
                            <b>Standard Output:</b> Ausgabe das Programms, standardm√§√üig im Konsolenfenster
                        </li>
                        <li>
                            <b>Standard Error:</b> Fehlermeldungen des Programms, standardm√§√üig ebenfalls im Konsolenfenster
                        </li>
                    </lsx-ul>
                    <p>
                        Durch das Pipe-Symbol <span class="cmd">|</span> werden die Programme so miteinander verkn√ºpft,
                        dass die Ausgabe das linken Programms als Einagbe f√ºr das rechte Programm dient, wodurch beliebig
                        komplexe Prozessketten definiert werden k√∂nnen. <span class="cmd">cat</span> gibt hier den Inhalt
                        einer Datei aus, der mit <span class="cmd">sort</span> sortiert und anschlie√üend mit
                        <span class="cmd">less</span> benutzerfreundlich angezeigt wird.
                    </p>

                    <img src="04-nodejs/aufgabe-sort.png" alt="Visualisierung der Befehlskette" class="d-block mw-100 mx-auto mt-4 mb-4" style="width: 60em;">

                    <p>
                        Klingt nach schwarzer Magie? üé© Nun, wo ein Terminal ist, ist ein Weg. üßô‚Äç‚ôÄÔ∏è
                    </p>
                </lsx-tab-page>

                <lsx-tab-page title="Aufgabe">
                    <p>
                        Schreibe ein Programm, das den <span class="cmd">sort</span>-Befehl aus dem
                        vorherigen Beispiel ersetzt. Das Programm soll √ºber seinen Standard Input so
                        lange Textzeilen einlesen und in einem Array ablegen, bis der Sender den
                        Datenstrom schlie√üt. Anschlie√üend soll das Array sortiert und mit
                        <src-code language="javascript">console.log()</src-code> zeilenweise an
                        Standard Output geschickt werden.
                    </p>
                    <p>
                        Hier sind die wichtigsten Schritte f√ºr die Umsetzung:
                    </p>
                    <table class="table">
                        <tbody>
                            <tr>
                                <th scope="row">1.</th>
                                <th scope="row" style="width: 20em;">Einlesen von Daten √ºber <code>stdin</code></th>
                                <td>
                                    Das Programm soll mit <src-code language="javascript">process.stdin.on("data", callback)</src-code>
                                    mehrere Textzeilen einlesen.
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">2.</th>
                                <th scope="row">Speicherung der Zeilen in einem Array</th>
                                <td>
                                    Die eingelesenen Daten m√ºssen in einem Array zwischengespeichert werden.
                                    Dabei muss beachtet werden, dass die Daten als Zeichenstrom angeliefert
                                    werden, der bei jedem Zeilenendezeichen <src-code language="javascript">"\n"</src-code>
                                    in Einzelzeilen aufgetrennt werden muss. Die Einzelzeilen m√ºssen dann,
                                    da die Daten in mehreren Bl√∂cken ankommen k√∂nnen, dem eigentlichen Array
                                    angeh√§ngt werden. Leerzeilen sollen ignoriert werden.
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">3.</th>
                                <th scope="row">Sortierung der Zeilen</th>
                                <td>
                                    Nach vollst√§ndigem Einlesen soll das Array mit
                                    <src-code language="javascript">meinArray.sort()</src-code>
                                    sortiert werden.
                                </td>
                            </tr>
                            <tr>
                                <th scope="row">4.</th>
                                <th scope="row">Ausgabe auf <code>stdout</code></th>
                                <td>
                                    Die sortierten Zeilen sollen zeilenweise auf <code>stdout</code> ausgegeben werden.
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </lsx-tab-page>

                <lsx-tab-page title="L√∂sung">
                    <source-code language="javascript">
                        #!/usr/bin/env node

                        let nonEmptyLines = [];
                        
                        process.stdin.setEncoding("utf8");
                        
                        process.stdin.on("data", (chunk) => {
                            lines = chunk.split("\n");

                            for (let line of lines) {
                                if (!line) continue;
                                nonEmptyLines.push(line);
                            }
                        });
                        
                        process.stdin.on("end", () => {
                            nonEmptyLines.sort();
                            nonEmptyLines.forEach(console.log);
                        });
                    </source-code>
                </lsx-tab-page>
            </lsx-tab-pages>
        </article>
        <aside>
            <p>
                Ah, endlich wieder programmieren. üòé Dieses mal bauen wir ein n√ºtzliches kleines
                Werkzeug nach, dass es unter Unix schon von Anfang an gab. Ein Sortierprogramm f√ºr
                beliebige Textdaten.
            </p>
            <img src="shared/github_atom.png" class="img-fluid d-block"/>
            <p>
                <small>
                    Bildnachweis:
                    <a href="https://atom.io/" target="_blank">Atom Webseite</a>
                </small>
            </p>
        </aside>
    </section>

    <section data-title="Aufgabe 4: Vertiefungen">
        <article>
            <lsx-ul emoji="ü™©" class="mb-4">
                <li>√ñffne dienen Lieblings KI-Chatbot und unterhalte dich mit ihm √ºber folgende Themen.</li>
                <li>Suche dir eines oder mehrere Themen aus, die dich interessieren und lasse sie dir erkl√§ren.</li>
                <li>Frage den Chatbot auch, wie du das ein oder andere √ºben bzw. ausprobieren kanns.</li>
            </lsx-ul>

            <lsx-accordion class="mb-4">
                <lsx-accordion-page title="Promises vs.&nbsp;<code>async</code>/<code>await</code>" class="markdown">
                    JavaScript besitzt kein Multi-Threading, wie die meisten anderen Programmiersprachen.
                    Stattdessen bezieht es seine Performance aus der ereignisgesteuerten Programmierung,
                    was bedeutet, dass im Hintergrund ablaufende Aktivit√§ten ein <code>Promise</code>-Objekt
                    zur√ºckliefern, dem man wiederum eine Callback-Funktion mitgeben kann, die aufgerufen wird,
                    sobald die Aktion zu Ende gelaufen ist.

                    Das ist jedoch nicht immer leicht zu durchschauen. Man spricht hier auch von der <i>Callback Hell</i>,
                    wenn sich viele Callback-Funktion ineinander verschachteln und man keinen √úberblick mehr dar√ºber
                    hat, wann welcher Code-Ausschnitt eigentlich ausgef√ºhrt wird.

                    Lasse dir von der KI das Prinzip hinter den <code>Promise</code>-Objekten erkl√§ren und wie
                    die Programmierung mit <code>async</code>/<code>await</code> dabei vereinfacht wird.
                </lsx-accordion-page>

                <lsx-accordion-page title="Fehlerbehandlung mit&nbsp;<code>try</code>/<code>catch</code>" class="markdown">
                    JavaScript besitzt eine √§hnliche Syntax zur Anahmebehandlung wie Java. Auch hier werden
                    Excpetions geworfen, die in einem <code>try</code>/<code>catch</code>-Block abgefangen
                    werden k√∂nnen. Doch JavaScript ist eine dynamisch typisierte Programmiersprache. Man wei√ü
                    daher im Vorfeld nicht, _welche_ Exception man abf√§gnt und welche man lieber nicht abfangen
                    will.

                    Lasse dir von der KI erkl√§ren, wie Exceptions in JavaScript funktionieren und wie eine
                    saubere Fehlerbehandlung umgesetzt wird. Frage sie auch, wie du eigene Exceptions definieren,
                    werfen und abfangen kannst.
                </lsx-accordion-page>

                <lsx-accordion-page title="Typsichere Programme schreiben mit TypeScript" class="markdown">
                    Die dynamische Natur von JavaScript erlaubt es, im Vergleich zu statisch typisierten
                    Sprachen wie Java, bereits mit wenigen Code-Zeilen viel zu bewirken. Doch die St√§rke
                    ist, ebenfalls wie bei allen dynamisch typisierten Sprachen, gleichzeitig seine gr√∂√üte
                    Schw√§che. Schnell schleichen sich fatale Tippfehler ein, die ein Programm abst√ºrzen
                    lassen oder zu versteckten Fehlern f√ºhren. Genauso schnell passiert es, dass man versucht,
                    eine Methode von einem Objekt aufzurufen, die es gar nicht gibt. Beispielsweise, weil das
                    Objekt andere Methoden vorsieht, oder selbst gar nicht existiert.

                    Microsoft ist dem TypeScript-Compiler angetreten, dieses Problem f√ºr JavaScript zu l√∂sen.
                    Dabei handelt es sich um eine Programmiersprache, die eine strikte Obermenge von JavaScript
                    ist und durch den Compiler in natives JavaScript zur√ºck-compiliert wird. Der Vorteil:
                    Jedes JavaScript-Programm ist auch ein g√ºltiges TypeScript-Programm, so dass man nicht
                    gleich seinen ganzen Quellcode umschreiben muss. Der TypeScript-Compiler (und auch IDEs
                    wie Visual Studio Code) wei√üen einen aber fr√ºhzeitig auf sehr viele Programmierfehler hin,
                    die sonst erst zur Laufzeit (wenn √ºberhaupt) aufgefallen w√§ren.

                    Lasse dir von der KI die Funktionsweise von TypeScript erkl√§ren. Frage sie auch, wie du
                    eine bestehende Anwendung, wie eine unserer Beispielanwendungen und √úbungen auf TypeScript
                    umstellen kannst. Es ist gar nicht so schwer ‚Ä¶
                </lsx-accordion-page>
            </lsx-accordion>

            <p>
                Fasse die wichtigsten Erkenntnisse in einer Mind Map oder einer kleinen Pr√§sentation zu sammen
                und teile sie mit uns im Kurs. Denn: Wer schreibt der bleibt! Deshalb unbedingt selbst schreiben
                und diese Aufgabe <u>nicht</u> an die KI delegieren. ‚úíÔ∏è
            </p>
        </article>
        <aside>
            <p>
                Das l√§uft ja schon richtig gut mit Node.js. Doch es gibt noch so viel zu entdecken.
                Unm√∂glich, das alles in einem Semester zu behandeln. Aber zum Gl√ºck kann uns der
                freundliche KI-Chatbot von Nebenan ein wenig unter die Arme greifen. Auf dieser Seite
                findest du ein paar Themen, die sich auf jeden Fall lohnen, sich in einem Chat erkl√§ren
                zu lassen. üí¨
            </p>
            <img src="shared/ai-assistant.png" class="img-fluid d-block" style="width: 15em; margin-bottom: 0.5em;"/>
            <p>
                <small>
                    Bildnachweis:
                    <a href="https://pixabay.com/illustrations/robot-drawing-art-job-money-8614567/" target="_blank">pixabay: Comic-Generator-Pro</a>
                </small>
            </p>
        </aside>
    </section>
</section>

<!-- ======================= -->
<!-- HTTP-Server mit Express -->
<!-- ======================= -->
<section data-use-template="teilkapitel" data-titel="HTTP-Server mit Express"></section>

<section data-title="Kurzvorstellung von Express">
    <section data-title="Client- vs. serverseitige Web Frameworks" class="centered-content">
        <div class="limited-width2">
            <div class="markdown mb-4" detail-content>
                In diesem Kapitel lernen wir mit Express ein sog. **serverseitiges Webframework** kennen.
                Da es noch andere Arten von Webframeworks gibt, die in der Entwicklung web-basierter
                Anwendungen oft genutzt werden, zeigt diese Seite einen kurzen Vergleich.
            </div>

            <div class="d-flex gap-3 flex-column flex-md-row">
                <div class="card flex-grow-1 w-100">
                    <img src="04-nodejs/framework-clientseitig.jpg" class="card-img-top">
                    <div class="card-header border-top fw-bold">
                        Clientseitige Web Frameworks
                    </div>
                    <div class="card-body markdown small">
                        Diese laufen im Browser und sind darauf ausgelegt, die Entwicklung interaktiver
                        Benutzeroberfl√§chen zu vereinfachen. Meist handelt es sich bei den damit entwickelten
                        Anwendungen um Single Page Apps, bei denen gro√üe Teile der Anwendungslogik im Browser
                        liegen, serverseitige Funktionen aber beispielsweise via REST-Webservices integriert
                        werden k√∂nnen.

                        #### Typische Funktionen {.dhbw-lightblue}

                        1. HTML-Rendering mit Templates
                        2. Entwicklung eigener HTML-Komponenten
                        3. Datenbindung und Rendering
                        4. Clientseitiges URL-Routing
                        5. State-Management

                        #### Verbreitete Beispiele {.dhbw-lightblue}

                        [React](https://react.dev/){target=_blank},
                        [Vue.js](https://vuejs.org/){target=_blank},
                        [Angular](https://angular.io/){target=_blank},
                        [Svelte](https://svelte.dev/){target=_blank}, ‚Ä¶
                    </div>
                </div>

                <div class="card flex-grow-1 w-100">
                    <img src="04-nodejs/framework-serverseitig.jpg" class="card-img-top">
                    <div class="card-header border-top fw-bold">
                        Serverseitige Web Frameworks
                    </div>
                    <div class="card-body markdown small">
                        Diese laufen auf dem Server und verarbeiten HTTP-Anfragen, entweder durch einen in das
                        Framework integrierten Webserver oder mit Hilfe dedizierter Webserver wie
                        [Apache](https://httpd.apache.org/){target=_blank},
                        [nginx](https://nginx.org/){target=_blank} oder
                        [Caddy](https://caddyserver.com/){target=_blank}.
                        Der serverseitige Code reagiert auf HTTP-Anfragen, holt Daten aus Datenbanken oder
                        externen Quellen und rendert das Ergebnis h√§ufig als HTML zur√ºck an den Client.

                        #### Typische Funktionen {.dhbw-lightblue}

                        1. Routing und URL-Handling
                        2. HTML-Rendering mit Templates
                        3. Datenbankzugriffe
                        4. Sicherheitsfunktionen
                        5. Session-Verwaltung

                        #### Verbreitete Beispiele {.dhbw-lightblue}

                        __[Express](https://expressjs.com/){target=_blank}__,
                        [Django](https://www.djangoproject.com/){target=_blank},
                        [Ruby on Rails](https://rubyonrails.org/){target=_blank},
                        [Lavarel](https://laravel.com/){target=_blank}, ‚Ä¶
                    </div>
                </div>

                <div class="card flex-grow-1 w-100">
                    <img src="04-nodejs/framework-fullstack.jpg" class="card-img-top">
                    <div class="card-header border-top fw-bold">
                        Full-Stack Frameworks
                    </div>
                    <div class="card-body markdown small">
                        Diese kombinieren sowohl Client als auch Server in einem durchg√§ngigen Framework. Client- und
                        Serverteil sind hierbei optimal aufeinander abgestimmt, so dass UI-Komponenten beim Page Load
                        auf dem Server vorgerendert und dann im Browser weiterlaufen k√∂nnen. Dar√ºber hinausgehende
                        Anwendungslogik kann frei zwischen Client und Server aufgeteilt werden.

                        #### Typische Funktionen {.dhbw-lightblue}

                        1. Gemeinsame Codebasis f√ºr Client und Server
                        2. Serverseitiges Rendering mit Hydration
                        3. Aufruf serverseitiger Funktionen im Client
                        4. Authentifizierung und Autorisierung
                        5. Datenbankzugriffe

                        #### Verbreitete Beispiele {.dhbw-lightblue}

                        [Next.js](https://nextjs.org/){target=_blank},
                        [Nuxt.js](https://nuxt.com/){target=_blank},
                        [Meteor](https://www.meteor.com/){target=_blank},
                        [RedwoodJS](https://redwoodjs.com/){target=_blank}, ‚Ä¶
                    </div>
                </div>
            </div>

            <small>
                <small>
                    ¬π Bildnachweise:
                    <a href="https://pixabay.com/photos/server-drive-bay-hard-drives-4393370/" target="_blank">Pixabay: Bru-nO</a>,
                    <a href="https://pixabay.com/illustrations/responsive-web-web-design-websites-2044921/" target="_blank">Pixabay: Templune</a>,
                    <a href="https://pixabay.com/illustrations/monitor-binary-binary-system-6962816/" target="_blank">Pixabay: geralt</a>,
                </small>
            </small>
        </div>
    </section>

    <section data-title="Funktionsumfang von Express" class="centered-content">
        <lsx-grid-fluid class="p-0">
            <lsx-row>
                <lsx-col size="md-9">
                    <div detail-content>
                        Express ist ein minimalistisches, ‚Äûunopinionated‚Äú Webframework f√ºr Node.js. Das hei√üt, es macht nur wenige Vorgaben,
                        wie eine Anwendung strukturiert sein soll, bietet aber gleichzeitig alle notwendigen Funktionen, um einen eigenen
                        HTTP-Server zur Implementierung von Webanwendungen oder Webservices zu erstellen.
                    </div>
                </lsx-col>
            </lsx-row>
            <lsx-row>
                <lsx-col size="md-9" class="mb-3">
                    <img src="04-nodejs/express-webseite.png" alt="Screenshot der Webseite zu Express" class="shadow d-block w-100 mb-2">
                </lsx-col>
                <lsx-col size="md" class="d-flex flex-column gap-3">
                    <lsx-card title="Routing" bold class="small">
                        Express erm√∂glicht eine einfache Definition von URL-Routen als Kombination aus HTTP-Methode und URL-Pfad,
                        die mit einer Handler Funktion zur Verarbeitung der HTTP-Anfragen verkn√ºpft werden.
                    </lsx-card>

                    <lsx-card title="Middlewares" bold class="small">
                        Nahezu alles in Express basiert auf Middleware-Funktionen, die nacheinander Requests und Responses verarbeiten.
                        Typische Aufgaben sind dabei Logging, Parsen des HTTP-Body, Verarbeitung von Cookies oder Session-Verwaltung.                    
                    </lsx-card>

                    <lsx-card title="Hohe Flexibilit√§t und Erweiterbarkeit" bold class="small">
                        Da das Framework selbst seht leichtgewichtig ist, kann nahezu jede gew√ºnschte Funktionalit√§t wie z.B.
                        CORS-Handling, File-Uploads, Session Management oder Authentifizierung durch zus√§tzliche Pakete
                        hinzugef√ºgt werden.
                    </lsx-card>

                    <a href="https://expressjs.com/" target="_blank">Link zur Webseite</a>
                </lsx-col>
            </lsx-row>
        </lsx-grid-fluid>
    </section>

    <section data-title="Videos: Logbuch des Captains" class="centered-content">
        <div class="limited-width mb-5">
            <lsx-github-edit
                class        = "mb-3"
                url          = "Aufgaben/Logbuch%20des%20Captains/Aufgabe"
                download     = "Aufgaben/Logbuch%20des%20Captains"
            >
            </lsx-github-edit>
    
            <p>
                Dieses Kapitel wird von einer Reihe Videos begleitet, in denen die Entwicklung eines Fallbeispiels
                Schritt f√ºr Schritt erkl√§rt wird. Schaue dir erst die Videos an, um sowohl das Fallbeispiel als
                auch das Vorgehen bei der Entwicklung zu verstehen. Danach kannst du hier im Skript die Details
                nachlesen.
            </p>
        </div>

        <div class="centered-content flex-row flex-wrap gap-3">
            <!-- Vorestellung des Webservices -->
            <lsx-modal>
                <lsx-thumbnail style="height: 18em;" class="mw-100">
                    <img src="04-nodejs/video-vorstellung.png" class="d-block h-100 mw-100 dhbw-thumbnail"/>
                </lsx-thumbnail>
                <lsx-content>
                    <lsx-card title="Vorstellung des Webservices" bold class="mh-100 limited-width">
                        <lsx-card-body class="overflow-auto">
                            <p class="mb-4" style="text-align: justify;">
                                Los geht's mit der Entwicklung eigener Webservices mit Node.js und dem Express Web Framework.
                                Hierf√ºr bauen wir eine kleine Anwendung, die jedem Star Trek Fan bekannt vorkommen sollte:
                                Das Logbuch des Captains. Dieses Video stellt die Anwendung vor als auch den Webservice, 
                                den wir zusammen bauen wollen.
                            </p>
                            <!-- <lsx-youtube class="img-thumbnail embed-responsive" video="wamyiQl9mCo"></lsx-youtube> -->
                            <div class="centered-content">
                                <div class="embed-responsive ratio ratio-16x9 limited-width border">
                                    <iframe class="d-block" src="https://www.youtube-nocookie.com/embed/wamyiQl9mCo?rel=0&amp;showinfo=0" allowfullscreen></iframe>
                                </div>
                            </div>
                        </lsx-card-body>
                    </lsx-card>
                </lsx-content>
            </lsx-modal>

            <!-- Konfiguration mit dotenv -->
            <lsx-modal>
                <lsx-thumbnail style="height: 18em;" class="mw-100">
                    <img src="04-nodejs/video-dotenv.png" class="d-block h-100 mw-100 dhbw-thumbnail"/>
                </lsx-thumbnail>
                <lsx-content>
                    <lsx-card title="Konfiguration mit dotenv" bold class="mh-100 limited-width">
                        <lsx-card-body class="overflow-auto">
                            <p class="mb-4" style="text-align: justify;">
                                Auf unserem eigenen Rechner lassen wir unseren Server auf Port 9000 lauschen, um HTTP-Anfragen
                                zu beantworten. F√ºr den Echtbetrieb ist das aber nicht so toll, weil Webserver normalerweise
                                auf Port 80 reagieren und wir auch nicht sicher sein k√∂nnen, dass der von uns verwendete Port
                                auf derselben Maschine nicht schon anders belegt ist. Wir m√ºssen die Portnummer daher
                                konfigurierbar machen. Dank den Umgebungsvariablen des Betriebssystems und
                                <a href="https://www.npmjs.com/package/dotenv" target="_blank">dotenv</a> kein Problem.
                            </p>
                            <!-- <lsx-youtube class="img-thumbnail embed-responsive" video="wzfYKa2N4Ws"></lsx-youtube> -->
                            <div class="centered-content">
                                <div class="embed-responsive ratio ratio-16x9 limited-width border">
                                    <iframe class="d-block" src="https://www.youtube-nocookie.com/embed/wzfYKa2N4Ws?rel=0&amp;showinfo=0" allowfullscreen></iframe>
                                </div>
                            </div>
                        </lsx-card-body>
                    </lsx-card>
                </lsx-content>
            </lsx-modal>

            <!-- HTTP-Anfragen verarbeiten -->
            <lsx-modal>
                <lsx-thumbnail style="height: 18em;" class="mw-100">
                    <img src="04-nodejs/video-express.png" class="d-block h-100 mw-100 dhbw-thumbnail"/>
                </lsx-thumbnail>
                <lsx-content>
                    <lsx-card title="HTTP-Anfragen verarbeiten" bold class="mh-100 limited-width">
                        <lsx-card-body class="overflow-auto">
                            <p class="mb-4" style="text-align: justify;">
                                Jetzt geht es los. Unser Server lernt, HTTP-Anfragen zu beantworten. Hierf√ºr integrieren wir
                                Express und lernen, wie damit ein einfacher Webserver gebaut werden kann. Zus√§tzlich lernen wir,
                                wie Express mit HTTP-Anfragen umgeht und wie wir Logik zur Bearbeitung bestimmter Anfragen
                                programmieren k√∂nnen.
                            </p>
                            <!-- <lsx-youtube class="img-thumbnail embed-responsive" video="_UNb3xXkS1c"></lsx-youtube> -->
                            <div class="centered-content">
                                <div class="embed-responsive ratio ratio-16x9 limited-width border">
                                    <iframe class="d-block" src="https://www.youtube-nocookie.com/embed/_UNb3xXkS1c?rel=0&amp;showinfo=0" allowfullscreen></iframe>
                                </div>
                            </div>
                        </lsx-card-body>
                    </lsx-card>
                </lsx-content>
            </lsx-modal>
        </div>
    </section>

    <section data-title="Allgemeine Gesch√§ftsbedingungen" class="centered-content">
        <div class="limited-width2">
            <div class="d-flex flex-column flex-lg-row align-items-center gap-4 mb-5">
                <div>
                    <img src="04-nodejs/polizei-stop.jpg" alt="" class="d-block img-thumbnail mw-100" style="width: 12em;">
                    <small>
                        <small>
                            Bildnachweis:
                            <a href="https://pixabay.com/photos/police-trowel-stop-boy-disguise-4596933/" target="_blank">Pixabay: guvo59</a>
                        </small>
                    </small>
                </div>

                <div style="flex: 1">
                    <p style="font-size: 105%">
                        Die Videos sind wesentlich f√ºr den Lernerfolg dieses Kapitels.
                        Bitte best√§tige, dass du sie wirklich angeschaut hast und
                        dir auch die n√§chsten Videos vollst√§ndig anschauen wirst.
                    </p>
        
                    <div class="mb-4">
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="video-confirm" id="videos-confirm-none" checked>
                            <label class="form-check-label" for="videos-confirm-none">ü´§ Ich habe die Videos nicht angeschaut.</label>
                        </div>
            
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="video-confirm" id="videos-confirm-partial">
                            <label class="form-check-label" for="videos-confirm-partial">ü•¥ Ich habe einen Teil der Videos angeschaut.</label>
                        </div>
            
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="video-confirm" id="videos-confirm-complete">
                            <label class="form-check-label" for="videos-confirm-complete">üôÇ Ich habe die Videos vollst√§ndig angeschaut.</label>
                        </div>
                    </div>
        
                    <div>
                        <button type="button" class="btn btn-secondary" style="font-size: 90%" onclick="videos_confirm()">Best√§tigen</button>
                    </div>
                </div>
            </div>

            <blockquote class="blockquote fst-italic text-end">
                <p>
                    Die gr√∂√üte L√ºge im Internet? Ich habe die AGBs gelesen und verstanden.
                </p>
                <figcaption class="blockquote-footer">
                    <cite>Autor unbekannt</cite>
                </figcaption>
            </blockquote>
        </div>

        <script>
            window.videos_confirm = function() {
                let confirmNone     = document.getElementById("videos-confirm-none");
                let confirmPartial  = document.getElementById("videos-confirm-partial");
                let confirmComplete = document.getElementById("videos-confirm-complete");

                if (confirmNone.checked) {
                    alert("Das ist aber schade. Ohne die Videos kann man das Kapitel zwar auch lernen, mit den Videos geht es aber sehr viel leichter. Versprochen. ü§û");
                } else if (confirmPartial.checked) {
                    alert("Immerhin. üòÄ Vielleicht willst du die Videos aber trotzdem komplett anschauen. Das Kapitel l√§sst sich dadurch viel leichter lernen.");
                } else if (confirmComplete.checked) {
                    alert("Super! Dann kannst du direkt weiter machen. üëç");
                }
            }
        </script>
    </section>

    <section data-title="Erste Schritte mit Express" class="centered-content">
        <div class="limited-width">
            <div class="markdown" detail-content>
                Aufgrund seines minimalen Charakters l√§sst sich Express mit nur wenigen Zeilen
                Code nutzen. Eine zu installierende Bibliothek und eine JavaScript-Datei reichen
                schon aus. Diese Seite zeigt, wie es geht.
            </div>

            <lsx-accordion class="mb-4">
                <lsx-accordion-page title="Express installieren">
                    <p>
                        Folgender Befehl f√ºgt Express einem Projekt hinzu:
                    </p>
                    <p class="cmd">
                        npm add express@next
                    </p>

                    <img src="04-nodejs/express-installation.png" alt="" class="img-thumbnail w-100 mb-4">

                    <lsx-info-box>
                        Achte bei der Installation darauf, <span class="cmd">express@next</span> und
                        nicht <span class="cmd">express</span> zu installieren. Denn sonst wird derzeit
                        noch die alte Version 4 installiert, die nicht gut mit <code>async</code> und
                        <code>await</code> bzw. mit <code>Promise</code>-Objekten umgehen kann.
                    </lsx-info-box>
                </lsx-accordion-page>

                <lsx-accordion-page title="Ein minimaler Webserver">
                    <p>
                        Das folgende Beispiel zeigt eine ganz minimale Express-Anwendung, die einfach
                        bei einer GET-Anfrage an den Pfad <code>/</code> den Text <span class="dhbw-tt">Hallo Express</span>
                        zur√ºckliefert.
                    </p>

                    <lsx-card title="Datei <span class='fn'>src/main.js</span>" class="mb-4">
                        <source-code language="javascript">
                            import express from "express";
                            const app = express();
                            
                            app.get("/", (req, res) => {
                                res.status(200);
                                res.send("Hallo Express");
                            });
                        
                            app.listen("9000", "localhost");
                        </source-code>
                    </lsx-card>

                    <p>
                        In den ersten beiden Zeilen wird die Hauptfunktion von Express importiert und aufgerufen,
                        um eine neue App-Instanz zu erzeugen. Diese stellt den eigentlichen Webserver dar, der
                        in der letzten Zeile gestartet wird, um HTTP-Anfragen zu bearbeiten. In der Mitte wird
                        hierf√ºr eine Handler Funktion f√ºr GET-Anfrage an den Pfad <code>/</code> registriert.
                        Nat√ºrlich k√∂nnten hier noch weitere Handler registriert werden. Das Beispiel verwendet
                        aber nur einen.
                    </p>
                </lsx-accordion-page>

                <lsx-accordion-page title="Ein besserer Webserver">
                    <p>
                        Das folgende Beispiel zeigt eine stark verbesserte Version des Servers.
                    </p>
                    <lsx-ul class="mb-4">
                        <li>Konfiguration des Servers √ºber Umgebungsvariablen</li>
                        <li>Protokollierung aller Anfragen auf der Konsole</li>
                        <li>Log-Ausgabe, sobald der Server gestartet wurde</li>
                        <li>Sauberes Beenden des Servers (Graceful Shutdown)</li>
                    </lsx-ul>

                    <lsx-card title="Datei <span class='fn'>src/main.js</span>" class="mb-4">
                        <source-code language="javascript">
                            import dotenv  from "dotenv";
                            import express from "express";
                            import logging from "logging";
                            import process from "node:process";

                            // Programmname ausgeben
                            console.log("Erste Schritte mit Express");
                            console.log("==========================");
                            console.log();

                            // Konfigurationsvariablen einlesen. Streng genommen geh√∂rt dies nicht zu Express.
                            // Um das Deployment in einer Cloud-Umgebung zu vereinfachen, ist es heute aber
                            // f√ºr Server-Anwendungen √ºblich, Konfigurationswerte aus den Umgebungsvariablen
                            // des Betriebssystems zu bezeiehen. Vgl. https://www.12factor.net/
                            dotenv.config();

                            const config = {
                                host: process.env.LISTEN_HOST || "",
                                port: process.env.LISTEN_PORT || 9000,
                            };

                            // Hilfsobjekt f√ºr formatierte Log-Ausgaben
                            const logger = logging.default("main");

                            // Zentrales App-Objekt der Express-Anwendung.
                            // Dies ist der eigentliche Webserver.
                            const app = express();

                            // Protokollierung aller Anfragen auf der Konsole
                            app.use((req, res, next) => {
                                logger.info(`${req.method} ${req.originalUrl}`);
                                next();
                            });

                            // Request Handler Funkion f√ºr GET-Anfragen an die URL "/"
                            app.get("/", (req, res) => {
                                res.status(200);
                                res.send("Hallo Express");
                            });

                            // Webserver starten. Die Callback-Funktion wird aufgefufen, sobald der Webserver
                            // bereit ist, Anfragen zu bearbeiten.
                            const server = app.listen(config.port, config.host, () => {
                                logger.info(`Server lauscht auf ${config.host}:${config.port}`);
                            });

                            // Graceful Shutdown: Aktive Requests zu Ende bearbeiten, aber keine neuen Requests
                            // mehr akzeptieren, wenn der Server beendet werden soll.
                            process.on("SIGTERM", () => {
                                console.log("SIGTERM empfangen. Beende Server.");
                                server.close();
                            });

                            process.on("SIGINT", () => {
                                console.log("\nSIGINT empfangen. Beende Server.");
                                server.close();
                            });
                        </source-code>
                    </lsx-card>
                </lsx-accordion-page>
            </lsx-accordion>
    
            <lsx-info-box type="warning" title="Macht das nicht zuhause nach, liebe Kinder!">
                In diesem Beispiel befindet sich der gesamte Quellcode in einer √ºberschaubaren JavaScript-Datei.
                Da dies aber schnell un√ºbersichtlich wird und gegen das
                <a href="https://de.wikipedia.org/wiki/Open-Closed-Prinzip" target="blank">Offen/Geschlossen-Prinzip</a>
                verst√∂√üt, teilt sich der Quellcode echter Anwendungen in mehrere Module mit unterschiedlichen
                Zust√§ndigkeiten auf.
            </lsx-info-box>
        </div>

        <div class="centered-content flex-row flex-wrap gap-3 mb-5">
            <lsx-modal>
                <lsx-thumbnail class="mw-100">
                    <img src="04-nodejs/hallo-express-code.png" class="d-block mw-100 dhbw-thumbnail p-1" style="height: 15em;"/>
                    <span class="lsx-modal-image-thumbnail">Erweiterter Quellcode des Beispiels</span>
                </lsx-thumbnail>
                <lsx-content>
                    <img src="04-nodejs/hallo-express-code.png" class="img-responsive img-thumbnail"/>
                </lsx-content>
            </lsx-modal>

            <lsx-modal>
                <lsx-thumbnail class="mw-100">
                    <img src="04-nodejs/hallo-express-browser.png" class="d-block mw-100 dhbw-thumbnail p-1" style="height: 15em;"/>
                    <span class="lsx-modal-image-thumbnail">Ergebnis im Browser</span>
                </lsx-thumbnail>
                <lsx-content>
                    <img src="04-nodejs/hallo-express-browser.png" class="img-responsive img-thumbnail"/>
                </lsx-content>
            </lsx-modal>
        </div>
    </section>

    <section data-title="Aufgabe: Mein erster Webserver" data-background-color="rgb(231, 221, 141)">
        <article>
            <lsx-github-edit
            class        = "mb-3"
            url          = "Aufgaben/Mein%20erster%20Webserver/Aufgabe"
            download     = "Aufgaben/Mein%20erster%20Webserver"
        >
        </lsx-github-edit>

            <lsx-tab-pages>
                <lsx-tab-page title="Aufgabe">
                    <p>
                        √úbung macht den Meister! F√ºhre deshalb die folgenden Schritte aus, um eine kleine
                        Express-Anwendung auszuprogrammieren:
                    </p>
                    <ol class="mb-4">
                        <li>
                            Lege ein neues Node.js-Projekt an und installiere Express darin.
                        </li>
                        <li>
                            Lege eine Datei namens <span class="fn">src/main.js</span> an.
                        </li>
                        <li>
                            Kopiere den erweiterten Beispielcode der vorherigen Seite in die Datei.
                        </li>
                        <li>
                            Starte den Server und rufe die Adresse <a href="http://localhost:9000/" target="_blank">http://localhost:9000/</a> im Browser auf.
                        </li>
                        <li>
                            F√ºge anschlie√üend eine zweite Handler Funktion f√ºr <code>GET /bye</code> hinzu, die
                            ‚ÄûAuf Wiedersehen!‚Äù an den Client sendet.
                        </li>
                    </ol>

                    <div class="d-flex gap-2 align-items-end justify-content-center mt-4 mb-4">
                        <lsx-modal-image src="04-nodejs/hallo-express-code.png" caption="Quellcode des Beispiels"></lsx-modal-image>
                        <lsx-modal-image src="04-nodejs/erster-webserver-hallo.png" caption="Aufruf von <tt>/</tt>"></lsx-modal-image>
                        <lsx-modal-image src="04-nodejs/erster-webserver-bye.png" caption="Aufruf von <tt>/bye</tt>"></lsx-modal-image>
                    </div>
                </lsx-tab-page>
                <lsx-tab-page title="L√∂sung">
                    <source-code language="javascript">
                    import dotenv  from "dotenv";
                    import express from "express";
                    import logging from "logging";
                    import process from "node:process";

                    // Programmname ausgeben
                    console.log("Mein erster Webserver");
                    console.log("=====================");
                    console.log();

                    // Konfigurationsvariablen einlesen. Streng genommen geh√∂rt dies nicht zu Express.
                    // Um das Deployment in einer Cloud-Umgebung zu vereinfachen, ist es heute aber
                    // f√ºr Server-Anwendungen √ºblich, Konfigurationswerte aus den Umgebungsvariablen
                    // des Betriebssystems zu bezeiehen. Vgl. https://www.12factor.net/
                    dotenv.config();

                    const config = {
                        host: process.env.LISTEN_HOST || "",
                        port: process.env.LISTEN_PORT || 9000,
                    };

                    // Hilfsobjekt f√ºr formatierte Log-Ausgaben
                    const logger = logging.default("main");

                    // Zentrales App-Objekt der Express-Anwendung.
                    // Dies ist der eigentliche Webserver.
                    const app = express();

                    // Protokollierung aller Anfragen auf der Konsole
                    app.use((req, res, next) => {
                        logger.info(`${req.method} ${req.originalUrl}`);
                        next();
                    });

                    // Request Handler Funkion f√ºr GET-Anfragen an die URL "/"
                    app.get("/", (req, res) => {
                        res.status(200);
                        res.send("Hallo Express");
                    });

                    // Zus√§tzlicher Request Handler f√ºr GET /bye
                    app.get("/bye", (req, res) => {
                        res.status(200);
                        res.send("Auf Wiedersehen!");
                    });

                    // Webserver starten. Die Callback-Funktion wird aufgefufen, sobald der Webserver
                    // bereit ist, Anfragen zu bearbeiten.
                    const server = app.listen(config.port, config.host, () => {
                        logger.info(`Server lauscht auf ${config.host}:${config.port}`);
                    });

                    // Graceful Shutdown: Aktive Requests zu Ende bearbeiten, aber keine neuen Requests
                    // mehr akzeptieren, wenn der Server beendet werden soll.
                    process.on("SIGTERM", () => {
                        console.log("SIGTERM empfangen. Beende Server.");
                        server.close();
                    });

                    process.on("SIGINT", () => {
                        console.log("\nSIGINT empfangen. Beende Server.");
                        server.close();
                    });
                    </source-code>
                </lsx-tab-page>
            </lsx-tab-pages>
        </article>
        <aside>
            <p>
                Nach dieser kurzen Vorstellung von Express wird es Zeit, sich die H√§nde schmutzig zu machen.
                Hier kannst du die Installation und Verwendung von Express anhand eines kleinen Beispiels √ºben. üé≠
            </p>
            <img src="shared/github_atom.png" class="img-fluid d-block"/>
            <p>
                <small>
                    Bildnachweis:
                    <a href="https://atom.io/" target="_blank">Atom Webseite</a>
                </small>
            </p>
            <lsx-youtube video="rblYSKz_VnI"></lsx-youtube>
        </aside>
    </section>
</section>

<section data-title="HTTP-Anfragen bearbeiten" class="centered-content">
    <section data-title="Registrieren der Handler-Funktionen">
        <div class="limited-width">
            <p detail-content>
                Handler Funktionen sind R√ºckr√ºffunktionen, die bei bestimmten HTTP-Anfragen aufgerufen werden,
                um die Anfragen zu bearbeiten. Innerhalb der Handler Funktionen wird daher oft das Request-Objekt
                ausgewertet, um beispielsweise √ºber die URL √ºbergene Parameter oder Cookies auszulesen. Zus√§tzlich
                wird hier die Antwort generiert, die an den Client zur√ºckgeschickt wird.
            </p>
            <lsx-tab-pages>
                <lsx-tab-page title="Vorhandene Methoden">
                    <p>
                        Auf den vorherigen Seiten haben wir gesehen, wie mit <src-code language="javascript">app.get(pfad, handler)</src-code>
                        eine Handler Funktion f√ºr GET-Anfragen registriert werden kann. Dasselbe Prinzip funktioniert auch f√ºr alle
                        anderen HTTP-Methoden:
                    </p>
        
                    <table class="table table-striped border mb-4">
                        <tbody>
                            <tr>
                                <td><code>app.get(‚Ä¶)</code></td>
                                <td>Daten abrufen</td>
                            </tr>
                            <tr>
                                <td><code>app.put(‚Ä¶)</code></td>
                                <td>Neue Daten an den Server schicken</td>
                            </tr>
                            <tr>
                                <td><code>app.post(‚Ä¶)</code></td>
                                <td>Vorhandene Daten auf dem Server √ºberschreiben</td>
                            </tr>
                            <tr>
                                <td><code>app.patch(‚Ä¶)</code></td>
                                <td>Einzelne Daten aktualisieren</td>
                            </tr>
                            <tr>
                                <td><code>app.delete(‚Ä¶)</code></td>
                                <td>Vorhandene Daten l√∂schen</td>
                            </tr>
                            <tr>
                                <td>‚Ä¶</td>
                                <td>Sonstige Methoden</td>
                            </tr>
                        </tbody>
                    </table>
                </lsx-tab-page>

                <lsx-tab-page title="Beispiel">
                    <p>
                        Das nachfolgende Beispiel zeigt einen kleinen Webservice, der auf GET- und POST-Anfragen reagiert.
                    </p>
        
                    <source-code language="javascript">
                        /**
                         * HTTP-Endpunkt zum Abrufen aller vorhandenen Eintr√§ge
                         */
                        app.get("/api/logbook", async (req, res) => {
                            const data = ‚Ä¶; // Daten einlesen
        
                            res.status(200);
                            res.send(data);
                        });
                    
                        /**
                         * HTTP-Endpunkt zum Anlegen eines neuen Eintrags
                         */
                        app.post("/api/logbook", async (req, res) => {
                            if (!req.body?.text) {
                                // Statuscodes siehe https://http.dog/
                                res.status(400);
                                res.send({error: "Bitte Text eingeben!"});
                            } else {
                                // Neuen Eintrag in die Datenbank schreiben
                                const newEntry = ‚Ä¶;
                        
                                res.status(201);
                                res.send(newEntry);
                            }
                        });
                    </source-code>
                </lsx-tab-page>
            </lsx-tab-pages>            
        </div>
    </section>

    <section data-title="Pfade mit Platzhaltern">
        <div class="limited-width">
            <div detail-content>
                <p>
                    Nicht immer lassen sich die URL-Pfade wie in den bisherigen Beispielen hart-codieren.
                    Bei den REST-Webservices werden wir noch sehen, dass wir √ºber die URL mehrere Ressourcen,
                    also Instanzen derselben Entit√§t, unterscheiden k√∂nnen m√ºssen. Hierf√ºr brauchen wir eine
                    M√∂glichkeit, ein Identifikationsmerkmal wie einen Datenbankschl√ºssel in der URL zu codieren.
                </p>

                <lsx-tab-pages>
                    <lsx-tab-page title="Vorgehensweise">
                        <lsx-ul class="mb-4">
                            <li>
                                URL-Pfade setzen sich aus durch <code>/</code> getrennten Teilen zusammen.
                            </li>
                            <li>
                                Normalerweise m√ºssen die Teile exakt wie im Code definiert in er URL enthalten sein.
                            </li>
                            <li>
                                Ein Doppelpunkt am Anfang kennzeichnet stattdessen Platzhalter f√ºr beliebige Werte.
                            </li>
                        </lsx-ul>
        
                        <table class="table table-striped border dhbw-fontsize-small mb-4">
                            <thead>
                                <tr>
                                    <th>URL-Pfad</th>
                                    <th>Bedeutung</th>
                                    <th>Erlaubte Beispiele</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><tt>/api/songs</tt></td>
                                    <td>Festwert ohne Platzhalter</td>
                                    <td>Nur <tt>/api/songs</tt></td>
                                </tr>
                                <tr>
                                    <td><tt>/api/songs/<span class="red">:id</span></tt></td>
                                    <td>Platzhalter am Ende</td>
                                    <td><tt>/api/songs/1985</tt> <br> <tt>/api/songs/your-latest-trick</tt> <br> ‚Ä¶</td>
                                </tr>
                                <tr>
                                    <td><tt>/api/songs/<span class="red">:id</span>/lyrics</tt></td>
                                    <td>Platzhalter in der Mitte</td>
                                    <td><tt>/api/songs/1977/lyrics</tt> <br> <tt>/api/songs/wild-west-end/lyrics</tt> <br> ‚Ä¶</td>
                                </tr>
                            </tbody>
                        </table>

                        <p>
                            Die tats√§chlichen Werte der Platzhalter k√∂nnen mit <code>req.params</code>
                            innerhalb der Handler Funktionen ermittelt werden. Zum Beispiel: <code>req.params.id</code>
                        </p>
                    </lsx-tab-page>

                    <lsx-tab-page title="Beispiel">
                        <p>
                            Das folgende Beispiel zeigt die Grundstruktur eines einfachen REST-Webservices
                            zur Verwaltung von Songs in einer Musikdatenbank.
                        </p>

                        <source-code language="javascript">
                            // Ganze Collection
                            app.get("/songs",        (req, res) => { /* Songs suchen                      */ });
                            app.post("/songs",       (req, res) => { /* Neuen Song anlegen                */ });
                        
                            // Einzelne Ressource
                            app.get("/songs/:id",    (req, res) => { /* Einzelnen Song auslesen           */ };
                            app.put("/songs/:id",    (req, res) => { /* Song komplett √ºberschreiben       */ });
                            app.patch("/songs/:id",  (req, res) => { /* Einzelne Werte eines Songs √§ndern */ });
                            app.delete("/songs/:id", (req, res) => { /* Song l√∂schen                      */ });
                        </source-code>
                    </lsx-tab-page>
                </lsx-tab-pages>
            </div>
        </div>
    </section>

    <section data-title="Query-Parameter f√ºr optionale Werte">
        <div class="limited-width">
            <div class="dhbw-text-columns mb-4">
                <p>
                    Anstelle von Platzhaltern im URL-Pfad k√∂nnen auch Query Parameter verwendet werden,
                    um variable Daten an den Server zu √ºbergeben. Diese werden als Name/Wert-Paare an
                    den Pfad angeh√§ngt und durch <code>?</code> vom Pfad bzw. <code>&</code> untereinander
                    getrennt. H√§ufig wird dies genutzt, um optionale Parameter zu √ºbergeben, die das Verhalten
                    der Handler Funktion zus√§tzlich beeinflussen. Zum Beispiel:
                </p>
                <p class="cmd">
                    /api/songs?sortBy=name&sortOrder=asc
                </p>
                <p>
                    Query-Parameter m√ºssen nicht explizit deklariert werden. Sie werden einfach mit
                    <code>req.query</code> abgefragt. Zum Beispiel: <code>req.query.sortBy</code>,
                    wobei das Ergebnis den Wert <code>undefined</code> liefert, wenn der Query Parameter
                    nicht in der URL enthalten ist.
                </p>
            </div>

            <lsx-card title="Beispiel" bold>
                <source-code language="javascript">
                    app.get("/api/songs", (req, res) => {
                        let search = {
                            filter: {},
                            sort:   {},
                        };

                        if (req.query.search)    search.filter.title = {"$contains": req.query.search};
                        if (req.query.sortBy)    search.sort.by      = req.query.sortBy;
                        if (req.query.sortOrder) search.sort.order   = req.query.sortOrder;

                        const foundSongs = ‚Ä¶;    // Datenkbank-Suche ausf√ºhren

                        res.status(200);
                        res.send(foundSoungs);
                    })
                </source-code>
            </lsx-card>
        </div>
    </section>
</section>

<section data-title="Middleware-Funktionen f√ºr alle HTTP-Anfragen" class="centered-content">
    <section data-title="Videos: Logbuch des Captains">
        <p class="limited-width mb-5">
            Hier folgt ein weiterer Schwung an Videos zu Middleware-Funktionen in Express. Die Videos
            zeigen anhand praktischer Beispiele, wie man eigene Middlware-Funktionen programmiert und
            welche n√ºtzlichen Funktionen Express bereits eingebaut hat. Gleichzeitg vervollst√§ndigt sich
            dadurch die in den Videos aufgebaute Vorlage f√ºr deine eigenen Projekte.
        </p>

        <div class="centered-content flex-row flex-wrap gap-3">
            <!-- Statische Dateien bereitstellen -->
            <lsx-modal>
                <lsx-thumbnail style="height: 18em;" class="mw-100">
                    <img src="04-nodejs/video-static.png" class="d-block h-100 mw-100 dhbw-thumbnail"/>
                </lsx-thumbnail>
                <lsx-content>
                    <lsx-card title="Statische Dateien bereitstellen" bold class="mh-100 limited-width">
                        <lsx-card-body class="overflow-auto">
                            <p class="mb-4" style="text-align: justify;">
                                Unser Fallbeispiel besitzt eine kleine Besonderheit: Derselbe Webserver, den wir im letzten
                                Video programmiert haben, stellt sowohl eine Single Page App f√ºr die Benutzeroberfl√§che als
                                auch einen Webservice f√ºr die Backend-Funktionalit√§ten zur Verf√ºgung. Hierf√ºr m√ºssen wir dem
                                Server allerdings beibringen, die statischen Dateien der Single Page App auch tats√§chlich
                                abrufbar zu machen.
                            </p>
                            <!-- <lsx-youtube class="img-thumbnail embed-responsive" video="OFgs7Lt669o"></lsx-youtube> -->
                            <div class="centered-content">
                                <div class="embed-responsive ratio ratio-16x9 limited-width border">
                                    <iframe class="d-block" src="https://www.youtube-nocookie.com/embed/OFgs7Lt669o?rel=0&amp;showinfo=0" allowfullscreen></iframe>
                                </div>
                            </div>
                        </lsx-card-body>
                    </lsx-card>
                </lsx-content>
            </lsx-modal>

            <!-- JSON-Daten verarbeiten -->
            <lsx-modal>
                <lsx-thumbnail style="height: 18em;" class="mw-100">
                    <img src="04-nodejs/video-json.png" class="d-block h-100 mw-100 dhbw-thumbnail"/>
                </lsx-thumbnail>
                <lsx-content>
                    <lsx-card title="JSON-Daten verarbeiten" bold class="mh-100 limited-width">
                        <lsx-card-body class="overflow-auto">
                            <p class="mb-4" style="text-align: justify;">
                                Das JSON-Datenformat hat sich in den letzten Jahren zur Lingua Franca f√ºr den Datenaustausch √ºber
                                das Web entwickelt. Insbesondere bei den so genanntenn REST-Webservies kommt es sehr h√§ufig zum
                                Einsatz. In diesem Video integrieren wir daher die in Express mitgelieferten JSON-Middleware,
                                um den Empfang und die Erzeugung von JSON-Daten zu vereinfachen.

                            </p>
                            <!-- <lsx-youtube class="img-thumbnail embed-responsive" video="GmD81Hj6NBs"></lsx-youtube> -->
                            <div class="centered-content">
                                <div class="embed-responsive ratio ratio-16x9 limited-width border">
                                    <iframe class="d-block" src="https://www.youtube-nocookie.com/embed/GmD81Hj6NBs?rel=0&amp;showinfo=0" allowfullscreen></iframe>
                                </div>
                            </div>
                        </lsx-card-body>
                    </lsx-card>
                </lsx-content>
            </lsx-modal>

            <!-- Einheitliche Fehlerbehandlung -->
            <lsx-modal>
                <lsx-thumbnail style="height: 18em;" class="mw-100">
                    <img src="04-nodejs/video-fehlerbehandlung.png" class="d-block h-100 mw-100 dhbw-thumbnail"/>
                </lsx-thumbnail>
                <lsx-content>
                    <lsx-card title="Einheitliche Fehlerbehandlung" bold class="mh-100 limited-width">
                        <lsx-card-body class="overflow-auto">
                            <p class="mb-4" style="text-align: justify;">
                                Da haben wir unseren Webservice im letzten Video dazu gebracht, JSON-Daten mit dem
                                Client auszutauschen, schon finden wir in diesem Video einen Fall, in dem das nicht
                                gelingt. N√§mlich immer dann, wenn die Bearbeitung einer HTTP-Anfrage auf einen Fehler
                                l√§uft. Doch nicht nur das: Die standardm√§√üig von Express erzeugte Fehlerantwort offenbart
                                dar√ºber hinaus auch noch sensible Daten, die eigentlich gar nicht an den Client gesendet
                                werden sollten. Beides bekommen wir mit einer Error Handling Middleware zum Gl√ºck leicht
                                in den Griff.
                            </p>
                            <!-- <lsx-youtube class="img-thumbnail embed-responsive" video="4gkeigdy_8Q"></lsx-youtube> -->
                            <div class="centered-content">
                                <div class="embed-responsive ratio ratio-16x9 limited-width border">
                                    <iframe class="d-block" src="https://www.youtube-nocookie.com/embed/4gkeigdy_8Q?rel=0&amp;showinfo=0" allowfullscreen></iframe>
                                </div>
                            </div>
                        </lsx-card-body>
                    </lsx-card>
                </lsx-content>
            </lsx-modal>
        </div>
    </section>

    <section data-title="Was ist eine Middleware?">
        <div class="limited-width2">
            <p>
                Middleware kann sinngem√§√ü mit ‚ÄûSoftware in der Mitte‚Äú √ºbersetzt werden. Im Kontext der
                meisten Web Frameworks sind damit Funktionen gemeint, die f√ºr jede HTTP-Anfrage ausgef√ºhrt
                werden, bevor der eigentliche Request Handler l√§uft. Auf diese Weise k√∂nnen sie:
            </p>
            <lsx-ul class="mb-5">
                <li>
                    Die Anfrage filtern bzw. ver√§ndern, bevor die Handler Funktion aufgerufen wird,
                </li>
                <li>
                    Die von der Handler Funktion generierte Antwort nachtr√§glich ver√§ndern,
                </li>
                <li>
                    Zus√§tzliche Funktionalit√§t wie Benutzerauthentifizierung hinzuf√ºgen,
                </li>
                <li>
                    Anfragen bearbeiten, die die Handler Funktion nicht bearbeiten kann,
                </li>
                <li>
                    Und vieles mehr.
                </li>
            </lsx-ul>

            <img src="04-nodejs/middleware-prinzip.png" alt="" class="d-block w-100 mb-5">

            <p>
                Middleware-Funktionen werden in Express typischerweise mit <src-code language="javascript">app.use(funktion)</src-code>
                registriert, um wirklich alle HTTP-Anfragen abzufangen. Sie sehen aus wie normale Request Handler Funktionen,
                besitzen aber noch einen dritten Parameter namens <code>next</code>. Dieser beinhaltet eine Funktion, die manuell
                aufgerufen werden muss, wenn die HTTP-Anfrage an die n√§chste Middleware bzw. die Handler Funktion weitergereicht
                werden soll.
            </p>
            <lsx-info-box class="mb-5">
                Middleware-Funktionen werden immer in der Reihenfolge durchlaufen, wie sie registriert wurden. Ggf. muss daher auf
                die Reihenfolge der Registrierung geachtet werden, wenn logische Abh√§ngigkeiten zwischen den einzelnen Middleware
                Funktionen bestehen.
            </lsx-info-box>

            <lsx-accordion>
                <lsx-accordion-page title="Beispiel" bold>
                    <source-code language="javascript">
                        import express from "express";
                        const app = express();

                        // Middleware zum Loggen aller HTTP-Anfragen (immer aufgerufen)
                        app.use((req, res) => {
                            console.log(`${req.method} ${req.originalUrl}`);
                            next();
                        });

                        // Request Handler f√ºr GET /
                        app.get("/", (req, res) => {
                            res.status(200);
                            res.send("Hallo Express");
                        });

                        // Request Handler f√ºr GET /bye
                        app.get("/bye", (req, res) => {
                            res.status(200);
                            res.send("Auf Wiedersehen!");
                        });

                        // Server starten
                        app.listen(9000);
                    </source-code>
                </lsx-accordion-page>
            </lsx-accordion>
        </div>
    </section>

    <section data-title="Oft ben√∂tigte Middleware-Funktionen">
        <div class="limited-width">
            <p>
                Diese Seite stellt ein paar Middleware-Funktionen vor, die in so gut wie jedem Express-Projekt
                ben√∂tigt werden. Teilweise werden sie bereits mit Express mitgeliefert. Teilweise m√ºssen sie
                selbst entwickelt oder aus Drittpaketen bezogen werden.
            </p>
            <lsx-tab-pages>
                <lsx-tab-page title="Eingebaute Middlewares">
                    <p class="mb-4">
                        Express besitzt eine kleine Anzahl mitgelieferter Middleware-Funktionen, die sehr h√§ufig
                        ben√∂tigte Funktionalit√§ten abbilden. Namentlich das Verarbeiten von JSON-Daten im HTTP-Body
                        von Anfrage und Antwort sowie das Bereitstellen statischer Dateien f√ºr eine Single Page App
                        oder dergleichen.
                    </p>
        
                    <lsx-accordion>
                        <lsx-accordion-page title="JSON-Daten verarbeiten">
                            <p class="dhbw-fontsize-small">
                                REST-Webservices arbeiten sehr h√§ufig mit JSON-Daten in der Anfrage und der Antwort.
                                Oftmals handelt es sich dabei um das einzige unterst√ºtzte Datenformat. In diesem Fall
                                kann die eingebaute JSON-Middleware in Express die Programmierung deutlich vereinfachen.
                            </p>
        
                            <source-code language="javascript">
                                // JSON-Middleware
                                app.use(express.json());
        
                                // Eigene Handler Funktion
                                app.put("/api/songs", (req, res) => {
                                    // req.body enth√§lt die deserialisierten JSON-Daten
                                    const newSong = req.body;
        
                                    if (!newSong.title) {
                                        res.status(406)
                                        res.send({error: "Songtitel fehlt"});
                                    } else {
                                        ‚Ä¶;    // Song speichern
        
                                        res.status(200);
                                        res.send(newSong);
                                    }
        
                                    // res.send: Die √ºbergebenen Daten werden automatisch als JSON-String kodiert.
                                });
                            </source-code>
                        </lsx-accordion-page>
        
                        <lsx-accordion-page title="Statische Dateien bereitstellen">
                            <div class="limited-width mb-4 dhbw-fontsize-small">
                                Oftmals soll ein mit Express entwickelter Webserver stand-alone ohne zus√§tzlichen
                                Webserver zum Auslieferung statischer Dateien funktionieren. Dies kann mit der
                                eingebauten Static-Middleware leicht erreicht werden, ist aber im Gegenzu aber weniger
                                Performant als die Verwendung eines dedizierten Webservers nur f√ºr die statischen Daten.
                            </div>
                            <source-code language="javascript">
                                import express from "express;"
                                import path    from "node:path";
                                import url     from "node:url";
        
                                const sourceDir = path.dirname(url.fileURLToPath(import.meta.url));
                                const staticDir = path.join(sourceDir, "..", "static");
        
                                // Static Middleware
                                app.use(express.static(staticDir));
        
                                // Sonstige Middlewares und Request Handler hier ‚Ä¶
        
                                // Server starten
                                app.listen(3000);
                            </source-code>
                        </lsx-accordion-page>
                    </lsx-accordion>
                </lsx-tab-page>

                <lsx-tab-page title="Selbst-definierte Middlewares">
                    <p class="mb-4">
                        Weitere Anforderungen, die so gut wie immer bestehen, sind die Protokollierung aller
                        Anfragen auf der Konsole (um die Nutzung des Webservers nachvollziehen zu k√∂nnen) sowie
                        eine einheitliche Fehlerbehandlung, die sicherstellt, dass Fehlermeldungen in einem
                        einheitlichen Format an den Client gesendet werden. Diese Funktionen m√ºssen allerdings
                        selbst entwickelt oder aus Drittpaketen bezogen werden.
                    </p>
        
                    <lsx-accordion>
                        <lsx-accordion-page title="Logging">
                            <p class="dhbw-fontsize-small">
                                Die Logging-Middleware sollte die allererste Middleware sein, die registriert wird,
                                damit wirklich alle Anfragen protokolliert werden. In der hier gezeigten Version
                                schreibt sie einfach die HTTP-Methode sowie die URL auf die Konsole. Denkbar w√§re
                                aber auch, weitere Informationen wie die IP-Adresse des Clients zu protokollieren.
                            </p>
                            <source-code language="javascript">
                                import express from "express";
                                import logging from "logging";

                                // Hilfsobjekt f√ºr formatierte Log-Ausgaben
                                const logger = logging.default("main");

                                // Protokollierung aller Anfragen
                                app.use((req, res, next) => {
                                    logger.info(`${req.method} ${req.originalUrl}`);
                                
                                    // Wichtig: Mit next() wird die "n√§chste" Middleware-Funktion bzw. die
                                    // tats√§chlich zust√§ndige Handler-Funktion aufgerufen. Nach dieser Zeile
                                    // finden wir im `res`-Objekt die von der Handler-Funktion generierten
                                    // Antwortdaten, so dass wir diese hier nochmal anpassen k√∂nnten.
                                    next();
                                });

                                // Weitere Middlewares und Request Handler hier ‚Ä¶

                                // Server starten
                                app.listen(3000);
                            </source-code>
                        </lsx-accordion-page>
        
                        <lsx-accordion-page title="Fehlerbehandlung">
                            <p class="dhbw-fontsize-small">
                                Gerade bei Webservices, deren Antworten auf Clientseite so gut wie immer maschinell
                                ausgewertet werden, ist es wichtig, dass Fehlersituationen einheitlich zur√ºckgemeldet
                                werden. Dies l√§sst sich mit einer ‚ÄûError Handling Middleware‚Äù, die alle nicht explizit
                                abgefangenen Ausnahmen (Exceptions) behandelt, leicht bewerkstelligen. Als positiven
                                Nebeneffekt daraus, kann in den Handler Funktionen sp√§ter einfach eine Exception
                                geworfen werden, wenn ein Fehler an den Client gemeldet werden soll.
                            </p>
                            <source-code language="javascript">
                                import express from "express";
                                import logging from "logging";

                                // Hilfsobjekt f√ºr formatierte Log-Ausgaben
                                const logger = logging.default("main");

                                // Protokollierung aller Anfragen
                                app.use((req, res, next) => {
                                    logger.info(`${req.method} ${req.originalUrl}`);
                                    next();
                                });

                                // Weitere Middlewared und Request Handler hier ‚Ä¶

                                // Einheitliche Fehlerbehandlung
                                // ACHTUNG: Muss nach allen anderen Middlewares und Request Handlern registriert
                                // werden. Sonst wird die Middleware bei einem Fehler nicht durchlaufen!
                                app.use((err, req, res, next) => {
                                    // Fehler auf der Konsole protokollieren
                                    logger.error(err);
                                    if (!err.httpStatus) console.error(err);
                            
                                    // Fehlermeldung an den Client senden
                                    res.status(err.httpStatus || 500);
                                    
                                    res.send({
                                        error:   err.name    || "Error",
                                        message: err.message || "",
                                    });
                            
                                    next();
                                });

                                // Server starten
                                app.listen(3000);
                            </source-code>

                            <lsx-info-box>
                                Eine ‚ÄûError Handling Middleware‚Äù sieht genauso aus, wie die anderen Middleware-Funktionen
                                auch. Sie besitzt als ersten Parameter zus√§tzlich aber noch den behandelten Fehler.
                            </lsx-info-box>

                            <lsx-info-box type="warning">
                                Die ‚ÄûError Handling Middleware‚Äù muss immer ganz zum Schluss nach allen anderen Middlewares
                                und Request Handlern registriert werden, damit sie bei einem Fehler auch tats√§chlich
                                durchlaufen wird. Denn die Middlewares und Request Handler werden in Express immer in der
                                Reihenfolge ihrer Registrierung ausgef√ºhrt.
                            </lsx-info-box>
                        </lsx-accordion-page>
                    </lsx-accordion>
                </lsx-tab-page>
            </lsx-tab-pages>
        </div>
    </section>
</section>

<!-- TODO: Video "Quellcode strukturieren" -->
<section data-title="Strukturierung des Quellcodes" class="centered-content">
    <section data-title="Videos: Logbuch des Captains">
        <p class="limited-width mb-5">
            Endlich k√∂nnen wir die Logbuch-Funktion ausprogrammieren. Die folgenden Videos zeigen,
            wie es geht und wie der Quellcode dabei auch f√ºr gr√∂√üere Projekte ordentlich strukturiert
            werden kann.
        </p>

        <div class="centered-content flex-row flex-wrap gap-3">
            <!-- Funktionale Implementierung -->
            <lsx-modal>
                <lsx-thumbnail style="height: 18em;" class="mw-100">
                    <img src="04-nodejs/video-implementierung.png" class="d-block h-100 mw-100 dhbw-thumbnail"/>
                </lsx-thumbnail>
                <lsx-content>
                    <lsx-card title="Funktionale Implementierung" bold class="mh-100 limited-width">
                        <lsx-card-body class="overflow-auto">
                            <p class="mb-4" style="text-align: justify;">
                                Nachdem wir uns in den letzten Videos eine sehr gute Vorlage f√ºr die Entwicklung eigener
                                Webservices mit Node.js und Express erarbeitet haben, wird es nun Zeit, die eigentliche
                                Funktionalit√§t unseres Beispiels zu programmieren. Im Video lernen wir daher neben den
                                anderen Quellcode-Dateien der Vorlage vor allem die Bibliothek lowdb zur Simulation einer
                                einfachen Datenbank kennen und sehen, wie damit die ben√∂tigten Endpunkte unseres Webservices
                                implementiert werden k√∂nnen.
                            </p>
                            <!-- <lsx-youtube class="img-thumbnail embed-responsive" video="uST0svw5Nfk"></lsx-youtube> -->
                            <div class="centered-content">
                                <div class="embed-responsive ratio ratio-16x9 limited-width border">
                                    <iframe class="d-block" src="https://www.youtube-nocookie.com/embed/uST0svw5Nfk?rel=0&amp;showinfo=0" allowfullscreen></iframe>
                                </div>
                            </div>
                        </lsx-card-body>
                    </lsx-card>
                </lsx-content>
            </lsx-modal>

            <!-- TODO: Den Quellcode strukturieren -->            
            <lsx-modal>
                <lsx-thumbnail style="height: 18em;" class="mw-100">
                    <img src="04-nodejs/video-implementierung.png" class="d-block h-100 mw-100 dhbw-thumbnail"/>
                </lsx-thumbnail>
                <lsx-content>
                    <lsx-card title="Den Quellcode strukturieren" bold class="mh-100 limited-width">
                        <lsx-card-body class="overflow-auto">
                            <p class="mb-4" style="text-align: justify;">
                                Das Video befindet sich momentan noch in Arbeit.
                            </p>
                            <!-- <lsx-youtube class="img-thumbnail embed-responsive" video="uST0svw5Nfk"></lsx-youtube> -->
                            <div class="centered-content">
                                <img src="04-nodejs/video-implementierung.png" class="d-block w-100"/>
                                <!-- <div class="embed-responsive ratio ratio-16x9 limited-width border">
                                    <iframe class="d-block" src="https://www.youtube-nocookie.com/embed/uST0svw5Nfk?rel=0&amp;showinfo=0" allowfullscreen></iframe>
                                </div> -->
                            </div>
                        </lsx-card-body>
                    </lsx-card>
                </lsx-content>
            </lsx-modal>
           
        </div>
    </section>

    <section data-title="Die SOLID-Design-Prinzipien">
        <div class="limited-width2">
            <p class="mb-4" detail-content>
                In den bisherigen Beispielen haben wir den gesamten Code in eine gro√üe Datei geschrieben.
                Das ist aber nur selten eine gute Idee. Denn je gr√∂√üer ein Projekt wird, desto un√ºbersichtlicher
                wird der Code und desto mehr Fehler schleichen sich ein. Die folgenden Seiten zeigen daher,
                wie dieses Problem durch Anwendung der SOLID-Prinzipien (die urspr√ºnglich aus der
                Objekt-Orientierung stammen) vermieden werden kann.
            </p>

            <lsx-grid-fluid class="p-0">
                <lsx-row>
                    <lsx-col size="md-4" class="mb-3 mb-md-0">
                        <lsx-card title="Single Responsibility" bold img="04-nodejs/solid1.jpg" class="h-100">
                            <div class="d-flex flex-column h-100">
                                <p class="flex-fill">
                                    Jede Quellcode-Einheit darf nur f√ºr eine Aufgabe zust√§ndig sein.
                                </p>
                                <lsx-modal>
                                    <lsx-thumbnail>
                                        <a href="" onclick="event.preventDefault()">Erkl√§rung ‚Ä¶</a>
                                    </lsx-thumbnail>
                                    <lsx-content>
                                        <lsx-card title="Single Responsibility" bold class="limited-width">
                                            <div class="overflow-auto markdown dhbw-justified">
                                                Jede Quellcode-Einheit darf nur f√ºr eine Aufgabe zust√§ndig sein.
                                                {.lead}
                                                
                                                Selbst unsere bisherigen Beispiele zeigen bei n√§herer Betrachtung,
                                                dass dieselbe Quellcode-Datei verschiedene Aufgaben abdeckt:

                                                <lsx-ul>
                                                    <li>Den Express-Webserver starten und stoppen</li>
                                                    <li>Globale Middleware-Funktionen registrieren</li>
                                                    <li>Verschiedene Arten von HTTP-Anfragen bearbeiten</li>
                                                    <li>etc.</li>
                                                </lsx-ul>

                                                F√ºr die Abgrenzung gibt es keine harten Regeln und man kann den Quellcode
                                                auch anders einteilen. Ben√∂tigen die einzelnen Teile aber mehr als ein paar
                                                Codezeilen, sollten sie besser in eigene Dateien ausgelagert werden. Dies
                                                h√§lt den Code √ºbersichtlich und sorgt f√ºr eine logische Struktur.

                                                In der objekt-orientierten Programmierung bezieht sich das Prinzip auf die
                                                Aufgaben einer Klasse und propagiert hier vor allem viele kleine Klassen
                                                anstatt weniger gro√üer. Das Prinzip kann aber genauso auch auf alle anderen
                                                Arten den Quellcode zu strukturieren angewandt werden: Quellcode-Dateien,
                                                Module, Klassen, Methoden, Funktionen, ‚Ä¶ sollten im weitesten Simme immer
                                                nur f√ºr eine klar definierte Sache zust√§ndig sein.
                                            </div>
                                        </lsx-card>
                                    </lsx-content>
                                </lsx-modal>
                            </div>
                        </lsx-card>
                    </lsx-col>

                    <lsx-col size="md-4" class="mb-3 mb-md-0">
                        <lsx-card title="Open/Closed" bold img="04-nodejs/solid2.jpg" class="h-100">
                            <div class="d-flex flex-column h-100">
                                <p class="flex-fill">
                                    Der Code sollte f√ºr Erweiterungen offen aber f√ºr Ver√§nderungen geschlossen sein.
                                </p>
                                <lsx-modal>
                                    <lsx-thumbnail>
                                        <a href="" onclick="event.preventDefault()">Erkl√§rung ‚Ä¶</a>
                                    </lsx-thumbnail>
                                    <lsx-content>
                                        <lsx-card title="Open/Closed" bold class="limited-width">
                                            <div class="overflow-auto markdown dhbw-justified">
                                                Der Code sollte f√ºr Erweiterungen offen aber f√ºr Ver√§nderungen geschlossen sein.
                                                {.lead}

                                                Software ist eigentlich nie fertig. So lange sie genutzt und gepflegt wird,
                                                gibt es neue Features, die umgesetzt werden sollen. Dies soll m√∂glichst einfach
                                                m√∂glich sein, ohne vorhandene Funktionen kaputt zu machen und neue Fehler zu
                                                produzieren.

                                                Der Quellcode sollte daher so strukturiert sein, dass Erweiterungen im Sinne
                                                von neuer Funktionalit√§t leicht hinzugef√ºgt werden k√∂nnen. Gleichzeitig sollte er
                                                aber gegen Ver√§nderungen geschlossen sein, was bedeutet, dass der schon vorhandene
                                                Quellcode hierf√ºr m√∂glichst wenig (oder im Idealfall gar nicht) ver√§ndert werden muss.

                                                <lsx-info-box title="Merke">
                                                    Neuen Quellcode hinzuf√ºgen ist in Ordnung. Den vorhandenen Quellcode
                                                    zu ver√§ndern, nicht.
                                                </lsx-info-box>

                                                Auch hier gibt es keine festen Regeln. Es handelt sich aber um eine sehr gute
                                                Leitfrage, die beim Programmieren immer mitgedacht werden sollte. Auf den folgenden
                                                Seiten sehen wir, wie das Prinzip in JavaScript umgesetzt werden kann.
                                            </div>
                                        </lsx-card>
                                    </lsx-content>
                                </lsx-modal>
                            </div>
                        </lsx-card>
                    </lsx-col>
                </lsx-row>

                <lsx-row>
                    <lsx-col size="md-4" class="mb-3 mb-md-0">
                        <lsx-card title="Liskov Substitution" bold img="04-nodejs/solid3.jpg" class="h-100">
                            <div class="d-flex flex-column h-100">
                                <p class="flex-fill">
                                    Alle Implementierungen einer Schnittstelle sollten vergleichbares Verhalten zeigen und somit austauschbar sein.
                                </p>
                                <lsx-modal>
                                    <lsx-thumbnail>
                                        <a href="" onclick="event.preventDefault()">Erkl√§rung ‚Ä¶</a>
                                    </lsx-thumbnail>
                                    <lsx-content>
                                        <lsx-card title="Liskov Substitution" bold class="limited-width">
                                            <div class="overflow-auto markdown dhbw-justified">
                                                Alle Implementierungen einer Schnittstelle sollten vergleichbares Verhalten zeigen und somit austauschbar sein.
                                                {.lead}

                                                Ein Grundprinzip der Objekt-Orientierung lautet ‚ÄûProgrammiere gegen Schnittstellen
                                                und nicht gegen Implementierungen‚Äù. Damit ist gemeint, dass wenn es mehre Varianten
                                                derselben Sache geben kann, ben√∂tigt man eine Schnittstelle, die ihre Verwendung
                                                verallgemeinert. Beispiele hierf√ºr k√∂nnten sein:

                                                <lsx-ul>
                                                    <li>Mehrere Zahlungsarten in einem Webshop</li>
                                                    <li>Die verschiedenen Gegner in einem Computerspiel</li>
                                                    <li>Mehrere Request Handler in einer Express-Anwendung</li>
                                                    <li>etc.</li>
                                                </lsx-ul>

                                                Um ihre Verwendung zu vereinfachen, besitzen alle Varianten dieselbe Schnittstelle.
                                                Diese kann, wie in Java oder TypeScript, explizit durch eine Basisklasse oder ein
                                                Interface beschrieben werden oder, wie in JavaScript, eine implizite Konvention sein.
                                                Auf jeden Fall besitzen alle Varianten dieselbe Struktur, so dass sie beliebig austauschbar
                                                sind. Doch dabei gilt: Alle Varianten sollten sich grunds√§tzlich √§hnlich und nicht anders
                                                als durch die Schnittstelle angedeutet verhalten.

                                                Beispielsweise k√∂nnten die Enten in einer Ententeichsimulation schwimmen und
                                                schnattern. Man w√ºrde daher eine Schnittstelle `Ente` definieren und
                                                diese mehrfach ausprogrammieren, beispielsweise als `Stockente`, `Wildente` und
                                                `Schwan`. Aber nicht als `Pekingente`, da diese zwar gut schmeckt, aber eben nicht
                                                (mehr) schwimmt und schnattert. Und `DonaldDuck`, der ja bekanntlich l√§uft und spricht,
                                                statt zu schwimmen und zu schnattern, w√ºrde auch nicht so recht passen.
                                            </div>
                                        </lsx-card>
                                    </lsx-content>
                                </lsx-modal>
                            </div>
                        </lsx-card>
                    </lsx-col>

                    <lsx-col size="md-4" class="mb-3 mb-md-0">
                        <lsx-card title="Interface Segregation" bold img="04-nodejs/solid4.jpg" class="h-100">
                            <div class="d-flex flex-column h-100">
                                <p class="flex-fill">
                                    Die √∂ffentliche Schnittstelle einer Code-Einheit sollte m√∂glichst klein sein.
                                </p>
                                <lsx-modal>
                                    <lsx-thumbnail>
                                        <a href="" onclick="event.preventDefault()">Erkl√§rung ‚Ä¶</a>
                                    </lsx-thumbnail>
                                    <lsx-content>
                                        <lsx-card title="Interface Segregation" bold class="limited-width">
                                            <div class="overflow-auto">
                                                <div class="markdown dhbw-justified">
                                                    Die √∂ffentliche Schnittstelle einer Code-Einheit sollte m√∂glichst klein sein.
                                                    {.lead}
    
                                                    H√§ufig unterscheiden wir beim Programmieren zwischen der internen Implementierung
                                                    von etwas und seiner √∂ffentlichen Schnittstelle ‚Äì also, wie es an anderen Stellen
                                                    genutzt werden kann. In objekt-orientierten Programmiersprachen wird hierf√ºr oft
                                                    zwischen den privaten und √∂ffentlichen Eigenschaften einer Klasse unterschieden.
                                                    Doch auch, wenn wir nicht objekt-orientiert programmieren, k√∂nnen wir beispielsweise
                                                    in JavaScript entscheiden, welche Teile einer Quellcode-Datei wir exportieren und
                                                    somit f√ºr die √∂ffentliche Verwendung freigegeben werden und welche nicht. Diese 
                                                    explizit freigegebenen Teile nennen wir ‚ÄûSchnittstelle‚Äú.
    
                                                    Doch was ist eine gute Schnittstelle? Eine gute Schnittstelle ist die, die leicht
                                                    zu verstehen ist und nur schwer falsch verwendet werden kann. Hierf√ºr sollte die
                                                    Schnittstelle m√∂glichst klein und selbsterkl√§rend sein. Dabei sollte sie so gut
                                                    wie m√∂glich, die interne Implementierung verstecken und nur die absolut notwendigen
                                                    Dinge √∂ffentlich machen.
    
                                                    Schauen wir uns als Beispiel an, wie Request Handler in Express definiert werden.
                                                    Express bietet hierf√ºr eine genau definierte Schnittstelle, damit die Request Handler
                                                    beim Eintreffen einer HTTP-Anfrage vom Framework aufgerufen werden k√∂nnen. Die
                                                    Schnittstelle besteht aus einer einzelnen Callback-Funktion mit gerade mal zwei
                                                    Parametern: Request und Response. Ganz einfach, klar und verst√§ndlich.
                                                </div>
                                            </div>
                                        </lsx-card>
                                    </lsx-content>
                                </lsx-modal>
                            </div>
                        </lsx-card>
                    </lsx-col>

                    <lsx-col size="md-4" class="mb-3 mb-md-0">
                        <lsx-card title="Dependency Inversion" bold img="04-nodejs/solid5.jpg" class="h-100">
                            <div class="d-flex flex-column h-100">
                                <p class="flex-fill">
                                    Die Abh√§ngigkeiten im Quellcode sollten eine klare Struktur haben.
                                </p>
                                <lsx-modal>
                                    <lsx-thumbnail>
                                        <a href="" onclick="event.preventDefault()">Erkl√§rung ‚Ä¶</a>
                                    </lsx-thumbnail>
                                    <lsx-content>
                                        <lsx-card title="Dependency Inversion" bold class="limited-width">
                                            <div class="overflow-auto markdown dhbw-justified">
                                                Die Abh√§ngigkeiten im Quellcode sollten eine klare Struktur haben.
                                                {.lead}

                                                Um den Quellcode gr√∂√üerer Anwendungen √ºbersichtlich und leicht erweiterbar zu strukturieren, wird
                                                dieser gedanklich immer in mehrere Ebenen (auf Englisch auch Layer genannt) mit unterschiedlichen
                                                Abstraktionsniveaus unterteilt. Beispielsweise k√∂nnten wir in einer Webanwendung zwischen der
                                                grafischen Benutzeroberfl√§che, die rein f√ºr die Darstellung auf dem Bildschirm und die Verarbeitung
                                                von Benutzereingaben zust√§ndig ist, und den darunter liegenden Schichten zur Implementierung der
                                                fachlichen Anwendungsfunktionen unterscheiden.

                                                Serverseitige Webanwendungen werden daher oft wie folgt unterteilt:

                                                <lsx-ul>
                                                    <li><b>Controller:</b> Technisches HTTP-Handling</li>
                                                    <li><b>Services:</b> Fachliche Anwendungslogik</li>
                                                    <li><b>Model:</b> Datenverwaltung und Persistenz</li>
                                                </lsx-ul>

                                                Das Prinzip der Dependency Inversion besagt, dass hierbei eine klare Beziehung zwischen den Ebenen
                                                bestehen muss, in dem Sinne, dass h√∂here Ebenen die darunter liegenden Ebenen direkt ansprechen k√∂nnen,
                                                aber nicht umgekehrt. Allgemeinere Ebenen, wie das UI, d√ºrfen (und m√ºssen) von den darunter liegenden,
                                                konkreteren (auf kleine Aufgaben spezialisierten) Ebenen direkt abh√§ngig sein. Umgekehrt aber nicht.

                                                Beispielsweise darf in der Controller-Ebene ein Service aufgerufen werden, um als Reaktion auf einen
                                                HTTP-Request eine Anwendungsfunktion auszuf√ºhren. Der Service darf hierzu wiederum auf das Model zugreifen,
                                                um Daten zu lesen und zu schreiben. Aus dem Model heraus darf aber kein Code der Service- oder Controller-Ebene
                                                verwendet werden, da dies eine Abh√§ngigkeit in die andere Richtung schaffen w√ºrde (Dependency Inversion).
                                                Technisch gesehen w√ºrde der Quellcode zwar funktionieren, es aber sp√§ter aber kaum m√∂glich, beispielsweise
                                                ein zweites UI (zum Beispiel einer Mobile App) zu entwickeln, oder eine neue Datenbank anzubinden, da alle
                                                Ebenen von allen Ebenen abh√§ngig w√§ren.
                                            </div>
                                        </lsx-card>
                                    </lsx-content>
                                </lsx-modal>
                            </div>
                        </lsx-card>
                    </lsx-col>
                </lsx-row>
            </lsx-grid-fluid>

            <p>
                <small>
                    <small>
                        Bildnachweise:
                        <a href="https://pixabay.com/photos/sunset-field-tree-grass-grassland-6303965/" target="_blank">Pixabay: denfran</a>,
                        <a href="https://pixabay.com/photos/door-entrance-front-door-223399/" target="_blank">Pixabay: falco</a>,
                        <a href="https://pixabay.com/photos/pear-lightbulb-biogl%C3%BChbirne-idea-2264962/" target="_blank">Pixabay: adege</a>,
                        <a href="https://pixabay.com/photos/audio-interface-button-player-3673105/" target="_blank">Pixabay: D_Van_Rensburg</a>,
                        <a href="https://pixabay.com/photos/rope-sea-barcelona-port-harbor-1314964/" target="_blank">Pixabay: JeryG√≥recki</a>
                    </small>
                </small>
            </p>
        </div>
    </section>

    <section data-title="Zust√§ndigkeiten im Beispiel-Quellcode">
        <div class="limited-width flex-fill d-flex flex-column">
            <p class="mb-4" detail-content>
                Schauen wir uns nun den Quellcode aus den Videos einmal genauer an, um die Anwendung der
                SOLID-Prinzipien besser zu verstehen. Wir konzentrieren uns dabei nur auf die Datei
                <span class="fn">main.js</span> mit dem selbst-geschriebenen Quellcode und versuchen
                zun√§chst zu verstehen, welche ‚ÄûVerantwortlichkeiten‚Äú es hier gibt ‚Äì also, welche Dinge
                hier alle geschehen. Dies sind im n√§chsten Schritt gute Kandidaten f√ºr neue Quellcode-Dateien.
            </p>

            <ul class="list-unstyled">
                <li class="dhbw-fontsize-small">
                    <a hightlight="" onclick="solid_beispiel_zeilen_hervorheben(event)">
                        <span class="fw-bold">Bitte anklicken</span>
                    </a>
                </li>
                <li>
                    <a href="" highlight="[1,2], [14,27], [113,166]" onclick="solid_beispiel_zeilen_hervorheben(event)">
                        <span>Server konfigurieren und starten</span>
                    </a>
                </li>
                <li>
                    <a href="" highlight="[3,5], [29,43], [88,111]" onclick="solid_beispiel_zeilen_hervorheben(event)">
                        <span>Middleware-Funktionen registrieren</span>
                    </a>
                </li>
                <li>
                    <a href="" highlight="[47,57]" onclick="solid_beispiel_zeilen_hervorheben(event)">
                        <span>Hello-Anfragen bearbeiten</span>
                    </a>
                </li>
                <li>
                    <a href="" highlight="[7,8], [59,84]" onclick="solid_beispiel_zeilen_hervorheben(event)">
                        <span>Logbuch-Anfragen bearbeiten</span>
                    </a>
                </li>
            </ul>

            <script>
                window.solid_beispiel_zeilen_hervorheben = function(event) {
                    // Nicht weiter navigieren
                    event.preventDefault();

                    // Markierten Listeneintrag umschalten
                    let ulElement = event.target.closest("ul");
                    let aElement  = event.target.closest("a");

                    for (let aElement1 of ulElement.querySelectorAll("a")) {
                        aElement1.setAttribute("href", "");
                        aElement1.querySelector("span").classList.remove("fw-bold");
                    }

                    aElement.removeAttribute("href");
                    aElement.querySelector("span").classList.add("fw-bold");

                    // Code-Zeilen hervorheben
                    let highlights = JSON.parse(`[${aElement.getAttribute("highlight")}]`);
                    document.getElementById("solid-beispiel-code").highlightLines(highlights);
                }
            </script>

            <lsx-tab-pages>
                <lsx-tab-page title="main.js">
                    <style>
                        #solid-beispiel code {
                            overflow-x: unset;
                        }
                    </style>
        
                    <source-code language="javascript" id="solid-beispiel-code">
                        import dotenv         from "dotenv";
                        import express        from "express";
                        import logging        from "logging";
                        import path           from "node:path";
                        import process        from "node:process";
                        
                        import {db}           from "./database.js";
                        import {calcStarDate} from "./utils.js";
                        
                        console.log("Logbuch des Captains");
                        console.log("====================");
                        console.log();
                        
                        // Konfigurationswerte aus den Umgebungsvariablen des Betriebssystems einlesen.
                        // Alternativ aus der Datei .env, wenn einzelne Variablen im Betriebssystem nicht
                        // gesetzt sind.
                        dotenv.config();
                        
                        const config = {
                            port: process.env.LBDC_LISTEN_PORT || 9000,
                            host: process.env.LBDC_LISTEN_HOST || "",
                        };
                        
                        // Zentrales App-Objekt der Anwendung. Diesem Objekt sagen wir sp√§ter, auf welche
                        // HTTP-Anfragen wir reagieren k√∂nnen wollen und welche Antworten daraufhin an den
                        // Client zur√ºck geschickt werden.
                        const app = express();
                        
                        // Hilfsobjekt f√ºr sch√∂nere Log-Ausgaben
                        const logger = logging.default("main");

                        // Middleware-Funktion, die alle eingehenden HTTP-Anfragen auf der Konsole protokolliert.
                        app.use((req, res, next) => {
                            logger.info(`${req.method} ${req.originalUrl}`);
                            next();
                        });
                        
                        // Middleware zum Abruf statischer Dateien aus dem static-Verzeichnis
                        const staticDir = path.join(import.meta.dirname, "..", "static");
                        app.use(express.static(staticDir));
                        
                        // Middleware zum Verarbeiten von JSON-Daten
                        app.use(express.json());
                        
                        ///////////////////////////////////////////////////////////////////////////////////
                        
                        // Request Handler Funktion f√ºr GET /. Schickt einfach einen Hallo Welt String an
                        // den Client zur√ºck.
                        app.get("/api/hello", (req, res) => {
                            // throw new Error("Das hat leider nicht geklappt. Bitte morgen nochmal versuchen.");
                            const name = req.query.name || "Express";
                            res.status(200);
                            res.send({
                                "greeting": `Hallo ${name}!`,
                                "name": name,
                            });
                        });
                        
                        // Request Handler zum Abrufen aller Logbuch-Eintr√§ge
                        app.get("/api/logbook", (req, res) => {
                            res.status(200);    // Okay
                            res.send(db.data.LogEntries);
                        });
                        
                        // Request Handler zum Anlegen eines neuen Logbuch-Eintrags
                        app.post("/api/logbook", async (req, res) => {
                            // Pr√ºfen, ob der Client g√ºltige Daten gesendet hat
                            if (!req.body?.text) {
                                throw new Error("Bitte einen g√ºltigen Text eingeben!");
                            }
                        
                            // Neuen Eintrag im Logbuch speichern
                            const newEntry = {
                                starDate: calcStarDate(new Date()),
                                text:     req.body.text,
                            };
                        
                            db.data.LogEntries.push(newEntry);
                            await db.write();
                        
                            // Den neuen Eintrag an den Client zur√ºck schicken
                            res.status(201);    // Created
                            res.send(newEntry);
                        });
                        
                        ///////////////////////////////////////////////////////////////////////////////////
                        
                        // Error Handling Middleware: Stellt sicher, dass Fehler in einem einheitlichen
                        // JSON-Format an den Client gesendet werden. Weil Express von Haus aus den Stack
                        // Trace als Text senden w√ºrde.
                        //
                        // Gaaaaanz wichtig: Diese Middleware muss ganz zum Schluss nach allen anderen
                        // Middlewares und v.a. nach den Request Handlern registriert werden. Sonst w√ºrde
                        // sie bei einem Fehler gar nicht ausgef√ºhrt werden.
                        app.use((err, req, res, next) => {
                            // Fehler auf der Konsole protokollieren
                            logger.error(err);
                            console.log(err);
                        
                            // Fehler an den Client senden
                            res.status(500);    // Internal Server Error
                        
                            res.send({
                                "error": {
                                    "type": "TECHNICAL_ERROR",
                                    "message": err.message || "Es ist ein unbekannter Fehler aufgetreten.",
                                },
                            });
                        
                            next();
                        });
                        
                        // Server starten
                        app.listen(config.port, config.host, () => {
                            logger.info(`Der Server lauscht auf ${config.host}:${config.port}`);
                        });
                    </source-code>
                </lsx-tab-page>
            </lsx-tab-pages>
        </div>
    </section>

    <section data-title="Verbesserte Code-Struktur">
        <div class="w-100 d-flex gap-3 align-items-center mb-3">
            <lsx-github-edit url="Beispiele/Logbuch%20des%20Captains%20(erweiterte%20Code-Struktur)"></lsx-github-edit>
            <small class="fw-bold">Vollst√§ndiger Quellcode</small>
        </div>

        <div class="flex-fill d-flex flex-column flex-lg-row gap-3">
            <!-- Interaktive Grafik -->
            <div style="flex: 5;" class="h-100 border p-3">
                <div id="code-struktur-texte" class="mb-4">
                    <div class="d-flex flex-row justify-content-between dhbw-fontsize-small mb-4">
                        <div>
                            Schritt <span id="code-struktur-schritt">1</span> / 5
                        </div>
                        <div class="d-block d-lg-none">
                            Passender Quellcode siehe unten
                        </div>
                        <div class="d-none d-lg-block">
                            Passender Quellcode siehe rechts
                        </div>
                    </div>

                    <!-- Bild 1: Urspr√ºngliche Version -->
                    <div class="markdown active" step visible-tabs="1, 9, 10" goto-tab="1">
                        ![](04-nodejs/code-struktur-1.png){.d-block .w-100 .mb-4}

                        Bisher besteht der Server im Wesentlichen nur aus der Datei <span class="fn">main.js</span>,
                        in der sich fast der gesamte Anwendungscode befindet. Wie wir auf der letzten Seite gesehen
                        haben, k√ºmmert sich diese um folgende Dinge:

                        <lsx-ul>
                            <li>Server konfigurieren und starten</li>
                            <li>Middleware-Funktionen registrieren</li>
                            <li>Hello-Anfragen bearbeiten</li>
                            <li>Logbuch-Anfragen bearbeiten</li>
                        </lsx-ul>

                        Hinzu kommen die bereits vorgegebenen Dateien <span class="fn">database.js</span> und
                        <span class="fn">utils.js</span> f√ºr Datenbankzugriffe und allgemeine Hilfsfunktionen.
                        Immerhin das <b>Dependency Inversion Principle</b> wird schon eingehalten, weil die
                        <span class="fn">main.js</span> zwar auf anderen beiden zugreift, aber nicht umgekehrt.

                        In drei einfachen Schritten wollen wir die Code-Struktur nun verbessern. Klicke unten
                        auf weiter, um die erste √Ñnderung zu sehen.
                    </div>
    
                    <!-- Bild 2: HTTP-Handler separat -->
                    <div class="markdown hidden" step visible-tabs="2, 3, 9, 10" goto-tab="2">
                        ![](04-nodejs/code-struktur-2.png){.d-block .w-100 .mb-4}

                        Um eine bessere __Trennung der Verantwortlichkeiten__ zu erhalten, lagern wir die Request
                        Handler in eine neue Datei <span class="fn">controllers/index.js</span> aus, so dass
                        die <span class="fn">main.js</span> nur noch f√ºr Start und Konfiguration des Servers
                        sowie die Registrierung der Middleware-Funktionen zust√§ndig ist: 
                        
                        1. Express-App-Objekt erzeugen
                        1. Allgemeine Middlewares registrieren
                        1. Request Handler registrieren (ausgelagert)
                        1. Error Handling Middleware registrieren
                        1. Express-App starten

                        Dies stellt einen guten Kompromiss dar, weil ohne die Middlewares kaum noch Code √ºbrig bliebe,
                        die Reihenfolge der oben genannten Schritte entscheidend ist und die meisten Weiterentwicklungen
                        ohnehin bei den Request Handlern zu erwarten sind. Mit Ausnahme der Tatsache, dass der Server
                        noch keine [CORS](https://developer.mozilla.org/en-US/docs/Web/HTTP/Guides/CORS)-Middleware
                        besitzt, wird sich die <span class="fn">main.js</span> voraussichtlich nicht mehr √§ndern.

                        In Express gibt es eigentlich keine ‚ÄûController‚Äú. Der Begriff taucht aber in vielen anderen
                        Web Frameworks auf und kennzeichnet dort die Teile, die f√ºr die Bearbeitung der HTTP-Anfragen
                        verantwortlich sind. Dies wird durch den Verzeichnisnamen <span class="fn">controllers</span>
                        hier angedeutet.

                        Zus√§tzlich f√§llt auf, dass die Datei <span class="fn">controllers/index.js</span> eine Liste
                        mit Callback-Funktionen exportiert, die in der <span class="fn">main.js</span> der Reihe nach
                        aufgerufen werden. Dies nimmt teilweise schon die n√§chste √Ñnderung vorweg, dient haupts√§chlich
                        aber dazu, das __Offen/Geschlossen-Prinzip__ zu realisieren. Die <span class="fn">main.js</span>
                        muss dadurch nicht ver√§ndert werden, wenn neue Request Handler hinzugef√ºgt werden sollen.
                    </div>
    
                    <!-- Bild 3: Eigene Controller-Dateien -->
                    <div class="markdown hidden" step visible-tabs="2, 4, 5, 6, 9, 10" goto-tab="4">
                        ![](04-nodejs/code-struktur-3.png){.d-block .w-100 .mb-4}

                        Die letzte √Ñnderung hat zwar die __Trennung der Verantwortlichkeiten__ und auch die Einhaltung
                        des __Offen/Geschlossen-Prinzips__ verbessert. Ganz am Ende sind wir aber noch nicht. Zwar muss
                        die <span class="fn">main.js</span> bei einer Anpassung der Request Handler nicht mehr ver√§ndert
                        werden. Das Problem wurde aber nur in die Datei <span class="fn">controllers/index.js</span>,
                        die ja immer noch s√§mtliche Request Handler beinhaltet, verschoben.

                        In diesem Schritt lagern wie die Request Handler daher in eigene Dateien aus, wodurch sich
                        folgende Trennung ergibt:

                        * <span class="fn">controllers/hello.controller.js</span>: <br>
                          Request Handler f√ºr ‚ÄûHallo Welt‚Äú
                        
                        * <span class="fn">controllers/logbok.controller.js</span>: <br>
                          Request Handler f√ºr das Logbuch
                        
                        * <span class="fn">controllers/index.js</span>: <br>
                          Zusammenfassung aller Controller zu einer Liste
                        
                        Der Webservice kann dadurch viel einfacher um neue Funktionen erweitert werden. Sollen in einer
                        sp√§teren Version zum Beispiel zus√§tzlich Au√üenmissionen verwaltet werden, muss hierf√ºr lediglich
                        eine neue Controller-Datei angelegt und in die jetzt nur noch sehr kleine <span class="fn">controllers/index.js</span>
                        aufgenommen werden. Die notwendigen √Ñnderungen an bereits vorhandenem Quellcode werden dadurch
                        auf ein Minimum reduziert.

                        In den neuen Controller-Dateien sehen wir, dass es nur eine exportierte Funktion mit dem Namen
                        <src-code language="javascript">registerRoutes(app)</src-code> gibt. Die Dateien erf√ºllen damit
                        zus√§tzlich das __Interface Segregation Principle__, da sie eine m√∂glichst kleine, √∂ffentliche
                        Schnittstelle besitzen, die leicht zu verstehen und schwer falsch zu verwenden ist. Und da die
                        Funktion gem√§√ü ihrem Namen nichts anderes macht, au√üer Request Handler f√ºr weitere URL-Routen
                        zu registrieren, wird auch der __Liskov Substitution__ Gen√ºge getan.
                    </div>
    
                    <!-- Bild 4: Trennung von Controller und Services -->
                    <div class="markdown hidden" step visible-tabs="2, 4, 5, 7, 8, 9, 10" goto-tab="7">
                        ![](04-nodejs/code-struktur-4.png){.d-block .w-100 .mb-4}

                        Zum Schluss nehmen wir uns noch einmal die __Trennung der Verantwortlichkeiten__ vor und schauen
                        uns die neuen Controller-Dateien genauer an. Bisher haben wir ja nur den alten Code aus der Datei
                        <span class="fn">main.js</span> hin und her geschoben und anders verpackt. Innerhalb der Request
                        Handler m√ºssen jedoch zwei Dinge unterschieden werden:

                        <lsx-ul>
                            <li>
                                <p>
                                    <b>Technisches HTTP-Handling:</b> Alles was mit Express, HTTP-Anfragen, HTTP-Antworten,
                                    JSON-Codierung usw. zu tun hat
                                </p>
                            </li>
                            <li>
                                <p>
                                    <b>Fachliche Logik:</b> Alles nicht-technische, was mit dem eigentlichen Benutzeranliegen
                                    zu tun hat. Ganz unabh√§ngig davon, auf welchem Wege die Anforderung den Server erreicht
                                    (der Server k√∂nnte sp√§ter beispielsweise noch andere Protokolle wie
                                    <a href="https://grpc.io/" target="_blank">gRPC</a> unterst√ºtzen) und auf welche Art
                                    das Ergebnis zum Client kommt.
                                </p>
                            </li>
                        </lsx-ul>

                        F√ºr das ‚ÄûHallo Welt‚Äú Beispiel lohnt sich der Aufwand nicht. Beim Logbuch-Controller ziehen wir jedoch
                        die fachliche Logik in eine neue Datei mit dem Pfad <span class="fn">services/logbook.service.js</span>
                        raus, die somit beispielsweise in mehreren Controllern genutzt werden kann. Die Fachlogik kann dadurch
                        aber auch einfacher in [Unit Tests](https://de.wikipedia.org/wiki/Modultest){target=_blank} getestet
                        oder bei einem kompletten Wechsel des Kommunikationsprotokolls beibehalten werden.

                        <lsx-info-box title="Wichtig">
                            Der Begriff ‚ÄûService‚Äú bezieht sich hier nicht darauf, dass wir einen Webservice programmieren.
                            Stattdessen haben wir uns hier wieder der Begriffswelt anderer Frameworks bedient, bei denen
                            Services die Fachlogik einer Anwendung kapseln.
                        </lsx-info-box>
                    </div>
                    
                    <!-- Bild 5: Ausblick -->
                    <div class="markdown hidden" step visible-tabs="2, 4, 5, 7, 8, 9, 10" goto-tab="2">
                        ##### Ausblick {.dhbw-lightblue}

                        Die SOLID-Prinzipien anzuwenden ist nicht immer leicht und es gibt auch kein Geheimrezept hierf√ºr.
                        Am ehesten k√∂nnen sie als Leitgedanken zur Code-Struktur verstanden werden, √ºber die es sich lohnt,
                        intensiv nachzudenken. In drei einfachen Schritten konnten wir die Struktur des Fallbeispiels dadurch
                        wesentlich tragf√§higer machen. Der Code ist einfacher zu pflegen und typische Weiterentwicklungen
                        (insb. das Hinzuf√ºgen weiterer Request Handler) k√∂nnen leichter durchgef√ºhrt werden, ohne alte Funktionen
                        kaputt zu machen.

                        W√ºrde man den Webservice aber tats√§chlich um weitere Entit√§ten wie Au√üenmissionen, Crew-Mitglieder
                        etc. erweitern, w√ºrde sich schnell ein weiteres Problem bemerkbar machen: __Code-Duplizierung__. Denn
                        die Controller und Services zur Umsetzung der typischen CRUD-Funktionen (Create, Read, Update und Delete)
                        w√ºrden sehr wahrscheinlich nahezu den gleichen Quellcode minus ganz weniger Unterschiede hinsichtlich
                        der jeweiigen Entit√§t beinhalten.

                        Hier k√∂nnten objekt-orientierte Designprinzipien wie die [GoF-Entwurfsmuster](https://de.wikipedia.org/wiki/Entwurfsmuster_(Buch))
                        helfen, um sich wiederholende Code-Abschnitte beispielsweise in eine Basisklasse auszulagern.
                        Auch hier gilt: Viele Wege f√ºhren nach Rom! Und der Vorteil an einer Stelle bedeutet immer einen
                        Nachteil an einer anderen Stelle. Das ist der Grund, warum gute Software so schwer zu entwerfen ist.
                        Aber gleichzeitig auch, warum es so lohnenswert ist.

                        Gib daher niemals auf, nach der besten L√∂sung zu suchen. Die SOLID-Prinzipien, Entwurfsmuster
                        und Architekturmuster geben dir hierf√ºr ein Vokabular und erprobte Werkzeuge an die Hand.
                    </div>
                </div>

                <!-- Steuerelemente -->
                <div id="code-struktur-links" class="d-flex flex-column flex-lg-row gap-lg-3 justify-content-center">
                    <a class="goto-next" onclick="codeStruktur_onclick(event)">
                        N√§chster Schritt
                    </a>

                    <div class="dhbw-border" style="border-width: 0; border-right-width: 1px;"></div>

                    <a class="goto-prev disabled" onclick="codeStruktur_onclick(event)">
                        Vorheriger Schritt
                    </a>
                    
                    <div class="dhbw-border" style="border-width: 0; border-right-width: 1px;"></div>
                    
                    <a class="goto-start disabled" onclick="codeStruktur_onclick(event)">
                        Nochmal von vorne
                    </a>
                </div>

                <script>
                    window.codeStruktur_onclick = function(event) {
                        event.preventDefault();
                        if (event.target.classList.contains("disabled")) return;
                        
                        let texteParent = document.getElementById("code-struktur-texte");
                        let linksParent = document.getElementById("code-struktur-links");
                        let tabsParent  = document.getElementById("code-struktur-tabs");
                        let schrittSpan = document.getElementById("code-struktur-schritt");

                        let gotoNext    = linksParent.querySelector(".goto-next");
                        let gotoPrev    = linksParent.querySelector(".goto-prev");
                        let gotoStart   = linksParent.querySelector(".goto-start");

                        // Sichtbaren Erkl√§rungstext umschalten
                        let allSteps    = [...texteParent.querySelectorAll("[step]")];
                        let activeStep  = texteParent.querySelector(".active");
                        let activeIndex = allSteps.indexOf(activeStep);
                        
                        activeStep.classList.remove("active");
                        activeStep.classList.add("hidden");

                        if (event.target === gotoNext)       activeIndex++;
                        else if (event.target === gotoPrev)  activeIndex--;
                        else if (event.target === gotoStart) activeIndex = 0;

                        if (activeIndex < 0) activeIndex = allSteps.length - 1;
                        else if (activeIndex >= allSteps.length) activeIndex = 0;

                        activeStep = allSteps[activeIndex];
                        activeStep.classList.add("active");
                        activeStep.classList.remove("hidden");

                        schrittSpan.textContent = activeIndex + 1;
                        window.scrollTo(0, 0);

                        // Steuerelemente aktualisieren
                        gotoNext.classList.add("disabled");
                        gotoPrev.classList.add("disabled");
                        gotoStart.classList.add("disabled");

                        if (activeIndex < (allSteps.length - 1)) {
                            gotoNext.classList.remove("disabled");
                        }

                        if (activeIndex > 0) {
                            gotoPrev.classList.remove("disabled");
                            gotoStart.classList.remove("disabled");
                        }

                        // Quellcode-Tabreiter ein- und ausblenden
                        let visibleTabs = (activeStep.getAttribute("visible-tabs") || "").split(",").map(entry => parseInt(entry.trim()));
                        let gotoTabNr   = parseInt(activeStep.getAttribute("goto-tab") || 0);

                        for (let tabNumber = 1; tabNumber <= tabsParent.lsxNumberPages; tabNumber++) {
                            if (visibleTabs.includes(tabNumber)) tabsParent.lsxEnableTab(tabNumber);
                            else tabsParent.lsxDisableTab(tabNumber, false);
                        }

                        if (gotoTabNr) tabsParent.lsxGotoTab(gotoTabNr);
                    }
                </script>
            </div>
    
            <!-- Quellcode-Tabreiter -->
            <div style="flex: 7;">
                <lsx-tab-pages id="code-struktur-tabs" class="border h-100">
                    <!-- Tab 1: main.js - Urspr√ºngliche Version -->
                    <lsx-tab-page title="main.js">
                        <lsx-info-box class="markdown mb-4">
                            <span class="dhbw-gray">Projektverzeichnis</span> /
                            <span class="fn">main.js</span> (urspr√ºngliche Version)
                            {.dhbw-fontsize-small .fw-bold}
    
                            Dies ist der Quellcode aus den Videos vor Anwendung der SOLID-Prinzipien. Mit Ausnahme der
                            bereits vorgegebenen Dateien befindet sich der gesamte Code in einer Datei, wobei wir schon
                            auf der vorherigen Seite gesehen haben, dass hier einige Dinge vermischt werden.
                            {.mb-0}
                        </lsx-info-box>
                        <source-code language="javascript">
                            import dotenv         from "dotenv";
                            import express        from "express";
                            import logging        from "logging";
                            import path           from "node:path";
                            import process        from "node:process";
                            
                            import {db}           from "./database.js";
                            import {calcStarDate} from "./utils.js";
                            
                            console.log("Logbuch des Captains");
                            console.log("====================");
                            console.log();
                            
                            // Konfigurationswerte aus den Umgebungsvariablen des Betriebssystems einlesen.
                            // Alternativ aus der Datei .env, wenn einzelne Variablen im Betriebssystem nicht
                            // gesetzt sind.
                            dotenv.config();
                            
                            const config = {
                                port: process.env.LBDC_LISTEN_PORT || 9000,
                                host: process.env.LBDC_LISTEN_HOST || "",
                            };
                            
                            // Zentrales App-Objekt der Anwendung. Diesem Objekt sagen wir sp√§ter, auf welche
                            // HTTP-Anfragen wir reagieren k√∂nnen wollen und welche Antworten daraufhin an den
                            // Client zur√ºck geschickt werden.
                            const app = express();
                            
                            // Hilfsobjekt f√ºr sch√∂nere Log-Ausgaben
                            const logger = logging.default("main");
    
                            // Middleware-Funktion, die alle eingehenden HTTP-Anfragen auf der Konsole protokolliert.
                            app.use((req, res, next) => {
                                logger.info(`${req.method} ${req.originalUrl}`);
                                next();
                            });
                            
                            // Middleware zum Abruf statischer Dateien aus dem static-Verzeichnis
                            const staticDir = path.join(import.meta.dirname, "..", "static");
                            app.use(express.static(staticDir));
                            
                            // Middleware zum Verarbeiten von JSON-Daten
                            app.use(express.json());
                            
                            ///////////////////////////////////////////////////////////////////////////////////
                            
                            // Request Handler Funktion f√ºr GET /. Schickt einfach einen Hallo Welt String an
                            // den Client zur√ºck.
                            app.get("/api/hello", (req, res) => {
                                // throw new Error("Das hat leider nicht geklappt. Bitte morgen nochmal versuchen.");
                                const name = req.query.name || "Express";
                                res.status(200);
                                res.send({
                                    "greeting": `Hallo ${name}!`,
                                    "name": name,
                                });
                            });
                            
                            // Request Handler zum Abrufen aller Logbuch-Eintr√§ge
                            app.get("/api/logbook", (req, res) => {
                                res.status(200);    // Okay
                                res.send(db.data.LogEntries);
                            });
                            
                            // Request Handler zum Anlegen eines neuen Logbuch-Eintrags
                            app.post("/api/logbook", async (req, res) => {
                                // Pr√ºfen, ob der Client g√ºltige Daten gesendet hat
                                if (!req.body?.text) {
                                    throw new Error("Bitte einen g√ºltigen Text eingeben!");
                                }
                            
                                // Neuen Eintrag im Logbuch speichern
                                const newEntry = {
                                    starDate: calcStarDate(new Date()),
                                    text:     req.body.text,
                                };
                            
                                db.data.LogEntries.push(newEntry);
                                await db.write();
                            
                                // Den neuen Eintrag an den Client zur√ºck schicken
                                res.status(201);    // Created
                                res.header("location", `/api/logbook/${result.startdate}`);
                                res.send(newEntry);
                            });
                            
                            ///////////////////////////////////////////////////////////////////////////////////
                            
                            // Error Handling Middleware: Stellt sicher, dass Fehler in einem einheitlichen
                            // JSON-Format an den Client gesendet werden. Weil Express von Haus aus den Stack
                            // Trace als Text senden w√ºrde.
                            //
                            // Gaaaaanz wichtig: Diese Middleware muss ganz zum Schluss nach allen anderen
                            // Middlewares und v.a. nach den Request Handlern registriert werden. Sonst w√ºrde
                            // sie bei einem Fehler gar nicht ausgef√ºhrt werden.
                            app.use((err, req, res, next) => {
                                // Fehler auf der Konsole protokollieren
                                logger.error(err);
                                console.log(err);
                            
                                // Fehler an den Client senden
                                res.status(500);    // Internal Server Error
                            
                                res.send({
                                    "error": {
                                        "type": "TECHNICAL_ERROR",
                                        "message": err.message || "Es ist ein unbekannter Fehler aufgetreten.",
                                    },
                                });
                            
                                next();
                            });
                            
                            // Server starten
                            app.listen(config.port, config.host, () => {
                                logger.info(`Der Server lauscht auf ${config.host}:${config.port}`);
                            });
                        </source-code>
                    </lsx-tab-page>
    
                    <!-- Tab 2: main.js - Request Handler ausgelagert -->
                    <lsx-tab-page title="main.js" hidden>
                        <lsx-info-box class="markdown mb-4">
                            <span class="dhbw-gray">Projektverzeichnis</span> /
                            <span class="fn">main.js</span> (angepasst)
                            {.dhbw-fontsize-small .fw-bold}
    
                            Diese Version enh√§lt keine Request Handler mehr. Alles andere wurde beibehalten,
                            weil Konfiguration und Start des Servers ohnehin nur wenige Zeilen umfassen und
                            die Middlewares teilweise vor und teilweise nach den Request Handlern registriert
                            werden m√ºssen. Die angepassten Zeilen sind farblich hervorgehoben.
                            {.mb-0}
                        </lsx-info-box>
                        <source-code language="javascript" highlight="7, [44, 47]">
                            import dotenv         from "dotenv";
                            import express        from "express";
                            import logging        from "logging";
                            import path           from "node:path";
                            import process        from "node:process";
                            
                            import controllers    from "./controllers/index.js";
                            
                            console.log("Logbuch des Captains");
                            console.log("====================");
                            console.log();
                            
                            // Konfigurationswerte aus den Umgebungsvariablen des Betriebssystems einlesen.
                            // Alternativ aus der Datei .env, wenn einzelne Variablen im Betriebssystem nicht
                            // gesetzt sind.
                            dotenv.config();
                            
                            const config = {
                                port: process.env.LBDC_LISTEN_PORT || 9000,
                                host: process.env.LBDC_LISTEN_HOST || "",
                            };
                            
                            // Zentrales App-Objekt der Anwendung. Diesem Objekt sagen wir sp√§ter, auf welche
                            // HTTP-Anfragen wir reagieren k√∂nnen wollen und welche Antworten daraufhin an den
                            // Client zur√ºck geschickt werden.
                            const app = express();
                            
                            // Hilfsobjekt f√ºr sch√∂nere Log-Ausgaben
                            const logger = logging.default("main");
    
                            // Middleware-Funktion, die alle eingehenden HTTP-Anfragen auf der Konsole protokolliert.
                            app.use((req, res, next) => {
                                logger.info(`${req.method} ${req.originalUrl}`);
                                next();
                            });
                            
                            // Middleware zum Abruf statischer Dateien aus dem static-Verzeichnis
                            const staticDir = path.join(import.meta.dirname, "..", "static");
                            app.use(express.static(staticDir));
                            
                            // Middleware zum Verarbeiten von JSON-Daten
                            app.use(express.json());
                            
                            // Request Handler in den Controller-Dateien registrieren
                            for (let controller of controllers) {
                                controller(app);
                            }
                            
                            // Error Handling Middleware: Stellt sicher, dass Fehler in einem einheitlichen
                            // JSON-Format an den Client gesendet werden. Weil Express von Haus aus den Stack
                            // Trace als Text senden w√ºrde.
                            //
                            // Gaaaaanz wichtig: Diese Middleware muss ganz zum Schluss nach allen anderen
                            // Middlewares und v.a. nach den Request Handlern registriert werden. Sonst w√ºrde
                            // sie bei einem Fehler gar nicht ausgef√ºhrt werden.
                            app.use((err, req, res, next) => {
                                // Fehler auf der Konsole protokollieren
                                logger.error(err);
                                console.log(err);
                            
                                // Fehler an den Client senden
                                res.status(500);    // Internal Server Error
                            
                                res.send({
                                    "error": {
                                        "type": "TECHNICAL_ERROR",
                                        "message": err.message || "Es ist ein unbekannter Fehler aufgetreten.",
                                    },
                                });
                            
                                next();
                            });
                            
                            // Server starten
                            app.listen(config.port, config.host, () => {
                                logger.info(`Der Server lauscht auf ${config.host}:${config.port}`);
                            });
                        </source-code>
                    </lsx-tab-page>
    
                    <!-- Tab 3: controllers/index.js -->
                    <lsx-tab-page title="index.js" hidden>
                        <lsx-info-box class="markdown mb-4">
                            <span class="dhbw-gray">Projektverzeichnis</span> /
                            <span class="fn">controllers</span> /
                            <span class="fn">index.js</span> (erster Versuch)
                            {.dhbw-fontsize-small .fw-bold}
    
                            Die angepasste Datei <span class="fn">main.js</span> importiert von hier ein Array mit Callback-Funktionen,
                            die zum richtigen Zeitpunkt aufgerufen werden, um die Request Handler des Webservices zu registrieren.
                            Die Idee dahinter ist, dass die <span class="fn">main.js</span> nicht angepasst werden muss, wenn in einer
                            sp√§teren Version neue Request Handler hinzu kommen, oder alte ausgetauscht werden. Gleichzeitig erlaubt
                            der Callback-Mechanismus den vollen Zugriff auf das Express-App-Objekt.
                            {.mb-0}
                        </lsx-info-box>
                        <source-code language="javascript" highlight="8, 24, [55, 58]">
                            import {db}           from "../database.js";
                            import {calcStarDate} from "../utils.js";
    
                            /**
                             * HTTP Request Handler f√ºr ‚ÄûHallo Welt‚Äú registrieren
                             * @param {Express.App} app Express-App Objekt
                             */
                            function helloController(app) {
                                // Request Handler Funktion f√ºr GET /. Schickt einfach einen Hallo Welt String an
                                // den Client zur√ºck. Hierhin verschoben aus der `main.js`.
                                app.get("/api/hello", (req, res) => {
                                    // throw new Error("Das hat leider nicht geklappt. Bitte morgen nochmal versuchen.");
                                    const name = req.query.name || "Express";
    
                                    res.status(200);
                                    res.send({"greeting": `Hallo ${name}!` "name": name});
                                });
                            }
    
                            /**
                             * HTTP Request Handler f√ºr Logbuch-Eintr√§ge registrieren
                             * @param {Express.App} app Express-App Objekt
                             */
                            function logbookController(app) {
                                // Request Handler zum Abrufen aller Logbuch-Eintr√§ge.
                                // Hierhin verschoben aus der `main.js`.
                                app.get("/api/logbook", (req, res) => {
                                    res.status(200);    // Okay
                                    res.send(db.data.LogEntries);
                                });
                                
                                // Request Handler zum Abrufen aller Logbuch-Eintr√§ge.
                                // Hierhin verschoben aus der `main.js`.
                                app.post("/api/logbook", async (req, res) => {
                                    // Pr√ºfen, ob der Client g√ºltige Daten gesendet hat
                                    if (!req.body?.text) {
                                        throw new Error("Bitte einen g√ºltigen Text eingeben!");
                                    }
                                
                                    // Neuen Eintrag im Logbuch speichern
                                    const newEntry = {
                                        starDate: calcStarDate(new Date()),
                                        text:     req.body.text,
                                    };
                                
                                    db.data.LogEntries.push(newEntry);
                                    await db.write();
                                
                                    // Den neuen Eintrag an den Client zur√ºck schicken
                                    res.status(201);    // Created
                                    res.send(newEntry);
                                });
                            }
    
                            export default [
                                helloController,
                                logbookController,
                            ];
                        </source-code>
                    </lsx-tab-page>
    
                    <!-- Tab 4: controllers/index.js - Finale Version -->
                    <lsx-tab-page title="index.js" hidden>
                        <lsx-info-box class="markdown mb-4">
                            <span class="dhbw-gray">Projektverzeichnis</span> /
                            <span class="fn">controllers</span> /
                            <span class="fn">index.js</span> (fertige Version)
                            {.dhbw-fontsize-small .fw-bold}
    
                            Diese stark verk√ºrzte Version lagert die Request Handler in jeweils eigene, Controller genannte,
                            Code-Dateien aus. Auf diese Weise k√∂nnen neue Controller durch Hinzuf√ºgen zwei weiterer Zeilen
                            ganz einfach hinzugef√ºgt werden, ohne die viel gr√∂√üere Datei <span class="fn">main.js</span>
                            modifizieren zu m√ºssen. Zwar muss auch hier der vorhandene Quellcode ver√§ndert werden. Die Datei
                            ist aber so kompakt, dass man dabei kaum etwas falsch machen kann.
                            {.mb-0}
                        </lsx-info-box>
                        <source-code language="javascript">
                            import helloController   from "./hello.controller.js";
                            import logbookController from "./logbook.controller.js";
                            
                            export default [
                                helloController,
                                logbookController,
                            ];
                        </source-code>
                    </lsx-tab-page>
    
                    <!-- Tab 5: controllers/hello.controller.js -->
                    <lsx-tab-page title="hello.controller.js" hidden>
                        <lsx-info-box class="markdown mb-4">
                            <span class="dhbw-gray">Projektverzeichnis</span> /
                            <span class="fn">controllers</span> /
                            <span class="fn">hello.controller.js</span>
                            {.dhbw-fontsize-small .fw-bold}
    
                            Diese Datei zeigt einen einfachen HTTP-Controller, dessen einzige Aufgabe darin besteht,
                            einen Request Handler f√ºr den in den Videos gezeigten ‚ÄûHallo Welt‚Äú Endpunkt zu registrieren.
                            Wie man sieht, ist an einem Controller nichts besonderes dran, au√üer der Funktion
                            `registerRoutes(app)`, die in der Datei <span class="fn">main.js</span> aufgerufen wird.
                            {.mb-0}
                        </lsx-info-box>
                        <source-code language="javascript" highlight="[1,7]">
                            /**
                             * HTTP Request Handler registrieren
                             * @param {Express.App} app Express-App Objekt
                             */
                            export default function registerRoutes(app) {
                                app.get("/api/hello", sayHello);
                            }
                            
                            /**
                             * Begr√º√üung an den Client senden. √úber den URL-Parameter "name" kann der Client
                             * optional einen zu gr√º√üenden Namen √ºbergeben.
                             */
                            export function sayHello(req, res) {
                                const name = req.query.name || "Express";
                            
                                res.status(200);
                                res.send({"greeting": `Hallo ${name}!`, "name": name});
                            }
                        </source-code>
                    </lsx-tab-page>

                    <!-- Tab 6: controllers/logbook.controller.js (vorl√§ufig) -->
                    <lsx-tab-page title="logbook.controller.js" hidden>
                        <lsx-info-box class="markdown">
                            <span class="dhbw-gray">Projektverzeichnis</span> /
                            <span class="fn">controllers</span> /
                            <span class="fn">logbook.controller.js</span> (erste Version)
                            {.dhbw-fontsize-small .fw-bold}
    
                            Diese Datei stellt einen HTTP-Controller f√ºr Logbuch-Eintr√§ge zur Verf√ºgung,
                            indem die entsprechenden Request Handler in der Express-App registriert werden.
                            {.mb-0}
                        </lsx-info-box>
                        <source-code language="javascript" highlight="[4,13]">
                            import {db}           from "../database.js";
                            import {calcStarDate} from "../utils.js";
                            
                            /**
                             * HTTP Request Handler registrieren
                             * @param {Express.App} app Express-App Objekt
                             */
                            export default function registerRoutes(app) {
                                app.get("/api/logbook", search);
                                app.post("/api/logbook", create);
                            
                                // HINWEIS: Echte REST-Webservices haben noch mehr Endpunkte
                            }
                            
                            /**
                             * Logbuch-Eintr√§ge suchen
                             */
                            async function search(req, res) {
                                res.status(200);    // Okay
                                res.send(db.data.LogEntries);
                            }
                            
                            /**
                             * Neuen Logbuch-Eintrag schreiben
                             */
                            async function create(req, res) {
                                // Pr√ºfen, ob der Client g√ºltige Daten gesendet hat
                                if (!req.body?.text) {
                                    throw new Error("Bitte einen g√ºltigen Text eingeben!");
                                }
                            
                                // Neuen Eintrag im Logbuch speichern
                                const newEntry = {
                                    starDate: calcStarDate(new Date()),
                                    text:     req.body.text,
                                };
                            
                                db.data.LogEntries.push(newEntry);
                                await db.write();
                            
                                // Den neuen Eintrag an den Client zur√ºck schicken
                                res.status(201);    // Created
                                res.header("location", `/api/logbook/${result.startdate}`);
                                res.send(newEntry);
                            }                           
                        </source-code>
                    </lsx-tab-page>

                    <!-- Tab 7: controllers/logbook.controller.js (nur HTTP-Handling) -->
                    <lsx-tab-page title="logbook.controller.js" hidden>
                        <lsx-info-box class="markdown">
                            <span class="dhbw-gray">Projektverzeichnis</span> /
                            <span class="fn">controllers</span> /
                            <span class="fn">logbook.controller.js</span> (nur HTTP-Handling)
                            {.dhbw-fontsize-small .fw-bold}
    
                            Diese Datei stellt einen HTTP-Controller f√ºr Logbuch-Eintr√§ge zur Verf√ºgung,
                            indem die entsprechenden Request Handler in der Express-App registriert werden.
                            {.mb-0}
                        </lsx-info-box>
                        <lsx-info-box type="critical" class="mb-4">
                            Es handelt sich hierbei lediglich um die technische Ebene, auf der HTTP-Anfragen
                            empfangen und beantwortet werden. Die davon unabh√§ngige Fachlogik befindet sich in
                            einer getrennten Service-Datei.
                        </lsx-info-box>
                        <source-code language="javascript" highlight="[1,2], [19,20], [30,31]">
                            import {searchLogEntries} from "../services/logbook.service.js";
                            import {saveNewLogEntry}  from "../services/logbook.service.js";
                            
                            /**
                             * HTTP Request Handler registrieren
                             * @param {Express.App} app Express-App Objekt
                             */
                            export default function registerRoutes(app) {
                                app.get("/api/logbook", search);
                                app.post("/api/logbook", create);
                            
                                // HINWEIS: Echte REST-Webservices haben noch mehr Endpunkte
                            }
                            
                            /**
                             * Logbuch-Eintr√§ge suchen
                             */
                            async function search(req, res) {
                                // Neue Funktion f√ºr die fachliche Logik
                                let result = await searchLogEntries(req.query.q);
                            
                                res.status(200);    // Okay
                                res.send(result);
                            }
                            
                            /**
                             * Neuen Logbuch-Eintrag schreiben
                             */
                            async function create(req, res) {
                                // Neue Funktion f√ºr die fachliche Logik
                                let result = await saveNewLogEntry(req.body);
                            
                                res.status(201);    // Created
                                res.header("location", `/api/logbook/${result.startdate}`);
                                res.send(result);
                            }                           
                        </source-code>
                    </lsx-tab-page>
        
                    <!-- Tab 8: services/logbook.service.js - Finale Version -->
                    <lsx-tab-page title="logbook.service.js" hidden>
                        <lsx-info-box class="markdown mb-4">
                            <span class="dhbw-gray">Projektverzeichnis</span> /
                            <span class="fn">services</span> /
                            <span class="fn">logbook.service.js</span> (fertige Version)
                            {.dhbw-fontsize-small .fw-bold}
    
                            Diese Datei beinhaltet die fachliche Anwendungslogik zur Verwaltung von Logbuch-Eintr√§gen.
                            Hier werden Eintr√§ge aus der Datenbank gelesen oder dort abgespeichert. Es finden sich
                            aber keine Spuren von Express oder dem darauf aufbauenden REST-Webservice, um die
                            Wiederverwendbarkeit der Datei sicherzustellen.
                            {.mb-0}
                        </lsx-info-box>
                        <source-code language="javascript" highlight="9, 27">
                            import {db}           from "../database.js";
                            import {calcStarDate} from "../utils.js";
                            
                            /**
                             * Business Logik zum Suchen von Logbuch-Eintr√§gen.
                             * @param {String} query Suchbegriff
                             * @returns {Array} Gefundene Eintr√∂ge
                             */
                            export async function searchLogEntries(query) {
                                let result = [];
                            
                                for (let logEntry of db.data.LogEntries) {
                                    if (!query || logEntry.text?.includes(query)) {
                                        result.push(logEntry);
                                    }
                                }
                            
                                return result;
                            }
                            
                            /**
                             * Neuen Eintrag im Logbuch speichern.
                             * @param {Object} entry Zu speicherender Eintrag
                             * @returns {Object} Gespeicherter Eintrag
                             * @throws {Error} Fehlende oder ung√ºltige Daten
                             */
                            export async function saveNewLogEntry(entry) {
                                // √úbergebenen Datensatz auf Plausibilit√§t pr√ºfen
                                if (!entry?.text) {
                                    throw new Error("Bitte einen g√ºltigen Text eingeben!");
                                }
                            
                                // Neuen Eintrag im Logbuch speichern
                                const newEntry = {
                                    starDate: calcStarDate(new Date()),
                                    text:     entry.text,
                                };
                            
                                db.data.LogEntries.push(newEntry);
                                await db.write();
                            
                                // Gespeicherten Eintrag zur√ºckgeben
                                return newEntry;
                            }                           
                        </source-code>
                    </lsx-tab-page>
    
                    <!-- Tab 9: database.js -->
                    <lsx-tab-page title="database.js">
                        <lsx-info-box class="markdown mb-4">
                            <span class="dhbw-gray">Projektverzeichnis</span> /
                            <span class="fn">database.js</span>
                            {.dhbw-fontsize-small .fw-bold}
    
                            Diese Datei erm√∂glicht den h√∂heren Schichten den direkten Zugriff auf eine Datenbank,
                            in der die Daten des Webservices gespeichert werden. Normalerweise w√ºrde man hier eine
                            Verbindung zu einer echten Datenbank wie [MariaDB](https://mariadb.org/){target=_blank},
                            [Postgres](https://www.postgresql.org/){target=_blank} oder [MongoDB](https://www.mongodb.com/){target=_blank}
                            herstellen. Um aber keinen Datenbank-Server einrichten zu m√ºssen, weichen wir hier auf
                            das Paket [lowdb](https://www.npmjs.com/package/lowdb){target=_blank} aus.
                            {.mb-0}
                        </lsx-info-box>
                        <!-- &ZeroWidthSpace; um einen Bug in highlight.js zu umgehen -->
                        <source-code language="javascript" highlight="[18,19]">
                            import {JSON&ZeroWidthSpace;FilePreset} from "lowdb/node";
    
                            // Default-Daten f√ºr unsere kleine Datenbank
                            const defaultData = {
                                LogEntries: [
                                    {
                                        "starDate": "49762.3",
                                        "text": "Die Crew hat erfolgreich eine neue Klasse-M-Welt kartografiert."
                                    },
                                    {
                                        "starDate": "49812.7",
                                        "text": "Ein unbekanntes Signal aus dem Delta-Quadranten erreicht uns."
                                    },
                                    // Weitere Beispiel-Datens√§tze ‚Ä¶
                                ],
                            };
                            
                            // Datenbank-Objekt als Singleton
                            export const db = await JSON&ZeroWidthSpace;FilePreset("db.json", defaultData);                            
                        </source-code>
                    </lsx-tab-page>
    
                    <!-- Tab 10: utils.js -->
                    <lsx-tab-page title="utils.js">
                        <lsx-info-box class="markdown mb-4">
                            <span class="dhbw-gray">Projektverzeichnis</span> /
                            <span class="fn">utils.js</span>
                            {.dhbw-fontsize-small .fw-bold}
    
                            Diese Datei beinhaltet allgemeine Hilfsfunktionen, die an allen Stellen innerhalb des
                            Quellcodes verwendet werden k√∂nnen. Denkbar w√§re auch, eine eigene solche Datei in
                            jedem Unterverzeichnis anzulegen oder gar ein eigenes Verzeichnis daraus zu machen.
                            Hier gen√ºgt aber eine einzelne Datei, da sie aktuell ohnehin nur eine Funktion besitzt.
                            {.mb-0}
                        </lsx-info-box>
                        <source-code language="javascript" highlight="8">
                            /**
                             * Hilfsfunktion zur Berechnung der aus Star Trek bekannten Sternzeit zu einem gegebenen
                             * Datum mit Uhrzeit.
                             * 
                             * @param {Date} date Umzurechnendes Datum und Uhrzeit
                             * @returns {string} Sternzeit
                             */
                            export function calcStarDate(date) {
                                const startYear = 1973;
                                const year      = date.getFullYear();
                                
                                const firstDay  = new Date(year, 0, 0);
                                const diff      = date - firstDay;
                                const oneDay    = 1000 * 60 * 60 * 24;
                                const dayOfYear = Math.floor(diff / oneDay);
                                
                                const timeOfDay = dayOfYear + (date.getHours() / 24)
                                                            + (date.getMinutes() / 1440)
                                                            + (date.getSeconds() / 86400);
    
                                const starDate  = 1000 * (year - startYear) + timeOfDay;
                                return `${starDate.toFixed(2)}`;
                            }
                        </source-code>
                    </lsx-tab-page>
                </lsx-tab-pages>
            </div>
        </div>
    </section>
</section>

<section data-title="√úbungsaufgaben" data-background-color="rgb(231, 221, 141)">
    <section data-title="Aufgabe 1: Ein kleines Express-Quiz">
        <article>
            <lsx-tab-pages>
                <lsx-tab-page title="Aufgabe 1.1">
                     <lsx-quiz>
                        <lsx-exercise title="Allgemeines zu Express">
                            <lsx-question type="single-choice" text="a) Um welche Art von Web Framework handelt es sich bei Express?">
                                <lsx-question-line>
                                    <lsx-answer correct>Clientseitiges Framework</lsx-answer>
                                    <lsx-answer>Serverseitiges Framework</lsx-answer>
                                    <lsx-answer>Full-Stack Framework</lsx-answer>
                                </lsx-question-line>
                            </lsx-question>

                            <lsx-question type="multiple-choice" text="b) Welches sind typische Funktionen von Frameworks wie Express?">
                                <lsx-answer>Gemeinsame Codebasis f√ºr Client und Server</lsx-answer>
                                <lsx-answer>Entwicklung eigener HTML-Komponenten</lsx-answer>
                                <lsx-answer>Clientseitiges URL-Routing</lsx-answer>
                                <lsx-answer correct>Routing und URL-Handling</lsx-answer>
                                <lsx-answer>HTML-Hydration vom Server zum Client</lsx-answer>
                                <lsx-answer correct>HTML-Rendering mit Templates</lsx-answer>
                                <lsx-answer correct>Session-Verwaltung</lsx-answer>
                                <lsx-answer>Aufruf serverseitiger Funktionen im Client</lsx-answer>
                            </lsx-question>

                            <lsx-question type="single-choice" text="c) Mit welchen Vorteilen hebt sich Express von anderen Frameworks ab?">
                                <lsx-answer>Das Framework ist besonders performant.</lsx-answer>
                                <lsx-answer correct>Das Framework ist sehr leichtgewichtig.</lsx-answer>
                                <lsx-answer correct>Das Framework kann sehr flexibel genutzt werden.</lsx-answer>
                                <lsx-answer>Das Framework f√∂rdert einen objekt-orientierten Programmierstil.</lsx-answer>
                            </lsx-question>
                        </lsx-exercise>                        
                     </lsx-quiz>
                </lsx-tab-page>

                <lsx-tab-page title="Aufgabe 1.2">
                    <lsx-quiz>
                        <lsx-exercise title="Erste Schritte mit Express">
                            <lsx-question type="single-choice" text="a) Mit welchem Befehl wird Express einem Projekt hinzugef√ºgt?">
                                <lsx-question-line>
                                    <lsx-answer><code>npm init</code></lsx-answer>
                                    <lsx-answer><code>npm require express</code></lsx-answer>
                                    <lsx-answer correct><code>npm add express@next</code></lsx-answer>
                                </lsx-question-line>
                            </lsx-question>

                            <lsx-question type="multiple-choice" text="b) Welche Aufgaben hat das App-Objekt einer Express-Anwendung?">
                                <lsx-answer correct>Es beinhaltet die technische Implementierung des HTTP-Servers.</lsx-answer>
                                <lsx-answer correct>Es √∂ffnet einen Server-Socket, mit dem sich Clients verbinden k√∂nnen.</lsx-answer>
                                <lsx-answer correct>Es h√§lt den Node.js-Prozess am Laufen.</lsx-answer>
                                <lsx-answer>Es protokolliert alle HTTP-Anfragen auf der Konsole.</lsx-answer>
                            </lsx-question>

                            <lsx-question type="single-choice" text="c) Was bewirkt der Aufruf von <src-code language='javascript'>app.listen(8888)</src-code> in Express?">
                                <lsx-answer>Der Prozess reagiert f√ºr 8888 Sekunden auf Client-Anfragen.</lsx-answer>
                                <lsx-answer>Der Prozess reagiert 8888 mal auf Client-Anfragen.</lsx-answer>
                                <lsx-answer correct>Der Prozess lauscht auf Port 8888 nach Client-Anfragen.</lsx-answer>
                            </lsx-question>

                            <lsx-question type="single-choice" text="d) Was ist ein Graceful Shutdown?">
                                <lsx-answer correct>Ein Ende des Servers, bei dem laufende Anfragen noch zu Ende bearbeitet werden</lsx-answer>
                                <lsx-answer>Ein Absturz des Servers wegen einer nicht abgefangenen Ausnahme</lsx-answer>
                                <lsx-answer>Ein fehlerfreies Ende des Servers ohne Fehler oder Warnungen</lsx-answer>
                            </lsx-question>

                            <lsx-question type="multiple-choice" text="e) Wie wird ein Graceful Shutdown f√ºr Express programmiert?">
                                <lsx-answer>Abfangen und Protokollieren aller Ausnahmen</lsx-answer>
                                <lsx-answer correct>Abfangen der Signale <code>SIGINT</code> und <code>SIGTERM</code></lsx-answer>
                                <lsx-answer>Abschicken der restlichen HTTP-Antworten</lsx-answer>
                                <lsx-answer correct>Schlie√üen des Servers mit der <code>close()</code>-Methoode</lsx-answer>
                            </lsx-question>
                        </lsx-exercise>
                    </lsx-quiz>
                </lsx-tab-page>

                <lsx-tab-page title="Aufgabe 1.3">
                    <lsx-quiz>
                        <lsx-exercise title="Request Handler">
                            <lsx-question type="single-choice" text="a) Welche der folgenden URLs enth√§lt Query-Parameter?">
                                <lsx-answer><span class="dhbw-tt">https://beispiel.de/</span></lsx-answer>
                                <lsx-answer><span class="dhbw-tt">https://beispiel.de/api/hello</span></lsx-answer>
                                <lsx-answer><span class="dhbw-tt">https://beispiel.de/api/hello/Dana</span></lsx-answer>
                                <lsx-answer correct><span class="dhbw-tt">https://beispiel.de/api/hello?name=Dana</span></lsx-answer>
                            </lsx-question>

                            <lsx-question type="single-choice" text="b) Wie k√∂nnen Query-Parameter in Express abgefragt werden?">
                                <lsx-answer correct>Als Attribute des Objekts <code>req.query</code></lsx-answer>
                                <lsx-answer>Als Attribute des Objekts <code>req.param</code></lsx-answer>
                                <lsx-answer>Als Eintr√§ge des Arrays <code>req.urlParams</code></lsx-answer>
                            </lsx-question>

                            <lsx-question type="single-choice" text="c) Welche Syntax definiert in Express einen Platzhalter im URL-Pfad?">
                                <lsx-answer><span class="dhbw-tt">/api/hello/{name}</span></lsx-answer>
                                <lsx-answer correct><span class="dhbw-tt">/api/hello/:name</span></lsx-answer>
                                <lsx-answer><span class="dhbw-tt">/api/hello/?name</span></lsx-answer>
                            </lsx-question>

                            <lsx-question type="single-choice" text="d) Welche Syntax definiert einen Request Handler in Express?">
                                <lsx-answer>
                                    <src-code language="javascript">app.handle("/api/hello", function(req, res) { ‚Ä¶ });</src-code>
                                </lsx-answer>
                                <lsx-answer>
                                    <src-code language="javascript">app.use("/api/hello", class C extends HTTPHandler { ‚Ä¶ });</src-code>
                                </lsx-answer>
                                <lsx-answer correct>
                                    <src-code language="javascript">app.get("/api/hello", function(req, res) { ‚Ä¶ });</src-code>
                                </lsx-answer>
                            </lsx-question>

                            <lsx-question type="gap-text" mode="source-code" text="e) Vervollst√§ndige den Quellcode entsprechend der eingebauten Kommentare.">
                                // App-Objekt erzeugen
                                import express from "express";
                                let app = <lsx-gap answer="express"></lsx-gap>();
                                &nbsp;

                                // GET-Anfragen an Pfad /api/songs bearbeiten
                                app.<lsx-gap answer="get"></lsx-gap>("<lsx-gap answer="/api/songs" ignore-case></lsx-gap>", (req, res) => {
                                    // Daten einlesen, Status-Code setzen und Ergebnis an den Client schicken
                                    let <lsx-gap answer="result"></lsx-gap> = getAllSongs();
                                    app.<lsx-gap answer="status"></lsx-gap>(200);
                                    app.<lsx-gap answer="send"></lsx-gap>(result);
                                });
                                &nbsp;

                                app.listen(8888);
                            </lsx-question>
                        </lsx-exercise>
                     </lsx-quiz>
                </lsx-tab-page>

                <lsx-tab-page title="Aufgabe 1.4">
                    <lsx-quiz>
                        <lsx-exercise title="Middleware-Funktionen">
                            <lsx-question type="single-choice" text="a) Was ist eine Middleware-Funktion in Express?">
                                <lsx-answer correct>Eine Funktion, die f√ºr jede HTTP-Anfrage ausgef√ºhrt wird</lsx-answer>
                                <lsx-answer>Eine Funktion zur Bearbeitung von <span class="dhbw-tt">GET</span>-Anfragen</lsx-answer>
                                <lsx-answer>Eine Funktion f√ºr die Benutzerauthentifizierung und Autorisierung</lsx-answer>
                            </lsx-question>

                            <lsx-question type="single-choice" text="b) Mit welcher Methode des App-Objekts werden Middlewares registriert?">
                                <lsx-question-line>
                                    <lsx-answer><code>set()</code></lsx-answer>
                                    <lsx-answer><code>get()</code></lsx-answer>
                                    <lsx-answer correct><code>use()</code></lsx-answer>
                                    <lsx-answer><code>call()</code></lsx-answer>
                                </lsx-question-line>
                            </lsx-question>

                            <lsx-question type="single-choice" text="c) Warum ist die Reihenfolge bei der Registrierung von Middlewares entscheidend?">
                                <lsx-answer>Weil parallel eintreffende HTTP-Anfragen sonst in der falschen Reihenfolge bearbeitet werden</lsx-answer>
                                <lsx-answer correct>Weil Middlewares und Request Handler in der Reihenfolge ihrer Registrierung ausgef√ºhrt werden</lsx-answer>
                                <lsx-answer>Die Reihenfolge ist nur f√ºr Error Handling Middlewares wichtig</lsx-answer>
                            </lsx-question>

                            <lsx-question type="single-choice" text="d) Was passiert, wenn innerhalb einer Middleware die <code>next()</code>-Funktion nicht aufgerufen wird?">
                                <lsx-answer>Nichts passiert. Die aktuelle HTTP-Anfrage wird korrekt zu Ende bearbeitet.</lsx-answer>
                                <lsx-answer correct>Nachfolgende Middlewares und der Request Handler werden nicht aufgerufen.</lsx-answer>
                                <lsx-answer>Nachfolgende Middlewares und der Request Handler werden in der falschen Reihenfolge aufgerufen.</lsx-answer>
                                <lsx-answer>Die Anfrage wird zu Ende bearbeitet, es fehlen aber die Daten im HTTP Response Body.</lsx-answer>
                            </lsx-question>

                            <lsx-question type="single-choice" text="e) Eine HTTP-Antwort kann nach Aufruf der <code>next()</code>-Funktion nicht ver√§ndert werden.">
                                <lsx-question-line>
                                    <lsx-answer correct>Wahr</lsx-answer>
                                    <lsx-answer>Falsch</lsx-answer>
                                </lsx-question-line>
                            </lsx-question>

                            <lsx-question type="single-choice" text="f) Eine Error Handling Middleware sollte immer ganz zum Schluss registriert werden.">
                                <lsx-question-line>
                                    <lsx-answer correct>Wahr</lsx-answer>
                                    <lsx-answer>Falsch</lsx-answer>
                                </lsx-question-line>
                            </lsx-question>
                        </lsx-exercise>
                    </lsx-quiz>
                </lsx-tab-page>

                <lsx-tab-page title="Aufgabe 1.5">
                    <lsx-quiz>
                        <lsx-exercise title="Die SOLID-Design-Prinzipien">
                            <lsx-question type="single-choice" text="a) Bei den SOLID-Prinzipien handelt es sich um die bekannten Entwurfsmuster der Gang of Four.">
                                <lsx-question-line>
                                    <lsx-answer>Wahr</lsx-answer>
                                    <lsx-answer correct>Falsch</lsx-answer>
                                </lsx-question-line>
                            </lsx-question>

                            <lsx-question type="multiple-choice" text="b) Welche der folgenden Beispiele sind SOLID-Design-Prinzipien?">
                                <lsx-answer>Singleton</lsx-answer>
                                <lsx-answer correct>Single Responsibility</lsx-answer>
                                <lsx-answer correct>Offen/Geschlossen-Prinzip</lsx-answer>
                                <lsx-answer>Lisa Simpson Substitution</lsx-answer>
                                <lsx-answer correct>Interface Segregation</lsx-answer>
                                <lsx-answer>Dependency Injection</lsx-answer>
                            </lsx-question>

                            <lsx-question type="single-choice" text="c) Was ist mit der Trennung von Verantwortlichkeiten gemeint?">
                                <lsx-answer>Jede Code-Einheit sollte m√∂glichst wenige Zeilen besitzen.</lsx-answer>
                                <lsx-answer>Jede Code-Einheit sollte sich √§hnlich die meisten anderen Code-Stellen verhalten.</lsx-answer>
                                <lsx-answer correct>Jede Code-Einheit sollte genau eine klar definierte Aufgabe erf√ºllen.</lsx-answer>
                                <lsx-answer>Jede Code-Einheit sollte klare Abh√§ngigkeiten zu anderen Code-Einheiten haben.</lsx-answer>
                            </lsx-question>

                            <lsx-question type="single-choice" text="d) Welche Aussage beschreibt das Offen/Geschlossen-Prinzip?">
                                <lsx-answer correct>Der Quellcode sollte f√ºr Erweiterungen offen aber f√ºr Ver√§nderungen geschlossen sein.</lsx-answer>
                                <lsx-answer>Der Quellcode sollte f√ºr Ver√§nderungen offen aber f√ºr Erweiterungen geschlossen sein.</lsx-answer>
                                <lsx-answer>Der Quellcode sollte f√ºr Erweiterungen und Ver√§nderungen entweder offen oder geschlossen sein.</lsx-answer>
                            </lsx-question>
                            
                            <lsx-question type="multiple-choice" text="e) Warum sollte die √∂ffentliche Schnittstelle einer Code-Einheit m√∂glichst klein sein?">
                                <lsx-answer correct>Damit sie m√∂glichst selbsterkl√§rend und leicht zu nutzen ist.</lsx-answer>
                                <lsx-answer correct>Damit sie weniger M√∂glichkeiten f√ºr eine falsche Benutzungen bietet.</lsx-answer>
                                <lsx-answer>Damit sie weniger Angriffsfl√§che f√ºr potentielle Angreifer bietet.</lsx-answer>
                                <lsx-answer>Weil kleine Schnittstellen ein besseres Laufzeitverhalten bieten.</lsx-answer>
                            </lsx-question>

                            <lsx-question type="single-choice" text="f) In welchem der folgenden F√§lle wird gegen das Dependency Inversion Principle versto√üen?">
                                <lsx-answer>Quellcode A importiert eine Funktion aus B</lsx-answer>
                                <lsx-answer>Quellcode A importiert eine Funktion aus B und B eine Funktion aus C</lsx-answer>
                                <lsx-answer>Quellcode A importiert Funktionen sowohl aus B und C</lsx-answer>
                                <lsx-answer correct>Quellcode A importert eine Funktion aus B,  B aus C, und C aus A</lsx-answer>
                            </lsx-question>
                        </lsx-exercise>                        
                     </lsx-quiz>
                </lsx-tab-page>

                <lsx-tab-page title="Aufgabe 1.6">
                    <lsx-quiz>
                        <lsx-exercise title="Strukturierung des Quellcodes">
                            <lsx-question type="single-choice" text="a) Welche Aufgabe haben die Controller in g√§ngigen Web Frameworks?">
                                <lsx-answer>Die implementieren das HTML-Rendering.</lsx-answer>
                                <lsx-answer correct>Sie implementieren das technische HTTP-Handling.</lsx-answer>
                                <lsx-answer>Sie implementieren die fachliche Anwendungslogik.</lsx-answer>
                                <lsx-answer>Die implementieren das Datenmodell.</lsx-answer>
                            </lsx-question>

                            <lsx-question type="single-choice" text="b) Welche Aufgabe haben die Services in g√§ngigen Web Frameworks?">
                                <lsx-answer>Die implementieren das HTML-Rendering.</lsx-answer>
                                <lsx-answer>Sie implementieren das technische HTTP-Handling.</lsx-answer>
                                <lsx-answer correct>Sie implementieren die fachliche Anwendungslogik.</lsx-answer>
                                <lsx-answer>Die implementieren das Datenmodell.</lsx-answer>
                            </lsx-question>

                            <lsx-question type="single-choice" text="c) In der Beispielanwendung rufen die Services Funktionen der Controller auf.">
                                <lsx-question-line>
                                    <lsx-answer>Wahr</lsx-answer>
                                    <lsx-answer correct>Falsch</lsx-answer>
                                </lsx-question-line>
                            </lsx-question>

                            <lsx-question type="single-choice" text="d) Die Programmierung mit Express erfolgt bevorzugt mit Klassen und Vererbung.">
                                <lsx-question-line>
                                    <lsx-answer>Wahr</lsx-answer>
                                    <lsx-answer correct>Falsch</lsx-answer>
                                </lsx-question-line>
                            </lsx-question>
                        </lsx-exercise>
                    </lsx-quiz>
                </lsx-tab-page>
            </lsx-tab-pages>
        </article>
        <aside>
            <p>
                Inzwischen solltest du dich in Express schon sehr gut zurecht finden. Dieses
                Quiz hilft dir, die wichtigsten Punkte zu wiederholen. üéì
            </p>
            <img src="shared/quiz.png" class="img-fluid d-block" style="max-width: 20em;"/>
            <p>
                <small>
                    Bildnachweis:
                    <a href="https://pixabay.com/illustrations/quiz-tiles-letters-red-game-test-2058883/" target="_blank">Pixabay: 905513</a>
                </small>
            </p>
        </aside>
    </section>

    <section data-title="Aufgabe 2: Planet Express">
        <article>
            <lsx-github-edit
                class        = "mb-3"
                url          = "Aufgaben/Planet%20Express/Aufgabe"
                download     = "Aufgaben/Planet%20Express"
            >
            </lsx-github-edit>
            
            <p>
                Lege ein neues Node.js-Projekt an und √ºbernehme hierf√ºr die letzte Version des Logbuch-Beispiels aus diesem Kapitel.
                Achte darauf, die Version zu nehmen, bei der die SOLID-Prinzipien vollst√§ndig eingehalten werden. Die statischen Dateien
                f√ºr die Single Page App musst du nicht √ºbernehmen, da wir hier nur den Webservice programmieren wollen. Programmiere
                das Beispiel anschlie√üend so um, dass folgende Daten √ºber den Webservice abgerufen und angelegt werden k√∂nnen. Bei
                der konkreten Umsetzung des Datenmodells hast du freie Wahl.
            </p>
            <img src="04-nodejs/planet-express-datenmodell.png" alt="Datenmodell" class="d-block mw-100 mt-4 mb-4 m-auto" style="width: 50em;">
            <p>
                Folgende HTTP-Endpunkte soll der Webservice besitzen. Teste ihre Funktion mit einem HTTP-Testwerkzeug
                wie <a href="https://httpie.io/" target="_blank">httpie</a>.
            </p>

            <div class="d-flex flex-column flex-md-row gap-3">
                <lsx-card title="Lieferungen" bold class="flex-fill">
                    <lsx-card-body class="p-0">
                        <table class="table">
                            <tbody>
                                <tr>
                                    <td class="dhbw-tt dhbw-lightblue">GET</td>
                                    <td class="dhbw-tt">/api/parcel</td>
                                    <td>Eine Liste abrufen</td>
                                </tr>
                                <tr>
                                    <td class="dhbw-tt dhbw-lightblue">GET</td>
                                    <td class="dhbw-tt">/api/parcel/<span class="red">:id</span></td>
                                    <td>Details eines Eintrags abrufen</td>
                                </tr>
                                <tr>
                                    <td class="dhbw-tt dhbw-lightblue">POST</td>
                                    <td class="dhbw-tt">/api/parcel</td>
                                    <td>Neuen Eintrag anlegen</td>
                                </tr>
                            </tbody>
                        </table>
                    </lsx-card-body>
                </lsx-card>

                <lsx-card title="Frachtfl√ºge" bold class="flex-fill">
                    <lsx-card-body class="p-0">
                        <table class="table">
                            <tbody>
                                <tr>
                                    <td class="dhbw-tt dhbw-lightblue">GET</td>
                                    <td class="dhbw-tt">/api/flight</td>
                                    <td>Eine Liste abrufen</td>
                                </tr>
                                <tr>
                                    <td class="dhbw-tt dhbw-lightblue">GET</td>
                                    <td class="dhbw-tt">/api/flight/<span class="red">:id</span></td>
                                    <td>Details eines Eintrags abrufen</td>
                                </tr>
                                <tr>
                                    <td class="dhbw-tt dhbw-lightblue">POST</td>
                                    <td class="dhbw-tt">/api/flight</td>
                                    <td>Neuen Eintrag anlegen</td>
                                </tr>
                            </tbody>
                        </table>
                    </lsx-card-body>
                </lsx-card>
            </div>
        </article>
        <aside>
            <p>
                Programmieren lernt man nur durch √úbung. In dieser Aufgabe kannst du deshalb
                das zuvor Gelernte praktisch anwenden und vertiefen. Viel Spa√ü dabei. üôÇ
            </p>
            <img src="shared/github_atom.png" class="img-fluid d-block"/>
            <p>
                <small>
                    Bildnachweis:
                    <a href="https://atom.io/" target="_blank">Atom Webseite</a>
                </small>
            </p>
            <lsx-youtube video="xncmm-KAWGo"></lsx-youtube>
        </aside>
    </section>
</section>

<!-- =============== -->
<!-- Gruppenarbeiten -->
<!-- =============== -->
<section data-use-template="teilkapitel" data-titel="Gruppenarbeiten"></section>

<section data-title="Aufgabe 1: Wir spielen LEGO" data-background-color="rgb(179, 202, 223)">
    <article>
        <lsx-ul class="mb-4">
            <li>
                Wie immer setzen wir uns in kleinen Gruppen um eine Tischinsel zusammen.
            </li>
            <li>
                Jede Person bekommt einen Beutel mit 48 LEGO-Teilen (das sog. <i>Window Exploration Bag</i>).
            </li>
            <li>
                Mit diesem sollen in der vorgegebenen Zeit die unten stehenden Auftr√§ge gebaut werden.
            </li>
            <li>
                Die Ergebnisse besprechen wir zusammen und teilen sie auf einer interaktiven Fotowand.
            </li>
        </lsx-ul>

        <lsx-tab-pages class="mb-0">
            <lsx-tab-page title="1) Warm-Up">
                <table class="table mb-4">
                    <tbody>
                        <tr>
                            <th scope="row" style="width: 7em;">Bauauftrag:</th>
                            <td>Bauen Sie einen Turm</td>
                        </tr>
                        <tr>
                            <th scope="row">Arbeitsform:</th>
                            <td>Einzelarbeit</td>
                        </tr>
                        <tr>
                            <th scope="row">Zeitdauer:</th>
                            <td>2 Minuten</td>
                        </tr>
                    </tbody>
                </table>
                <img src="04-nodejs/lego-turm.jpg" alt="" class="d-block mw-100 mx-auto" style="width: 40em;">
            </lsx-tab-page>

            <lsx-tab-page title="2) Metaphern">
                <table class="table mb-4">
                    <tbody>
                        <tr>
                            <th scope="row" style="width: 7em;">Bauauftrag:</th>
                            <td>Bauen Sie ein verteiltes System</td>
                        </tr>
                        <tr>
                            <th scope="row">Arbeitsform:</th>
                            <td>Einzelarbeit</td>
                        </tr>
                        <tr>
                            <th scope="row">Zeitdauer:</th>
                            <td>2 Minuten</td>
                        </tr>
                    </tbody>
                </table>
                <img src="04-nodejs/lego-verteiltes-system.jpg" alt="" class="d-block mw-100 mx-auto" style="width: 20em;">
            </lsx-tab-page>

            <lsx-tab-page title="3) Storytelling">
                <table class="table mb-4">
                    <tbody>
                        <tr>
                            <th scope="row" style="width: 7em;">Bauauftrag:</th>
                            <td>Bauen Sie einen Webservice</td>
                        </tr>
                        <tr>
                            <th scope="row">Arbeitsform:</th>
                            <td>Einzelarbeit</td>
                        </tr>
                        <tr>
                            <th scope="row">Zeitdauer:</th>
                            <td>2 Minuten</td>
                        </tr>
                    </tbody>
                </table>
                <img src="04-nodejs/lego-webservice.svg" alt="" class="d-block mw-100 mx-auto" style="width: 50em;">
            </lsx-tab-page>
        </lsx-tab-pages>

        <small>
            <small>
                Bildnachweise:
                <a href="https://geek-and-poke.com/geekandpoke/2012/3/3/thank-god-not-everything-is-software.html" target="_blank">Geek &amp; Poke: March 3, 2012</a>,
                <a href="https://geek-and-poke.com/geekandpoke/2009/11/2/enterprise-architecture-made-easy-part-1.html" target="_blank">Geek &amp; Poke: November 2, 2009</a>
            </small>
        </small>
    </article>
    <aside>
        <p>
            LEGO<sup>¬Æ</sup> ‚Äì Wer hat nicht als Kind damit gespielt? Seit 1958 gibt es diese bunten Bricks
            (so hei√üen die Bausteine offiziell) schon, von denen sich Sch√§tzungen zufolge ca. 700 Milliarden üòµ‚Äçüí´
            St√ºck im Umlauf befinden. Statistisch gesehen besitzt daher jeder Mensch ca. 94 LEGO-Teile.
            Das Besondere daran ist die ‚ÄûHand-Hirn-Verbindung‚Äù, die durch LEGO-Bauen aktiviert wird und ca. 80%
            der Nervenverbindungen im Gehirn ausmacht. Diese f√∂rdert vor allem das kreative Denken, welches im
            Alltag oft unter geht. Mit <a href="https://legoinhe.de/" target="_blank">LEGO<sup>¬Æ</sup> Serious Play<sup>¬Æ</sup></a>
            k√∂nnen wir davon auch in der Vorlesung profitieren. üëç
        </p>
        <img src="04-nodejs/lego-bricks.png" class="img-fluid d-block" style="width: 15em;"/>
        <p>
            <small>
                Bildnachweis:
                <a href="https://pixabay.com/photos/toys-lego-bricks-lego-bricks-5993703/" target="_blank">pixabay: TheresaMuth</a>
            </small>
        </p>

        <div class="d-none d-lg-block position-fixed bottom-0 start-0 p-3">
            <img src="04-nodejs/lego-fotowand-qrcode.png" alt="" class="d-block" style="max-width: 100%; width: 12em;">
            <a href="https://app.kululu.com/k1px41" target="_blank">Link zur Fotowand</a>
        </div>
        <div class="d-block d-lg-none">
            <a href="https://app.kululu.com/k1px41" target="_blank">Link zur Fotowand</a>
        </div>
    </aside>
</section>

<section data-title="Aufgabe 2: Personen im Weltall" data-background-color="rgb(179, 202, 223)">
    <article>
        <div class="markdown mb-4">
            Auf GitHub gibt es immer wieder ‚ÄûAwesome ‚Ä¶‚Äù genannte Listen mit interessanten Links.
            Eine solche Liste ist [awesome-json-datasets](https://github.com/jdorfman/awesome-json-datasets){target="_blank"},
            die eine ganze Menge frei verf√ºgbarer √ºber HTTP abrufbare Daten im JSON-Format auflistet.
            Das Besondere daran ist, dass die Abrufe ohne Benutzerauthenfizierung funktionieren. Perfekt
            geeignet also, um unsere ersten Erfahrungen mit Node.js damit zu machen.
        </div>

        <lsx-ul emoji="üìä" class="mb-4">
            <li>
                Schlie√üt euch ein kleine Gruppen zusammen und setzt euch an eine Tischinsel.
            </li>
            <li>
                Durchsucht die Liste auf GitHub und sucht euch eine interessante Datenquelle heraus.
            </li>
            <li>
                Arbeitet dann die Seiten im Skript unter dem Kapitel ‚ÄûBackendseitiges JavaScript‚Äú gemeinsam durch.
            </li>
            <li>
                Macht insbesondere alle Schritte auf einem Laptop mit entwickelt das vorgestellte Beispielprogramm.
            </li>
            <li>
                Passt das Programm dabei aber so an, dass ihr statt der ‚ÄûPersonen im Weltall‚Äú eure eigenen Daten verwendet.
            </li>
            <li>
                Das Ergebnis besprechen wir sp√§ter im Kurs.
            </li>
        </lsx-ul>
        

        <lsx-grid-fluid class="p-0">
            <lsx-row>
                <lsx-col size="sm">
                    <img src="04-nodejs/space1.jpg" alt="" class="d-block img-thumbnail w-100 h-100">
                </lsx-col>
                <lsx-col size="sm">
                    <img src="04-nodejs/space2.jpg" alt="" class="d-block img-thumbnail w-100 h-100">
                </lsx-col>
                <lsx-col size="sm">
                    <img src="04-nodejs/space3.jpg" alt="" class="d-block img-thumbnail w-100 h-100">
                </lsx-col>
            </lsx-row>
        </lsx-grid-fluid>
        <small>
            <small>
                Bildnachweise:
                <a href="https://pixabay.com/illustrations/astronaut-weightless-space-universe-1784245/" target="_blank">Pixabay</a>,
                <a href="https://pixabay.com/illustrations/ai-generated-astronaut-cosmonaut-9248643/" target="_blank">Pixabay: YolGezer</a>,
                <a href="https://pixabay.com/illustrations/spaceship-space-station-space-7839420/" target="_blank">Pixabay: JuliusH</a>
            </small>
        </small>
    </article>
    <aside>
        <p>
            Auch diese Stunde wollen wir wieder eine Gruppenarbeit machen, in der ihr euch eigenst√§ndig
            mit einem Thema besch√§ftigt. Dieses mal geht es um die Grundlagen mit Node.js, so wie sie
            weiter vorne im Skript beschrieben werden. Viel Erfolg dabei. üöÄ
        </p>
        <img src="shared/books.svg" class="img-fluid d-block" style="width: 15em;"/>
        <p>
            <small>
                Bildnachweis:
                <a href="https://pixabay.com/vectors/books-literature-pile-study-2022464/" target="_blank">pixabay: OpenClipart-Vectors</a>
            </small>
        </p>
    </aside>
</section>

<section data-title="Aufgabe 3: Logbuch des Captains" data-background-color="rgb(179, 202, 223)">
    <article>
        <lsx-github-edit
            class        = "mb-3"
            url          = "Aufgaben/Logbuch%20des%20Captains/Aufgabe"
            download     = "Aufgaben/Logbuch%20des%20Captains"
        >
        </lsx-github-edit>

        <p class="mb-4">
            Diese Aufgabe bearbeiten wir gemeinsam im Kurs. Wir schauen uns zusammen an, wie serverseitige
            Webanwendungen mit Express entwickelt werden k√∂nnen und schreiben dabei auch schon unseren
            ersten eigenen Webservice.
        </p>

        <lsx-grid-fluid class="p-0">
            <lsx-row>
                <lsx-col size="md">
                    <!-- <lsx-modal-image src="04-nodejs/aufgabe-logbuch2.png" caption="JSON-Daten"></lsx-modal-image> -->
                    <lsx-modal>
                        <lsx-thumbnail class="mw-100">
                            <img src="04-nodejs/aufgabe-logbuch2.png" class="d-block h-100 mw-100 dhbw-thumbnail p-1"/>
                            <span class="lsx-modal-image-thumbnail">JSON-Daten des Webservices</span>
                        </lsx-thumbnail>
                        <lsx-content>
                            <img src="04-nodejs/aufgabe-logbuch2.png" class="img-responsive img-thumbnail"/>
                        </lsx-content>
                    </lsx-modal>
        
                </lsx-col>
                <lsx-col size="md">
                    <lsx-modal>
                        <lsx-thumbnail class="mw-100">
                            <img src="04-nodejs/aufgabe-logbuch3.png" class="d-block h-100 mw-100 dhbw-thumbnail p-1"/>
                            <span class="lsx-modal-image-thumbnail">Logausgaben des HTTP-Servers</span>
                        </lsx-thumbnail>
                        <lsx-content>
                            <img src="04-nodejs/aufgabe-logbuch3.png" class="img-responsive img-thumbnail"/>
                        </lsx-content>
                    </lsx-modal>
                </lsx-col>
            </lsx-row>
            <lsx-row>
                <lsx-col>
                    <lsx-modal>
                        <lsx-thumbnail class="mw-100">
                            <img src="04-nodejs/aufgabe-logbuch1.jpg" class="d-block h-100 mw-100 dhbw-thumbnail p-1"/>
                            <span class="lsx-modal-image-thumbnail">Weboberfl√§che der Anwendung</span>
                        </lsx-thumbnail>
                        <lsx-content>
                            <img src="04-nodejs/aufgabe-logbuch1.jpg" class="img-responsive img-thumbnail"/>
                        </lsx-content>
                    </lsx-modal>        
                </lsx-col>
            </lsx-row>
        </lsx-grid-fluid>
    </article>
    <aside>
        <p>
            Logbuch des Captians, Sternzeit 41205.08. Heute haben wir einen Systemingeniuer an Board genommen,
            um unsere Computersysteme zu √ºberpr√ºfen. Obwohl unsere Computer gut funktionieren, scheint es noch
            erheblichen Verbesserungsbedarf zu geben. Unter anderem sollen die systemkritischen Funktionen mit
            Node.js neu implementiert werden ‚Ä¶
        </p>
        <img src="04-nodejs/uss-enterprise.png" class="img-fluid d-block" style="width: 25em;"/>
        <p>
            <small>
                Bildnachweis:
                <a href="https://pixabay.com/photos/spaceship-model-isolated-enterprise-2749359/" target="_blank">pixabay: Janson_G</a>
            </small>
        </p>
    </aside>
</section>