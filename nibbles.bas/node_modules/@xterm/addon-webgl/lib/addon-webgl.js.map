{"version":3,"file":"addon-webgl.js","mappings":"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","sources":["webpack://WebglAddon/webpack/universalModuleDefinition","webpack://WebglAddon/./src/CellColorResolver.ts","webpack://WebglAddon/./src/CharAtlasCache.ts","webpack://WebglAddon/./src/CharAtlasUtils.ts","webpack://WebglAddon/./src/Constants.ts","webpack://WebglAddon/./src/CursorBlinkStateManager.ts","webpack://WebglAddon/./src/CustomGlyphs.ts","webpack://WebglAddon/./src/DevicePixelObserver.ts","webpack://WebglAddon/./src/GlyphRenderer.ts","webpack://WebglAddon/./src/RectangleRenderer.ts","webpack://WebglAddon/./src/RenderModel.ts","webpack://WebglAddon/./src/TextureAtlas.ts","webpack://WebglAddon/./src/WebglRenderer.ts","webpack://WebglAddon/./src/WebglUtils.ts","webpack://WebglAddon/./src/renderLayer/BaseRenderLayer.ts","webpack://WebglAddon/./src/renderLayer/LinkRenderLayer.ts","webpack://WebglAddon/../../src/browser/renderer/shared/Constants.ts","webpack://WebglAddon/../../src/browser/renderer/shared/RendererUtils.ts","webpack://WebglAddon/../../src/browser/renderer/shared/SelectionRenderModel.ts","webpack://WebglAddon/../../src/common/Color.ts","webpack://WebglAddon/../../src/common/MultiKeyMap.ts","webpack://WebglAddon/../../src/common/Platform.ts","webpack://WebglAddon/../../src/common/TaskQueue.ts","webpack://WebglAddon/../../src/common/buffer/AttributeData.ts","webpack://WebglAddon/../../src/common/buffer/CellData.ts","webpack://WebglAddon/../../src/common/buffer/Constants.ts","webpack://WebglAddon/../../src/common/input/TextDecoder.ts","webpack://WebglAddon/../../src/common/services/LogService.ts","webpack://WebglAddon/../../src/common/services/ServiceRegistry.ts","webpack://WebglAddon/../../src/common/services/Services.ts","webpack://WebglAddon/../../out/vs/base/browser/browser.js","webpack://WebglAddon/../../out/vs/base/browser/canIUse.js","webpack://WebglAddon/../../out/vs/base/browser/dom.js","webpack://WebglAddon/../../out/vs/base/browser/iframe.js","webpack://WebglAddon/../../out/vs/base/browser/keyboardEvent.js","webpack://WebglAddon/../../out/vs/base/browser/mouseEvent.js","webpack://WebglAddon/../../out/vs/base/browser/window.js","webpack://WebglAddon/../../out/vs/base/common/arrays.js","webpack://WebglAddon/../../out/vs/base/common/arraysFind.js","webpack://WebglAddon/../../out/vs/base/common/async.js","webpack://WebglAddon/../../out/vs/base/common/cancellation.js","webpack://WebglAddon/../../out/vs/base/common/charCode.js","webpack://WebglAddon/../../out/vs/base/common/collections.js","webpack://WebglAddon/../../out/vs/base/common/errors.js","webpack://WebglAddon/../../out/vs/base/common/event.js","webpack://WebglAddon/../../out/vs/base/common/functional.js","webpack://WebglAddon/../../out/vs/base/common/hash.js","webpack://WebglAddon/../../out/vs/base/common/iterator.js","webpack://WebglAddon/../../out/vs/base/common/keyCodes.js","webpack://WebglAddon/../../out/vs/base/common/keybindings.js","webpack://WebglAddon/../../out/vs/base/common/lazy.js","webpack://WebglAddon/../../out/vs/base/common/lifecycle.js","webpack://WebglAddon/../../out/vs/base/common/linkedList.js","webpack://WebglAddon/../../out/vs/base/common/map.js","webpack://WebglAddon/../../out/vs/base/common/numbers.js","webpack://WebglAddon/../../out/vs/base/common/platform.js","webpack://WebglAddon/../../out/vs/base/common/stopwatch.js","webpack://WebglAddon/../../out/vs/base/common/strings.js","webpack://WebglAddon/../../out/vs/base/common/symbols.js","webpack://WebglAddon/../../out/vs/base/common/uint.js","webpack://WebglAddon/webpack/bootstrap","webpack://WebglAddon/./src/WebglAddon.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"WebglAddon\"] = factory();\n\telse\n\t\troot[\"WebglAddon\"] = factory();\n})(globalThis, () => {\nreturn ","import { ISelectionRenderModel } from 'browser/renderer/shared/Types';\nimport { ICoreBrowserService, IThemeService } from 'browser/services/Services';\nimport { ReadonlyColorSet } from 'browser/Types';\nimport { Attributes, BgFlags, ExtFlags, FgFlags, NULL_CELL_CODE, UnderlineStyle } from 'common/buffer/Constants';\nimport { IDecorationService, IOptionsService } from 'common/services/Services';\nimport { ICellData } from 'common/Types';\nimport { Terminal } from '@xterm/xterm';\nimport { rgba } from 'common/Color';\nimport { treatGlyphAsBackgroundColor } from 'browser/renderer/shared/RendererUtils';\n\n// Work variables to avoid garbage collection\nlet $fg = 0;\nlet $bg = 0;\nlet $hasFg = false;\nlet $hasBg = false;\nlet $isSelected = false;\nlet $colors: ReadonlyColorSet | undefined;\nlet $variantOffset = 0;\n\nexport class CellColorResolver {\n  /**\n   * The shared result of the {@link resolve} call. This is only safe to use immediately after as\n   * any other calls will share object.\n   */\n  public readonly result: { fg: number, bg: number, ext: number } = {\n    fg: 0,\n    bg: 0,\n    ext: 0\n  };\n\n  constructor(\n    private readonly _terminal: Terminal,\n    private readonly _optionService: IOptionsService,\n    private readonly _selectionRenderModel: ISelectionRenderModel,\n    private readonly _decorationService: IDecorationService,\n    private readonly _coreBrowserService: ICoreBrowserService,\n    private readonly _themeService: IThemeService\n  ) {\n  }\n\n  /**\n   * Resolves colors for the cell, putting the result into the shared {@link result}. This resolves\n   * overrides, inverse and selection for the cell which can then be used to feed into the renderer.\n   */\n  public resolve(cell: ICellData, x: number, y: number, deviceCellWidth: number): void {\n    this.result.bg = cell.bg;\n    this.result.fg = cell.fg;\n    this.result.ext = cell.bg & BgFlags.HAS_EXTENDED ? cell.extended.ext : 0;\n    // Get any foreground/background overrides, this happens on the model to avoid spreading\n    // override logic throughout the different sub-renderers\n\n    // Reset overrides work variables\n    $bg = 0;\n    $fg = 0;\n    $hasBg = false;\n    $hasFg = false;\n    $isSelected = false;\n    $colors = this._themeService.colors;\n    $variantOffset = 0;\n\n    const code = cell.getCode();\n    if (code !== NULL_CELL_CODE && cell.extended.underlineStyle === UnderlineStyle.DOTTED) {\n      const lineWidth = Math.max(1, Math.floor(this._optionService.rawOptions.fontSize * this._coreBrowserService.dpr / 15));\n      $variantOffset = x * deviceCellWidth % (Math.round(lineWidth) * 2);\n    }\n\n    // Apply decorations on the bottom layer\n    this._decorationService.forEachDecorationAtCell(x, y, 'bottom', d => {\n      if (d.backgroundColorRGB) {\n        $bg = d.backgroundColorRGB.rgba >> 8 & Attributes.RGB_MASK;\n        $hasBg = true;\n      }\n      if (d.foregroundColorRGB) {\n        $fg = d.foregroundColorRGB.rgba >> 8 & Attributes.RGB_MASK;\n        $hasFg = true;\n      }\n    });\n\n    // Apply the selection color if needed\n    $isSelected = this._selectionRenderModel.isCellSelected(this._terminal, x, y);\n    if ($isSelected) {\n      // If the cell has a bg color, retain the color by blending it with the selection color\n      if (\n        (this.result.fg & FgFlags.INVERSE) ||\n        (this.result.bg & Attributes.CM_MASK) !== Attributes.CM_DEFAULT\n      ) {\n        // Resolve the standard bg color\n        if (this.result.fg & FgFlags.INVERSE) {\n          switch (this.result.fg & Attributes.CM_MASK) {\n            case Attributes.CM_P16:\n            case Attributes.CM_P256:\n              $bg = this._themeService.colors.ansi[this.result.fg & Attributes.PCOLOR_MASK].rgba;\n              break;\n            case Attributes.CM_RGB:\n              $bg = ((this.result.fg & Attributes.RGB_MASK) << 8) | 0xFF;\n              break;\n            case Attributes.CM_DEFAULT:\n            default:\n              $bg = this._themeService.colors.foreground.rgba;\n          }\n        } else {\n          switch (this.result.bg & Attributes.CM_MASK) {\n            case Attributes.CM_P16:\n            case Attributes.CM_P256:\n              $bg = this._themeService.colors.ansi[this.result.bg & Attributes.PCOLOR_MASK].rgba;\n              break;\n            case Attributes.CM_RGB:\n              $bg = ((this.result.bg & Attributes.RGB_MASK) << 8) | 0xFF;\n              break;\n            // No need to consider default bg color here as it's not possible\n          }\n        }\n        // Blend with selection bg color\n        $bg = rgba.blend(\n          $bg,\n          ((this._coreBrowserService.isFocused ? $colors.selectionBackgroundOpaque : $colors.selectionInactiveBackgroundOpaque).rgba & 0xFFFFFF00) | 0x80\n        ) >> 8 & Attributes.RGB_MASK;\n      } else {\n        $bg = (this._coreBrowserService.isFocused ? $colors.selectionBackgroundOpaque : $colors.selectionInactiveBackgroundOpaque).rgba >> 8 & Attributes.RGB_MASK;\n      }\n      $hasBg = true;\n\n      // Apply explicit selection foreground if present\n      if ($colors.selectionForeground) {\n        $fg = $colors.selectionForeground.rgba >> 8 & Attributes.RGB_MASK;\n        $hasFg = true;\n      }\n\n      // Overwrite fg as bg if it's a special decorative glyph (eg. powerline)\n      if (treatGlyphAsBackgroundColor(cell.getCode())) {\n        // Inverse default background should be treated as transparent\n        if (\n          (this.result.fg & FgFlags.INVERSE) &&\n          (this.result.bg & Attributes.CM_MASK) === Attributes.CM_DEFAULT\n        ) {\n          $fg = (this._coreBrowserService.isFocused ? $colors.selectionBackgroundOpaque : $colors.selectionInactiveBackgroundOpaque).rgba >> 8 & Attributes.RGB_MASK;\n        } else {\n\n          if (this.result.fg & FgFlags.INVERSE) {\n            switch (this.result.bg & Attributes.CM_MASK) {\n              case Attributes.CM_P16:\n              case Attributes.CM_P256:\n                $fg = this._themeService.colors.ansi[this.result.bg & Attributes.PCOLOR_MASK].rgba;\n                break;\n              case Attributes.CM_RGB:\n                $fg = ((this.result.bg & Attributes.RGB_MASK) << 8) | 0xFF;\n                break;\n              // No need to consider default bg color here as it's not possible\n            }\n          } else {\n            switch (this.result.fg & Attributes.CM_MASK) {\n              case Attributes.CM_P16:\n              case Attributes.CM_P256:\n                $fg = this._themeService.colors.ansi[this.result.fg & Attributes.PCOLOR_MASK].rgba;\n                break;\n              case Attributes.CM_RGB:\n                $fg = ((this.result.fg & Attributes.RGB_MASK) << 8) | 0xFF;\n                break;\n              case Attributes.CM_DEFAULT:\n              default:\n                $fg = this._themeService.colors.foreground.rgba;\n            }\n          }\n\n          $fg = rgba.blend(\n            $fg,\n            ((this._coreBrowserService.isFocused ? $colors.selectionBackgroundOpaque : $colors.selectionInactiveBackgroundOpaque).rgba & 0xFFFFFF00) | 0x80\n          ) >> 8 & Attributes.RGB_MASK;\n        }\n        $hasFg = true;\n      }\n    }\n\n    // Apply decorations on the top layer\n    this._decorationService.forEachDecorationAtCell(x, y, 'top', d => {\n      if (d.backgroundColorRGB) {\n        $bg = d.backgroundColorRGB.rgba >> 8 & Attributes.RGB_MASK;\n        $hasBg = true;\n      }\n      if (d.foregroundColorRGB) {\n        $fg = d.foregroundColorRGB.rgba >> 8 & Attributes.RGB_MASK;\n        $hasFg = true;\n      }\n    });\n\n    // Convert any overrides from rgba to the fg/bg packed format. This resolves the inverse flag\n    // ahead of time in order to use the correct cache key\n    if ($hasBg) {\n      if ($isSelected) {\n        // Non-RGB attributes from model + force non-dim + override + force RGB color mode\n        $bg = (cell.bg & ~Attributes.RGB_MASK & ~BgFlags.DIM) | $bg | Attributes.CM_RGB;\n      } else {\n        // Non-RGB attributes from model + override + force RGB color mode\n        $bg = (cell.bg & ~Attributes.RGB_MASK) | $bg | Attributes.CM_RGB;\n      }\n    }\n    if ($hasFg) {\n      // Non-RGB attributes from model + force disable inverse + override + force RGB color mode\n      $fg = (cell.fg & ~Attributes.RGB_MASK & ~FgFlags.INVERSE) | $fg | Attributes.CM_RGB;\n    }\n\n    // Handle case where inverse was specified by only one of bg override or fg override was set,\n    // resolving the other inverse color and setting the inverse flag if needed.\n    if (this.result.fg & FgFlags.INVERSE) {\n      if ($hasBg && !$hasFg) {\n        // Resolve bg color type (default color has a different meaning in fg vs bg)\n        if ((this.result.bg & Attributes.CM_MASK) === Attributes.CM_DEFAULT) {\n          $fg = (this.result.fg & ~(Attributes.RGB_MASK | FgFlags.INVERSE | Attributes.CM_MASK)) | (($colors.background.rgba >> 8 & Attributes.RGB_MASK) & Attributes.RGB_MASK) | Attributes.CM_RGB;\n        } else {\n          $fg = (this.result.fg & ~(Attributes.RGB_MASK | FgFlags.INVERSE | Attributes.CM_MASK)) | this.result.bg & (Attributes.RGB_MASK | Attributes.CM_MASK);\n        }\n        $hasFg = true;\n      }\n      if (!$hasBg && $hasFg) {\n        // Resolve bg color type (default color has a different meaning in fg vs bg)\n        if ((this.result.fg & Attributes.CM_MASK) === Attributes.CM_DEFAULT) {\n          $bg = (this.result.bg & ~(Attributes.RGB_MASK | Attributes.CM_MASK)) | (($colors.foreground.rgba >> 8 & Attributes.RGB_MASK) & Attributes.RGB_MASK) | Attributes.CM_RGB;\n        } else {\n          $bg = (this.result.bg & ~(Attributes.RGB_MASK | Attributes.CM_MASK)) | this.result.fg & (Attributes.RGB_MASK | Attributes.CM_MASK);\n        }\n        $hasBg = true;\n      }\n    }\n\n    // Release object\n    $colors = undefined;\n\n    // Use the override if it exists\n    this.result.bg = $hasBg ? $bg : this.result.bg;\n    this.result.fg = $hasFg ? $fg : this.result.fg;\n\n    // Reset overrides variantOffset\n    this.result.ext &= ~ExtFlags.VARIANT_OFFSET;\n    this.result.ext |= ($variantOffset << 29) & ExtFlags.VARIANT_OFFSET;\n  }\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { TextureAtlas } from './TextureAtlas';\nimport { ITerminalOptions, Terminal } from '@xterm/xterm';\nimport { ITerminal, ReadonlyColorSet } from 'browser/Types';\nimport { ICharAtlasConfig, ITextureAtlas } from './Types';\nimport { generateConfig, configEquals } from './CharAtlasUtils';\n\ninterface ITextureAtlasCacheEntry {\n  atlas: ITextureAtlas;\n  config: ICharAtlasConfig;\n  // N.B. This implementation potentially holds onto copies of the terminal forever, so\n  // this may cause memory leaks.\n  ownedBy: Terminal[];\n}\n\nconst charAtlasCache: ITextureAtlasCacheEntry[] = [];\n\n/**\n * Acquires a char atlas, either generating a new one or returning an existing\n * one that is in use by another terminal.\n */\nexport function acquireTextureAtlas(\n  terminal: Terminal,\n  options: Required<ITerminalOptions>,\n  colors: ReadonlyColorSet,\n  deviceCellWidth: number,\n  deviceCellHeight: number,\n  deviceCharWidth: number,\n  deviceCharHeight: number,\n  devicePixelRatio: number,\n  deviceMaxTextureSize: number\n): ITextureAtlas {\n  const newConfig = generateConfig(deviceCellWidth, deviceCellHeight, deviceCharWidth, deviceCharHeight, options, colors, devicePixelRatio, deviceMaxTextureSize);\n\n  // Check to see if the terminal already owns this config\n  for (let i = 0; i < charAtlasCache.length; i++) {\n    const entry = charAtlasCache[i];\n    const ownedByIndex = entry.ownedBy.indexOf(terminal);\n    if (ownedByIndex >= 0) {\n      if (configEquals(entry.config, newConfig)) {\n        return entry.atlas;\n      }\n      // The configs differ, release the terminal from the entry\n      if (entry.ownedBy.length === 1) {\n        entry.atlas.dispose();\n        charAtlasCache.splice(i, 1);\n      } else {\n        entry.ownedBy.splice(ownedByIndex, 1);\n      }\n      break;\n    }\n  }\n\n  // Try match a char atlas from the cache\n  for (let i = 0; i < charAtlasCache.length; i++) {\n    const entry = charAtlasCache[i];\n    if (configEquals(entry.config, newConfig)) {\n      // Add the terminal to the cache entry and return\n      entry.ownedBy.push(terminal);\n      return entry.atlas;\n    }\n  }\n\n  const core: ITerminal = (terminal as any)._core;\n  const newEntry: ITextureAtlasCacheEntry = {\n    atlas: new TextureAtlas(document, newConfig, core.unicodeService),\n    config: newConfig,\n    ownedBy: [terminal]\n  };\n  charAtlasCache.push(newEntry);\n  return newEntry.atlas;\n}\n\n/**\n * Removes a terminal reference from the cache, allowing its memory to be freed.\n * @param terminal The terminal to remove.\n */\nexport function removeTerminalFromCache(terminal: Terminal): void {\n  for (let i = 0; i < charAtlasCache.length; i++) {\n    const index = charAtlasCache[i].ownedBy.indexOf(terminal);\n    if (index !== -1) {\n      if (charAtlasCache[i].ownedBy.length === 1) {\n        // Remove the cache entry if it's the only terminal\n        charAtlasCache[i].atlas.dispose();\n        charAtlasCache.splice(i, 1);\n      } else {\n        // Remove the reference from the cache entry\n        charAtlasCache[i].ownedBy.splice(index, 1);\n      }\n      break;\n    }\n  }\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ICharAtlasConfig } from './Types';\nimport { Attributes } from 'common/buffer/Constants';\nimport { ITerminalOptions } from '@xterm/xterm';\nimport { IColorSet, ReadonlyColorSet } from 'browser/Types';\nimport { NULL_COLOR } from 'common/Color';\n\nexport function generateConfig(deviceCellWidth: number, deviceCellHeight: number, deviceCharWidth: number, deviceCharHeight: number, options: Required<ITerminalOptions>, colors: ReadonlyColorSet, devicePixelRatio: number, deviceMaxTextureSize: number): ICharAtlasConfig {\n  // null out some fields that don't matter\n  const clonedColors: IColorSet = {\n    foreground: colors.foreground,\n    background: colors.background,\n    cursor: NULL_COLOR,\n    cursorAccent: NULL_COLOR,\n    selectionForeground: NULL_COLOR,\n    selectionBackgroundTransparent: NULL_COLOR,\n    selectionBackgroundOpaque: NULL_COLOR,\n    selectionInactiveBackgroundTransparent: NULL_COLOR,\n    selectionInactiveBackgroundOpaque: NULL_COLOR,\n    overviewRulerBorder: NULL_COLOR,\n    scrollbarSliderBackground: NULL_COLOR,\n    scrollbarSliderHoverBackground: NULL_COLOR,\n    scrollbarSliderActiveBackground: NULL_COLOR,\n    // For the static char atlas, we only use the first 16 colors, but we need all 256 for the\n    // dynamic character atlas.\n    ansi: colors.ansi.slice(),\n    contrastCache: colors.contrastCache,\n    halfContrastCache: colors.halfContrastCache\n  };\n  return {\n    customGlyphs: options.customGlyphs,\n    devicePixelRatio,\n    deviceMaxTextureSize,\n    letterSpacing: options.letterSpacing,\n    lineHeight: options.lineHeight,\n    deviceCellWidth: deviceCellWidth,\n    deviceCellHeight: deviceCellHeight,\n    deviceCharWidth: deviceCharWidth,\n    deviceCharHeight: deviceCharHeight,\n    fontFamily: options.fontFamily,\n    fontSize: options.fontSize,\n    fontWeight: options.fontWeight,\n    fontWeightBold: options.fontWeightBold,\n    allowTransparency: options.allowTransparency,\n    drawBoldTextInBrightColors: options.drawBoldTextInBrightColors,\n    minimumContrastRatio: options.minimumContrastRatio,\n    colors: clonedColors\n  };\n}\n\nexport function configEquals(a: ICharAtlasConfig, b: ICharAtlasConfig): boolean {\n  for (let i = 0; i < a.colors.ansi.length; i++) {\n    if (a.colors.ansi[i].rgba !== b.colors.ansi[i].rgba) {\n      return false;\n    }\n  }\n  return a.devicePixelRatio === b.devicePixelRatio &&\n      a.customGlyphs === b.customGlyphs &&\n      a.lineHeight === b.lineHeight &&\n      a.letterSpacing === b.letterSpacing &&\n      a.fontFamily === b.fontFamily &&\n      a.fontSize === b.fontSize &&\n      a.fontWeight === b.fontWeight &&\n      a.fontWeightBold === b.fontWeightBold &&\n      a.allowTransparency === b.allowTransparency &&\n      a.deviceCharWidth === b.deviceCharWidth &&\n      a.deviceCharHeight === b.deviceCharHeight &&\n      a.drawBoldTextInBrightColors === b.drawBoldTextInBrightColors &&\n      a.minimumContrastRatio === b.minimumContrastRatio &&\n      a.colors.foreground.rgba === b.colors.foreground.rgba &&\n      a.colors.background.rgba === b.colors.background.rgba;\n}\n\nexport function is256Color(colorCode: number): boolean {\n  return (colorCode & Attributes.CM_MASK) === Attributes.CM_P16 || (colorCode & Attributes.CM_MASK) === Attributes.CM_P256;\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { isFirefox, isLegacyEdge } from 'common/Platform';\n\nexport const DIM_OPACITY = 0.5;\n// The text baseline is set conditionally by browser. Using 'ideographic' for Firefox or Legacy Edge\n// would result in truncated text (Issue 3353). Using 'bottom' for Chrome would result in slightly\n// unaligned Powerline fonts (PR 3356#issuecomment-850928179).\nexport const TEXT_BASELINE: CanvasTextBaseline = isFirefox || isLegacyEdge ? 'bottom' : 'ideographic';\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ICoreBrowserService } from 'browser/services/Services';\n\n/**\n * The time between cursor blinks.\n */\nconst BLINK_INTERVAL = 600;\n\nexport class CursorBlinkStateManager {\n  public isCursorVisible: boolean;\n\n  private _animationFrame: number | undefined;\n  private _blinkStartTimeout: number | undefined;\n  private _blinkInterval: number | undefined;\n\n  /**\n   * The time at which the animation frame was restarted, this is used on the\n   * next render to restart the timers so they don't need to restart the timers\n   * multiple times over a short period.\n   */\n  private _animationTimeRestarted: number | undefined;\n\n  constructor(\n    private _renderCallback: () => void,\n    private _coreBrowserService: ICoreBrowserService\n  ) {\n    this.isCursorVisible = true;\n    if (this._coreBrowserService.isFocused) {\n      this._restartInterval();\n    }\n  }\n\n  public get isPaused(): boolean { return !(this._blinkStartTimeout || this._blinkInterval); }\n\n  public dispose(): void {\n    if (this._blinkInterval) {\n      this._coreBrowserService.window.clearInterval(this._blinkInterval);\n      this._blinkInterval = undefined;\n    }\n    if (this._blinkStartTimeout) {\n      this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout);\n      this._blinkStartTimeout = undefined;\n    }\n    if (this._animationFrame) {\n      this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame);\n      this._animationFrame = undefined;\n    }\n  }\n\n  public restartBlinkAnimation(): void {\n    if (this.isPaused) {\n      return;\n    }\n    // Save a timestamp so that the restart can be done on the next interval\n    this._animationTimeRestarted = Date.now();\n    // Force a cursor render to ensure it's visible and in the correct position\n    this.isCursorVisible = true;\n    if (!this._animationFrame) {\n      this._animationFrame = this._coreBrowserService.window.requestAnimationFrame(() => {\n        this._renderCallback();\n        this._animationFrame = undefined;\n      });\n    }\n  }\n\n  private _restartInterval(timeToStart: number = BLINK_INTERVAL): void {\n    // Clear any existing interval\n    if (this._blinkInterval) {\n      this._coreBrowserService.window.clearInterval(this._blinkInterval);\n      this._blinkInterval = undefined;\n    }\n\n    // Setup the initial timeout which will hide the cursor, this is done before\n    // the regular interval is setup in order to support restarting the blink\n    // animation in a lightweight way (without thrashing clearInterval and\n    // setInterval).\n    this._blinkStartTimeout = this._coreBrowserService.window.setTimeout(() => {\n      // Check if another animation restart was requested while this was being\n      // started\n      if (this._animationTimeRestarted) {\n        const time = BLINK_INTERVAL - (Date.now() - this._animationTimeRestarted);\n        this._animationTimeRestarted = undefined;\n        if (time > 0) {\n          this._restartInterval(time);\n          return;\n        }\n      }\n\n      // Hide the cursor\n      this.isCursorVisible = false;\n      this._animationFrame = this._coreBrowserService.window.requestAnimationFrame(() => {\n        this._renderCallback();\n        this._animationFrame = undefined;\n      });\n\n      // Setup the blink interval\n      this._blinkInterval = this._coreBrowserService.window.setInterval(() => {\n        // Adjust the animation time if it was restarted\n        if (this._animationTimeRestarted) {\n          // calc time diff\n          // Make restart interval do a setTimeout initially?\n          const time = BLINK_INTERVAL - (Date.now() - this._animationTimeRestarted);\n          this._animationTimeRestarted = undefined;\n          this._restartInterval(time);\n          return;\n        }\n\n        // Invert visibility and render\n        this.isCursorVisible = !this.isCursorVisible;\n        this._animationFrame = this._coreBrowserService.window.requestAnimationFrame(() => {\n          this._renderCallback();\n          this._animationFrame = undefined;\n        });\n      }, BLINK_INTERVAL);\n    }, timeToStart);\n  }\n\n  public pause(): void {\n    this.isCursorVisible = true;\n    if (this._blinkInterval) {\n      this._coreBrowserService.window.clearInterval(this._blinkInterval);\n      this._blinkInterval = undefined;\n    }\n    if (this._blinkStartTimeout) {\n      this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout);\n      this._blinkStartTimeout = undefined;\n    }\n    if (this._animationFrame) {\n      this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame);\n      this._animationFrame = undefined;\n    }\n  }\n\n  public resume(): void {\n    // Clear out any existing timers just in case\n    this.pause();\n\n    this._animationTimeRestarted = undefined;\n    this._restartInterval();\n    this.restartBlinkAnimation();\n  }\n}\n","/**\n * Copyright (c) 2021 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { throwIfFalsy } from 'browser/renderer/shared/RendererUtils';\n\ninterface IBlockVector {\n  x: number;\n  y: number;\n  w: number;\n  h: number;\n}\n\nexport const blockElementDefinitions: { [index: string]: IBlockVector[] | undefined } = {\n  // Block elements (0x2580-0x2590)\n  '': [{ x: 0, y: 0, w: 8, h: 4 }], // UPPER HALF BLOCK\n  '': [{ x: 0, y: 7, w: 8, h: 1 }], // LOWER ONE EIGHTH BLOCK\n  '': [{ x: 0, y: 6, w: 8, h: 2 }], // LOWER ONE QUARTER BLOCK\n  '': [{ x: 0, y: 5, w: 8, h: 3 }], // LOWER THREE EIGHTHS BLOCK\n  '': [{ x: 0, y: 4, w: 8, h: 4 }], // LOWER HALF BLOCK\n  '': [{ x: 0, y: 3, w: 8, h: 5 }], // LOWER FIVE EIGHTHS BLOCK\n  '': [{ x: 0, y: 2, w: 8, h: 6 }], // LOWER THREE QUARTERS BLOCK\n  '': [{ x: 0, y: 1, w: 8, h: 7 }], // LOWER SEVEN EIGHTHS BLOCK\n  '': [{ x: 0, y: 0, w: 8, h: 8 }], // FULL BLOCK\n  '': [{ x: 0, y: 0, w: 7, h: 8 }], // LEFT SEVEN EIGHTHS BLOCK\n  '': [{ x: 0, y: 0, w: 6, h: 8 }], // LEFT THREE QUARTERS BLOCK\n  '': [{ x: 0, y: 0, w: 5, h: 8 }], // LEFT FIVE EIGHTHS BLOCK\n  '': [{ x: 0, y: 0, w: 4, h: 8 }], // LEFT HALF BLOCK\n  '': [{ x: 0, y: 0, w: 3, h: 8 }], // LEFT THREE EIGHTHS BLOCK\n  '': [{ x: 0, y: 0, w: 2, h: 8 }], // LEFT ONE QUARTER BLOCK\n  '': [{ x: 0, y: 0, w: 1, h: 8 }], // LEFT ONE EIGHTH BLOCK\n  '': [{ x: 4, y: 0, w: 4, h: 8 }], // RIGHT HALF BLOCK\n\n  // Block elements (0x2594-0x2595)\n  '': [{ x: 0, y: 0, w: 8, h: 1 }], // UPPER ONE EIGHTH BLOCK\n  '': [{ x: 7, y: 0, w: 1, h: 8 }], // RIGHT ONE EIGHTH BLOCK\n\n  // Terminal graphic characters (0x2596-0x259F)\n  '': [{ x: 0, y: 4, w: 4, h: 4 }],                             // QUADRANT LOWER LEFT\n  '': [{ x: 4, y: 4, w: 4, h: 4 }],                             // QUADRANT LOWER RIGHT\n  '': [{ x: 0, y: 0, w: 4, h: 4 }],                             // QUADRANT UPPER LEFT\n  '': [{ x: 0, y: 0, w: 4, h: 8 }, { x: 0, y: 4, w: 8, h: 4 }], // QUADRANT UPPER LEFT AND LOWER LEFT AND LOWER RIGHT\n  '': [{ x: 0, y: 0, w: 4, h: 4 }, { x: 4, y: 4, w: 4, h: 4 }], // QUADRANT UPPER LEFT AND LOWER RIGHT\n  '': [{ x: 0, y: 0, w: 4, h: 8 }, { x: 4, y: 0, w: 4, h: 4 }], // QUADRANT UPPER LEFT AND UPPER RIGHT AND LOWER LEFT\n  '': [{ x: 0, y: 0, w: 8, h: 4 }, { x: 4, y: 0, w: 4, h: 8 }], // QUADRANT UPPER LEFT AND UPPER RIGHT AND LOWER RIGHT\n  '': [{ x: 4, y: 0, w: 4, h: 4 }],                             // QUADRANT UPPER RIGHT\n  '': [{ x: 4, y: 0, w: 4, h: 4 }, { x: 0, y: 4, w: 4, h: 4 }], // QUADRANT UPPER RIGHT AND LOWER LEFT\n  '': [{ x: 4, y: 0, w: 4, h: 8 }, { x: 0, y: 4, w: 8, h: 4 }], // QUADRANT UPPER RIGHT AND LOWER LEFT AND LOWER RIGHT\n\n  // VERTICAL ONE EIGHTH BLOCK-2 through VERTICAL ONE EIGHTH BLOCK-7\n  '\\u{1FB70}': [{ x: 1, y: 0, w: 1, h: 8 }],\n  '\\u{1FB71}': [{ x: 2, y: 0, w: 1, h: 8 }],\n  '\\u{1FB72}': [{ x: 3, y: 0, w: 1, h: 8 }],\n  '\\u{1FB73}': [{ x: 4, y: 0, w: 1, h: 8 }],\n  '\\u{1FB74}': [{ x: 5, y: 0, w: 1, h: 8 }],\n  '\\u{1FB75}': [{ x: 6, y: 0, w: 1, h: 8 }],\n\n  // HORIZONTAL ONE EIGHTH BLOCK-2 through HORIZONTAL ONE EIGHTH BLOCK-7\n  '\\u{1FB76}': [{ x: 0, y: 1, w: 8, h: 1 }],\n  '\\u{1FB77}': [{ x: 0, y: 2, w: 8, h: 1 }],\n  '\\u{1FB78}': [{ x: 0, y: 3, w: 8, h: 1 }],\n  '\\u{1FB79}': [{ x: 0, y: 4, w: 8, h: 1 }],\n  '\\u{1FB7A}': [{ x: 0, y: 5, w: 8, h: 1 }],\n  '\\u{1FB7B}': [{ x: 0, y: 6, w: 8, h: 1 }],\n\n  // LEFT AND LOWER ONE EIGHTH BLOCK\n  '\\u{1FB7C}': [{ x: 0, y: 0, w: 1, h: 8 }, { x: 0, y: 7, w: 8, h: 1 }],\n  // LEFT AND UPPER ONE EIGHTH BLOCK\n  '\\u{1FB7D}': [{ x: 0, y: 0, w: 1, h: 8 }, { x: 0, y: 0, w: 8, h: 1 }],\n  // RIGHT AND UPPER ONE EIGHTH BLOCK\n  '\\u{1FB7E}': [{ x: 7, y: 0, w: 1, h: 8 }, { x: 0, y: 0, w: 8, h: 1 }],\n  // RIGHT AND LOWER ONE EIGHTH BLOCK\n  '\\u{1FB7F}': [{ x: 7, y: 0, w: 1, h: 8 }, { x: 0, y: 7, w: 8, h: 1 }],\n  // UPPER AND LOWER ONE EIGHTH BLOCK\n  '\\u{1FB80}': [{ x: 0, y: 0, w: 8, h: 1 }, { x: 0, y: 7, w: 8, h: 1 }],\n  // HORIZONTAL ONE EIGHTH BLOCK-1358\n  '\\u{1FB81}': [{ x: 0, y: 0, w: 8, h: 1 }, { x: 0, y: 2, w: 8, h: 1 }, { x: 0, y: 4, w: 8, h: 1 }, { x: 0, y: 7, w: 8, h: 1 }],\n\n  // UPPER ONE QUARTER BLOCK\n  '\\u{1FB82}': [{ x: 0, y: 0, w: 8, h: 2 }],\n  // UPPER THREE EIGHTHS BLOCK\n  '\\u{1FB83}': [{ x: 0, y: 0, w: 8, h: 3 }],\n  // UPPER FIVE EIGHTHS BLOCK\n  '\\u{1FB84}': [{ x: 0, y: 0, w: 8, h: 5 }],\n  // UPPER THREE QUARTERS BLOCK\n  '\\u{1FB85}': [{ x: 0, y: 0, w: 8, h: 6 }],\n  // UPPER SEVEN EIGHTHS BLOCK\n  '\\u{1FB86}': [{ x: 0, y: 0, w: 8, h: 7 }],\n\n  // RIGHT ONE QUARTER BLOCK\n  '\\u{1FB87}': [{ x: 6, y: 0, w: 2, h: 8 }],\n  // RIGHT THREE EIGHTHS B0OCK\n  '\\u{1FB88}': [{ x: 5, y: 0, w: 3, h: 8 }],\n  // RIGHT FIVE EIGHTHS BL0CK\n  '\\u{1FB89}': [{ x: 3, y: 0, w: 5, h: 8 }],\n  // RIGHT THREE QUARTERS 0LOCK\n  '\\u{1FB8A}': [{ x: 2, y: 0, w: 6, h: 8 }],\n  // RIGHT SEVEN EIGHTHS B0OCK\n  '\\u{1FB8B}': [{ x: 1, y: 0, w: 7, h: 8 }],\n\n  // CHECKER BOARD FILL\n  '\\u{1FB95}': [\n    { x: 0, y: 0, w: 2, h: 2 }, { x: 4, y: 0, w: 2, h: 2 },\n    { x: 2, y: 2, w: 2, h: 2 }, { x: 6, y: 2, w: 2, h: 2 },\n    { x: 0, y: 4, w: 2, h: 2 }, { x: 4, y: 4, w: 2, h: 2 },\n    { x: 2, y: 6, w: 2, h: 2 }, { x: 6, y: 6, w: 2, h: 2 }\n  ],\n  // INVERSE CHECKER BOARD FILL\n  '\\u{1FB96}': [\n    { x: 2, y: 0, w: 2, h: 2 }, { x: 6, y: 0, w: 2, h: 2 },\n    { x: 0, y: 2, w: 2, h: 2 }, { x: 4, y: 2, w: 2, h: 2 },\n    { x: 2, y: 4, w: 2, h: 2 }, { x: 6, y: 4, w: 2, h: 2 },\n    { x: 0, y: 6, w: 2, h: 2 }, { x: 4, y: 6, w: 2, h: 2 }\n  ],\n  // HEAVY HORIZONTAL FILL (upper middle and lower one quarter block)\n  '\\u{1FB97}': [{ x: 0, y: 2, w: 8, h: 2 }, { x: 0, y: 6, w: 8, h: 2 }]\n};\n\ntype PatternDefinition = number[][];\n\n/**\n * Defines the repeating pattern used by special characters, the pattern is made up of a 2d array of\n * pixel values to be filled (1) or not filled (0).\n */\nconst patternCharacterDefinitions: { [key: string]: PatternDefinition | undefined } = {\n  // Shade characters (0x2591-0x2593)\n  '': [ // LIGHT SHADE (25%)\n    [1, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 1, 0],\n    [0, 0, 0, 0]\n  ],\n  '': [ // MEDIUM SHADE (50%)\n    [1, 0],\n    [0, 0],\n    [0, 1],\n    [0, 0]\n  ],\n  '': [ // DARK SHADE (75%)\n    [0, 1],\n    [1, 1],\n    [1, 0],\n    [1, 1]\n  ]\n};\n\nconst enum Shapes {\n  /**  */ TOP_TO_BOTTOM = 'M.5,0 L.5,1',\n  /**  */ LEFT_TO_RIGHT = 'M0,.5 L1,.5',\n\n  /**  */ TOP_TO_RIGHT = 'M.5,0 L.5,.5 L1,.5',\n  /**  */ TOP_TO_LEFT = 'M.5,0 L.5,.5 L0,.5',\n  /**  */ LEFT_TO_BOTTOM = 'M0,.5 L.5,.5 L.5,1',\n  /**  */ RIGHT_TO_BOTTOM = 'M0.5,1 L.5,.5 L1,.5',\n\n  /**  */ MIDDLE_TO_TOP = 'M.5,.5 L.5,0',\n  /**  */ MIDDLE_TO_LEFT = 'M.5,.5 L0,.5',\n  /**  */ MIDDLE_TO_RIGHT = 'M.5,.5 L1,.5',\n  /**  */ MIDDLE_TO_BOTTOM = 'M.5,.5 L.5,1',\n\n  /**  */ T_TOP = 'M0,.5 L1,.5 M.5,.5 L.5,0',\n  /**  */ T_LEFT = 'M.5,0 L.5,1 M.5,.5 L0,.5',\n  /**  */ T_RIGHT = 'M.5,0 L.5,1 M.5,.5 L1,.5',\n  /**  */ T_BOTTOM = 'M0,.5 L1,.5 M.5,.5 L.5,1',\n\n  /**  */ CROSS = 'M0,.5 L1,.5 M.5,0 L.5,1',\n\n  /**  */ TWO_DASHES_HORIZONTAL = 'M.1,.5 L.4,.5 M.6,.5 L.9,.5', // .2 empty, .3 filled\n  /**  */ THREE_DASHES_HORIZONTAL = 'M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5', // .1333 empty, .2 filled\n  /**  */ FOUR_DASHES_HORIZONTAL = 'M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5', // .1 empty, .15 filled\n  /**  */ TWO_DASHES_VERTICAL = 'M.5,.1 L.5,.4 M.5,.6 L.5,.9',\n  /**  */ THREE_DASHES_VERTICAL = 'M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333',\n  /**  */ FOUR_DASHES_VERTICAL = 'M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95',\n}\n\nconst enum Style {\n  NORMAL = 1,\n  BOLD = 3\n}\n\n/**\n * @param xp The percentage of 15% of the x axis.\n * @param yp The percentage of 15% of the x axis on the y axis.\n */\ntype DrawFunctionDefinition = (xp: number, yp: number) => string;\n\n/**\n * This contains the definitions of all box drawing characters in the format of SVG paths (ie. the\n * svg d attribute).\n */\nexport const boxDrawingDefinitions: { [character: string]: { [fontWeight: number]: string | DrawFunctionDefinition } | undefined } = {\n  // Uniform normal and bold\n  '': { [Style.NORMAL]: Shapes.LEFT_TO_RIGHT },\n  '': { [Style.BOLD]:   Shapes.LEFT_TO_RIGHT },\n  '': { [Style.NORMAL]: Shapes.TOP_TO_BOTTOM },\n  '': { [Style.BOLD]:   Shapes.TOP_TO_BOTTOM },\n  '': { [Style.NORMAL]: Shapes.RIGHT_TO_BOTTOM },\n  '': { [Style.BOLD]:   Shapes.RIGHT_TO_BOTTOM },\n  '': { [Style.NORMAL]: Shapes.LEFT_TO_BOTTOM },\n  '': { [Style.BOLD]:   Shapes.LEFT_TO_BOTTOM },\n  '': { [Style.NORMAL]: Shapes.TOP_TO_RIGHT },\n  '': { [Style.BOLD]:   Shapes.TOP_TO_RIGHT },\n  '': { [Style.NORMAL]: Shapes.TOP_TO_LEFT },\n  '': { [Style.BOLD]:   Shapes.TOP_TO_LEFT },\n  '': { [Style.NORMAL]: Shapes.T_RIGHT },\n  '': { [Style.BOLD]:   Shapes.T_RIGHT },\n  '': { [Style.NORMAL]: Shapes.T_LEFT },\n  '': { [Style.BOLD]:   Shapes.T_LEFT },\n  '': { [Style.NORMAL]: Shapes.T_BOTTOM },\n  '': { [Style.BOLD]:   Shapes.T_BOTTOM },\n  '': { [Style.NORMAL]: Shapes.T_TOP },\n  '': { [Style.BOLD]:   Shapes.T_TOP },\n  '': { [Style.NORMAL]: Shapes.CROSS },\n  '': { [Style.BOLD]:   Shapes.CROSS },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_LEFT },\n  '': { [Style.BOLD]:   Shapes.MIDDLE_TO_LEFT },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_TOP },\n  '': { [Style.BOLD]:   Shapes.MIDDLE_TO_TOP },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_RIGHT },\n  '': { [Style.BOLD]:   Shapes.MIDDLE_TO_RIGHT },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_BOTTOM },\n  '': { [Style.BOLD]:   Shapes.MIDDLE_TO_BOTTOM },\n\n  // Double border\n  '': { [Style.NORMAL]: (xp, yp) => `M0,${.5 - yp} L1,${.5 - yp} M0,${.5 + yp} L1,${.5 + yp}` },\n  '': { [Style.NORMAL]: (xp, yp) => `M${.5 - xp},0 L${.5 - xp},1 M${.5 + xp},0 L${.5 + xp},1` },\n  '': { [Style.NORMAL]: (xp, yp) => `M.5,1 L.5,${.5 - yp} L1,${.5 - yp} M.5,${.5 + yp} L1,${.5 + yp}` },\n  '': { [Style.NORMAL]: (xp, yp) => `M${.5 - xp},1 L${.5 - xp},.5 L1,.5 M${.5 + xp},.5 L${.5 + xp},1` },\n  '': { [Style.NORMAL]: (xp, yp) => `M1,${.5 - yp} L${.5 - xp},${.5 - yp} L${.5 - xp},1 M1,${.5 + yp} L${.5 + xp},${.5 + yp} L${.5 + xp},1` },\n  '': { [Style.NORMAL]: (xp, yp) => `M0,${.5 - yp} L.5,${.5 - yp} L.5,1 M0,${.5 + yp} L.5,${.5 + yp}` },\n  '': { [Style.NORMAL]: (xp, yp) => `M${.5 + xp},1 L${.5 + xp},.5 L0,.5 M${.5 - xp},.5 L${.5 - xp},1` },\n  '': { [Style.NORMAL]: (xp, yp) => `M0,${.5 + yp} L${.5 - xp},${.5 + yp} L${.5 - xp},1 M0,${.5 - yp} L${.5 + xp},${.5 - yp} L${.5 + xp},1` },\n  '': { [Style.NORMAL]: (xp, yp) => `M.5,0 L.5,${.5 + yp} L1,${.5 + yp} M.5,${.5 - yp} L1,${.5 - yp}` },\n  '': { [Style.NORMAL]: (xp, yp) => `M1,.5 L${.5 - xp},.5 L${.5 - xp},0 M${.5 + xp},.5 L${.5 + xp},0` },\n  '': { [Style.NORMAL]: (xp, yp) => `M1,${.5 - yp} L${.5 + xp},${.5 - yp} L${.5 + xp},0 M1,${.5 + yp} L${.5 - xp},${.5 + yp} L${.5 - xp},0` },\n  '': { [Style.NORMAL]: (xp, yp) => `M0,${.5 + yp} L.5,${.5 + yp} L.5,0 M0,${.5 - yp} L.5,${.5 - yp}` },\n  '': { [Style.NORMAL]: (xp, yp) => `M0,.5 L${.5 + xp},.5 L${.5 + xp},0 M${.5 - xp},.5 L${.5 - xp},0` },\n  '': { [Style.NORMAL]: (xp, yp) => `M0,${.5 - yp} L${.5 - xp},${.5 - yp} L${.5 - xp},0 M0,${.5 + yp} L${.5 + xp},${.5 + yp} L${.5 + xp},0` },\n  '': { [Style.NORMAL]: (xp, yp) => `${Shapes.TOP_TO_BOTTOM} M.5,${.5 - yp} L1,${.5 - yp} M.5,${.5 + yp} L1,${.5 + yp}` },\n  '': { [Style.NORMAL]: (xp, yp) => `M${.5 - xp},0 L${.5 - xp},1 M${.5 + xp},0 L${.5 + xp},1 M${.5 + xp},.5 L1,.5` },\n  '': { [Style.NORMAL]: (xp, yp) => `M${.5 - xp},0 L${.5 - xp},1 M1,${.5 + yp} L${.5 + xp},${.5 + yp} L${.5 + xp},1 M1,${.5 - yp} L${.5 + xp},${.5 - yp} L${.5 + xp},0` },\n  '': { [Style.NORMAL]: (xp, yp) => `${Shapes.TOP_TO_BOTTOM} M0,${.5 - yp} L.5,${.5 - yp} M0,${.5 + yp} L.5,${.5 + yp}` },\n  '': { [Style.NORMAL]: (xp, yp) => `M0,.5 L${.5 - xp},.5 M${.5 - xp},0 L${.5 - xp},1 M${.5 + xp},0 L${.5 + xp},1` },\n  '': { [Style.NORMAL]: (xp, yp) => `M${.5 + xp},0 L${.5 + xp},1 M0,${.5 + yp} L${.5 - xp},${.5 + yp} L${.5 - xp},1 M0,${.5 - yp} L${.5 - xp},${.5 - yp} L${.5 - xp},0` },\n  '': { [Style.NORMAL]: (xp, yp) => `M0,${.5 - yp} L1,${.5 - yp} M0,${.5 + yp} L1,${.5 + yp} M.5,${.5 + yp} L.5,1` },\n  '': { [Style.NORMAL]: (xp, yp) => `${Shapes.LEFT_TO_RIGHT} M${.5 - xp},.5 L${.5 - xp},1 M${.5 + xp},.5 L${.5 + xp},1` },\n  '': { [Style.NORMAL]: (xp, yp) => `M0,${.5 - yp} L1,${.5 - yp} M0,${.5 + yp} L${.5 - xp},${.5 + yp} L${.5 - xp},1 M1,${.5 + yp} L${.5 + xp},${.5 + yp} L${.5 + xp},1` },\n  '': { [Style.NORMAL]: (xp, yp) => `M.5,0 L.5,${.5 - yp} M0,${.5 - yp} L1,${.5 - yp} M0,${.5 + yp} L1,${.5 + yp}` },\n  '': { [Style.NORMAL]: (xp, yp) => `${Shapes.LEFT_TO_RIGHT} M${.5 - xp},.5 L${.5 - xp},0 M${.5 + xp},.5 L${.5 + xp},0` },\n  '': { [Style.NORMAL]: (xp, yp) => `M0,${.5 + yp} L1,${.5 + yp} M0,${.5 - yp} L${.5 - xp},${.5 - yp} L${.5 - xp},0 M1,${.5 - yp} L${.5 + xp},${.5 - yp} L${.5 + xp},0` },\n  '': { [Style.NORMAL]: (xp, yp) => `${Shapes.TOP_TO_BOTTOM} M0,${.5 - yp} L1,${.5 - yp} M0,${.5 + yp} L1,${.5 + yp}` },\n  '': { [Style.NORMAL]: (xp, yp) => `${Shapes.LEFT_TO_RIGHT} M${.5 - xp},0 L${.5 - xp},1 M${.5 + xp},0 L${.5 + xp},1` },\n  '': { [Style.NORMAL]: (xp, yp) => `M0,${.5 + yp} L${.5 - xp},${.5 + yp} L${.5 - xp},1 M1,${.5 + yp} L${.5 + xp},${.5 + yp} L${.5 + xp},1 M0,${.5 - yp} L${.5 - xp},${.5 - yp} L${.5 - xp},0 M1,${.5 - yp} L${.5 + xp},${.5 - yp} L${.5 + xp},0` },\n\n  // Diagonal\n  '': { [Style.NORMAL]: 'M1,0 L0,1' },\n  '': { [Style.NORMAL]: 'M0,0 L1,1' },\n  '': { [Style.NORMAL]: 'M1,0 L0,1 M0,0 L1,1' },\n\n  // Mixed weight\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_LEFT,                                [Style.BOLD]: Shapes.MIDDLE_TO_RIGHT },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_TOP,                                 [Style.BOLD]: Shapes.MIDDLE_TO_BOTTOM },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_RIGHT,                               [Style.BOLD]: Shapes.MIDDLE_TO_LEFT },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_BOTTOM,                              [Style.BOLD]: Shapes.MIDDLE_TO_TOP },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_BOTTOM,                              [Style.BOLD]: Shapes.MIDDLE_TO_RIGHT },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_RIGHT,                               [Style.BOLD]: Shapes.MIDDLE_TO_BOTTOM },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_BOTTOM,                              [Style.BOLD]: Shapes.MIDDLE_TO_LEFT },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_LEFT,                                [Style.BOLD]: Shapes.MIDDLE_TO_BOTTOM },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_TOP,                                 [Style.BOLD]: Shapes.MIDDLE_TO_RIGHT },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_RIGHT,                               [Style.BOLD]: Shapes.MIDDLE_TO_TOP },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_TOP,                                 [Style.BOLD]: Shapes.MIDDLE_TO_LEFT },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_LEFT,                                [Style.BOLD]: Shapes.MIDDLE_TO_TOP },\n  '': { [Style.NORMAL]: Shapes.TOP_TO_BOTTOM,                                 [Style.BOLD]: Shapes.MIDDLE_TO_RIGHT },\n  '': { [Style.NORMAL]: Shapes.RIGHT_TO_BOTTOM,                               [Style.BOLD]: Shapes.MIDDLE_TO_TOP },\n  '': { [Style.NORMAL]: Shapes.TOP_TO_RIGHT,                                  [Style.BOLD]: Shapes.MIDDLE_TO_BOTTOM },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_RIGHT,                               [Style.BOLD]: Shapes.TOP_TO_BOTTOM },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_BOTTOM,                              [Style.BOLD]: Shapes.TOP_TO_RIGHT },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_TOP,                                 [Style.BOLD]: Shapes.RIGHT_TO_BOTTOM },\n  '': { [Style.NORMAL]: Shapes.TOP_TO_BOTTOM,                                 [Style.BOLD]: Shapes.MIDDLE_TO_LEFT },\n  '': { [Style.NORMAL]: Shapes.LEFT_TO_BOTTOM,                                [Style.BOLD]: Shapes.MIDDLE_TO_TOP },\n  '': { [Style.NORMAL]: Shapes.TOP_TO_LEFT,                                   [Style.BOLD]: Shapes.MIDDLE_TO_BOTTOM },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_LEFT,                                [Style.BOLD]: Shapes.TOP_TO_BOTTOM },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_BOTTOM,                              [Style.BOLD]: Shapes.TOP_TO_LEFT },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_TOP,                                 [Style.BOLD]: Shapes.LEFT_TO_BOTTOM },\n  '': { [Style.NORMAL]: Shapes.RIGHT_TO_BOTTOM,                               [Style.BOLD]: Shapes.MIDDLE_TO_LEFT },\n  '': { [Style.NORMAL]: Shapes.LEFT_TO_BOTTOM,                                [Style.BOLD]: Shapes.MIDDLE_TO_RIGHT },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_BOTTOM,                              [Style.BOLD]: Shapes.LEFT_TO_RIGHT },\n  '': { [Style.NORMAL]: Shapes.LEFT_TO_RIGHT,                                 [Style.BOLD]: Shapes.MIDDLE_TO_BOTTOM },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_RIGHT,                               [Style.BOLD]: Shapes.LEFT_TO_BOTTOM },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_LEFT,                                [Style.BOLD]: Shapes.RIGHT_TO_BOTTOM },\n  '': { [Style.NORMAL]: Shapes.TOP_TO_RIGHT,                                  [Style.BOLD]: Shapes.MIDDLE_TO_LEFT },\n  '': { [Style.NORMAL]: Shapes.TOP_TO_LEFT,                                   [Style.BOLD]: Shapes.MIDDLE_TO_RIGHT },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_TOP,                                 [Style.BOLD]: Shapes.LEFT_TO_RIGHT },\n  '': { [Style.NORMAL]: Shapes.LEFT_TO_RIGHT,                                 [Style.BOLD]: Shapes.MIDDLE_TO_TOP },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_RIGHT,                               [Style.BOLD]: Shapes.TOP_TO_LEFT },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_LEFT,                                [Style.BOLD]: Shapes.TOP_TO_RIGHT },\n  '': { [Style.NORMAL]: `${Shapes.TOP_TO_BOTTOM} ${Shapes.MIDDLE_TO_RIGHT}`,  [Style.BOLD]: Shapes.MIDDLE_TO_LEFT },\n  '': { [Style.NORMAL]: `${Shapes.TOP_TO_BOTTOM} ${Shapes.MIDDLE_TO_LEFT}`,   [Style.BOLD]: Shapes.MIDDLE_TO_RIGHT },\n  '': { [Style.NORMAL]: Shapes.TOP_TO_BOTTOM,                                 [Style.BOLD]: Shapes.LEFT_TO_RIGHT },\n  '': { [Style.NORMAL]: `${Shapes.LEFT_TO_RIGHT} ${Shapes.MIDDLE_TO_BOTTOM}`, [Style.BOLD]: Shapes.MIDDLE_TO_TOP },\n  '': { [Style.NORMAL]: `${Shapes.MIDDLE_TO_TOP} ${Shapes.LEFT_TO_RIGHT}`,    [Style.BOLD]: Shapes.MIDDLE_TO_BOTTOM },\n  '': { [Style.NORMAL]: Shapes.LEFT_TO_RIGHT,                                 [Style.BOLD]: Shapes.TOP_TO_BOTTOM },\n  '': { [Style.NORMAL]: Shapes.RIGHT_TO_BOTTOM,                               [Style.BOLD]: Shapes.TOP_TO_LEFT },\n  '': { [Style.NORMAL]: Shapes.LEFT_TO_BOTTOM,                                [Style.BOLD]: Shapes.TOP_TO_RIGHT },\n  '': { [Style.NORMAL]: Shapes.TOP_TO_RIGHT,                                  [Style.BOLD]: Shapes.LEFT_TO_BOTTOM },\n  '': { [Style.NORMAL]: Shapes.TOP_TO_LEFT,                                   [Style.BOLD]: Shapes.RIGHT_TO_BOTTOM },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_BOTTOM,                              [Style.BOLD]: `${Shapes.MIDDLE_TO_TOP} ${Shapes.LEFT_TO_RIGHT}` },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_TOP,                                 [Style.BOLD]: `${Shapes.LEFT_TO_RIGHT} ${Shapes.MIDDLE_TO_BOTTOM}` },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_RIGHT,                               [Style.BOLD]: `${Shapes.TOP_TO_BOTTOM} ${Shapes.MIDDLE_TO_LEFT}` },\n  '': { [Style.NORMAL]: Shapes.MIDDLE_TO_LEFT,                                [Style.BOLD]: `${Shapes.TOP_TO_BOTTOM} ${Shapes.MIDDLE_TO_RIGHT}` },\n\n  // Dashed\n  '': { [Style.NORMAL]: Shapes.TWO_DASHES_HORIZONTAL },\n  '': { [Style.BOLD]:   Shapes.TWO_DASHES_HORIZONTAL },\n  '': { [Style.NORMAL]: Shapes.THREE_DASHES_HORIZONTAL },\n  '': { [Style.BOLD]:   Shapes.THREE_DASHES_HORIZONTAL },\n  '': { [Style.NORMAL]: Shapes.FOUR_DASHES_HORIZONTAL },\n  '': { [Style.BOLD]:   Shapes.FOUR_DASHES_HORIZONTAL },\n  '': { [Style.NORMAL]: Shapes.TWO_DASHES_VERTICAL },\n  '': { [Style.BOLD]:   Shapes.TWO_DASHES_VERTICAL },\n  '': { [Style.NORMAL]: Shapes.THREE_DASHES_VERTICAL  },\n  '': { [Style.BOLD]:   Shapes.THREE_DASHES_VERTICAL },\n  '': { [Style.NORMAL]: Shapes.FOUR_DASHES_VERTICAL },\n  '': { [Style.BOLD]:   Shapes.FOUR_DASHES_VERTICAL },\n\n  // Curved\n  '': { [Style.NORMAL]: (xp, yp) => `M.5,1 L.5,${.5 + (yp / .15 * .5)} C.5,${.5 + (yp / .15 * .5)},.5,.5,1,.5` },\n  '': { [Style.NORMAL]: (xp, yp) => `M.5,1 L.5,${.5 + (yp / .15 * .5)} C.5,${.5 + (yp / .15 * .5)},.5,.5,0,.5` },\n  '': { [Style.NORMAL]: (xp, yp) => `M.5,0 L.5,${.5 - (yp / .15 * .5)} C.5,${.5 - (yp / .15 * .5)},.5,.5,0,.5` },\n  '': { [Style.NORMAL]: (xp, yp) => `M.5,0 L.5,${.5 - (yp / .15 * .5)} C.5,${.5 - (yp / .15 * .5)},.5,.5,1,.5` }\n};\n\ninterface IVectorShape {\n  d: string;\n  type: VectorType;\n  leftPadding?: number;\n  rightPadding?: number;\n}\n\nconst enum VectorType {\n  FILL,\n  STROKE\n}\n\n/**\n * This contains the definitions of the primarily used box drawing characters as vector shapes. The\n * reason these characters are defined specially is to avoid common problems if a user's font has\n * not been patched with powerline characters and also to get pixel perfect rendering as rendering\n * issues can occur around AA/SPAA.\n *\n * The line variants draw beyond the cell and get clipped to ensure the end of the line is not\n * visible.\n *\n * Original symbols defined in https://github.com/powerline/fontpatcher\n */\nexport const powerlineDefinitions: { [index: string]: IVectorShape } = {\n  // Git branch\n  '\\u{E0A0}': { d: 'M.3,1 L.03,1 L.03,.88 C.03,.82,.06,.78,.11,.73 C.15,.7,.2,.68,.28,.65 L.43,.6 C.49,.58,.53,.56,.56,.53 C.59,.5,.6,.47,.6,.43 L.6,.27 L.4,.27 L.69,.1 L.98,.27 L.78,.27 L.78,.46 C.78,.52,.76,.56,.72,.61 C.68,.66,.63,.67,.56,.7 L.48,.72 C.42,.74,.38,.76,.35,.78 C.32,.8,.31,.84,.31,.88 L.31,1 M.3,.5 L.03,.59 L.03,.09 L.3,.09 L.3,.655', type: VectorType.FILL },\n  // L N\n  '\\u{E0A1}': { d: 'M.7,.4 L.7,.47 L.2,.47 L.2,.03 L.355,.03 L.355,.4 L.705,.4 M.7,.5 L.86,.5 L.86,.95 L.69,.95 L.44,.66 L.46,.86 L.46,.95 L.3,.95 L.3,.49 L.46,.49 L.71,.78 L.69,.565 L.69,.5', type: VectorType.FILL },\n  // Lock\n  '\\u{E0A2}': { d: 'M.25,.94 C.16,.94,.11,.92,.11,.87 L.11,.53 C.11,.48,.15,.455,.23,.45 L.23,.3 C.23,.25,.26,.22,.31,.19 C.36,.16,.43,.15,.51,.15 C.59,.15,.66,.16,.71,.19 C.77,.22,.79,.26,.79,.3 L.79,.45 C.87,.45,.91,.48,.91,.53 L.91,.87 C.91,.92,.86,.94,.77,.94 L.24,.94 M.53,.2 C.49,.2,.45,.21,.42,.23 C.39,.25,.38,.27,.38,.3 L.38,.45 L.68,.45 L.68,.3 C.68,.27,.67,.25,.64,.23 C.61,.21,.58,.2,.53,.2 M.58,.82 L.58,.66 C.63,.65,.65,.63,.65,.6 C.65,.58,.64,.57,.61,.56 C.58,.55,.56,.54,.52,.54 C.48,.54,.46,.55,.43,.56 C.4,.57,.39,.59,.39,.6 C.39,.63,.41,.64,.46,.66 L.46,.82 L.57,.82', type: VectorType.FILL },\n  // Right triangle solid\n  '\\u{E0B0}': { d: 'M0,0 L1,.5 L0,1', type: VectorType.FILL, rightPadding: 2 },\n  // Right triangle line\n  '\\u{E0B1}': { d: 'M-1,-.5 L1,.5 L-1,1.5', type: VectorType.STROKE, leftPadding: 1, rightPadding: 1 },\n  // Left triangle solid\n  '\\u{E0B2}': { d: 'M1,0 L0,.5 L1,1', type: VectorType.FILL, leftPadding: 2 },\n  // Left triangle line\n  '\\u{E0B3}': { d: 'M2,-.5 L0,.5 L2,1.5', type: VectorType.STROKE, leftPadding: 1, rightPadding: 1 },\n  // Right semi-circle solid\n  '\\u{E0B4}': { d: 'M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0', type: VectorType.FILL, rightPadding: 1 },\n  // Right semi-circle line\n  '\\u{E0B5}': { d: 'M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0', type: VectorType.STROKE, rightPadding: 1 },\n  // Left semi-circle solid\n  '\\u{E0B6}': { d: 'M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0', type: VectorType.FILL, leftPadding: 1 },\n  // Left semi-circle line\n  '\\u{E0B7}': { d: 'M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0', type: VectorType.STROKE, leftPadding: 1 },\n  // Lower left triangle\n  '\\u{E0B8}': { d: 'M-.5,-.5 L1.5,1.5 L-.5,1.5', type: VectorType.FILL },\n  // Backslash separator\n  '\\u{E0B9}': { d: 'M-.5,-.5 L1.5,1.5', type: VectorType.STROKE, leftPadding: 1, rightPadding: 1 },\n  // Lower right triangle\n  '\\u{E0BA}': { d: 'M1.5,-.5 L-.5,1.5 L1.5,1.5', type: VectorType.FILL },\n  // Upper left triangle\n  '\\u{E0BC}': { d: 'M1.5,-.5 L-.5,1.5 L-.5,-.5', type: VectorType.FILL },\n  // Forward slash separator\n  '\\u{E0BD}': { d: 'M1.5,-.5 L-.5,1.5', type: VectorType.STROKE, leftPadding: 1, rightPadding: 1 },\n  // Upper right triangle\n  '\\u{E0BE}': { d: 'M-.5,-.5 L1.5,1.5 L1.5,-.5', type: VectorType.FILL }\n};\n// Forward slash separator redundant\npowerlineDefinitions['\\u{E0BB}'] = powerlineDefinitions['\\u{E0BD}'];\n// Backslash separator redundant\npowerlineDefinitions['\\u{E0BF}'] = powerlineDefinitions['\\u{E0B9}'];\n\n/**\n * Try drawing a custom block element or box drawing character, returning whether it was\n * successfully drawn.\n */\nexport function tryDrawCustomChar(\n  ctx: CanvasRenderingContext2D,\n  c: string,\n  xOffset: number,\n  yOffset: number,\n  deviceCellWidth: number,\n  deviceCellHeight: number,\n  fontSize: number,\n  devicePixelRatio: number\n): boolean {\n  const blockElementDefinition = blockElementDefinitions[c];\n  if (blockElementDefinition) {\n    drawBlockElementChar(ctx, blockElementDefinition, xOffset, yOffset, deviceCellWidth, deviceCellHeight);\n    return true;\n  }\n\n  const patternDefinition = patternCharacterDefinitions[c];\n  if (patternDefinition) {\n    drawPatternChar(ctx, patternDefinition, xOffset, yOffset, deviceCellWidth, deviceCellHeight);\n    return true;\n  }\n\n  const boxDrawingDefinition = boxDrawingDefinitions[c];\n  if (boxDrawingDefinition) {\n    drawBoxDrawingChar(ctx, boxDrawingDefinition, xOffset, yOffset, deviceCellWidth, deviceCellHeight, devicePixelRatio);\n    return true;\n  }\n\n  const powerlineDefinition = powerlineDefinitions[c];\n  if (powerlineDefinition) {\n    drawPowerlineChar(ctx, powerlineDefinition, xOffset, yOffset, deviceCellWidth, deviceCellHeight, fontSize, devicePixelRatio);\n    return true;\n  }\n\n  return false;\n}\n\nfunction drawBlockElementChar(\n  ctx: CanvasRenderingContext2D,\n  charDefinition: IBlockVector[],\n  xOffset: number,\n  yOffset: number,\n  deviceCellWidth: number,\n  deviceCellHeight: number\n): void {\n  for (let i = 0; i < charDefinition.length; i++) {\n    const box = charDefinition[i];\n    const xEighth = deviceCellWidth / 8;\n    const yEighth = deviceCellHeight / 8;\n    ctx.fillRect(\n      xOffset + box.x * xEighth,\n      yOffset + box.y * yEighth,\n      box.w * xEighth,\n      box.h * yEighth\n    );\n  }\n}\n\nconst cachedPatterns: Map<PatternDefinition, Map</* fillStyle */string, CanvasPattern>> = new Map();\n\nfunction drawPatternChar(\n  ctx: CanvasRenderingContext2D,\n  charDefinition: number[][],\n  xOffset: number,\n  yOffset: number,\n  deviceCellWidth: number,\n  deviceCellHeight: number\n): void {\n  let patternSet = cachedPatterns.get(charDefinition);\n  if (!patternSet) {\n    patternSet = new Map();\n    cachedPatterns.set(charDefinition, patternSet);\n  }\n  const fillStyle = ctx.fillStyle;\n  if (typeof fillStyle !== 'string') {\n    throw new Error(`Unexpected fillStyle type \"${fillStyle}\"`);\n  }\n  let pattern = patternSet.get(fillStyle);\n  if (!pattern) {\n    const width = charDefinition[0].length;\n    const height = charDefinition.length;\n    const tmpCanvas = ctx.canvas.ownerDocument.createElement('canvas');\n    tmpCanvas.width = width;\n    tmpCanvas.height = height;\n    const tmpCtx = throwIfFalsy(tmpCanvas.getContext('2d'));\n    const imageData = new ImageData(width, height);\n\n    // Extract rgba from fillStyle\n    let r: number;\n    let g: number;\n    let b: number;\n    let a: number;\n    if (fillStyle.startsWith('#')) {\n      r = parseInt(fillStyle.slice(1, 3), 16);\n      g = parseInt(fillStyle.slice(3, 5), 16);\n      b = parseInt(fillStyle.slice(5, 7), 16);\n      a = fillStyle.length > 7 && parseInt(fillStyle.slice(7, 9), 16) || 1;\n    } else if (fillStyle.startsWith('rgba')) {\n      ([r, g, b, a] = fillStyle.substring(5, fillStyle.length - 1).split(',').map(e => parseFloat(e)));\n    } else {\n      throw new Error(`Unexpected fillStyle color format \"${fillStyle}\" when drawing pattern glyph`);\n    }\n\n    for (let y = 0; y < height; y++) {\n      for (let x = 0; x < width; x++) {\n        imageData.data[(y * width + x) * 4    ] = r;\n        imageData.data[(y * width + x) * 4 + 1] = g;\n        imageData.data[(y * width + x) * 4 + 2] = b;\n        imageData.data[(y * width + x) * 4 + 3] = charDefinition[y][x] * (a * 255);\n      }\n    }\n    tmpCtx.putImageData(imageData, 0, 0);\n    pattern = throwIfFalsy(ctx.createPattern(tmpCanvas, null));\n    patternSet.set(fillStyle, pattern);\n  }\n  ctx.fillStyle = pattern;\n  ctx.fillRect(xOffset, yOffset, deviceCellWidth, deviceCellHeight);\n}\n\n/**\n * Draws the following box drawing characters by mapping a subset of SVG d attribute instructions to\n * canvas draw calls.\n *\n * Box styles:        \n *     \n *           \n *     \n *           \n *     \n *\n * Other:\n *        \n *          \n *    \n *\n * All box drawing characters:\n *                \n *                \n *                \n *                \n *                \n *                \n *                \n *                \n *\n * ---\n *\n * Box drawing alignment tests:                                          \n *                                                                       \n *                         \n *                     \n *                                   \n *                            \n *                                \n *                      \n *                           \n *\n * Source: https://www.w3.org/2001/06/utf-8-test/UTF-8-demo.html\n */\nfunction drawBoxDrawingChar(\n  ctx: CanvasRenderingContext2D,\n  charDefinition: { [fontWeight: number]: string | ((xp: number, yp: number) => string) },\n  xOffset: number,\n  yOffset: number,\n  deviceCellWidth: number,\n  deviceCellHeight: number,\n  devicePixelRatio: number\n): void {\n  ctx.strokeStyle = ctx.fillStyle;\n  for (const [fontWeight, instructions] of Object.entries(charDefinition)) {\n    ctx.beginPath();\n    ctx.lineWidth = devicePixelRatio * Number.parseInt(fontWeight);\n    let actualInstructions: string;\n    if (typeof instructions === 'function') {\n      const xp = .15;\n      const yp = .15 / deviceCellHeight * deviceCellWidth;\n      actualInstructions = instructions(xp, yp);\n    } else {\n      actualInstructions = instructions;\n    }\n    for (const instruction of actualInstructions.split(' ')) {\n      const type = instruction[0];\n      const f = svgToCanvasInstructionMap[type];\n      if (!f) {\n        console.error(`Could not find drawing instructions for \"${type}\"`);\n        continue;\n      }\n      const args: string[] = instruction.substring(1).split(',');\n      if (!args[0] || !args[1]) {\n        continue;\n      }\n      f(ctx, translateArgs(args, deviceCellWidth, deviceCellHeight, xOffset, yOffset, true, devicePixelRatio));\n    }\n    ctx.stroke();\n    ctx.closePath();\n  }\n}\n\nfunction drawPowerlineChar(\n  ctx: CanvasRenderingContext2D,\n  charDefinition: IVectorShape,\n  xOffset: number,\n  yOffset: number,\n  deviceCellWidth: number,\n  deviceCellHeight: number,\n  fontSize: number,\n  devicePixelRatio: number\n): void {\n  // Clip the cell to make sure drawing doesn't occur beyond bounds\n  const clipRegion = new Path2D();\n  clipRegion.rect(xOffset, yOffset, deviceCellWidth, deviceCellHeight);\n  ctx.clip(clipRegion);\n\n  ctx.beginPath();\n  // Scale the stroke with DPR and font size\n  const cssLineWidth = fontSize / 12;\n  ctx.lineWidth = devicePixelRatio * cssLineWidth;\n  for (const instruction of charDefinition.d.split(' ')) {\n    const type = instruction[0];\n    const f = svgToCanvasInstructionMap[type];\n    if (!f) {\n      console.error(`Could not find drawing instructions for \"${type}\"`);\n      continue;\n    }\n    const args: string[] = instruction.substring(1).split(',');\n    if (!args[0] || !args[1]) {\n      continue;\n    }\n    f(ctx, translateArgs(\n      args,\n      deviceCellWidth,\n      deviceCellHeight,\n      xOffset,\n      yOffset,\n      false,\n      devicePixelRatio,\n      (charDefinition.leftPadding ?? 0) * (cssLineWidth / 2),\n      (charDefinition.rightPadding ?? 0) * (cssLineWidth / 2)\n    ));\n  }\n  if (charDefinition.type === VectorType.STROKE) {\n    ctx.strokeStyle = ctx.fillStyle;\n    ctx.stroke();\n  } else {\n    ctx.fill();\n  }\n  ctx.closePath();\n}\n\nfunction clamp(value: number, max: number, min: number = 0): number {\n  return Math.max(Math.min(value, max), min);\n}\n\nconst svgToCanvasInstructionMap: { [index: string]: any } = {\n  'C': (ctx: CanvasRenderingContext2D, args: number[]) => ctx.bezierCurveTo(args[0], args[1], args[2], args[3], args[4], args[5]),\n  'L': (ctx: CanvasRenderingContext2D, args: number[]) => ctx.lineTo(args[0], args[1]),\n  'M': (ctx: CanvasRenderingContext2D, args: number[]) => ctx.moveTo(args[0], args[1])\n};\n\nfunction translateArgs(args: string[], cellWidth: number, cellHeight: number, xOffset: number, yOffset: number, doClamp: boolean, devicePixelRatio: number, leftPadding: number = 0, rightPadding: number = 0): number[] {\n  const result = args.map(e => parseFloat(e) || parseInt(e));\n\n  if (result.length < 2) {\n    throw new Error('Too few arguments for instruction');\n  }\n\n  for (let x = 0; x < result.length; x += 2) {\n    // Translate from 0-1 to 0-cellWidth\n    result[x] *= cellWidth - (leftPadding * devicePixelRatio) - (rightPadding * devicePixelRatio);\n    // Ensure coordinate doesn't escape cell bounds and round to the nearest 0.5 to ensure a crisp\n    // line at 100% devicePixelRatio\n    if (doClamp && result[x] !== 0) {\n      result[x] = clamp(Math.round(result[x] + 0.5) - 0.5, cellWidth, 0);\n    }\n    // Apply the cell's offset (ie. x*cellWidth)\n    result[x] += xOffset + (leftPadding * devicePixelRatio);\n  }\n\n  for (let y = 1; y < result.length; y += 2) {\n    // Translate from 0-1 to 0-cellHeight\n    result[y] *= cellHeight;\n    // Ensure coordinate doesn't escape cell bounds and round to the nearest 0.5 to ensure a crisp\n    // line at 100% devicePixelRatio\n    if (doClamp && result[y] !== 0) {\n      result[y] = clamp(Math.round(result[y] + 0.5) - 0.5, cellHeight, 0);\n    }\n    // Apply the cell's offset (ie. x*cellHeight)\n    result[y] += yOffset;\n  }\n\n  return result;\n}\n","/**\n * Copyright (c) 2022 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { toDisposable, IDisposable } from 'vs/base/common/lifecycle';\n\nexport function observeDevicePixelDimensions(element: HTMLElement, parentWindow: Window & typeof globalThis, callback: (deviceWidth: number, deviceHeight: number) => void): IDisposable {\n  // Observe any resizes to the element and extract the actual pixel size of the element if the\n  // devicePixelContentBoxSize API is supported. This allows correcting rounding errors when\n  // converting between CSS pixels and device pixels which causes blurry rendering when device\n  // pixel ratio is not a round number.\n  let observer: ResizeObserver | undefined = new parentWindow.ResizeObserver((entries) => {\n    const entry = entries.find((entry) => entry.target === element);\n    if (!entry) {\n      return;\n    }\n\n    // Disconnect if devicePixelContentBoxSize isn't supported by the browser\n    if (!('devicePixelContentBoxSize' in entry)) {\n      observer?.disconnect();\n      observer = undefined;\n      return;\n    }\n\n    // Fire the callback, ignore events where the dimensions are 0x0 as the canvas is likely hidden\n    const width = entry.devicePixelContentBoxSize[0].inlineSize;\n    const height = entry.devicePixelContentBoxSize[0].blockSize;\n    if (width > 0 && height > 0) {\n      callback(width, height);\n    }\n  });\n  try {\n    observer.observe(element, { box: ['device-pixel-content-box'] } as any);\n  } catch {\n    observer.disconnect();\n    observer = undefined;\n  }\n  return toDisposable(() => observer?.disconnect());\n}\n","/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\nimport { TextureAtlas } from './TextureAtlas';\nimport { IRenderDimensions } from 'browser/renderer/shared/Types';\nimport { NULL_CELL_CODE } from 'common/buffer/Constants';\nimport { Disposable, toDisposable } from 'vs/base/common/lifecycle';\nimport { Terminal } from '@xterm/xterm';\nimport { IRenderModel, IWebGL2RenderingContext, IWebGLVertexArrayObject, type IRasterizedGlyph, type ITextureAtlas } from './Types';\nimport { createProgram, GLTexture, PROJECTION_MATRIX } from './WebglUtils';\nimport type { IOptionsService } from 'common/services/Services';\nimport { allowRescaling, throwIfFalsy } from 'browser/renderer/shared/RendererUtils';\n\ninterface IVertices {\n  attributes: Float32Array;\n  /**\n   * These buffers are the ones used to bind to WebGL, the reason there are\n   * multiple is to allow double buffering to work as you cannot modify the\n   * buffer while it's being used by the GPU. Having multiple lets us start\n   * working on the next frame.\n   */\n  attributesBuffers: Float32Array[];\n  count: number;\n}\n\nconst enum VertexAttribLocations {\n  UNIT_QUAD = 0,\n  CELL_POSITION = 1,\n  OFFSET = 2,\n  SIZE = 3,\n  TEXPAGE = 4,\n  TEXCOORD = 5,\n  TEXSIZE = 6\n}\n\nconst vertexShaderSource = `#version 300 es\nlayout (location = ${VertexAttribLocations.UNIT_QUAD}) in vec2 a_unitquad;\nlayout (location = ${VertexAttribLocations.CELL_POSITION}) in vec2 a_cellpos;\nlayout (location = ${VertexAttribLocations.OFFSET}) in vec2 a_offset;\nlayout (location = ${VertexAttribLocations.SIZE}) in vec2 a_size;\nlayout (location = ${VertexAttribLocations.TEXPAGE}) in float a_texpage;\nlayout (location = ${VertexAttribLocations.TEXCOORD}) in vec2 a_texcoord;\nlayout (location = ${VertexAttribLocations.TEXSIZE}) in vec2 a_texsize;\n\nuniform mat4 u_projection;\nuniform vec2 u_resolution;\n\nout vec2 v_texcoord;\nflat out int v_texpage;\n\nvoid main() {\n  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);\n  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);\n  v_texpage = int(a_texpage);\n  v_texcoord = a_texcoord + a_unitquad * a_texsize;\n}`;\n\nfunction createFragmentShaderSource(maxFragmentShaderTextureUnits: number): string {\n  let textureConditionals = '';\n  for (let i = 1; i < maxFragmentShaderTextureUnits; i++) {\n    textureConditionals += ` else if (v_texpage == ${i}) { outColor = texture(u_texture[${i}], v_texcoord); }`;\n  }\n  return (`#version 300 es\nprecision lowp float;\n\nin vec2 v_texcoord;\nflat in int v_texpage;\n\nuniform sampler2D u_texture[${maxFragmentShaderTextureUnits}];\n\nout vec4 outColor;\n\nvoid main() {\n  if (v_texpage == 0) {\n    outColor = texture(u_texture[0], v_texcoord);\n  } ${textureConditionals}\n}`);\n}\n\nconst INDICES_PER_CELL = 11;\nconst BYTES_PER_CELL = INDICES_PER_CELL * Float32Array.BYTES_PER_ELEMENT;\nconst CELL_POSITION_INDICES = 2;\n\n// Work variables to avoid garbage collection\nlet $i = 0;\nlet $glyph: IRasterizedGlyph | undefined = undefined;\nlet $leftCellPadding = 0;\nlet $clippedPixels = 0;\n\nexport class GlyphRenderer extends Disposable {\n  private readonly _program: WebGLProgram;\n  private readonly _vertexArrayObject: IWebGLVertexArrayObject;\n  private readonly _projectionLocation: WebGLUniformLocation;\n  private readonly _resolutionLocation: WebGLUniformLocation;\n  private readonly _textureLocation: WebGLUniformLocation;\n  private readonly _atlasTextures: GLTexture[];\n  private readonly _attributesBuffer: WebGLBuffer;\n\n  private _atlas: ITextureAtlas | undefined;\n  private _activeBuffer: number = 0;\n  private readonly _vertices: IVertices = {\n    count: 0,\n    attributes: new Float32Array(0),\n    attributesBuffers: [\n      new Float32Array(0),\n      new Float32Array(0)\n    ]\n  };\n\n  constructor(\n    private readonly _terminal: Terminal,\n    private readonly _gl: IWebGL2RenderingContext,\n    private _dimensions: IRenderDimensions,\n    private readonly _optionsService: IOptionsService\n  ) {\n    super();\n\n    const gl = this._gl;\n\n    if (TextureAtlas.maxAtlasPages === undefined) {\n      // Typically 8 or 16\n      TextureAtlas.maxAtlasPages = Math.min(32, throwIfFalsy(gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS) as number | null));\n      // Almost all clients will support >= 4096\n      TextureAtlas.maxTextureSize = throwIfFalsy(gl.getParameter(gl.MAX_TEXTURE_SIZE) as number | null);\n    }\n\n    this._program = throwIfFalsy(createProgram(gl, vertexShaderSource, createFragmentShaderSource(TextureAtlas.maxAtlasPages)));\n    this._register(toDisposable(() => gl.deleteProgram(this._program)));\n\n    // Uniform locations\n    this._projectionLocation = throwIfFalsy(gl.getUniformLocation(this._program, 'u_projection'));\n    this._resolutionLocation = throwIfFalsy(gl.getUniformLocation(this._program, 'u_resolution'));\n    this._textureLocation = throwIfFalsy(gl.getUniformLocation(this._program, 'u_texture'));\n\n    // Create and set the vertex array object\n    this._vertexArrayObject = gl.createVertexArray();\n    gl.bindVertexArray(this._vertexArrayObject);\n\n    // Setup a_unitquad, this defines the 4 vertices of a rectangle\n    const unitQuadVertices = new Float32Array([0, 0, 1, 0, 0, 1, 1, 1]);\n    const unitQuadVerticesBuffer = gl.createBuffer();\n    this._register(toDisposable(() => gl.deleteBuffer(unitQuadVerticesBuffer)));\n    gl.bindBuffer(gl.ARRAY_BUFFER, unitQuadVerticesBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, unitQuadVertices, gl.STATIC_DRAW);\n    gl.enableVertexAttribArray(VertexAttribLocations.UNIT_QUAD);\n    gl.vertexAttribPointer(VertexAttribLocations.UNIT_QUAD, 2, this._gl.FLOAT, false, 0, 0);\n\n    // Setup the unit quad element array buffer, this points to indices in\n    // unitQuadVertices to allow is to draw 2 triangles from the vertices via a\n    // triangle strip\n    const unitQuadElementIndices = new Uint8Array([0, 1, 2, 3]);\n    const elementIndicesBuffer = gl.createBuffer();\n    this._register(toDisposable(() => gl.deleteBuffer(elementIndicesBuffer)));\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, elementIndicesBuffer);\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, unitQuadElementIndices, gl.STATIC_DRAW);\n\n    // Setup attributes\n    this._attributesBuffer = throwIfFalsy(gl.createBuffer());\n    this._register(toDisposable(() => gl.deleteBuffer(this._attributesBuffer)));\n    gl.bindBuffer(gl.ARRAY_BUFFER, this._attributesBuffer);\n    gl.enableVertexAttribArray(VertexAttribLocations.OFFSET);\n    gl.vertexAttribPointer(VertexAttribLocations.OFFSET, 2, gl.FLOAT, false, BYTES_PER_CELL, 0);\n    gl.vertexAttribDivisor(VertexAttribLocations.OFFSET, 1);\n    gl.enableVertexAttribArray(VertexAttribLocations.SIZE);\n    gl.vertexAttribPointer(VertexAttribLocations.SIZE, 2, gl.FLOAT, false, BYTES_PER_CELL, 2 * Float32Array.BYTES_PER_ELEMENT);\n    gl.vertexAttribDivisor(VertexAttribLocations.SIZE, 1);\n    gl.enableVertexAttribArray(VertexAttribLocations.TEXPAGE);\n    gl.vertexAttribPointer(VertexAttribLocations.TEXPAGE, 1, gl.FLOAT, false, BYTES_PER_CELL, 4 * Float32Array.BYTES_PER_ELEMENT);\n    gl.vertexAttribDivisor(VertexAttribLocations.TEXPAGE, 1);\n    gl.enableVertexAttribArray(VertexAttribLocations.TEXCOORD);\n    gl.vertexAttribPointer(VertexAttribLocations.TEXCOORD, 2, gl.FLOAT, false, BYTES_PER_CELL, 5 * Float32Array.BYTES_PER_ELEMENT);\n    gl.vertexAttribDivisor(VertexAttribLocations.TEXCOORD, 1);\n    gl.enableVertexAttribArray(VertexAttribLocations.TEXSIZE);\n    gl.vertexAttribPointer(VertexAttribLocations.TEXSIZE, 2, gl.FLOAT, false, BYTES_PER_CELL, 7 * Float32Array.BYTES_PER_ELEMENT);\n    gl.vertexAttribDivisor(VertexAttribLocations.TEXSIZE, 1);\n    gl.enableVertexAttribArray(VertexAttribLocations.CELL_POSITION);\n    gl.vertexAttribPointer(VertexAttribLocations.CELL_POSITION, 2, gl.FLOAT, false, BYTES_PER_CELL, 9 * Float32Array.BYTES_PER_ELEMENT);\n    gl.vertexAttribDivisor(VertexAttribLocations.CELL_POSITION, 1);\n\n    // Setup static uniforms\n    gl.useProgram(this._program);\n    const textureUnits = new Int32Array(TextureAtlas.maxAtlasPages);\n    for (let i = 0; i < TextureAtlas.maxAtlasPages; i++) {\n      textureUnits[i] = i;\n    }\n    gl.uniform1iv(this._textureLocation, textureUnits);\n    gl.uniformMatrix4fv(this._projectionLocation, false, PROJECTION_MATRIX);\n\n    // Setup 1x1 red pixel textures for all potential atlas pages, if one of these invalid textures\n    // is ever drawn it will show characters as red rectangles.\n    this._atlasTextures = [];\n    for (let i = 0; i < TextureAtlas.maxAtlasPages; i++) {\n      const glTexture = new GLTexture(throwIfFalsy(gl.createTexture()));\n      this._register(toDisposable(() => gl.deleteTexture(glTexture.texture)));\n      gl.activeTexture(gl.TEXTURE0 + i);\n      gl.bindTexture(gl.TEXTURE_2D, glTexture.texture);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, new Uint8Array([255, 0, 0, 255]));\n      this._atlasTextures[i] = glTexture;\n    }\n\n    // Allow drawing of transparent texture\n    gl.enable(gl.BLEND);\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n    // Set viewport\n    this.handleResize();\n  }\n\n  public beginFrame(): boolean {\n    return this._atlas ? this._atlas.beginFrame() : true;\n  }\n\n  public updateCell(x: number, y: number, code: number, bg: number, fg: number, ext: number, chars: string, width: number, lastBg: number): void {\n    // Since this function is called for every cell (`rows*cols`), it must be very optimized. It\n    // should not instantiate any variables unless a new glyph is drawn to the cache where the\n    // slight slowdown is acceptable for the developer ergonomics provided as it's a once of for\n    // each glyph.\n    this._updateCell(this._vertices.attributes, x, y, code, bg, fg, ext, chars, width, lastBg);\n  }\n\n  private _updateCell(array: Float32Array, x: number, y: number, code: number | undefined, bg: number, fg: number, ext: number, chars: string, width: number, lastBg: number): void {\n    $i = (y * this._terminal.cols + x) * INDICES_PER_CELL;\n\n    // Exit early if this is a null character, allow space character to continue as it may have\n    // underline/strikethrough styles\n    if (code === NULL_CELL_CODE || code === undefined/* This is used for the right side of wide chars */) {\n      array.fill(0, $i, $i + INDICES_PER_CELL - 1 - CELL_POSITION_INDICES);\n      return;\n    }\n\n    if (!this._atlas) {\n      return;\n    }\n\n    // Get the glyph\n    if (chars && chars.length > 1) {\n      $glyph = this._atlas.getRasterizedGlyphCombinedChar(chars, bg, fg, ext, false, this._terminal.element);\n    } else {\n      $glyph = this._atlas.getRasterizedGlyph(code, bg, fg, ext, false, this._terminal.element);\n    }\n\n    $leftCellPadding = Math.floor((this._dimensions.device.cell.width - this._dimensions.device.char.width) / 2);\n    if (bg !== lastBg && $glyph.offset.x > $leftCellPadding) {\n      $clippedPixels = $glyph.offset.x - $leftCellPadding;\n      // a_origin\n      array[$i    ] = -($glyph.offset.x - $clippedPixels) + this._dimensions.device.char.left;\n      array[$i + 1] = -$glyph.offset.y + this._dimensions.device.char.top;\n      // a_size\n      array[$i + 2] = ($glyph.size.x - $clippedPixels) / this._dimensions.device.canvas.width;\n      array[$i + 3] = $glyph.size.y / this._dimensions.device.canvas.height;\n      // a_texpage\n      array[$i + 4] = $glyph.texturePage;\n      // a_texcoord\n      array[$i + 5] = $glyph.texturePositionClipSpace.x + $clippedPixels / this._atlas.pages[$glyph.texturePage].canvas.width;\n      array[$i + 6] = $glyph.texturePositionClipSpace.y;\n      // a_texsize\n      array[$i + 7] = $glyph.sizeClipSpace.x - $clippedPixels / this._atlas.pages[$glyph.texturePage].canvas.width;\n      array[$i + 8] = $glyph.sizeClipSpace.y;\n    } else {\n      // a_origin\n      array[$i    ] = -$glyph.offset.x + this._dimensions.device.char.left;\n      array[$i + 1] = -$glyph.offset.y + this._dimensions.device.char.top;\n      // a_size\n      array[$i + 2] = $glyph.size.x / this._dimensions.device.canvas.width;\n      array[$i + 3] = $glyph.size.y / this._dimensions.device.canvas.height;\n      // a_texpage\n      array[$i + 4] = $glyph.texturePage;\n      // a_texcoord\n      array[$i + 5] = $glyph.texturePositionClipSpace.x;\n      array[$i + 6] = $glyph.texturePositionClipSpace.y;\n      // a_texsize\n      array[$i + 7] = $glyph.sizeClipSpace.x;\n      array[$i + 8] = $glyph.sizeClipSpace.y;\n    }\n    // a_cellpos only changes on resize\n\n    // Reduce scale horizontally for wide glyphs printed in cells that would overlap with the\n    // following cell (ie. the width is not 2).\n    if (this._optionsService.rawOptions.rescaleOverlappingGlyphs) {\n      if (allowRescaling(code, width, $glyph.size.x, this._dimensions.device.cell.width)) {\n        array[$i + 2] = (this._dimensions.device.cell.width - 1) / this._dimensions.device.canvas.width; // - 1 to improve readability\n      }\n    }\n  }\n\n  public clear(): void {\n    const terminal = this._terminal;\n    const newCount = terminal.cols * terminal.rows * INDICES_PER_CELL;\n\n    // Clear vertices\n    if (this._vertices.count !== newCount) {\n      this._vertices.attributes = new Float32Array(newCount);\n    } else {\n      this._vertices.attributes.fill(0);\n    }\n    let i = 0;\n    for (; i < this._vertices.attributesBuffers.length; i++) {\n      if (this._vertices.count !== newCount) {\n        this._vertices.attributesBuffers[i] = new Float32Array(newCount);\n      } else {\n        this._vertices.attributesBuffers[i].fill(0);\n      }\n    }\n    this._vertices.count = newCount;\n    i = 0;\n    for (let y = 0; y < terminal.rows; y++) {\n      for (let x = 0; x < terminal.cols; x++) {\n        this._vertices.attributes[i + 9] = x / terminal.cols;\n        this._vertices.attributes[i + 10] = y / terminal.rows;\n        i += INDICES_PER_CELL;\n      }\n    }\n  }\n\n  public handleResize(): void {\n    const gl = this._gl;\n    gl.useProgram(this._program);\n    gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n    gl.uniform2f(this._resolutionLocation, gl.canvas.width, gl.canvas.height);\n    this.clear();\n  }\n\n  public render(renderModel: IRenderModel): void {\n    if (!this._atlas) {\n      return;\n    }\n\n    const gl = this._gl;\n\n    gl.useProgram(this._program);\n    gl.bindVertexArray(this._vertexArrayObject);\n\n    // Alternate buffers each frame as the active buffer gets locked while it's in use by the GPU\n    this._activeBuffer = (this._activeBuffer + 1) % 2;\n    const activeBuffer = this._vertices.attributesBuffers[this._activeBuffer];\n\n    // Copy data for each cell of each line up to its line length (the last non-whitespace cell)\n    // from the attributes buffer into activeBuffer, which is the one that gets bound to the GPU.\n    // The reasons for this are as follows:\n    // - So the active buffer can be alternated so we don't get blocked on rendering finishing\n    // - To copy either the normal attributes buffer or the selection attributes buffer when there\n    //   is a selection\n    // - So we don't send vertices for all the line-ending whitespace to the GPU\n    let bufferLength = 0;\n    for (let y = 0; y < renderModel.lineLengths.length; y++) {\n      const si = y * this._terminal.cols * INDICES_PER_CELL;\n      const sub = this._vertices.attributes.subarray(si, si + renderModel.lineLengths[y] * INDICES_PER_CELL);\n      activeBuffer.set(sub, bufferLength);\n      bufferLength += sub.length;\n    }\n\n    // Bind the attributes buffer\n    gl.bindBuffer(gl.ARRAY_BUFFER, this._attributesBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, activeBuffer.subarray(0, bufferLength), gl.STREAM_DRAW);\n\n    // Bind the atlas page texture if they have changed\n    for (let i = 0; i < this._atlas.pages.length; i++) {\n      if (this._atlas.pages[i].version !== this._atlasTextures[i].version) {\n        this._bindAtlasPageTexture(gl, this._atlas, i);\n      }\n    }\n\n    // Draw the viewport\n    gl.drawElementsInstanced(gl.TRIANGLE_STRIP, 4, gl.UNSIGNED_BYTE, 0, bufferLength / INDICES_PER_CELL);\n  }\n\n  public setAtlas(atlas: ITextureAtlas): void {\n    this._atlas = atlas;\n    for (const glTexture of this._atlasTextures) {\n      glTexture.version = -1;\n    }\n  }\n\n  private _bindAtlasPageTexture(gl: IWebGL2RenderingContext, atlas: ITextureAtlas, i: number): void {\n    gl.activeTexture(gl.TEXTURE0 + i);\n    gl.bindTexture(gl.TEXTURE_2D, this._atlasTextures[i].texture);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, atlas.pages[i].canvas);\n    gl.generateMipmap(gl.TEXTURE_2D);\n    this._atlasTextures[i].version = atlas.pages[i].version;\n  }\n\n  public setDimensions(dimensions: IRenderDimensions): void {\n    this._dimensions = dimensions;\n  }\n}\n","/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IRenderDimensions } from 'browser/renderer/shared/Types';\nimport { IThemeService } from 'browser/services/Services';\nimport { ReadonlyColorSet } from 'browser/Types';\nimport { Attributes, FgFlags } from 'common/buffer/Constants';\nimport { Disposable, toDisposable } from 'vs/base/common/lifecycle';\nimport { IColor } from 'common/Types';\nimport { Terminal } from '@xterm/xterm';\nimport { RENDER_MODEL_BG_OFFSET, RENDER_MODEL_FG_OFFSET, RENDER_MODEL_INDICIES_PER_CELL } from './RenderModel';\nimport { IRenderModel, IWebGL2RenderingContext, IWebGLVertexArrayObject } from './Types';\nimport { createProgram, expandFloat32Array, PROJECTION_MATRIX } from './WebglUtils';\nimport { throwIfFalsy } from 'browser/renderer/shared/RendererUtils';\n\nconst enum VertexAttribLocations {\n  POSITION = 0,\n  SIZE = 1,\n  COLOR = 2,\n  UNIT_QUAD = 3\n}\n\nconst vertexShaderSource = `#version 300 es\nlayout (location = ${VertexAttribLocations.POSITION}) in vec2 a_position;\nlayout (location = ${VertexAttribLocations.SIZE}) in vec2 a_size;\nlayout (location = ${VertexAttribLocations.COLOR}) in vec4 a_color;\nlayout (location = ${VertexAttribLocations.UNIT_QUAD}) in vec2 a_unitquad;\n\nuniform mat4 u_projection;\n\nout vec4 v_color;\n\nvoid main() {\n  vec2 zeroToOne = a_position + (a_unitquad * a_size);\n  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);\n  v_color = a_color;\n}`;\n\nconst fragmentShaderSource = `#version 300 es\nprecision lowp float;\n\nin vec4 v_color;\n\nout vec4 outColor;\n\nvoid main() {\n  outColor = v_color;\n}`;\n\nconst INDICES_PER_RECTANGLE = 8;\nconst BYTES_PER_RECTANGLE = INDICES_PER_RECTANGLE * Float32Array.BYTES_PER_ELEMENT;\n\nconst INITIAL_BUFFER_RECTANGLE_CAPACITY = 20 * INDICES_PER_RECTANGLE;\n\nclass Vertices {\n  public attributes: Float32Array;\n  public count: number;\n\n  constructor() {\n    this.attributes = new Float32Array(INITIAL_BUFFER_RECTANGLE_CAPACITY);\n    this.count = 0;\n  }\n}\n\n// Work variables to avoid garbage collection\nlet $rgba = 0;\nlet $x1 = 0;\nlet $y1 = 0;\nlet $r = 0;\nlet $g = 0;\nlet $b = 0;\nlet $a = 0;\n\nexport class RectangleRenderer extends Disposable {\n\n  private _program: WebGLProgram;\n  private _vertexArrayObject: IWebGLVertexArrayObject;\n  private _attributesBuffer: WebGLBuffer;\n  private _projectionLocation: WebGLUniformLocation;\n  private _bgFloat!: Float32Array;\n  private _cursorFloat!: Float32Array;\n\n  private _vertices: Vertices = new Vertices();\n  private _verticesCursor: Vertices = new Vertices();\n\n  constructor(\n    private _terminal: Terminal,\n    private _gl: IWebGL2RenderingContext,\n    private _dimensions: IRenderDimensions,\n    private readonly _themeService: IThemeService\n  ) {\n    super();\n\n    const gl = this._gl;\n\n    this._program = throwIfFalsy(createProgram(gl, vertexShaderSource, fragmentShaderSource));\n    this._register(toDisposable(() => gl.deleteProgram(this._program)));\n\n    // Uniform locations\n    this._projectionLocation = throwIfFalsy(gl.getUniformLocation(this._program, 'u_projection'));\n\n    // Create and set the vertex array object\n    this._vertexArrayObject = gl.createVertexArray();\n    gl.bindVertexArray(this._vertexArrayObject);\n\n    // Setup a_unitquad, this defines the 4 vertices of a rectangle\n    const unitQuadVertices = new Float32Array([0, 0, 1, 0, 0, 1, 1, 1]);\n    const unitQuadVerticesBuffer = gl.createBuffer();\n    this._register(toDisposable(() => gl.deleteBuffer(unitQuadVerticesBuffer)));\n    gl.bindBuffer(gl.ARRAY_BUFFER, unitQuadVerticesBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, unitQuadVertices, gl.STATIC_DRAW);\n    gl.enableVertexAttribArray(VertexAttribLocations.UNIT_QUAD);\n    gl.vertexAttribPointer(VertexAttribLocations.UNIT_QUAD, 2, this._gl.FLOAT, false, 0, 0);\n\n    // Setup the unit quad element array buffer, this points to indices in\n    // unitQuadVertices to allow is to draw 2 triangles from the vertices via a\n    // triangle strip\n    const unitQuadElementIndices = new Uint8Array([0, 1, 2, 3]);\n    const elementIndicesBuffer = gl.createBuffer();\n    this._register(toDisposable(() => gl.deleteBuffer(elementIndicesBuffer)));\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, elementIndicesBuffer);\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, unitQuadElementIndices, gl.STATIC_DRAW);\n\n    // Setup attributes\n    this._attributesBuffer = throwIfFalsy(gl.createBuffer());\n    this._register(toDisposable(() => gl.deleteBuffer(this._attributesBuffer)));\n    gl.bindBuffer(gl.ARRAY_BUFFER, this._attributesBuffer);\n    gl.enableVertexAttribArray(VertexAttribLocations.POSITION);\n    gl.vertexAttribPointer(VertexAttribLocations.POSITION, 2, gl.FLOAT, false, BYTES_PER_RECTANGLE, 0);\n    gl.vertexAttribDivisor(VertexAttribLocations.POSITION, 1);\n    gl.enableVertexAttribArray(VertexAttribLocations.SIZE);\n    gl.vertexAttribPointer(VertexAttribLocations.SIZE, 2, gl.FLOAT, false, BYTES_PER_RECTANGLE, 2 * Float32Array.BYTES_PER_ELEMENT);\n    gl.vertexAttribDivisor(VertexAttribLocations.SIZE, 1);\n    gl.enableVertexAttribArray(VertexAttribLocations.COLOR);\n    gl.vertexAttribPointer(VertexAttribLocations.COLOR, 4, gl.FLOAT, false, BYTES_PER_RECTANGLE, 4 * Float32Array.BYTES_PER_ELEMENT);\n    gl.vertexAttribDivisor(VertexAttribLocations.COLOR, 1);\n\n    this._updateCachedColors(_themeService.colors);\n    this._register(this._themeService.onChangeColors(e => {\n      this._updateCachedColors(e);\n      this._updateViewportRectangle();\n    }));\n  }\n\n  public renderBackgrounds(): void {\n    this._renderVertices(this._vertices);\n  }\n\n  public renderCursor(): void {\n    this._renderVertices(this._verticesCursor);\n  }\n\n  private _renderVertices(vertices: Vertices): void {\n    const gl = this._gl;\n\n    gl.useProgram(this._program);\n\n    gl.bindVertexArray(this._vertexArrayObject);\n\n    gl.uniformMatrix4fv(this._projectionLocation, false, PROJECTION_MATRIX);\n\n    // Bind attributes buffer and draw\n    gl.bindBuffer(gl.ARRAY_BUFFER, this._attributesBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, vertices.attributes, gl.DYNAMIC_DRAW);\n    gl.drawElementsInstanced(this._gl.TRIANGLE_STRIP, 4, gl.UNSIGNED_BYTE, 0, vertices.count);\n  }\n\n  public handleResize(): void {\n    this._updateViewportRectangle();\n  }\n\n  public setDimensions(dimensions: IRenderDimensions): void {\n    this._dimensions = dimensions;\n  }\n\n  private _updateCachedColors(colors: ReadonlyColorSet): void {\n    this._bgFloat = this._colorToFloat32Array(colors.background);\n    this._cursorFloat = this._colorToFloat32Array(colors.cursor);\n  }\n\n  private _updateViewportRectangle(): void {\n    // Set first rectangle that clears the screen\n    this._addRectangleFloat(\n      this._vertices.attributes,\n      0,\n      0,\n      0,\n      this._terminal.cols * this._dimensions.device.cell.width,\n      this._terminal.rows * this._dimensions.device.cell.height,\n      this._bgFloat\n    );\n  }\n\n  public updateBackgrounds(model: IRenderModel): void {\n    const terminal = this._terminal;\n    const vertices = this._vertices;\n\n    // Declare variable ahead of time to avoid garbage collection\n    let rectangleCount = 1;\n    let y: number;\n    let x: number;\n    let currentStartX: number;\n    let currentBg: number;\n    let currentFg: number;\n    let currentInverse: boolean;\n    let modelIndex: number;\n    let bg: number;\n    let fg: number;\n    let inverse: boolean;\n    let offset: number;\n\n    for (y = 0; y < terminal.rows; y++) {\n      currentStartX = -1;\n      currentBg = 0;\n      currentFg = 0;\n      currentInverse = false;\n      for (x = 0; x < terminal.cols; x++) {\n        modelIndex = ((y * terminal.cols) + x) * RENDER_MODEL_INDICIES_PER_CELL;\n        bg = model.cells[modelIndex + RENDER_MODEL_BG_OFFSET];\n        fg = model.cells[modelIndex + RENDER_MODEL_FG_OFFSET];\n        inverse = !!(fg & FgFlags.INVERSE);\n        if (bg !== currentBg || (fg !== currentFg && (currentInverse || inverse))) {\n          // A rectangle needs to be drawn if going from non-default to another color\n          if (currentBg !== 0 || (currentInverse && currentFg !== 0)) {\n            offset = rectangleCount++ * INDICES_PER_RECTANGLE;\n            this._updateRectangle(vertices, offset, currentFg, currentBg, currentStartX, x, y);\n          }\n          currentStartX = x;\n          currentBg = bg;\n          currentFg = fg;\n          currentInverse = inverse;\n        }\n      }\n      // Finish rectangle if it's still going\n      if (currentBg !== 0 || (currentInverse && currentFg !== 0)) {\n        offset = rectangleCount++ * INDICES_PER_RECTANGLE;\n        this._updateRectangle(vertices, offset, currentFg, currentBg, currentStartX, terminal.cols, y);\n      }\n    }\n    vertices.count = rectangleCount;\n  }\n\n  public updateCursor(model: IRenderModel): void {\n    const vertices = this._verticesCursor;\n    const cursor = model.cursor;\n    if (!cursor || cursor.style === 'block') {\n      vertices.count = 0;\n      return;\n    }\n\n    let offset: number;\n    let rectangleCount = 0;\n\n    if (cursor.style === 'bar' || cursor.style === 'outline') {\n      // Left edge\n      offset = rectangleCount++ * INDICES_PER_RECTANGLE;\n      this._addRectangleFloat(\n        vertices.attributes,\n        offset,\n        cursor.x * this._dimensions.device.cell.width,\n        cursor.y * this._dimensions.device.cell.height,\n        cursor.style === 'bar' ? cursor.dpr * cursor.cursorWidth : cursor.dpr,\n        this._dimensions.device.cell.height,\n        this._cursorFloat\n      );\n    }\n    if (cursor.style === 'underline' || cursor.style === 'outline') {\n      // Bottom edge\n      offset = rectangleCount++ * INDICES_PER_RECTANGLE;\n      this._addRectangleFloat(\n        vertices.attributes,\n        offset,\n        cursor.x * this._dimensions.device.cell.width,\n        (cursor.y + 1) * this._dimensions.device.cell.height - cursor.dpr,\n        cursor.width * this._dimensions.device.cell.width,\n        cursor.dpr,\n        this._cursorFloat\n      );\n    }\n    if (cursor.style === 'outline') {\n      // Top edge\n      offset = rectangleCount++ * INDICES_PER_RECTANGLE;\n      this._addRectangleFloat(\n        vertices.attributes,\n        offset,\n        cursor.x * this._dimensions.device.cell.width,\n        cursor.y * this._dimensions.device.cell.height,\n        cursor.width * this._dimensions.device.cell.width,\n        cursor.dpr,\n        this._cursorFloat\n      );\n      // Right edge\n      offset = rectangleCount++ * INDICES_PER_RECTANGLE;\n      this._addRectangleFloat(\n        vertices.attributes,\n        offset,\n        (cursor.x + cursor.width) * this._dimensions.device.cell.width - cursor.dpr,\n        cursor.y * this._dimensions.device.cell.height,\n        cursor.dpr,\n        this._dimensions.device.cell.height,\n        this._cursorFloat\n      );\n    }\n\n    vertices.count = rectangleCount;\n  }\n\n  private _updateRectangle(vertices: Vertices, offset: number, fg: number, bg: number, startX: number, endX: number, y: number): void {\n    if (fg & FgFlags.INVERSE) {\n      switch (fg & Attributes.CM_MASK) {\n        case Attributes.CM_P16:\n        case Attributes.CM_P256:\n          $rgba = this._themeService.colors.ansi[fg & Attributes.PCOLOR_MASK].rgba;\n          break;\n        case Attributes.CM_RGB:\n          $rgba = (fg & Attributes.RGB_MASK) << 8;\n          break;\n        case Attributes.CM_DEFAULT:\n        default:\n          $rgba = this._themeService.colors.foreground.rgba;\n      }\n    } else {\n      switch (bg & Attributes.CM_MASK) {\n        case Attributes.CM_P16:\n        case Attributes.CM_P256:\n          $rgba = this._themeService.colors.ansi[bg & Attributes.PCOLOR_MASK].rgba;\n          break;\n        case Attributes.CM_RGB:\n          $rgba = (bg & Attributes.RGB_MASK) << 8;\n          break;\n        case Attributes.CM_DEFAULT:\n        default:\n          $rgba = this._themeService.colors.background.rgba;\n      }\n    }\n\n    if (vertices.attributes.length < offset + 4) {\n      vertices.attributes = expandFloat32Array(vertices.attributes, this._terminal.rows * this._terminal.cols * INDICES_PER_RECTANGLE);\n    }\n    $x1 = startX * this._dimensions.device.cell.width;\n    $y1 = y * this._dimensions.device.cell.height;\n    $r = (($rgba >> 24) & 0xFF) / 255;\n    $g = (($rgba >> 16) & 0xFF) / 255;\n    $b = (($rgba >> 8 ) & 0xFF) / 255;\n    $a = 1;\n\n    this._addRectangle(vertices.attributes, offset, $x1, $y1, (endX - startX) * this._dimensions.device.cell.width, this._dimensions.device.cell.height, $r, $g, $b, $a);\n  }\n\n  private _addRectangle(array: Float32Array, offset: number, x1: number, y1: number, width: number, height: number, r: number, g: number, b: number, a: number): void {\n    array[offset    ] = x1 / this._dimensions.device.canvas.width;\n    array[offset + 1] = y1 / this._dimensions.device.canvas.height;\n    array[offset + 2] = width / this._dimensions.device.canvas.width;\n    array[offset + 3] = height / this._dimensions.device.canvas.height;\n    array[offset + 4] = r;\n    array[offset + 5] = g;\n    array[offset + 6] = b;\n    array[offset + 7] = a;\n  }\n\n  private _addRectangleFloat(array: Float32Array, offset: number, x1: number, y1: number, width: number, height: number, color: Float32Array): void {\n    array[offset    ] = x1 / this._dimensions.device.canvas.width;\n    array[offset + 1] = y1 / this._dimensions.device.canvas.height;\n    array[offset + 2] = width / this._dimensions.device.canvas.width;\n    array[offset + 3] = height / this._dimensions.device.canvas.height;\n    array[offset + 4] = color[0];\n    array[offset + 5] = color[1];\n    array[offset + 6] = color[2];\n    array[offset + 7] = color[3];\n  }\n\n  private _colorToFloat32Array(color: IColor): Float32Array {\n    return new Float32Array([\n      ((color.rgba >> 24) & 0xFF) / 255,\n      ((color.rgba >> 16) & 0xFF) / 255,\n      ((color.rgba >> 8 ) & 0xFF) / 255,\n      ((color.rgba      ) & 0xFF) / 255\n    ]);\n  }\n}\n","/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ICursorRenderModel, IRenderModel } from './Types';\nimport { ISelectionRenderModel } from 'browser/renderer/shared/Types';\nimport { createSelectionRenderModel } from 'browser/renderer/shared/SelectionRenderModel';\n\nexport const RENDER_MODEL_INDICIES_PER_CELL = 4;\nexport const RENDER_MODEL_BG_OFFSET = 1;\nexport const RENDER_MODEL_FG_OFFSET = 2;\nexport const RENDER_MODEL_EXT_OFFSET = 3;\n\nexport const COMBINED_CHAR_BIT_MASK = 0x80000000;\n\nexport class RenderModel implements IRenderModel {\n  public cells: Uint32Array;\n  public lineLengths: Uint32Array;\n  public selection: ISelectionRenderModel;\n  public cursor?: ICursorRenderModel;\n\n  constructor() {\n    this.cells = new Uint32Array(0);\n    this.lineLengths = new Uint32Array(0);\n    this.selection = createSelectionRenderModel();\n  }\n\n  public resize(cols: number, rows: number): void {\n    const indexCount = cols * rows * RENDER_MODEL_INDICIES_PER_CELL;\n    if (indexCount !== this.cells.length) {\n      this.cells = new Uint32Array(indexCount);\n      this.lineLengths = new Uint32Array(rows);\n    }\n  }\n\n  public clear(): void {\n    this.cells.fill(0, 0);\n    this.lineLengths.fill(0, 0);\n  }\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IColorContrastCache } from 'browser/Types';\nimport { DIM_OPACITY, TEXT_BASELINE } from './Constants';\nimport { tryDrawCustomChar } from './CustomGlyphs';\nimport { computeNextVariantOffset, treatGlyphAsBackgroundColor, isPowerlineGlyph, isRestrictedPowerlineGlyph, throwIfFalsy } from 'browser/renderer/shared/RendererUtils';\nimport { IBoundingBox, ICharAtlasConfig, IRasterizedGlyph, ITextureAtlas } from './Types';\nimport { NULL_COLOR, channels, color, rgba } from 'common/Color';\nimport { FourKeyMap } from 'common/MultiKeyMap';\nimport { IdleTaskQueue } from 'common/TaskQueue';\nimport { IColor } from 'common/Types';\nimport { AttributeData } from 'common/buffer/AttributeData';\nimport { Attributes, DEFAULT_COLOR, DEFAULT_EXT, UnderlineStyle } from 'common/buffer/Constants';\nimport { IUnicodeService } from 'common/services/Services';\nimport { Emitter } from 'vs/base/common/event';\n\n/**\n * A shared object which is used to draw nothing for a particular cell.\n */\nconst NULL_RASTERIZED_GLYPH: IRasterizedGlyph = {\n  texturePage: 0,\n  texturePosition: { x: 0, y: 0 },\n  texturePositionClipSpace: { x: 0, y: 0 },\n  offset: { x: 0, y: 0 },\n  size: { x: 0, y: 0 },\n  sizeClipSpace: { x: 0, y: 0 }\n};\n\nconst TMP_CANVAS_GLYPH_PADDING = 2;\n\nconst enum Constants {\n  /**\n   * The amount of pixel padding to allow in each row. Setting this to zero would make the atlas\n   * page pack as tightly as possible, but more pages would end up being created as a result.\n   */\n  ROW_PIXEL_THRESHOLD = 2,\n  /**\n   * The maximum texture size regardless of what the actual hardware maximum turns out to be. This\n   * is enforced to ensure uploading the texture still finishes in a reasonable amount of time. A\n   * 4096 squared image takes up 16MB of GPU memory.\n   */\n  FORCED_MAX_TEXTURE_SIZE = 4096\n}\n\ninterface ICharAtlasActiveRow {\n  x: number;\n  y: number;\n  height: number;\n}\n\n// Work variables to avoid garbage collection\nlet $glyph = undefined;\n\nexport class TextureAtlas implements ITextureAtlas {\n  private _didWarmUp: boolean = false;\n\n  private _cacheMap: FourKeyMap<number, number, number, number, IRasterizedGlyph> = new FourKeyMap();\n  private _cacheMapCombined: FourKeyMap<string, number, number, number, IRasterizedGlyph> = new FourKeyMap();\n\n  // The texture that the atlas is drawn to\n  private _pages: AtlasPage[] = [];\n  public get pages(): { canvas: HTMLCanvasElement, version: number }[] { return this._pages; }\n\n  // The set of atlas pages that can be written to\n  private _activePages: AtlasPage[] = [];\n  private _overflowSizePage: AtlasPage | undefined;\n\n  private _tmpCanvas: HTMLCanvasElement;\n  // A temporary context that glyphs are drawn to before being transfered to the atlas.\n  private _tmpCtx: CanvasRenderingContext2D;\n\n  private _workBoundingBox: IBoundingBox = { top: 0, left: 0, bottom: 0, right: 0 };\n  private _workAttributeData: AttributeData = new AttributeData();\n\n  private _textureSize: number = 512;\n\n  public static maxAtlasPages: number | undefined;\n  public static maxTextureSize: number | undefined;\n\n  private readonly _onAddTextureAtlasCanvas = new Emitter<HTMLCanvasElement>();\n  public readonly onAddTextureAtlasCanvas = this._onAddTextureAtlasCanvas.event;\n  private readonly _onRemoveTextureAtlasCanvas = new Emitter<HTMLCanvasElement>();\n  public readonly onRemoveTextureAtlasCanvas = this._onRemoveTextureAtlasCanvas.event;\n\n  constructor(\n    private readonly _document: Document,\n    private readonly _config: ICharAtlasConfig,\n    private readonly _unicodeService: IUnicodeService\n  ) {\n    this._createNewPage();\n    this._tmpCanvas = createCanvas(\n      _document,\n      this._config.deviceCellWidth * 4 + TMP_CANVAS_GLYPH_PADDING * 2,\n      this._config.deviceCellHeight + TMP_CANVAS_GLYPH_PADDING * 2\n    );\n    this._tmpCtx = throwIfFalsy(this._tmpCanvas.getContext('2d', {\n      alpha: this._config.allowTransparency,\n      willReadFrequently: true\n    }));\n  }\n\n  public dispose(): void {\n    this._tmpCanvas.remove();\n    for (const page of this.pages) {\n      page.canvas.remove();\n    }\n    this._onAddTextureAtlasCanvas.dispose();\n  }\n\n  public warmUp(): void {\n    if (!this._didWarmUp) {\n      this._doWarmUp();\n      this._didWarmUp = true;\n    }\n  }\n\n  private _doWarmUp(): void {\n    // Pre-fill with ASCII 33-126, this is not urgent and done in idle callbacks\n    const queue = new IdleTaskQueue();\n    for (let i = 33; i < 126; i++) {\n      queue.enqueue(() => {\n        if (!this._cacheMap.get(i, DEFAULT_COLOR, DEFAULT_COLOR, DEFAULT_EXT)) {\n          const rasterizedGlyph = this._drawToCache(i, DEFAULT_COLOR, DEFAULT_COLOR, DEFAULT_EXT, false, undefined);\n          this._cacheMap.set(i, DEFAULT_COLOR, DEFAULT_COLOR, DEFAULT_EXT, rasterizedGlyph);\n        }\n      });\n    }\n  }\n\n  private _requestClearModel = false;\n  public beginFrame(): boolean {\n    return this._requestClearModel;\n  }\n\n  public clearTexture(): void {\n    if (this._pages[0].currentRow.x === 0 && this._pages[0].currentRow.y === 0) {\n      return;\n    }\n    for (const page of this._pages) {\n      page.clear();\n    }\n    this._cacheMap.clear();\n    this._cacheMapCombined.clear();\n    this._didWarmUp = false;\n  }\n\n  private _createNewPage(): AtlasPage {\n    // Try merge the set of the 4 most used pages of the largest size. This is is deferred to a\n    // microtask to ensure it does not interrupt textures that will be rendered in the current\n    // animation frame which would result in blank rendered areas. This is actually not that\n    // expensive relative to drawing the glyphs, so there is no need to wait for an idle callback.\n    if (TextureAtlas.maxAtlasPages && this._pages.length >= Math.max(4, TextureAtlas.maxAtlasPages)) {\n      // Find the set of the largest 4 images, below the maximum size, with the highest\n      // percentages used\n      const pagesBySize = this._pages.filter(e => {\n        return e.canvas.width * 2 <= (TextureAtlas.maxTextureSize || Constants.FORCED_MAX_TEXTURE_SIZE);\n      }).sort((a, b) => {\n        if (b.canvas.width !== a.canvas.width) {\n          return b.canvas.width - a.canvas.width;\n        }\n        return b.percentageUsed - a.percentageUsed;\n      });\n      let sameSizeI = -1;\n      let size = 0;\n      for (let i = 0; i < pagesBySize.length; i++) {\n        if (pagesBySize[i].canvas.width !== size) {\n          sameSizeI = i;\n          size = pagesBySize[i].canvas.width;\n        } else if (i - sameSizeI === 3) {\n          break;\n        }\n      }\n\n      // Gather details of the merge\n      const mergingPages = pagesBySize.slice(sameSizeI, sameSizeI + 4);\n      const sortedMergingPagesIndexes = mergingPages.map(e => e.glyphs[0].texturePage).sort((a, b) => a > b ? 1 : -1);\n      const mergedPageIndex = this.pages.length - mergingPages.length;\n\n      // Merge into the new page\n      const mergedPage = this._mergePages(mergingPages, mergedPageIndex);\n      mergedPage.version++;\n\n      // Delete the pages, shifting glyph texture pages as needed\n      for (let i = sortedMergingPagesIndexes.length - 1; i >= 0; i--) {\n        this._deletePage(sortedMergingPagesIndexes[i]);\n      }\n\n      // Add the new merged page to the end\n      this.pages.push(mergedPage);\n\n      // Request the model to be cleared to refresh all texture pages.\n      this._requestClearModel = true;\n      this._onAddTextureAtlasCanvas.fire(mergedPage.canvas);\n    }\n\n    // All new atlas pages are created small as they are highly dynamic\n    const newPage = new AtlasPage(this._document, this._textureSize);\n    this._pages.push(newPage);\n    this._activePages.push(newPage);\n    this._onAddTextureAtlasCanvas.fire(newPage.canvas);\n    return newPage;\n  }\n\n  private _mergePages(mergingPages: AtlasPage[], mergedPageIndex: number): AtlasPage {\n    const mergedSize = mergingPages[0].canvas.width * 2;\n    const mergedPage = new AtlasPage(this._document, mergedSize, mergingPages);\n    for (const [i, p] of mergingPages.entries()) {\n      const xOffset = i * p.canvas.width % mergedSize;\n      const yOffset = Math.floor(i / 2) * p.canvas.height;\n      mergedPage.ctx.drawImage(p.canvas, xOffset, yOffset);\n      for (const g of p.glyphs) {\n        g.texturePage = mergedPageIndex;\n        g.sizeClipSpace.x = g.size.x / mergedSize;\n        g.sizeClipSpace.y = g.size.y / mergedSize;\n        g.texturePosition.x += xOffset;\n        g.texturePosition.y += yOffset;\n        g.texturePositionClipSpace.x = g.texturePosition.x / mergedSize;\n        g.texturePositionClipSpace.y = g.texturePosition.y / mergedSize;\n      }\n\n      this._onRemoveTextureAtlasCanvas.fire(p.canvas);\n\n      // Remove the merging page from active pages if it was there\n      const index = this._activePages.indexOf(p);\n      if (index !== -1) {\n        this._activePages.splice(index, 1);\n      }\n    }\n    return mergedPage;\n  }\n\n  private _deletePage(pageIndex: number): void {\n    this._pages.splice(pageIndex, 1);\n    for (let j = pageIndex; j < this._pages.length; j++) {\n      const adjustingPage = this._pages[j];\n      for (const g of adjustingPage.glyphs) {\n        g.texturePage--;\n      }\n      adjustingPage.version++;\n    }\n  }\n\n  public getRasterizedGlyphCombinedChar(chars: string, bg: number, fg: number, ext: number, restrictToCellHeight: boolean, domContainer: HTMLElement | undefined): IRasterizedGlyph {\n    return this._getFromCacheMap(this._cacheMapCombined, chars, bg, fg, ext, restrictToCellHeight, domContainer);\n  }\n\n  public getRasterizedGlyph(code: number, bg: number, fg: number, ext: number, restrictToCellHeight: boolean, domContainer: HTMLElement | undefined): IRasterizedGlyph {\n    return this._getFromCacheMap(this._cacheMap, code, bg, fg, ext, restrictToCellHeight, domContainer);\n  }\n\n  /**\n   * Gets the glyphs texture coords, drawing the texture if it's not already\n   */\n  private _getFromCacheMap(\n    cacheMap: FourKeyMap<string | number, number, number, number, IRasterizedGlyph>,\n    key: string | number,\n    bg: number,\n    fg: number,\n    ext: number,\n    restrictToCellHeight: boolean,\n    domContainer: HTMLElement | undefined\n  ): IRasterizedGlyph {\n    $glyph = cacheMap.get(key, bg, fg, ext);\n    if (!$glyph) {\n      $glyph = this._drawToCache(key, bg, fg, ext, restrictToCellHeight, domContainer);\n      cacheMap.set(key, bg, fg, ext, $glyph);\n    }\n    return $glyph;\n  }\n\n  private _getColorFromAnsiIndex(idx: number): IColor {\n    if (idx >= this._config.colors.ansi.length) {\n      throw new Error('No color found for idx ' + idx);\n    }\n    return this._config.colors.ansi[idx];\n  }\n\n  private _getBackgroundColor(bgColorMode: number, bgColor: number, inverse: boolean, dim: boolean): IColor {\n    if (this._config.allowTransparency) {\n      // The background color might have some transparency, so we need to render it as fully\n      // transparent in the atlas. Otherwise we'd end up drawing the transparent background twice\n      // around the anti-aliased edges of the glyph, and it would look too dark.\n      return NULL_COLOR;\n    }\n\n    let result: IColor;\n    switch (bgColorMode) {\n      case Attributes.CM_P16:\n      case Attributes.CM_P256:\n        result = this._getColorFromAnsiIndex(bgColor);\n        break;\n      case Attributes.CM_RGB:\n        const arr = AttributeData.toColorRGB(bgColor);\n        result = channels.toColor(arr[0], arr[1], arr[2]);\n        break;\n      case Attributes.CM_DEFAULT:\n      default:\n        if (inverse) {\n          result = color.opaque(this._config.colors.foreground);\n        } else {\n          result = this._config.colors.background;\n        }\n        break;\n    }\n\n    // Ignore alpha channel when allowTransparency is false\n    if (!this._config.allowTransparency) {\n      result = color.opaque(result);\n    }\n\n    return result;\n  }\n\n  private _getForegroundColor(bg: number, bgColorMode: number, bgColor: number, fg: number, fgColorMode: number, fgColor: number, inverse: boolean, dim: boolean, bold: boolean, excludeFromContrastRatioDemands: boolean): IColor {\n    const minimumContrastColor = this._getMinimumContrastColor(bg, bgColorMode, bgColor, fg, fgColorMode, fgColor, inverse, bold, dim, excludeFromContrastRatioDemands);\n    if (minimumContrastColor) {\n      return minimumContrastColor;\n    }\n\n    let result: IColor;\n    switch (fgColorMode) {\n      case Attributes.CM_P16:\n      case Attributes.CM_P256:\n        if (this._config.drawBoldTextInBrightColors && bold && fgColor < 8) {\n          fgColor += 8;\n        }\n        result = this._getColorFromAnsiIndex(fgColor);\n        break;\n      case Attributes.CM_RGB:\n        const arr = AttributeData.toColorRGB(fgColor);\n        result = channels.toColor(arr[0], arr[1], arr[2]);\n        break;\n      case Attributes.CM_DEFAULT:\n      default:\n        if (inverse) {\n          result = this._config.colors.background;\n        } else {\n          result = this._config.colors.foreground;\n        }\n    }\n\n    // Always use an opaque color regardless of allowTransparency\n    if (this._config.allowTransparency) {\n      result = color.opaque(result);\n    }\n\n    // Apply dim to the color, opacity is fine to use for the foreground color\n    if (dim) {\n      result = color.multiplyOpacity(result, DIM_OPACITY);\n    }\n\n    return result;\n  }\n\n  private _resolveBackgroundRgba(bgColorMode: number, bgColor: number, inverse: boolean): number {\n    switch (bgColorMode) {\n      case Attributes.CM_P16:\n      case Attributes.CM_P256:\n        return this._getColorFromAnsiIndex(bgColor).rgba;\n      case Attributes.CM_RGB:\n        return bgColor << 8;\n      case Attributes.CM_DEFAULT:\n      default:\n        if (inverse) {\n          return this._config.colors.foreground.rgba;\n        }\n        return this._config.colors.background.rgba;\n    }\n  }\n\n  private _resolveForegroundRgba(fgColorMode: number, fgColor: number, inverse: boolean, bold: boolean): number {\n    switch (fgColorMode) {\n      case Attributes.CM_P16:\n      case Attributes.CM_P256:\n        if (this._config.drawBoldTextInBrightColors && bold && fgColor < 8) {\n          fgColor += 8;\n        }\n        return this._getColorFromAnsiIndex(fgColor).rgba;\n      case Attributes.CM_RGB:\n        return fgColor << 8;\n      case Attributes.CM_DEFAULT:\n      default:\n        if (inverse) {\n          return this._config.colors.background.rgba;\n        }\n        return this._config.colors.foreground.rgba;\n    }\n  }\n\n  private _getMinimumContrastColor(bg: number, bgColorMode: number, bgColor: number, fg: number, fgColorMode: number, fgColor: number, inverse: boolean, bold: boolean, dim: boolean, excludeFromContrastRatioDemands: boolean): IColor | undefined {\n    if (this._config.minimumContrastRatio === 1 || excludeFromContrastRatioDemands) {\n      return undefined;\n    }\n\n    // Try get from cache first\n    const cache = this._getContrastCache(dim);\n    const adjustedColor = cache.getColor(bg, fg);\n    if (adjustedColor !== undefined) {\n      return adjustedColor || undefined;\n    }\n\n    const bgRgba = this._resolveBackgroundRgba(bgColorMode, bgColor, inverse);\n    const fgRgba = this._resolveForegroundRgba(fgColorMode, fgColor, inverse, bold);\n    // Dim cells only require half the contrast, otherwise they wouldn't be distinguishable from\n    // non-dim cells\n    const result = rgba.ensureContrastRatio(bgRgba, fgRgba, this._config.minimumContrastRatio / (dim ? 2 : 1));\n\n    if (!result) {\n      cache.setColor(bg, fg, null);\n      return undefined;\n    }\n\n    const color = channels.toColor(\n      (result >> 24) & 0xFF,\n      (result >> 16) & 0xFF,\n      (result >> 8) & 0xFF\n    );\n    cache.setColor(bg, fg, color);\n\n    return color;\n  }\n\n  private _getContrastCache(dim: boolean): IColorContrastCache {\n    if (dim) {\n      return this._config.colors.halfContrastCache;\n    }\n    return this._config.colors.contrastCache;\n  }\n\n  private _drawToCache(codeOrChars: number | string, bg: number, fg: number, ext: number, restrictToCellHeight: boolean, domContainer: HTMLElement | undefined): IRasterizedGlyph {\n    const chars = typeof codeOrChars === 'number' ? String.fromCharCode(codeOrChars) : codeOrChars;\n\n    // Uncomment for debugging\n    // console.log(`draw to cache \"${chars}\"`, bg, fg, ext);\n\n    // Attach the canvas to the DOM in order to inherit font-feature-settings\n    // from the parent elements. This is necessary for ligatures and variants to\n    // work.\n    if (domContainer && this._tmpCanvas.parentElement !== domContainer) {\n      this._tmpCanvas.style.display = 'none';\n      domContainer.append(this._tmpCanvas);\n    }\n\n    // Allow 1 cell width per character, with a minimum of 2 (CJK), plus some padding. This is used\n    // to draw the glyph to the canvas as well as to restrict the bounding box search to ensure\n    // giant ligatures (eg. =====>) don't impact overall performance.\n    const allowedWidth = Math.min(this._config.deviceCellWidth * Math.max(chars.length, 2) + TMP_CANVAS_GLYPH_PADDING * 2, this._config.deviceMaxTextureSize);\n    if (this._tmpCanvas.width < allowedWidth) {\n      this._tmpCanvas.width = allowedWidth;\n    }\n    // Include line height when drawing glyphs\n    const allowedHeight = Math.min(this._config.deviceCellHeight + TMP_CANVAS_GLYPH_PADDING * 4, this._textureSize);\n    if (this._tmpCanvas.height < allowedHeight) {\n      this._tmpCanvas.height = allowedHeight;\n    }\n    this._tmpCtx.save();\n\n    this._workAttributeData.fg = fg;\n    this._workAttributeData.bg = bg;\n    this._workAttributeData.extended.ext = ext;\n\n    const invisible = !!this._workAttributeData.isInvisible();\n    if (invisible) {\n      return NULL_RASTERIZED_GLYPH;\n    }\n\n    const bold = !!this._workAttributeData.isBold();\n    const inverse = !!this._workAttributeData.isInverse();\n    const dim = !!this._workAttributeData.isDim();\n    const italic = !!this._workAttributeData.isItalic();\n    const underline = !!this._workAttributeData.isUnderline();\n    const strikethrough = !!this._workAttributeData.isStrikethrough();\n    const overline = !!this._workAttributeData.isOverline();\n    let fgColor = this._workAttributeData.getFgColor();\n    let fgColorMode = this._workAttributeData.getFgColorMode();\n    let bgColor = this._workAttributeData.getBgColor();\n    let bgColorMode = this._workAttributeData.getBgColorMode();\n    if (inverse) {\n      const temp = fgColor;\n      fgColor = bgColor;\n      bgColor = temp;\n      const temp2 = fgColorMode;\n      fgColorMode = bgColorMode;\n      bgColorMode = temp2;\n    }\n\n    // draw the background\n    const backgroundColor = this._getBackgroundColor(bgColorMode, bgColor, inverse, dim);\n    // Use a 'copy' composite operation to clear any existing glyph out of _tmpCtxWithAlpha,\n    // regardless of transparency in backgroundColor\n    this._tmpCtx.globalCompositeOperation = 'copy';\n    this._tmpCtx.fillStyle = backgroundColor.css;\n    this._tmpCtx.fillRect(0, 0, this._tmpCanvas.width, this._tmpCanvas.height);\n    this._tmpCtx.globalCompositeOperation = 'source-over';\n\n    // draw the foreground/glyph\n    const fontWeight = bold ? this._config.fontWeightBold : this._config.fontWeight;\n    const fontStyle = italic ? 'italic' : '';\n    this._tmpCtx.font =\n      `${fontStyle} ${fontWeight} ${this._config.fontSize * this._config.devicePixelRatio}px ${this._config.fontFamily}`;\n    this._tmpCtx.textBaseline = TEXT_BASELINE;\n\n    const powerlineGlyph = chars.length === 1 && isPowerlineGlyph(chars.charCodeAt(0));\n    const restrictedPowerlineGlyph = chars.length === 1 && isRestrictedPowerlineGlyph(chars.charCodeAt(0));\n    const foregroundColor = this._getForegroundColor(bg, bgColorMode, bgColor, fg, fgColorMode, fgColor, inverse, dim, bold, treatGlyphAsBackgroundColor(chars.charCodeAt(0)));\n    this._tmpCtx.fillStyle = foregroundColor.css;\n\n    // For powerline glyphs left/top padding is excluded (https://github.com/microsoft/vscode/issues/120129)\n    const padding = restrictedPowerlineGlyph ? 0 : TMP_CANVAS_GLYPH_PADDING * 2;\n\n    // Draw custom characters if applicable\n    let customGlyph = false;\n    if (this._config.customGlyphs !== false) {\n      customGlyph = tryDrawCustomChar(this._tmpCtx, chars, padding, padding, this._config.deviceCellWidth, this._config.deviceCellHeight, this._config.fontSize, this._config.devicePixelRatio);\n    }\n\n    // Whether to clear pixels based on a threshold difference between the glyph color and the\n    // background color. This should be disabled when the glyph contains multiple colors such as\n    // underline colors to prevent important colors could get cleared.\n    let enableClearThresholdCheck = !powerlineGlyph;\n\n    let chWidth: number;\n    if (typeof codeOrChars === 'number') {\n      chWidth = this._unicodeService.wcwidth(codeOrChars);\n    } else {\n      chWidth = this._unicodeService.getStringCellWidth(codeOrChars);\n    }\n\n    // Draw underline\n    if (underline) {\n      this._tmpCtx.save();\n      const lineWidth = Math.max(1, Math.floor(this._config.fontSize * this._config.devicePixelRatio / 15));\n      // When the line width is odd, draw at a 0.5 position\n      const yOffset = lineWidth % 2 === 1 ? 0.5 : 0;\n      this._tmpCtx.lineWidth = lineWidth;\n\n      // Underline color\n      if (this._workAttributeData.isUnderlineColorDefault()) {\n        this._tmpCtx.strokeStyle = this._tmpCtx.fillStyle;\n      } else if (this._workAttributeData.isUnderlineColorRGB()) {\n        enableClearThresholdCheck = false;\n        this._tmpCtx.strokeStyle = `rgb(${AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(',')})`;\n      } else {\n        enableClearThresholdCheck = false;\n        let fg = this._workAttributeData.getUnderlineColor();\n        if (this._config.drawBoldTextInBrightColors && this._workAttributeData.isBold() && fg < 8) {\n          fg += 8;\n        }\n        this._tmpCtx.strokeStyle = this._getColorFromAnsiIndex(fg).css;\n      }\n\n      // Underline style/stroke\n      this._tmpCtx.beginPath();\n      const xLeft = padding;\n      const yTop = Math.ceil(padding + this._config.deviceCharHeight) - yOffset - (restrictToCellHeight ? lineWidth * 2 : 0);\n      const yMid = yTop + lineWidth;\n      const yBot = yTop + lineWidth * 2;\n      let nextOffset = this._workAttributeData.getUnderlineVariantOffset();\n\n      for (let i = 0; i < chWidth; i++) {\n        this._tmpCtx.save();\n        const xChLeft = xLeft + i * this._config.deviceCellWidth;\n        const xChRight = xLeft + (i + 1) * this._config.deviceCellWidth;\n        const xChMid = xChLeft + this._config.deviceCellWidth / 2;\n        switch (this._workAttributeData.extended.underlineStyle) {\n          case UnderlineStyle.DOUBLE:\n            this._tmpCtx.moveTo(xChLeft, yTop);\n            this._tmpCtx.lineTo(xChRight, yTop);\n            this._tmpCtx.moveTo(xChLeft, yBot);\n            this._tmpCtx.lineTo(xChRight, yBot);\n            break;\n          case UnderlineStyle.CURLY:\n            // Choose the bezier top and bottom based on the device pixel ratio, the curly line is\n            // made taller when the line width is  as otherwise it's not very clear otherwise.\n            const yCurlyBot = lineWidth <= 1 ? yBot : Math.ceil(padding + this._config.deviceCharHeight - lineWidth / 2) - yOffset;\n            const yCurlyTop = lineWidth <= 1 ? yTop : Math.ceil(padding + this._config.deviceCharHeight + lineWidth / 2) - yOffset;\n            // Clip the left and right edges of the underline such that it can be drawn just outside\n            // the edge of the cell to ensure a continuous stroke when there are multiple underlined\n            // glyphs adjacent to one another.\n            const clipRegion = new Path2D();\n            clipRegion.rect(xChLeft, yTop, this._config.deviceCellWidth, yBot - yTop);\n            this._tmpCtx.clip(clipRegion);\n            // Start 1/2 cell before and end 1/2 cells after to ensure a smooth curve with other\n            // cells\n            this._tmpCtx.moveTo(xChLeft - this._config.deviceCellWidth / 2, yMid);\n            this._tmpCtx.bezierCurveTo(\n              xChLeft - this._config.deviceCellWidth / 2, yCurlyTop,\n              xChLeft, yCurlyTop,\n              xChLeft, yMid\n            );\n            this._tmpCtx.bezierCurveTo(\n              xChLeft, yCurlyBot,\n              xChMid, yCurlyBot,\n              xChMid, yMid\n            );\n            this._tmpCtx.bezierCurveTo(\n              xChMid, yCurlyTop,\n              xChRight, yCurlyTop,\n              xChRight, yMid\n            );\n            this._tmpCtx.bezierCurveTo(\n              xChRight, yCurlyBot,\n              xChRight + this._config.deviceCellWidth / 2, yCurlyBot,\n              xChRight + this._config.deviceCellWidth / 2, yMid\n            );\n            break;\n          case UnderlineStyle.DOTTED:\n            const offsetWidth = nextOffset === 0 ? 0 :\n              (nextOffset >= lineWidth ? lineWidth * 2 - nextOffset : lineWidth - nextOffset);\n              // a line and a gap.\n            const isLineStart = nextOffset >= lineWidth ? false : true;\n            if (isLineStart === false || offsetWidth === 0) {\n              this._tmpCtx.setLineDash([Math.round(lineWidth), Math.round(lineWidth)]);\n              this._tmpCtx.moveTo(xChLeft + offsetWidth, yTop);\n              this._tmpCtx.lineTo(xChRight, yTop);\n            } else {\n              this._tmpCtx.setLineDash([Math.round(lineWidth), Math.round(lineWidth)]);\n              this._tmpCtx.moveTo(xChLeft, yTop);\n              this._tmpCtx.lineTo(xChLeft + offsetWidth, yTop);\n              this._tmpCtx.moveTo(xChLeft + offsetWidth + lineWidth, yTop);\n              this._tmpCtx.lineTo(xChRight, yTop);\n            }\n            nextOffset = computeNextVariantOffset(xChRight - xChLeft, lineWidth, nextOffset);\n            break;\n          case UnderlineStyle.DASHED:\n            const lineRatio = 0.6;\n            const gapRatio = 0.3;\n            // End line ratio is approximately equal to 0.1\n            const xChWidth = xChRight - xChLeft;\n            const line = Math.floor(lineRatio * xChWidth);\n            const gap = Math.floor(gapRatio * xChWidth);\n            const end = xChWidth - line - gap;\n            this._tmpCtx.setLineDash([line, gap, end]);\n            this._tmpCtx.moveTo(xChLeft, yTop);\n            this._tmpCtx.lineTo(xChRight, yTop);\n            break;\n          case UnderlineStyle.SINGLE:\n          default:\n            this._tmpCtx.moveTo(xChLeft, yTop);\n            this._tmpCtx.lineTo(xChRight, yTop);\n            break;\n        }\n        this._tmpCtx.stroke();\n        this._tmpCtx.restore();\n      }\n      this._tmpCtx.restore();\n\n      // Draw stroke in the background color for non custom characters in order to give an outline\n      // between the text and the underline. Only do this when font size is >= 12 as the underline\n      // looks odd when the font size is too small\n      if (!customGlyph && this._config.fontSize >= 12) {\n        // This only works when transparency is disabled because it's not clear how to clear stroked\n        // text\n        if (!this._config.allowTransparency && chars !== ' ') {\n          // Measure the text, only draw the stroke if there is a descent beyond an alphabetic text\n          // baseline\n          this._tmpCtx.save();\n          this._tmpCtx.textBaseline = 'alphabetic';\n          const metrics = this._tmpCtx.measureText(chars);\n          this._tmpCtx.restore();\n          if ('actualBoundingBoxDescent' in metrics && metrics.actualBoundingBoxDescent > 0) {\n            // This translates to 1/2 the line width in either direction\n            this._tmpCtx.save();\n            // Clip the region to only draw in valid pixels near the underline to avoid a slight\n            // outline around the whole glyph, as well as additional pixels in the glyph at the top\n            // which would increase GPU memory demands\n            const clipRegion = new Path2D();\n            clipRegion.rect(xLeft, yTop - Math.ceil(lineWidth / 2), this._config.deviceCellWidth * chWidth, yBot - yTop + Math.ceil(lineWidth / 2));\n            this._tmpCtx.clip(clipRegion);\n            this._tmpCtx.lineWidth = this._config.devicePixelRatio * 3;\n            this._tmpCtx.strokeStyle = backgroundColor.css;\n            this._tmpCtx.strokeText(chars, padding, padding + this._config.deviceCharHeight);\n            this._tmpCtx.restore();\n          }\n        }\n      }\n    }\n\n    // Overline\n    if (overline) {\n      const lineWidth = Math.max(1, Math.floor(this._config.fontSize * this._config.devicePixelRatio / 15));\n      const yOffset = lineWidth % 2 === 1 ? 0.5 : 0;\n      this._tmpCtx.lineWidth = lineWidth;\n      this._tmpCtx.strokeStyle = this._tmpCtx.fillStyle;\n      this._tmpCtx.beginPath();\n      this._tmpCtx.moveTo(padding, padding + yOffset);\n      this._tmpCtx.lineTo(padding + this._config.deviceCharWidth * chWidth, padding + yOffset);\n      this._tmpCtx.stroke();\n    }\n\n    // Draw the character\n    if (!customGlyph) {\n      this._tmpCtx.fillText(chars, padding, padding + this._config.deviceCharHeight);\n    }\n\n    // If this character is underscore and beyond the cell bounds, shift it up until it is visible\n    // even on the bottom row, try for a maximum of 5 pixels.\n    if (chars === '_' && !this._config.allowTransparency) {\n      let isBeyondCellBounds = clearColor(this._tmpCtx.getImageData(padding, padding, this._config.deviceCellWidth, this._config.deviceCellHeight), backgroundColor, foregroundColor, enableClearThresholdCheck);\n      if (isBeyondCellBounds) {\n        for (let offset = 1; offset <= 5; offset++) {\n          this._tmpCtx.save();\n          this._tmpCtx.fillStyle = backgroundColor.css;\n          this._tmpCtx.fillRect(0, 0, this._tmpCanvas.width, this._tmpCanvas.height);\n          this._tmpCtx.restore();\n          this._tmpCtx.fillText(chars, padding, padding + this._config.deviceCharHeight - offset);\n          isBeyondCellBounds = clearColor(this._tmpCtx.getImageData(padding, padding, this._config.deviceCellWidth, this._config.deviceCellHeight), backgroundColor, foregroundColor, enableClearThresholdCheck);\n          if (!isBeyondCellBounds) {\n            break;\n          }\n        }\n      }\n    }\n\n    // Draw strokethrough\n    if (strikethrough) {\n      const lineWidth = Math.max(1, Math.floor(this._config.fontSize * this._config.devicePixelRatio / 10));\n      const yOffset = this._tmpCtx.lineWidth % 2 === 1 ? 0.5 : 0; // When the width is odd, draw at 0.5 position\n      this._tmpCtx.lineWidth = lineWidth;\n      this._tmpCtx.strokeStyle = this._tmpCtx.fillStyle;\n      this._tmpCtx.beginPath();\n      this._tmpCtx.moveTo(padding, padding + Math.floor(this._config.deviceCharHeight / 2) - yOffset);\n      this._tmpCtx.lineTo(padding + this._config.deviceCharWidth * chWidth, padding + Math.floor(this._config.deviceCharHeight / 2) - yOffset);\n      this._tmpCtx.stroke();\n    }\n\n    this._tmpCtx.restore();\n\n    // clear the background from the character to avoid issues with drawing over the previous\n    // character if it extends past it's bounds\n    const imageData = this._tmpCtx.getImageData(\n      0, 0, this._tmpCanvas.width, this._tmpCanvas.height\n    );\n\n    // Clear out the background color and determine if the glyph is empty.\n    let isEmpty: boolean;\n    if (!this._config.allowTransparency) {\n      isEmpty = clearColor(imageData, backgroundColor, foregroundColor, enableClearThresholdCheck);\n    } else {\n      isEmpty = checkCompletelyTransparent(imageData);\n    }\n\n    // Handle empty glyphs\n    if (isEmpty) {\n      return NULL_RASTERIZED_GLYPH;\n    }\n\n    const rasterizedGlyph = this._findGlyphBoundingBox(imageData, this._workBoundingBox, allowedWidth, restrictedPowerlineGlyph, customGlyph, padding);\n\n    // Find the best atlas row to use\n    let activePage: AtlasPage;\n    let activeRow: ICharAtlasActiveRow;\n    while (true) {\n      // If there are no active pages (the last smallest 4 were merged), create a new one\n      if (this._activePages.length === 0) {\n        const newPage = this._createNewPage();\n        activePage = newPage;\n        activeRow = newPage.currentRow;\n        activeRow.height = rasterizedGlyph.size.y;\n        break;\n      }\n\n      // Get the best current row from all active pages\n      activePage = this._activePages[this._activePages.length - 1];\n      activeRow = activePage.currentRow;\n      for (const p of this._activePages) {\n        if (rasterizedGlyph.size.y <= p.currentRow.height) {\n          activePage = p;\n          activeRow = p.currentRow;\n        }\n      }\n\n      // TODO: This algorithm could be simplified:\n      // - Search for the page with ROW_PIXEL_THRESHOLD in mind\n      // - Keep track of current/fixed rows in a Map\n\n      // Replace the best current row with a fixed row if there is one at least as good as the\n      // current row. Search in reverse to prioritize filling in older pages.\n      for (let i = this._activePages.length - 1; i >= 0; i--) {\n        for (const row of this._activePages[i].fixedRows) {\n          if (row.height <= activeRow.height && rasterizedGlyph.size.y <= row.height) {\n            activePage = this._activePages[i];\n            activeRow = row;\n          }\n        }\n      }\n\n      // Create a new page for oversized glyphs as they come up\n      if (rasterizedGlyph.size.x > this._textureSize) {\n        if (!this._overflowSizePage) {\n          this._overflowSizePage = new AtlasPage(this._document, this._config.deviceMaxTextureSize);\n          this.pages.push(this._overflowSizePage);\n\n          // Request the model to be cleared to refresh all texture pages.\n          this._requestClearModel = true;\n          this._onAddTextureAtlasCanvas.fire(this._overflowSizePage.canvas);\n        }\n        activePage = this._overflowSizePage;\n        activeRow = this._overflowSizePage.currentRow;\n        // Move to next row if necessary\n        if (activeRow.x + rasterizedGlyph.size.x >= activePage.canvas.width) {\n          activeRow.x = 0;\n          activeRow.y += activeRow.height;\n          activeRow.height = 0;\n        }\n        break;\n      }\n\n      // Create a new page if too much vertical space would be wasted or there is not enough room\n      // left in the page. The previous active row will become fixed in the process as it now has a\n      // fixed height\n      if (activeRow.y + rasterizedGlyph.size.y >= activePage.canvas.height || activeRow.height > rasterizedGlyph.size.y + Constants.ROW_PIXEL_THRESHOLD) {\n        // Create the new fixed height row, creating a new page if there isn't enough room on the\n        // current page\n        let wasPageAndRowFound = false;\n        if (activePage.currentRow.y + activePage.currentRow.height + rasterizedGlyph.size.y >= activePage.canvas.height) {\n          // Find the first page with room to create the new row on\n          let candidatePage: AtlasPage | undefined;\n\n          for (const p of this._activePages) {\n            if (p.currentRow.y + p.currentRow.height + rasterizedGlyph.size.y < p.canvas.height) {\n              candidatePage = p;\n              break;\n            }\n          }\n          if (candidatePage) {\n            activePage = candidatePage;\n          } else {\n            // Before creating a new atlas page that would trigger a page merge, check if the\n            // current active row is sufficient when ignoring the ROW_PIXEL_THRESHOLD. This will\n            // improve texture utilization by using the available space before the page is merged\n            // and becomes static.\n            if (\n              TextureAtlas.maxAtlasPages &&\n              this._pages.length >= TextureAtlas.maxAtlasPages &&\n              activeRow.y + rasterizedGlyph.size.y <= activePage.canvas.height &&\n              activeRow.height >= rasterizedGlyph.size.y &&\n              activeRow.x + rasterizedGlyph.size.x <= activePage.canvas.width\n            ) {\n              // activePage and activeRow is already valid\n              wasPageAndRowFound = true;\n            } else {\n              // Create a new page if there is no room\n              const newPage = this._createNewPage();\n              activePage = newPage;\n              activeRow = newPage.currentRow;\n              activeRow.height = rasterizedGlyph.size.y;\n              wasPageAndRowFound = true;\n            }\n          }\n        }\n        if (!wasPageAndRowFound) {\n          // Fix the current row as the new row is being added below\n          if (activePage.currentRow.height > 0) {\n            activePage.fixedRows.push(activePage.currentRow);\n          }\n          activeRow = {\n            x: 0,\n            y: activePage.currentRow.y + activePage.currentRow.height,\n            height: rasterizedGlyph.size.y\n          };\n          activePage.fixedRows.push(activeRow);\n\n          // Create the new current row below the new fixed height row\n          activePage.currentRow = {\n            x: 0,\n            y: activeRow.y + activeRow.height,\n            height: 0\n          };\n        }\n        // TODO: Remove pages from _activePages when all rows are filled\n      }\n\n      // Exit the loop if there is enough room in the row\n      if (activeRow.x + rasterizedGlyph.size.x <= activePage.canvas.width) {\n        break;\n      }\n\n      // If there is not enough room in the current row, finish it and try again\n      if (activeRow === activePage.currentRow) {\n        activeRow.x = 0;\n        activeRow.y += activeRow.height;\n        activeRow.height = 0;\n      } else {\n        activePage.fixedRows.splice(activePage.fixedRows.indexOf(activeRow), 1);\n      }\n    }\n\n    // Record texture position\n    rasterizedGlyph.texturePage = this._pages.indexOf(activePage);\n    rasterizedGlyph.texturePosition.x = activeRow.x;\n    rasterizedGlyph.texturePosition.y = activeRow.y;\n    rasterizedGlyph.texturePositionClipSpace.x = activeRow.x / activePage.canvas.width;\n    rasterizedGlyph.texturePositionClipSpace.y = activeRow.y / activePage.canvas.height;\n\n    // Fix the clipspace position as pages may be of differing size\n    rasterizedGlyph.sizeClipSpace.x /= activePage.canvas.width;\n    rasterizedGlyph.sizeClipSpace.y /= activePage.canvas.height;\n\n    // Update atlas current row, for fixed rows the glyph height will never be larger than the row\n    // height\n    activeRow.height = Math.max(activeRow.height, rasterizedGlyph.size.y);\n    activeRow.x += rasterizedGlyph.size.x;\n\n    // putImageData doesn't do any blending, so it will overwrite any existing cache entry for us\n    activePage.ctx.putImageData(\n      imageData,\n      rasterizedGlyph.texturePosition.x - this._workBoundingBox.left,\n      rasterizedGlyph.texturePosition.y - this._workBoundingBox.top,\n      this._workBoundingBox.left,\n      this._workBoundingBox.top,\n      rasterizedGlyph.size.x,\n      rasterizedGlyph.size.y\n    );\n    activePage.addGlyph(rasterizedGlyph);\n    activePage.version++;\n\n    return rasterizedGlyph;\n  }\n\n  /**\n   * Given an ImageData object, find the bounding box of the non-transparent\n   * portion of the texture and return an IRasterizedGlyph with these\n   * dimensions.\n   * @param imageData The image data to read.\n   * @param boundingBox An IBoundingBox to put the clipped bounding box values.\n   */\n  private _findGlyphBoundingBox(imageData: ImageData, boundingBox: IBoundingBox, allowedWidth: number, restrictedGlyph: boolean, customGlyph: boolean, padding: number): IRasterizedGlyph {\n    boundingBox.top = 0;\n    const height = restrictedGlyph ? this._config.deviceCellHeight : this._tmpCanvas.height;\n    const width = restrictedGlyph ? this._config.deviceCellWidth : allowedWidth;\n    let found = false;\n    for (let y = 0; y < height; y++) {\n      for (let x = 0; x < width; x++) {\n        const alphaOffset = y * this._tmpCanvas.width * 4 + x * 4 + 3;\n        if (imageData.data[alphaOffset] !== 0) {\n          boundingBox.top = y;\n          found = true;\n          break;\n        }\n      }\n      if (found) {\n        break;\n      }\n    }\n    boundingBox.left = 0;\n    found = false;\n    for (let x = 0; x < padding + width; x++) {\n      for (let y = 0; y < height; y++) {\n        const alphaOffset = y * this._tmpCanvas.width * 4 + x * 4 + 3;\n        if (imageData.data[alphaOffset] !== 0) {\n          boundingBox.left = x;\n          found = true;\n          break;\n        }\n      }\n      if (found) {\n        break;\n      }\n    }\n    boundingBox.right = width;\n    found = false;\n    for (let x = padding + width - 1; x >= padding; x--) {\n      for (let y = 0; y < height; y++) {\n        const alphaOffset = y * this._tmpCanvas.width * 4 + x * 4 + 3;\n        if (imageData.data[alphaOffset] !== 0) {\n          boundingBox.right = x;\n          found = true;\n          break;\n        }\n      }\n      if (found) {\n        break;\n      }\n    }\n    boundingBox.bottom = height;\n    found = false;\n    for (let y = height - 1; y >= 0; y--) {\n      for (let x = 0; x < width; x++) {\n        const alphaOffset = y * this._tmpCanvas.width * 4 + x * 4 + 3;\n        if (imageData.data[alphaOffset] !== 0) {\n          boundingBox.bottom = y;\n          found = true;\n          break;\n        }\n      }\n      if (found) {\n        break;\n      }\n    }\n    return {\n      texturePage: 0,\n      texturePosition: { x: 0, y: 0 },\n      texturePositionClipSpace: { x: 0, y: 0 },\n      size: {\n        x: boundingBox.right - boundingBox.left + 1,\n        y: boundingBox.bottom - boundingBox.top + 1\n      },\n      sizeClipSpace: {\n        x: (boundingBox.right - boundingBox.left + 1),\n        y: (boundingBox.bottom - boundingBox.top + 1)\n      },\n      offset: {\n        x: -boundingBox.left + padding + ((restrictedGlyph || customGlyph) ? Math.floor((this._config.deviceCellWidth - this._config.deviceCharWidth) / 2) : 0),\n        y: -boundingBox.top + padding + ((restrictedGlyph || customGlyph) ? this._config.lineHeight === 1 ? 0 : Math.round((this._config.deviceCellHeight - this._config.deviceCharHeight) / 2) : 0)\n      }\n    };\n  }\n}\n\nclass AtlasPage {\n  public readonly canvas: HTMLCanvasElement;\n  public readonly ctx: CanvasRenderingContext2D;\n\n  private _usedPixels: number = 0;\n  public get percentageUsed(): number { return this._usedPixels / (this.canvas.width * this.canvas.height); }\n\n  private readonly _glyphs: IRasterizedGlyph[] = [];\n  public get glyphs(): ReadonlyArray<IRasterizedGlyph> { return this._glyphs; }\n  public addGlyph(glyph: IRasterizedGlyph): void {\n    this._glyphs.push(glyph);\n    this._usedPixels += glyph.size.x * glyph.size.y;\n  }\n\n  /**\n   * Used to check whether the canvas of the atlas page has changed.\n   */\n  public version = 0;\n\n  // Texture atlas current positioning data. The texture packing strategy used is to fill from\n  // left-to-right and top-to-bottom. When the glyph being written is less than half of the current\n  // row's height, the following happens:\n  //\n  // - The current row becomes the fixed height row A\n  // - A new fixed height row B the exact size of the glyph is created below the current row\n  // - A new dynamic height current row is created below B\n  //\n  // This strategy does a good job preventing space being wasted for very short glyphs such as\n  // underscores, hyphens etc. or those with underlines rendered.\n  public currentRow: ICharAtlasActiveRow = {\n    x: 0,\n    y: 0,\n    height: 0\n  };\n  public readonly fixedRows: ICharAtlasActiveRow[] = [];\n\n  constructor(\n    document: Document,\n    size: number,\n    sourcePages?: AtlasPage[]\n  ) {\n    if (sourcePages) {\n      for (const p of sourcePages) {\n        this._glyphs.push(...p.glyphs);\n        this._usedPixels += p._usedPixels;\n      }\n    }\n    this.canvas = createCanvas(document, size, size);\n    // The canvas needs alpha because we use clearColor to convert the background color to alpha.\n    // It might also contain some characters with transparent backgrounds if allowTransparency is\n    // set.\n    this.ctx = throwIfFalsy(this.canvas.getContext('2d', { alpha: true }));\n  }\n\n  public clear(): void {\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    this.currentRow.x = 0;\n    this.currentRow.y = 0;\n    this.currentRow.height = 0;\n    this.fixedRows.length = 0;\n    this.version++;\n  }\n}\n\n/**\n * Makes a particular rgb color and colors that are nearly the same in an ImageData completely\n * transparent.\n * @returns True if the result is \"empty\", meaning all pixels are fully transparent.\n */\nfunction clearColor(imageData: ImageData, bg: IColor, fg: IColor, enableThresholdCheck: boolean): boolean {\n  // Get color channels\n  const r = bg.rgba >>> 24;\n  const g = bg.rgba >>> 16 & 0xFF;\n  const b = bg.rgba >>> 8 & 0xFF;\n  const fgR = fg.rgba >>> 24;\n  const fgG = fg.rgba >>> 16 & 0xFF;\n  const fgB = fg.rgba >>> 8 & 0xFF;\n\n  // Calculate a threshold that when below a color will be treated as transpart when the sum of\n  // channel value differs. This helps improve rendering when glyphs overlap with others. This\n  // threshold is calculated relative to the difference between the background and foreground to\n  // ensure important details of the glyph are always shown, even when the contrast ratio is low.\n  // The number 12 is largely arbitrary to ensure the pixels that escape the cell in the test case\n  // were covered (fg=#8ae234, bg=#c4a000).\n  const threshold = Math.floor((Math.abs(r - fgR) + Math.abs(g - fgG) + Math.abs(b - fgB)) / 12);\n\n  // Set alpha channel of relevent pixels to 0\n  let isEmpty = true;\n  for (let offset = 0; offset < imageData.data.length; offset += 4) {\n    // Check exact match\n    if (imageData.data[offset] === r &&\n        imageData.data[offset + 1] === g &&\n        imageData.data[offset + 2] === b) {\n      imageData.data[offset + 3] = 0;\n    } else {\n      // Check the threshold based difference\n      if (enableThresholdCheck &&\n          (Math.abs(imageData.data[offset] - r) +\n          Math.abs(imageData.data[offset + 1] - g) +\n          Math.abs(imageData.data[offset + 2] - b)) < threshold) {\n        imageData.data[offset + 3] = 0;\n      } else {\n        isEmpty = false;\n      }\n    }\n  }\n\n  return isEmpty;\n}\n\nfunction checkCompletelyTransparent(imageData: ImageData): boolean {\n  for (let offset = 0; offset < imageData.data.length; offset += 4) {\n    if (imageData.data[offset + 3] > 0) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction createCanvas(document: Document, width: number, height: number): HTMLCanvasElement {\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  return canvas;\n}\n","/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ITerminal } from 'browser/Types';\nimport { CellColorResolver } from './CellColorResolver';\nimport { acquireTextureAtlas, removeTerminalFromCache } from './CharAtlasCache';\nimport { CursorBlinkStateManager } from './CursorBlinkStateManager';\nimport { observeDevicePixelDimensions } from './DevicePixelObserver';\nimport { IRenderDimensions, IRenderer, IRequestRedrawEvent } from 'browser/renderer/shared/Types';\nimport { ICharSizeService, ICharacterJoinerService, ICoreBrowserService, IThemeService } from 'browser/services/Services';\nimport { CharData, IBufferLine, ICellData } from 'common/Types';\nimport { AttributeData } from 'common/buffer/AttributeData';\nimport { CellData } from 'common/buffer/CellData';\nimport { Attributes, Content, NULL_CELL_CHAR, NULL_CELL_CODE } from 'common/buffer/Constants';\nimport { ICoreService, IDecorationService, IOptionsService } from 'common/services/Services';\nimport { Terminal } from '@xterm/xterm';\nimport { GlyphRenderer } from './GlyphRenderer';\nimport { RectangleRenderer } from './RectangleRenderer';\nimport { COMBINED_CHAR_BIT_MASK, RENDER_MODEL_BG_OFFSET, RENDER_MODEL_EXT_OFFSET, RENDER_MODEL_FG_OFFSET, RENDER_MODEL_INDICIES_PER_CELL, RenderModel } from './RenderModel';\nimport { IWebGL2RenderingContext, type ITextureAtlas } from './Types';\nimport { LinkRenderLayer } from './renderLayer/LinkRenderLayer';\nimport { IRenderLayer } from './renderLayer/Types';\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { addDisposableListener } from 'vs/base/browser/dom';\nimport { combinedDisposable, Disposable, MutableDisposable, toDisposable } from 'vs/base/common/lifecycle';\nimport { createRenderDimensions } from 'browser/renderer/shared/RendererUtils';\n\nexport class WebglRenderer extends Disposable implements IRenderer {\n  private _renderLayers: IRenderLayer[];\n  private _cursorBlinkStateManager: MutableDisposable<CursorBlinkStateManager> = new MutableDisposable();\n  private _charAtlasDisposable = this._register(new MutableDisposable());\n  private _charAtlas: ITextureAtlas | undefined;\n  private _devicePixelRatio: number;\n  private _deviceMaxTextureSize: number;\n  private _observerDisposable = this._register(new MutableDisposable());\n\n  private _model: RenderModel = new RenderModel();\n  private _workCell: ICellData = new CellData();\n  private _workCell2: ICellData = new CellData();\n  private _cellColorResolver: CellColorResolver;\n\n  private _canvas: HTMLCanvasElement;\n  private _gl: IWebGL2RenderingContext;\n  private _rectangleRenderer: MutableDisposable<RectangleRenderer> = this._register(new MutableDisposable());\n  private _glyphRenderer: MutableDisposable<GlyphRenderer> = this._register(new MutableDisposable());\n\n  public readonly dimensions: IRenderDimensions;\n\n  private _core: ITerminal;\n  private _isAttached: boolean;\n  private _contextRestorationTimeout: number | undefined;\n\n  private readonly _onChangeTextureAtlas = this._register(new Emitter<HTMLCanvasElement>());\n  public readonly onChangeTextureAtlas = this._onChangeTextureAtlas.event;\n  private readonly _onAddTextureAtlasCanvas = this._register(new Emitter<HTMLCanvasElement>());\n  public readonly onAddTextureAtlasCanvas = this._onAddTextureAtlasCanvas.event;\n  private readonly _onRemoveTextureAtlasCanvas = this._register(new Emitter<HTMLCanvasElement>());\n  public readonly onRemoveTextureAtlasCanvas = this._onRemoveTextureAtlasCanvas.event;\n  private readonly _onRequestRedraw = this._register(new Emitter<IRequestRedrawEvent>());\n  public readonly onRequestRedraw = this._onRequestRedraw.event;\n  private readonly _onContextLoss = this._register(new Emitter<void>());\n  public readonly onContextLoss = this._onContextLoss.event;\n\n  constructor(\n    private _terminal: Terminal,\n    private readonly _characterJoinerService: ICharacterJoinerService,\n    private readonly _charSizeService: ICharSizeService,\n    private readonly _coreBrowserService: ICoreBrowserService,\n    private readonly _coreService: ICoreService,\n    private readonly _decorationService: IDecorationService,\n    private readonly _optionsService: IOptionsService,\n    private readonly _themeService: IThemeService,\n    preserveDrawingBuffer?: boolean\n  ) {\n    super();\n\n    // IMPORTANT: Canvas initialization and fetching of the context must be first in order to\n    // prevent possible listeners leaking and continuing to operate after the WebglRenderer has been\n    // discarded.\n    this._canvas = this._coreBrowserService.mainDocument.createElement('canvas');\n    const contextAttributes = {\n      antialias: false,\n      depth: false,\n      preserveDrawingBuffer\n    };\n    this._gl = this._canvas.getContext('webgl2', contextAttributes) as IWebGL2RenderingContext;\n    if (!this._gl) {\n      throw new Error('WebGL2 not supported ' + this._gl);\n    }\n\n    this._register(this._themeService.onChangeColors(() => this._handleColorChange()));\n\n    this._cellColorResolver = new CellColorResolver(this._terminal, this._optionsService, this._model.selection, this._decorationService, this._coreBrowserService, this._themeService);\n\n    this._core = (this._terminal as any)._core;\n\n    this._renderLayers = [\n      new LinkRenderLayer(this._core.screenElement!, 2, this._terminal, this._core.linkifier!, this._coreBrowserService, _optionsService, this._themeService)\n    ];\n    this.dimensions = createRenderDimensions();\n    this._devicePixelRatio = this._coreBrowserService.dpr;\n    this._updateDimensions();\n    this._updateCursorBlink();\n    this._register(_optionsService.onOptionChange(() => this._handleOptionsChanged()));\n\n    this._deviceMaxTextureSize = this._gl.getParameter(this._gl.MAX_TEXTURE_SIZE);\n\n    this._register(addDisposableListener(this._canvas, 'webglcontextlost', (e) => {\n      console.log('webglcontextlost event received');\n      // Prevent the default behavior in order to enable WebGL context restoration.\n      e.preventDefault();\n      // Wait a few seconds to see if the 'webglcontextrestored' event is fired.\n      // If not, dispatch the onContextLoss notification to observers.\n      this._contextRestorationTimeout = setTimeout(() => {\n        this._contextRestorationTimeout = undefined;\n        console.warn('webgl context not restored; firing onContextLoss');\n        this._onContextLoss.fire(e);\n      }, 3000 /* ms */);\n    }));\n    this._register(addDisposableListener(this._canvas, 'webglcontextrestored', (e) => {\n      console.warn('webglcontextrestored event received');\n      clearTimeout(this._contextRestorationTimeout);\n      this._contextRestorationTimeout = undefined;\n      // The texture atlas and glyph renderer must be fully reinitialized\n      // because their contents have been lost.\n      removeTerminalFromCache(this._terminal);\n      this._initializeWebGLState();\n      this._requestRedrawViewport();\n    }));\n\n    this._observerDisposable.value = observeDevicePixelDimensions(this._canvas, this._coreBrowserService.window, (w, h) => this._setCanvasDevicePixelDimensions(w, h));\n    this._register(this._coreBrowserService.onWindowChange(w => {\n      this._observerDisposable.value = observeDevicePixelDimensions(this._canvas, w, (w, h) => this._setCanvasDevicePixelDimensions(w, h));\n    }));\n\n    this._core.screenElement!.appendChild(this._canvas);\n\n    [this._rectangleRenderer.value, this._glyphRenderer.value] = this._initializeWebGLState();\n\n    this._isAttached = this._core.screenElement!.isConnected;\n\n    this._register(toDisposable(() => {\n      for (const l of this._renderLayers) {\n        l.dispose();\n      }\n      this._canvas.parentElement?.removeChild(this._canvas);\n      removeTerminalFromCache(this._terminal);\n    }));\n  }\n\n  public get textureAtlas(): HTMLCanvasElement | undefined {\n    return this._charAtlas?.pages[0].canvas;\n  }\n\n  private _handleColorChange(): void {\n    this._refreshCharAtlas();\n\n    // Force a full refresh\n    this._clearModel(true);\n  }\n\n  public handleDevicePixelRatioChange(): void {\n    // If the device pixel ratio changed, the char atlas needs to be regenerated\n    // and the terminal needs to refreshed\n    if (this._devicePixelRatio !== this._coreBrowserService.dpr) {\n      this._devicePixelRatio = this._coreBrowserService.dpr;\n      this.handleResize(this._terminal.cols, this._terminal.rows);\n    }\n  }\n\n  public handleResize(cols: number, rows: number): void {\n    // Update character and canvas dimensions\n    this._updateDimensions();\n\n    this._model.resize(this._terminal.cols, this._terminal.rows);\n\n    // Resize all render layers\n    for (const l of this._renderLayers) {\n      l.resize(this._terminal, this.dimensions);\n    }\n\n    // Resize the canvas\n    this._canvas.width = this.dimensions.device.canvas.width;\n    this._canvas.height = this.dimensions.device.canvas.height;\n    this._canvas.style.width = `${this.dimensions.css.canvas.width}px`;\n    this._canvas.style.height = `${this.dimensions.css.canvas.height}px`;\n\n    // Resize the screen\n    this._core.screenElement!.style.width = `${this.dimensions.css.canvas.width}px`;\n    this._core.screenElement!.style.height = `${this.dimensions.css.canvas.height}px`;\n\n    this._rectangleRenderer.value?.setDimensions(this.dimensions);\n    this._rectangleRenderer.value?.handleResize();\n    this._glyphRenderer.value?.setDimensions(this.dimensions);\n    this._glyphRenderer.value?.handleResize();\n\n    this._refreshCharAtlas();\n\n    // Force a full refresh. Resizing `_glyphRenderer` should clear it already,\n    // so there is no need to clear it again here.\n    this._clearModel(false);\n  }\n\n  public handleCharSizeChanged(): void {\n    this.handleResize(this._terminal.cols, this._terminal.rows);\n  }\n\n  public handleBlur(): void {\n    for (const l of this._renderLayers) {\n      l.handleBlur(this._terminal);\n    }\n    this._cursorBlinkStateManager.value?.pause();\n    // Request a redraw for active/inactive selection background\n    this._requestRedrawViewport();\n  }\n\n  public handleFocus(): void {\n    for (const l of this._renderLayers) {\n      l.handleFocus(this._terminal);\n    }\n    this._cursorBlinkStateManager.value?.resume();\n    // Request a redraw for active/inactive selection background\n    this._requestRedrawViewport();\n  }\n\n  public handleSelectionChanged(start: [number, number] | undefined, end: [number, number] | undefined, columnSelectMode: boolean): void {\n    for (const l of this._renderLayers) {\n      l.handleSelectionChanged(this._terminal, start, end, columnSelectMode);\n    }\n    this._model.selection.update(this._core, start, end, columnSelectMode);\n    this._requestRedrawViewport();\n  }\n\n  public handleCursorMove(): void {\n    for (const l of this._renderLayers) {\n      l.handleCursorMove(this._terminal);\n    }\n    this._cursorBlinkStateManager.value?.restartBlinkAnimation();\n  }\n\n  private _handleOptionsChanged(): void {\n    this._updateDimensions();\n    this._refreshCharAtlas();\n    this._updateCursorBlink();\n  }\n\n  /**\n   * Initializes members dependent on WebGL context state.\n   */\n  private _initializeWebGLState(): [RectangleRenderer, GlyphRenderer] {\n    this._rectangleRenderer.value = new RectangleRenderer(this._terminal, this._gl, this.dimensions, this._themeService);\n    this._glyphRenderer.value = new GlyphRenderer(this._terminal, this._gl, this.dimensions, this._optionsService);\n\n    // Update dimensions and acquire char atlas\n    this.handleCharSizeChanged();\n\n    return [this._rectangleRenderer.value, this._glyphRenderer.value];\n  }\n\n  /**\n   * Refreshes the char atlas, aquiring a new one if necessary.\n   */\n  private _refreshCharAtlas(): void {\n    if (this.dimensions.device.char.width <= 0 && this.dimensions.device.char.height <= 0) {\n      // Mark as not attached so char atlas gets refreshed on next render\n      this._isAttached = false;\n      return;\n    }\n\n    const atlas = acquireTextureAtlas(\n      this._terminal,\n      this._optionsService.rawOptions,\n      this._themeService.colors,\n      this.dimensions.device.cell.width,\n      this.dimensions.device.cell.height,\n      this.dimensions.device.char.width,\n      this.dimensions.device.char.height,\n      this._coreBrowserService.dpr,\n      this._deviceMaxTextureSize\n    );\n    if (this._charAtlas !== atlas) {\n      this._onChangeTextureAtlas.fire(atlas.pages[0].canvas);\n      this._charAtlasDisposable.value = combinedDisposable(\n        Event.forward(atlas.onAddTextureAtlasCanvas, this._onAddTextureAtlasCanvas),\n        Event.forward(atlas.onRemoveTextureAtlasCanvas, this._onRemoveTextureAtlasCanvas)\n      );\n    }\n    this._charAtlas = atlas;\n    this._charAtlas.warmUp();\n    this._glyphRenderer.value?.setAtlas(this._charAtlas);\n  }\n\n  /**\n   * Clear the model.\n   * @param clearGlyphRenderer Whether to also clear the glyph renderer. This\n   * should be true generally to make sure it is in the same state as the model.\n   */\n  private _clearModel(clearGlyphRenderer: boolean): void {\n    this._model.clear();\n    if (clearGlyphRenderer) {\n      this._glyphRenderer.value?.clear();\n    }\n  }\n\n  public clearTextureAtlas(): void {\n    this._charAtlas?.clearTexture();\n    this._clearModel(true);\n    this._requestRedrawViewport();\n  }\n\n  public clear(): void {\n    this._clearModel(true);\n    for (const l of this._renderLayers) {\n      l.reset(this._terminal);\n    }\n\n    this._cursorBlinkStateManager.value?.restartBlinkAnimation();\n    this._updateCursorBlink();\n  }\n\n  public renderRows(start: number, end: number): void {\n    if (!this._isAttached) {\n      if (this._core.screenElement?.isConnected && this._charSizeService.width && this._charSizeService.height) {\n        this._updateDimensions();\n        this._refreshCharAtlas();\n        this._isAttached = true;\n      } else {\n        return;\n      }\n    }\n\n    // Update render layers\n    for (const l of this._renderLayers) {\n      l.handleGridChanged(this._terminal, start, end);\n    }\n\n    if (!this._glyphRenderer.value || !this._rectangleRenderer.value) {\n      return;\n    }\n\n    // Tell renderer the frame is beginning\n    // upon a model clear also refresh the full viewport model\n    // (also triggered by an atlas page merge, part of #4480)\n    if (this._glyphRenderer.value.beginFrame()) {\n      this._clearModel(true);\n      this._updateModel(0, this._terminal.rows - 1);\n    } else {\n      // just update changed lines to draw\n      this._updateModel(start, end);\n    }\n\n    // Render\n    this._rectangleRenderer.value.renderBackgrounds();\n    this._glyphRenderer.value.render(this._model);\n    if (!this._cursorBlinkStateManager.value || this._cursorBlinkStateManager.value.isCursorVisible) {\n      this._rectangleRenderer.value.renderCursor();\n    }\n  }\n\n  private _updateCursorBlink(): void {\n    if (this._coreService.decPrivateModes.cursorBlink ?? this._terminal.options.cursorBlink) {\n      this._cursorBlinkStateManager.value = new CursorBlinkStateManager(() => {\n        this._requestRedrawCursor();\n      }, this._coreBrowserService);\n    } else {\n      this._cursorBlinkStateManager.clear();\n    }\n    // Request a refresh from the terminal as management of rendering is being\n    // moved back to the terminal\n    this._requestRedrawCursor();\n  }\n\n  private _updateModel(start: number, end: number): void {\n    const terminal = this._core;\n    let cell: ICellData = this._workCell;\n\n    // Declare variable ahead of time to avoid garbage collection\n    let lastBg: number;\n    let y: number;\n    let row: number;\n    let line: IBufferLine;\n    let joinedRanges: [number, number][];\n    let isJoined: boolean;\n    let skipJoinedCheckUntilX: number = 0;\n    let isValidJoinRange: boolean = true;\n    let lastCharX: number;\n    let range: [number, number];\n    let isCursorRow: boolean;\n    let chars: string;\n    let code: number;\n    let width: number;\n    let i: number;\n    let x: number;\n    let j: number;\n    start = clamp(start, terminal.rows - 1, 0);\n    end = clamp(end, terminal.rows - 1, 0);\n    const cursorStyle = this._coreService.decPrivateModes.cursorStyle ?? terminal.options.cursorStyle ?? 'block';\n\n    const cursorY = this._terminal.buffer.active.baseY + this._terminal.buffer.active.cursorY;\n    const viewportRelativeCursorY = cursorY - terminal.buffer.ydisp;\n    // in case cursor.x == cols adjust visual cursor to cols - 1\n    const cursorX = Math.min(this._terminal.buffer.active.cursorX, terminal.cols - 1);\n    let lastCursorX = -1;\n    const isCursorVisible =\n      this._coreService.isCursorInitialized &&\n      !this._coreService.isCursorHidden &&\n      (!this._cursorBlinkStateManager.value || this._cursorBlinkStateManager.value.isCursorVisible);\n    this._model.cursor = undefined;\n    let modelUpdated = false;\n\n    for (y = start; y <= end; y++) {\n      row = y + terminal.buffer.ydisp;\n      line = terminal.buffer.lines.get(row)!;\n      this._model.lineLengths[y] = 0;\n      isCursorRow = cursorY === row;\n      skipJoinedCheckUntilX = 0;\n      joinedRanges = this._characterJoinerService.getJoinedCharacters(row);\n      for (x = 0; x < terminal.cols; x++) {\n        lastBg = this._cellColorResolver.result.bg;\n        line.loadCell(x, cell);\n\n        if (x === 0) {\n          lastBg = this._cellColorResolver.result.bg;\n        }\n\n        // If true, indicates that the current character(s) to draw were joined.\n        isJoined = false;\n\n        // Indicates whether this cell is part of a joined range that should be ignored as it cannot\n        // be rendered entirely, like the selection state differs across the range.\n        isValidJoinRange = (x >= skipJoinedCheckUntilX);\n\n        lastCharX = x;\n\n        // Process any joined character ranges as needed. Because of how the\n        // ranges are produced, we know that they are valid for the characters\n        // and attributes of our input.\n        if (joinedRanges.length > 0 && x === joinedRanges[0][0] && isValidJoinRange) {\n          range = joinedRanges.shift()!;\n\n          // If the ligature's selection state is not consistent, don't join it. This helps the\n          // selection render correctly regardless whether they should be joined.\n          const firstSelectionState = this._model.selection.isCellSelected(this._terminal, range[0], row);\n          for (i = range[0] + 1; i < range[1]; i++) {\n            isValidJoinRange &&= (firstSelectionState === this._model.selection.isCellSelected(this._terminal, i, row));\n          }\n          // Similarly, if the cursor is in the ligature, don't join it.\n          isValidJoinRange &&= !isCursorRow || cursorX < range[0] || cursorX >= range[1];\n          if (!isValidJoinRange) {\n            skipJoinedCheckUntilX = range[1];\n          } else {\n            isJoined = true;\n\n            // We already know the exact start and end column of the joined range,\n            // so we get the string and width representing it directly.\n            cell = new JoinedCellData(\n              cell,\n              line!.translateToString(true, range[0], range[1]),\n              range[1] - range[0]\n            );\n\n            // Skip over the cells occupied by this range in the loop\n            lastCharX = range[1] - 1;\n          }\n        }\n\n        chars = cell.getChars();\n        code = cell.getCode();\n        i = ((y * terminal.cols) + x) * RENDER_MODEL_INDICIES_PER_CELL;\n\n        // Load colors/resolve overrides into work colors\n        this._cellColorResolver.resolve(cell, x, row, this.dimensions.device.cell.width);\n\n        // Override colors for cursor cell\n        if (isCursorVisible && row === cursorY) {\n          if (x === cursorX) {\n            this._model.cursor = {\n              x: cursorX,\n              y: viewportRelativeCursorY,\n              width: cell.getWidth(),\n              style: this._coreBrowserService.isFocused ? cursorStyle : terminal.options.cursorInactiveStyle,\n              cursorWidth: terminal.options.cursorWidth,\n              dpr: this._devicePixelRatio\n            };\n            lastCursorX = cursorX + cell.getWidth() - 1;\n          }\n          if (x >= cursorX && x <= lastCursorX &&\n              ((this._coreBrowserService.isFocused &&\n              cursorStyle === 'block') ||\n              (this._coreBrowserService.isFocused === false &&\n              terminal.options.cursorInactiveStyle === 'block'))\n          ) {\n            this._cellColorResolver.result.fg =\n              Attributes.CM_RGB | (this._themeService.colors.cursorAccent.rgba >> 8 & Attributes.RGB_MASK);\n            this._cellColorResolver.result.bg =\n              Attributes.CM_RGB | (this._themeService.colors.cursor.rgba >> 8 & Attributes.RGB_MASK);\n          }\n        }\n\n        if (code !== NULL_CELL_CODE) {\n          this._model.lineLengths[y] = x + 1;\n        }\n\n        // Nothing has changed, no updates needed\n        if (this._model.cells[i] === code &&\n            this._model.cells[i + RENDER_MODEL_BG_OFFSET] === this._cellColorResolver.result.bg &&\n            this._model.cells[i + RENDER_MODEL_FG_OFFSET] === this._cellColorResolver.result.fg &&\n            this._model.cells[i + RENDER_MODEL_EXT_OFFSET] === this._cellColorResolver.result.ext) {\n          continue;\n        }\n\n        modelUpdated = true;\n\n        // Flag combined chars with a bit mask so they're easily identifiable\n        if (chars.length > 1) {\n          code |= COMBINED_CHAR_BIT_MASK;\n        }\n\n        // Cache the results in the model\n        this._model.cells[i] = code;\n        this._model.cells[i + RENDER_MODEL_BG_OFFSET] = this._cellColorResolver.result.bg;\n        this._model.cells[i + RENDER_MODEL_FG_OFFSET] = this._cellColorResolver.result.fg;\n        this._model.cells[i + RENDER_MODEL_EXT_OFFSET] = this._cellColorResolver.result.ext;\n\n        width = cell.getWidth();\n        this._glyphRenderer.value!.updateCell(x, y, code, this._cellColorResolver.result.bg, this._cellColorResolver.result.fg, this._cellColorResolver.result.ext, chars, width, lastBg);\n\n        if (isJoined) {\n          // Restore work cell\n          cell = this._workCell;\n\n          // Null out non-first cells\n          for (x++; x <= lastCharX; x++) {\n            j = ((y * terminal.cols) + x) * RENDER_MODEL_INDICIES_PER_CELL;\n            this._glyphRenderer.value!.updateCell(x, y, NULL_CELL_CODE, 0, 0, 0, NULL_CELL_CHAR, 0, 0);\n            this._model.cells[j] = NULL_CELL_CODE;\n            // Don't re-resolve the cell color since multi-colored ligature backgrounds are not\n            // supported\n            this._model.cells[j + RENDER_MODEL_BG_OFFSET] = this._cellColorResolver.result.bg;\n            this._model.cells[j + RENDER_MODEL_FG_OFFSET] = this._cellColorResolver.result.fg;\n            this._model.cells[j + RENDER_MODEL_EXT_OFFSET] = this._cellColorResolver.result.ext;\n          }\n          x--; // Go back to the previous update cell for next iteration\n        }\n      }\n    }\n    if (modelUpdated) {\n      this._rectangleRenderer.value!.updateBackgrounds(this._model);\n    }\n    this._rectangleRenderer.value!.updateCursor(this._model);\n  }\n\n  /**\n   * Recalculates the character and canvas dimensions.\n   */\n  private _updateDimensions(): void {\n    // Perform a new measure if the CharMeasure dimensions are not yet available\n    if (!this._charSizeService.width || !this._charSizeService.height) {\n      return;\n    }\n\n    // Calculate the device character width. Width is floored as it must be drawn to an integer grid\n    // in order for the char atlas glyphs to not be blurry.\n    this.dimensions.device.char.width = Math.floor(this._charSizeService.width * this._devicePixelRatio);\n\n    // Calculate the device character height. Height is ceiled in case devicePixelRatio is a\n    // floating point number in order to ensure there is enough space to draw the character to the\n    // cell.\n    this.dimensions.device.char.height = Math.ceil(this._charSizeService.height * this._devicePixelRatio);\n\n    // Calculate the device cell height, if lineHeight is _not_ 1, the resulting value will be\n    // floored since lineHeight can never be lower then 1, this guarentees the device cell height\n    // will always be larger than device char height.\n    this.dimensions.device.cell.height = Math.floor(this.dimensions.device.char.height * this._optionsService.rawOptions.lineHeight);\n\n    // Calculate the y offset within a cell that glyph should draw at in order for it to be centered\n    // correctly within the cell.\n    this.dimensions.device.char.top = this._optionsService.rawOptions.lineHeight === 1 ? 0 : Math.round((this.dimensions.device.cell.height - this.dimensions.device.char.height) / 2);\n\n    // Calculate the device cell width, taking the letterSpacing into account.\n    this.dimensions.device.cell.width = this.dimensions.device.char.width + Math.round(this._optionsService.rawOptions.letterSpacing);\n\n    // Calculate the x offset with a cell that text should draw from in order for it to be centered\n    // correctly within the cell.\n    this.dimensions.device.char.left = Math.floor(this._optionsService.rawOptions.letterSpacing / 2);\n\n    // Recalculate the canvas dimensions, the device dimensions define the actual number of pixel in\n    // the canvas\n    this.dimensions.device.canvas.height = this._terminal.rows * this.dimensions.device.cell.height;\n    this.dimensions.device.canvas.width = this._terminal.cols * this.dimensions.device.cell.width;\n\n    // The the size of the canvas on the page. It's important that this rounds to nearest integer\n    // and not ceils as browsers often have floating point precision issues where\n    // `window.devicePixelRatio` ends up being something like `1.100000023841858` for example, when\n    // it's actually 1.1. Ceiling may causes blurriness as the backing canvas image is 1 pixel too\n    // large for the canvas element size.\n    this.dimensions.css.canvas.height = Math.round(this.dimensions.device.canvas.height / this._devicePixelRatio);\n    this.dimensions.css.canvas.width = Math.round(this.dimensions.device.canvas.width / this._devicePixelRatio);\n\n    // Get the CSS dimensions of an individual cell. This needs to be derived from the calculated\n    // device pixel canvas value above. CharMeasure.width/height by itself is insufficient when the\n    // page is not at 100% zoom level as CharMeasure is measured in CSS pixels, but the actual char\n    // size on the canvas can differ.\n    this.dimensions.css.cell.height = this.dimensions.device.cell.height / this._devicePixelRatio;\n    this.dimensions.css.cell.width = this.dimensions.device.cell.width / this._devicePixelRatio;\n  }\n\n  private _setCanvasDevicePixelDimensions(width: number, height: number): void {\n    if (this._canvas.width === width && this._canvas.height === height) {\n      return;\n    }\n    // While the actual canvas size has changed, keep device canvas dimensions as the value before\n    // the change as it's an exact multiple of the cell sizes.\n    this._canvas.width = width;\n    this._canvas.height = height;\n    this._requestRedrawViewport();\n  }\n\n  private _requestRedrawViewport(): void {\n    this._onRequestRedraw.fire({ start: 0, end: this._terminal.rows - 1 });\n  }\n\n  private _requestRedrawCursor(): void {\n    const cursorY = this._terminal.buffer.active.cursorY;\n    this._onRequestRedraw.fire({ start: cursorY, end: cursorY });\n  }\n}\n\n// TODO: Share impl with core\nexport class JoinedCellData extends AttributeData implements ICellData {\n  private _width: number;\n  // .content carries no meaning for joined CellData, simply nullify it\n  // thus we have to overload all other .content accessors\n  public content: number = 0;\n  public fg: number;\n  public bg: number;\n  public combinedData: string = '';\n\n  constructor(firstCell: ICellData, chars: string, width: number) {\n    super();\n    this.fg = firstCell.fg;\n    this.bg = firstCell.bg;\n    this.combinedData = chars;\n    this._width = width;\n  }\n\n  public isCombined(): number {\n    // always mark joined cell data as combined\n    return Content.IS_COMBINED_MASK;\n  }\n\n  public getWidth(): number {\n    return this._width;\n  }\n\n  public getChars(): string {\n    return this.combinedData;\n  }\n\n  public getCode(): number {\n    // code always gets the highest possible fake codepoint (read as -1)\n    // this is needed as code is used by caches as identifier\n    return 0x1FFFFF;\n  }\n\n  public setFromCharData(value: CharData): void {\n    throw new Error('not implemented');\n  }\n\n  public getAsCharData(): CharData {\n    return [this.fg, this.getChars(), this.getWidth(), this.getCode()];\n  }\n}\n\nfunction clamp(value: number, max: number, min: number = 0): number {\n  return Math.max(Math.min(value, max), min);\n}\n","/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { throwIfFalsy } from 'browser/renderer/shared/RendererUtils';\n\n/**\n * A matrix that when multiplies will translate 0-1 coordinates (left to right,\n * top to bottom) to clip space.\n */\nexport const PROJECTION_MATRIX = new Float32Array([\n  2, 0, 0, 0,\n  0, -2, 0, 0,\n  0, 0, 1, 0,\n  -1, 1, 0, 1\n]);\n\nexport function createProgram(gl: WebGLRenderingContext, vertexSource: string, fragmentSource: string): WebGLProgram | undefined {\n  const program = throwIfFalsy(gl.createProgram());\n  gl.attachShader(program, throwIfFalsy(createShader(gl, gl.VERTEX_SHADER, vertexSource)));\n  gl.attachShader(program, throwIfFalsy(createShader(gl, gl.FRAGMENT_SHADER, fragmentSource)));\n  gl.linkProgram(program);\n  const success = gl.getProgramParameter(program, gl.LINK_STATUS);\n  if (success) {\n    return program;\n  }\n\n  console.error(gl.getProgramInfoLog(program));\n  gl.deleteProgram(program);\n}\n\nexport function createShader(gl: WebGLRenderingContext, type: number, source: string): WebGLShader | undefined {\n  const shader = throwIfFalsy(gl.createShader(type));\n  gl.shaderSource(shader, source);\n  gl.compileShader(shader);\n  const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n  if (success) {\n    return shader;\n  }\n\n  console.error(gl.getShaderInfoLog(shader));\n  gl.deleteShader(shader);\n}\n\nexport function expandFloat32Array(source: Float32Array, max: number): Float32Array {\n  const newLength = Math.min(source.length * 2, max);\n  const newArray = new Float32Array(newLength);\n  for (let i = 0; i < source.length; i++) {\n    newArray[i] = source[i];\n  }\n  return newArray;\n}\n\nexport class GLTexture {\n  public texture: WebGLTexture;\n  public version: number;\n\n  constructor(texture: WebGLTexture) {\n    this.texture = texture;\n    this.version = -1;\n  }\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ReadonlyColorSet } from 'browser/Types';\nimport { acquireTextureAtlas } from '../CharAtlasCache';\nimport { IRenderDimensions } from 'browser/renderer/shared/Types';\nimport { ICoreBrowserService, IThemeService } from 'browser/services/Services';\nimport { Disposable, toDisposable } from 'vs/base/common/lifecycle';\nimport { CellData } from 'common/buffer/CellData';\nimport { IOptionsService } from 'common/services/Services';\nimport { Terminal } from '@xterm/xterm';\nimport { IRenderLayer } from './Types';\nimport { throwIfFalsy } from 'browser/renderer/shared/RendererUtils';\nimport { TEXT_BASELINE } from '../Constants';\nimport type { ITextureAtlas } from '../Types';\n\nexport abstract class BaseRenderLayer extends Disposable implements IRenderLayer {\n  private _canvas: HTMLCanvasElement;\n  protected _ctx!: CanvasRenderingContext2D;\n  private _deviceCharWidth: number = 0;\n  private _deviceCharHeight: number = 0;\n  private _deviceCellWidth: number = 0;\n  private _deviceCellHeight: number = 0;\n  private _deviceCharLeft: number = 0;\n  private _deviceCharTop: number = 0;\n\n  protected _charAtlas: ITextureAtlas | undefined;\n\n  constructor(\n    terminal: Terminal,\n    private _container: HTMLElement,\n    id: string,\n    zIndex: number,\n    private _alpha: boolean,\n    protected readonly _coreBrowserService: ICoreBrowserService,\n    protected readonly _optionsService: IOptionsService,\n    protected readonly _themeService: IThemeService\n  ) {\n    super();\n    this._canvas = this._coreBrowserService.mainDocument.createElement('canvas');\n    this._canvas.classList.add(`xterm-${id}-layer`);\n    this._canvas.style.zIndex = zIndex.toString();\n    this._initCanvas();\n    this._container.appendChild(this._canvas);\n    this._register(this._themeService.onChangeColors(e => {\n      this._refreshCharAtlas(terminal, e);\n      this.reset(terminal);\n    }));\n    this._register(toDisposable(() => {\n      this._canvas.remove();\n    }));\n  }\n\n  private _initCanvas(): void {\n    this._ctx = throwIfFalsy(this._canvas.getContext('2d', { alpha: this._alpha }));\n    // Draw the background if this is an opaque layer\n    if (!this._alpha) {\n      this._clearAll();\n    }\n  }\n\n  public handleBlur(terminal: Terminal): void {}\n  public handleFocus(terminal: Terminal): void {}\n  public handleCursorMove(terminal: Terminal): void {}\n  public handleGridChanged(terminal: Terminal, startRow: number, endRow: number): void {}\n  public handleSelectionChanged(terminal: Terminal, start: [number, number] | undefined, end: [number, number] | undefined, columnSelectMode: boolean = false): void {}\n\n  protected _setTransparency(terminal: Terminal, alpha: boolean): void {\n    // Do nothing when alpha doesn't change\n    if (alpha === this._alpha) {\n      return;\n    }\n\n    // Create new canvas and replace old one\n    const oldCanvas = this._canvas;\n    this._alpha = alpha;\n    // Cloning preserves properties\n    this._canvas = this._canvas.cloneNode() as HTMLCanvasElement;\n    this._initCanvas();\n    this._container.replaceChild(this._canvas, oldCanvas);\n\n    // Regenerate char atlas and force a full redraw\n    this._refreshCharAtlas(terminal, this._themeService.colors);\n    this.handleGridChanged(terminal, 0, terminal.rows - 1);\n  }\n\n  /**\n   * Refreshes the char atlas, aquiring a new one if necessary.\n   * @param terminal The terminal.\n   * @param colorSet The color set to use for the char atlas.\n   */\n  private _refreshCharAtlas(terminal: Terminal, colorSet: ReadonlyColorSet): void {\n    if (this._deviceCharWidth <= 0 && this._deviceCharHeight <= 0) {\n      return;\n    }\n\n    this._charAtlas = acquireTextureAtlas(terminal, this._optionsService.rawOptions, colorSet, this._deviceCellWidth, this._deviceCellHeight, this._deviceCharWidth, this._deviceCharHeight, this._coreBrowserService.dpr, 2048);\n    this._charAtlas.warmUp();\n  }\n\n  public resize(terminal: Terminal, dim: IRenderDimensions): void {\n    this._deviceCellWidth = dim.device.cell.width;\n    this._deviceCellHeight = dim.device.cell.height;\n    this._deviceCharWidth = dim.device.char.width;\n    this._deviceCharHeight = dim.device.char.height;\n    this._deviceCharLeft = dim.device.char.left;\n    this._deviceCharTop = dim.device.char.top;\n    this._canvas.width = dim.device.canvas.width;\n    this._canvas.height = dim.device.canvas.height;\n    this._canvas.style.width = `${dim.css.canvas.width}px`;\n    this._canvas.style.height = `${dim.css.canvas.height}px`;\n\n    // Draw the background if this is an opaque layer\n    if (!this._alpha) {\n      this._clearAll();\n    }\n\n    this._refreshCharAtlas(terminal, this._themeService.colors);\n  }\n\n  public abstract reset(terminal: Terminal): void;\n\n  /**\n   * Fills a 1px line (2px on HDPI) at the bottom of the cell. This uses the\n   * existing fillStyle on the context.\n   * @param x The column to fill.\n   * @param y The row to fill.\n   */\n  protected _fillBottomLineAtCells(x: number, y: number, width: number = 1): void {\n    this._ctx.fillRect(\n      x * this._deviceCellWidth,\n      (y + 1) * this._deviceCellHeight - this._coreBrowserService.dpr - 1 /* Ensure it's drawn within the cell */,\n      width * this._deviceCellWidth,\n      this._coreBrowserService.dpr);\n  }\n\n  /**\n   * Clears the entire canvas.\n   */\n  protected _clearAll(): void {\n    if (this._alpha) {\n      this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\n    } else {\n      this._ctx.fillStyle = this._themeService.colors.background.css;\n      this._ctx.fillRect(0, 0, this._canvas.width, this._canvas.height);\n    }\n  }\n\n  /**\n   * Clears 1+ cells completely.\n   * @param x The column to start at.\n   * @param y The row to start at.\n   * @param width The number of columns to clear.\n   * @param height The number of rows to clear.\n   */\n  protected _clearCells(x: number, y: number, width: number, height: number): void {\n    if (this._alpha) {\n      this._ctx.clearRect(\n        x * this._deviceCellWidth,\n        y * this._deviceCellHeight,\n        width * this._deviceCellWidth,\n        height * this._deviceCellHeight);\n    } else {\n      this._ctx.fillStyle = this._themeService.colors.background.css;\n      this._ctx.fillRect(\n        x * this._deviceCellWidth,\n        y * this._deviceCellHeight,\n        width * this._deviceCellWidth,\n        height * this._deviceCellHeight);\n    }\n  }\n\n  /**\n   * Draws a truecolor character at the cell. The character will be clipped to\n   * ensure that it fits with the cell, including the cell to the right if it's\n   * a wide character. This uses the existing fillStyle on the context.\n   * @param terminal The terminal.\n   * @param cell The cell data for the character to draw.\n   * @param x The column to draw at.\n   * @param y The row to draw at.\n   */\n  protected _fillCharTrueColor(terminal: Terminal, cell: CellData, x: number, y: number): void {\n    this._ctx.font = this._getFont(terminal, false, false);\n    this._ctx.textBaseline = TEXT_BASELINE;\n    this._clipCell(x, y, cell.getWidth());\n    this._ctx.fillText(\n      cell.getChars(),\n      x * this._deviceCellWidth + this._deviceCharLeft,\n      y * this._deviceCellHeight + this._deviceCharTop + this._deviceCharHeight);\n  }\n\n  /**\n   * Clips a cell to ensure no pixels will be drawn outside of it.\n   * @param x The column to clip.\n   * @param y The row to clip.\n   * @param width The number of columns to clip.\n   */\n  private _clipCell(x: number, y: number, width: number): void {\n    this._ctx.beginPath();\n    this._ctx.rect(\n      x * this._deviceCellWidth,\n      y * this._deviceCellHeight,\n      width * this._deviceCellWidth,\n      this._deviceCellHeight);\n    this._ctx.clip();\n  }\n\n  /**\n   * Gets the current font.\n   * @param terminal The terminal.\n   * @param isBold If we should use the bold fontWeight.\n   */\n  protected _getFont(terminal: Terminal, isBold: boolean, isItalic: boolean): string {\n    const fontWeight = isBold ? terminal.options.fontWeightBold : terminal.options.fontWeight;\n    const fontStyle = isItalic ? 'italic' : '';\n\n    return `${fontStyle} ${fontWeight} ${terminal.options.fontSize! * this._coreBrowserService.dpr}px ${terminal.options.fontFamily}`;\n  }\n}\n\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { is256Color } from '../CharAtlasUtils';\nimport { INVERTED_DEFAULT_COLOR } from 'browser/renderer/shared/Constants';\nimport { IRenderDimensions } from 'browser/renderer/shared/Types';\nimport { ICoreBrowserService, IThemeService } from 'browser/services/Services';\nimport { ILinkifier2, ILinkifierEvent } from 'browser/Types';\nimport { IOptionsService } from 'common/services/Services';\nimport { Terminal } from '@xterm/xterm';\nimport { BaseRenderLayer } from './BaseRenderLayer';\n\nexport class LinkRenderLayer extends BaseRenderLayer {\n  private _state: ILinkifierEvent | undefined;\n\n  constructor(\n    container: HTMLElement,\n    zIndex: number,\n    terminal: Terminal,\n    linkifier2: ILinkifier2,\n    coreBrowserService: ICoreBrowserService,\n    optionsService: IOptionsService,\n    themeService: IThemeService\n  ) {\n    super(terminal, container, 'link', zIndex, true, coreBrowserService, optionsService, themeService);\n\n    this._register(linkifier2.onShowLinkUnderline(e => this._handleShowLinkUnderline(e)));\n    this._register(linkifier2.onHideLinkUnderline(e => this._handleHideLinkUnderline(e)));\n  }\n\n  public resize(terminal: Terminal, dim: IRenderDimensions): void {\n    super.resize(terminal, dim);\n    // Resizing the canvas discards the contents of the canvas so clear state\n    this._state = undefined;\n  }\n\n  public reset(terminal: Terminal): void {\n    this._clearCurrentLink();\n  }\n\n  private _clearCurrentLink(): void {\n    if (this._state) {\n      this._clearCells(this._state.x1, this._state.y1, this._state.cols - this._state.x1, 1);\n      const middleRowCount = this._state.y2 - this._state.y1 - 1;\n      if (middleRowCount > 0) {\n        this._clearCells(0, this._state.y1 + 1, this._state.cols, middleRowCount);\n      }\n      this._clearCells(0, this._state.y2, this._state.x2, 1);\n      this._state = undefined;\n    }\n  }\n\n  private _handleShowLinkUnderline(e: ILinkifierEvent): void {\n    if (e.fg === INVERTED_DEFAULT_COLOR) {\n      this._ctx.fillStyle = this._themeService.colors.background.css;\n    } else if (e.fg !== undefined && is256Color(e.fg)) {\n      // 256 color support\n      this._ctx.fillStyle = this._themeService.colors.ansi[e.fg!].css;\n    } else {\n      this._ctx.fillStyle = this._themeService.colors.foreground.css;\n    }\n\n    if (e.y1 === e.y2) {\n      // Single line link\n      this._fillBottomLineAtCells(e.x1, e.y1, e.x2 - e.x1);\n    } else {\n      // Multi-line link\n      this._fillBottomLineAtCells(e.x1, e.y1, e.cols - e.x1);\n      for (let y = e.y1 + 1; y < e.y2; y++) {\n        this._fillBottomLineAtCells(0, y, e.cols);\n      }\n      this._fillBottomLineAtCells(0, e.y2, e.x2);\n    }\n    this._state = e;\n  }\n\n  private _handleHideLinkUnderline(e: ILinkifierEvent): void {\n    this._clearCurrentLink();\n  }\n}\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nexport const INVERTED_DEFAULT_COLOR = 257;\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IDimensions, IRenderDimensions } from 'browser/renderer/shared/Types';\n\nexport function throwIfFalsy<T>(value: T | undefined | null): T {\n  if (!value) {\n    throw new Error('value must not be falsy');\n  }\n  return value;\n}\n\nexport function isPowerlineGlyph(codepoint: number): boolean {\n  // Only return true for Powerline symbols which require\n  // different padding and should be excluded from minimum contrast\n  // ratio standards\n  return 0xE0A4 <= codepoint && codepoint <= 0xE0D6;\n}\n\nexport function isRestrictedPowerlineGlyph(codepoint: number): boolean {\n  return 0xE0B0 <= codepoint && codepoint <= 0xE0B7;\n}\n\nfunction isNerdFontGlyph(codepoint: number): boolean {\n  return 0xE000 <= codepoint && codepoint <= 0xF8FF;\n}\n\nfunction isBoxOrBlockGlyph(codepoint: number): boolean {\n  return 0x2500 <= codepoint && codepoint <= 0x259F;\n}\n\nexport function isEmoji(codepoint: number): boolean {\n  return (\n    codepoint >= 0x1F600 && codepoint <= 0x1F64F || // Emoticons\n    codepoint >= 0x1F300 && codepoint <= 0x1F5FF || // Misc Symbols and Pictographs\n    codepoint >= 0x1F680 && codepoint <= 0x1F6FF || // Transport and Map\n    codepoint >= 0x2600  && codepoint <= 0x26FF  || // Misc symbols\n    codepoint >= 0x2700  && codepoint <= 0x27BF  || // Dingbats\n    codepoint >= 0xFE00  && codepoint <= 0xFE0F  || // Variation Selectors\n    codepoint >= 0x1F900 && codepoint <= 0x1F9FF || // Supplemental Symbols and Pictographs\n    codepoint >= 0x1F1E6 && codepoint <= 0x1F1FF\n  );\n}\n\nexport function allowRescaling(codepoint: number | undefined, width: number, glyphSizeX: number, deviceCellWidth: number): boolean {\n  return (\n    // Is single cell width\n    width === 1 &&\n    // Glyph exceeds cell bounds, add 50% to avoid hurting readability by rescaling glyphs that\n    // barely overlap\n    glyphSizeX > Math.ceil(deviceCellWidth * 1.5) &&\n    // Never rescale ascii\n    codepoint !== undefined && codepoint > 0xFF &&\n    // Never rescale emoji\n    !isEmoji(codepoint) &&\n    // Never rescale powerline or nerd fonts\n    !isPowerlineGlyph(codepoint) && !isNerdFontGlyph(codepoint)\n  );\n}\n\nexport function treatGlyphAsBackgroundColor(codepoint: number): boolean {\n  return isPowerlineGlyph(codepoint) || isBoxOrBlockGlyph(codepoint);\n}\n\nexport function createRenderDimensions(): IRenderDimensions {\n  return {\n    css: {\n      canvas: createDimension(),\n      cell: createDimension()\n    },\n    device: {\n      canvas: createDimension(),\n      cell: createDimension(),\n      char: {\n        width: 0,\n        height: 0,\n        left: 0,\n        top: 0\n      }\n    }\n  };\n}\n\nfunction createDimension(): IDimensions {\n  return {\n    width: 0,\n    height: 0\n  };\n}\n\nexport function computeNextVariantOffset(cellWidth: number, lineWidth: number, currentOffset: number = 0): number {\n  return (cellWidth - (Math.round(lineWidth) * 2 - currentOffset)) % (Math.round(lineWidth) * 2);\n}\n","/**\n * Copyright (c) 2022 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { ITerminal } from 'browser/Types';\nimport { ISelectionRenderModel } from 'browser/renderer/shared/Types';\nimport { Terminal } from '@xterm/xterm';\n\nclass SelectionRenderModel implements ISelectionRenderModel {\n  public hasSelection!: boolean;\n  public columnSelectMode!: boolean;\n  public viewportStartRow!: number;\n  public viewportEndRow!: number;\n  public viewportCappedStartRow!: number;\n  public viewportCappedEndRow!: number;\n  public startCol!: number;\n  public endCol!: number;\n  public selectionStart: [number, number] | undefined;\n  public selectionEnd: [number, number] | undefined;\n\n  constructor() {\n    this.clear();\n  }\n\n  public clear(): void {\n    this.hasSelection = false;\n    this.columnSelectMode = false;\n    this.viewportStartRow = 0;\n    this.viewportEndRow = 0;\n    this.viewportCappedStartRow = 0;\n    this.viewportCappedEndRow = 0;\n    this.startCol = 0;\n    this.endCol = 0;\n    this.selectionStart = undefined;\n    this.selectionEnd = undefined;\n  }\n\n  public update(terminal: ITerminal, start: [number, number] | undefined, end: [number, number] | undefined, columnSelectMode: boolean = false): void {\n    this.selectionStart = start;\n    this.selectionEnd = end;\n    // Selection does not exist\n    if (!start || !end || (start[0] === end[0] && start[1] === end[1])) {\n      this.clear();\n      return;\n    }\n\n    // Translate from buffer position to viewport position\n    const viewportY = terminal.buffers.active.ydisp;\n    const viewportStartRow = start[1] - viewportY;\n    const viewportEndRow = end[1] - viewportY;\n    const viewportCappedStartRow = Math.max(viewportStartRow, 0);\n    const viewportCappedEndRow = Math.min(viewportEndRow, terminal.rows - 1);\n\n    // No need to draw the selection\n    if (viewportCappedStartRow >= terminal.rows || viewportCappedEndRow < 0) {\n      this.clear();\n      return;\n    }\n\n    this.hasSelection = true;\n    this.columnSelectMode = columnSelectMode;\n    this.viewportStartRow = viewportStartRow;\n    this.viewportEndRow = viewportEndRow;\n    this.viewportCappedStartRow = viewportCappedStartRow;\n    this.viewportCappedEndRow = viewportCappedEndRow;\n    this.startCol = start[0];\n    this.endCol = end[0];\n  }\n\n  public isCellSelected(terminal: Terminal, x: number, y: number): boolean {\n    if (!this.hasSelection) {\n      return false;\n    }\n    y -= terminal.buffer.active.viewportY;\n    if (this.columnSelectMode) {\n      if (this.startCol <= this.endCol) {\n        return x >= this.startCol && y >= this.viewportCappedStartRow &&\n          x < this.endCol && y <= this.viewportCappedEndRow;\n      }\n      return x < this.startCol && y >= this.viewportCappedStartRow &&\n        x >= this.endCol && y <= this.viewportCappedEndRow;\n    }\n    return (y > this.viewportStartRow && y < this.viewportEndRow) ||\n      (this.viewportStartRow === this.viewportEndRow && y === this.viewportStartRow && x >= this.startCol && x < this.endCol) ||\n      (this.viewportStartRow < this.viewportEndRow && y === this.viewportEndRow && x < this.endCol) ||\n      (this.viewportStartRow < this.viewportEndRow && y === this.viewportStartRow && x >= this.startCol);\n  }\n}\n\nexport function createSelectionRenderModel(): ISelectionRenderModel {\n  return new SelectionRenderModel();\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IColor, IColorRGB } from 'common/Types';\n\nlet $r = 0;\nlet $g = 0;\nlet $b = 0;\nlet $a = 0;\n\nexport const NULL_COLOR: IColor = {\n  css: '#00000000',\n  rgba: 0\n};\n\n/**\n * Helper functions where the source type is \"channels\" (individual color channels as numbers).\n */\nexport namespace channels {\n  export function toCss(r: number, g: number, b: number, a?: number): string {\n    if (a !== undefined) {\n      return `#${toPaddedHex(r)}${toPaddedHex(g)}${toPaddedHex(b)}${toPaddedHex(a)}`;\n    }\n    return `#${toPaddedHex(r)}${toPaddedHex(g)}${toPaddedHex(b)}`;\n  }\n\n  export function toRgba(r: number, g: number, b: number, a: number = 0xFF): number {\n    // Note: The aggregated number is RGBA32 (BE), thus needs to be converted to ABGR32\n    // on LE systems, before it can be used for direct 32-bit buffer writes.\n    // >>> 0 forces an unsigned int\n    return (r << 24 | g << 16 | b << 8 | a) >>> 0;\n  }\n\n  export function toColor(r: number, g: number, b: number, a?: number): IColor {\n    return {\n      css: channels.toCss(r, g, b, a),\n      rgba: channels.toRgba(r, g, b, a)\n    };\n  }\n}\n\n/**\n * Helper functions where the source type is `IColor`.\n */\nexport namespace color {\n  export function blend(bg: IColor, fg: IColor): IColor {\n    $a = (fg.rgba & 0xFF) / 255;\n    if ($a === 1) {\n      return {\n        css: fg.css,\n        rgba: fg.rgba\n      };\n    }\n    const fgR = (fg.rgba >> 24) & 0xFF;\n    const fgG = (fg.rgba >> 16) & 0xFF;\n    const fgB = (fg.rgba >> 8) & 0xFF;\n    const bgR = (bg.rgba >> 24) & 0xFF;\n    const bgG = (bg.rgba >> 16) & 0xFF;\n    const bgB = (bg.rgba >> 8) & 0xFF;\n    $r = bgR + Math.round((fgR - bgR) * $a);\n    $g = bgG + Math.round((fgG - bgG) * $a);\n    $b = bgB + Math.round((fgB - bgB) * $a);\n    const css = channels.toCss($r, $g, $b);\n    const rgba = channels.toRgba($r, $g, $b);\n    return { css, rgba };\n  }\n\n  export function isOpaque(color: IColor): boolean {\n    return (color.rgba & 0xFF) === 0xFF;\n  }\n\n  export function ensureContrastRatio(bg: IColor, fg: IColor, ratio: number): IColor | undefined {\n    const result = rgba.ensureContrastRatio(bg.rgba, fg.rgba, ratio);\n    if (!result) {\n      return undefined;\n    }\n    return channels.toColor(\n      (result >> 24 & 0xFF),\n      (result >> 16 & 0xFF),\n      (result >> 8  & 0xFF)\n    );\n  }\n\n  export function opaque(color: IColor): IColor {\n    const rgbaColor = (color.rgba | 0xFF) >>> 0;\n    [$r, $g, $b] = rgba.toChannels(rgbaColor);\n    return {\n      css: channels.toCss($r, $g, $b),\n      rgba: rgbaColor\n    };\n  }\n\n  export function opacity(color: IColor, opacity: number): IColor {\n    $a = Math.round(opacity * 0xFF);\n    [$r, $g, $b] = rgba.toChannels(color.rgba);\n    return {\n      css: channels.toCss($r, $g, $b, $a),\n      rgba: channels.toRgba($r, $g, $b, $a)\n    };\n  }\n\n  export function multiplyOpacity(color: IColor, factor: number): IColor {\n    $a = color.rgba & 0xFF;\n    return opacity(color, ($a * factor) / 0xFF);\n  }\n\n  export function toColorRGB(color: IColor): IColorRGB {\n    return [(color.rgba >> 24) & 0xFF, (color.rgba >> 16) & 0xFF, (color.rgba >> 8) & 0xFF];\n  }\n}\n\n/**\n * Helper functions where the source type is \"css\" (string: '#rgb', '#rgba', '#rrggbb',\n * '#rrggbbaa').\n */\nexport namespace css {\n  // Attempt to set get the shared canvas context\n  let $ctx: CanvasRenderingContext2D | undefined;\n  let $litmusColor: CanvasGradient | undefined;\n  try {\n    // This is guaranteed to run in the first window, so document should be correct\n    const canvas = document.createElement('canvas');\n    canvas.width = 1;\n    canvas.height = 1;\n    const ctx = canvas.getContext('2d', {\n      willReadFrequently: true\n    });\n    if (ctx) {\n      $ctx = ctx;\n      $ctx.globalCompositeOperation = 'copy';\n      $litmusColor = $ctx.createLinearGradient(0, 0, 1, 1);\n    }\n  }\n  catch {\n    // noop\n  }\n\n  /**\n   * Converts a css string to an IColor, this should handle all valid CSS color strings and will\n   * throw if it's invalid. The ideal format to use is `#rrggbb[aa]` as it's the fastest to parse.\n   *\n   * Only `#rgb[a]`, `#rrggbb[aa]`, `rgb()` and `rgba()` formats are supported when run in a Node\n   * environment.\n   */\n  export function toColor(css: string): IColor {\n    // Formats: #rgb[a] and #rrggbb[aa]\n    if (css.match(/#[\\da-f]{3,8}/i)) {\n      switch (css.length) {\n        case 4: { // #rgb\n          $r = parseInt(css.slice(1, 2).repeat(2), 16);\n          $g = parseInt(css.slice(2, 3).repeat(2), 16);\n          $b = parseInt(css.slice(3, 4).repeat(2), 16);\n          return channels.toColor($r, $g, $b);\n        }\n        case 5: { // #rgba\n          $r = parseInt(css.slice(1, 2).repeat(2), 16);\n          $g = parseInt(css.slice(2, 3).repeat(2), 16);\n          $b = parseInt(css.slice(3, 4).repeat(2), 16);\n          $a = parseInt(css.slice(4, 5).repeat(2), 16);\n          return channels.toColor($r, $g, $b, $a);\n        }\n        case 7: // #rrggbb\n          return {\n            css,\n            rgba: (parseInt(css.slice(1), 16) << 8 | 0xFF) >>> 0\n          };\n        case 9: // #rrggbbaa\n          return {\n            css,\n            rgba: parseInt(css.slice(1), 16) >>> 0\n          };\n      }\n    }\n\n    // Formats: rgb() or rgba()\n    const rgbaMatch = css.match(/rgba?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*(,\\s*(0|1|\\d?\\.(\\d+))\\s*)?\\)/);\n    if (rgbaMatch) {\n      $r = parseInt(rgbaMatch[1]);\n      $g = parseInt(rgbaMatch[2]);\n      $b = parseInt(rgbaMatch[3]);\n      $a = Math.round((rgbaMatch[5] === undefined ? 1 : parseFloat(rgbaMatch[5])) * 0xFF);\n      return channels.toColor($r, $g, $b, $a);\n    }\n\n    // Validate the context is available for canvas-based color parsing\n    if (!$ctx || !$litmusColor) {\n      throw new Error('css.toColor: Unsupported css format');\n    }\n\n    // Validate the color using canvas fillStyle\n    // See https://html.spec.whatwg.org/multipage/canvas.html#fill-and-stroke-styles\n    $ctx.fillStyle = $litmusColor;\n    $ctx.fillStyle = css;\n    if (typeof $ctx.fillStyle !== 'string') {\n      throw new Error('css.toColor: Unsupported css format');\n    }\n\n    $ctx.fillRect(0, 0, 1, 1);\n    [$r, $g, $b, $a] = $ctx.getImageData(0, 0, 1, 1).data;\n\n    // Validate the color is non-transparent as color hue gets lost when drawn to the canvas\n    if ($a !== 0xFF) {\n      throw new Error('css.toColor: Unsupported css format');\n    }\n\n    // Extract the color from the canvas' fillStyle property which exposes the color value in rgba()\n    // format\n    // See https://html.spec.whatwg.org/multipage/canvas.html#serialisation-of-a-color\n    return {\n      rgba: channels.toRgba($r, $g, $b, $a),\n      css\n    };\n  }\n}\n\n/**\n * Helper functions where the source type is \"rgb\" (number: 0xrrggbb).\n */\nexport namespace rgb {\n  /**\n   * Gets the relative luminance of an RGB color, this is useful in determining the contrast ratio\n   * between two colors.\n   * @param rgb The color to use.\n   * @see https://www.w3.org/TR/WCAG20/#relativeluminancedef\n   */\n  export function relativeLuminance(rgb: number): number {\n    return relativeLuminance2(\n      (rgb >> 16) & 0xFF,\n      (rgb >> 8 ) & 0xFF,\n      (rgb      ) & 0xFF);\n  }\n\n  /**\n   * Gets the relative luminance of an RGB color, this is useful in determining the contrast ratio\n   * between two colors.\n   * @param r The red channel (0x00 to 0xFF).\n   * @param g The green channel (0x00 to 0xFF).\n   * @param b The blue channel (0x00 to 0xFF).\n   * @see https://www.w3.org/TR/WCAG20/#relativeluminancedef\n   */\n  export function relativeLuminance2(r: number, g: number, b: number): number {\n    const rs = r / 255;\n    const gs = g / 255;\n    const bs = b / 255;\n    const rr = rs <= 0.03928 ? rs / 12.92 : Math.pow((rs + 0.055) / 1.055, 2.4);\n    const rg = gs <= 0.03928 ? gs / 12.92 : Math.pow((gs + 0.055) / 1.055, 2.4);\n    const rb = bs <= 0.03928 ? bs / 12.92 : Math.pow((bs + 0.055) / 1.055, 2.4);\n    return rr * 0.2126 + rg * 0.7152 + rb * 0.0722;\n  }\n}\n\n/**\n * Helper functions where the source type is \"rgba\" (number: 0xrrggbbaa).\n */\nexport namespace rgba {\n  export function blend(bg: number, fg: number): number {\n    $a = (fg & 0xFF) / 0xFF;\n    if ($a === 1) {\n      return fg;\n    }\n    const fgR = (fg >> 24) & 0xFF;\n    const fgG = (fg >> 16) & 0xFF;\n    const fgB = (fg >> 8) & 0xFF;\n    const bgR = (bg >> 24) & 0xFF;\n    const bgG = (bg >> 16) & 0xFF;\n    const bgB = (bg >> 8) & 0xFF;\n    $r = bgR + Math.round((fgR - bgR) * $a);\n    $g = bgG + Math.round((fgG - bgG) * $a);\n    $b = bgB + Math.round((fgB - bgB) * $a);\n    return channels.toRgba($r, $g, $b);\n  }\n\n  /**\n   * Given a foreground color and a background color, either increase or reduce the luminance of the\n   * foreground color until the specified contrast ratio is met. If pure white or black is hit\n   * without the contrast ratio being met, go the other direction using the background color as the\n   * foreground color and take either the first or second result depending on which has the higher\n   * contrast ratio.\n   *\n   * `undefined` will be returned if the contrast ratio is already met.\n   *\n   * @param bgRgba The background color in rgba format.\n   * @param fgRgba The foreground color in rgba format.\n   * @param ratio The contrast ratio to achieve.\n   */\n  export function ensureContrastRatio(bgRgba: number, fgRgba: number, ratio: number): number | undefined {\n    const bgL = rgb.relativeLuminance(bgRgba >> 8);\n    const fgL = rgb.relativeLuminance(fgRgba >> 8);\n    const cr = contrastRatio(bgL, fgL);\n    if (cr < ratio) {\n      if (fgL < bgL) {\n        const resultA = reduceLuminance(bgRgba, fgRgba, ratio);\n        const resultARatio = contrastRatio(bgL, rgb.relativeLuminance(resultA >> 8));\n        if (resultARatio < ratio) {\n          const resultB = increaseLuminance(bgRgba, fgRgba, ratio);\n          const resultBRatio = contrastRatio(bgL, rgb.relativeLuminance(resultB >> 8));\n          return resultARatio > resultBRatio ? resultA : resultB;\n        }\n        return resultA;\n      }\n      const resultA = increaseLuminance(bgRgba, fgRgba, ratio);\n      const resultARatio = contrastRatio(bgL, rgb.relativeLuminance(resultA >> 8));\n      if (resultARatio < ratio) {\n        const resultB = reduceLuminance(bgRgba, fgRgba, ratio);\n        const resultBRatio = contrastRatio(bgL, rgb.relativeLuminance(resultB >> 8));\n        return resultARatio > resultBRatio ? resultA : resultB;\n      }\n      return resultA;\n    }\n    return undefined;\n  }\n\n  export function reduceLuminance(bgRgba: number, fgRgba: number, ratio: number): number {\n    // This is a naive but fast approach to reducing luminance as converting to\n    // HSL and back is expensive\n    const bgR = (bgRgba >> 24) & 0xFF;\n    const bgG = (bgRgba >> 16) & 0xFF;\n    const bgB = (bgRgba >>  8) & 0xFF;\n    let fgR = (fgRgba >> 24) & 0xFF;\n    let fgG = (fgRgba >> 16) & 0xFF;\n    let fgB = (fgRgba >>  8) & 0xFF;\n    let cr = contrastRatio(rgb.relativeLuminance2(fgR, fgG, fgB), rgb.relativeLuminance2(bgR, bgG, bgB));\n    while (cr < ratio && (fgR > 0 || fgG > 0 || fgB > 0)) {\n      // Reduce by 10% until the ratio is hit\n      fgR -= Math.max(0, Math.ceil(fgR * 0.1));\n      fgG -= Math.max(0, Math.ceil(fgG * 0.1));\n      fgB -= Math.max(0, Math.ceil(fgB * 0.1));\n      cr = contrastRatio(rgb.relativeLuminance2(fgR, fgG, fgB), rgb.relativeLuminance2(bgR, bgG, bgB));\n    }\n    return (fgR << 24 | fgG << 16 | fgB << 8 | 0xFF) >>> 0;\n  }\n\n  export function increaseLuminance(bgRgba: number, fgRgba: number, ratio: number): number {\n    // This is a naive but fast approach to increasing luminance as converting to\n    // HSL and back is expensive\n    const bgR = (bgRgba >> 24) & 0xFF;\n    const bgG = (bgRgba >> 16) & 0xFF;\n    const bgB = (bgRgba >>  8) & 0xFF;\n    let fgR = (fgRgba >> 24) & 0xFF;\n    let fgG = (fgRgba >> 16) & 0xFF;\n    let fgB = (fgRgba >>  8) & 0xFF;\n    let cr = contrastRatio(rgb.relativeLuminance2(fgR, fgG, fgB), rgb.relativeLuminance2(bgR, bgG, bgB));\n    while (cr < ratio && (fgR < 0xFF || fgG < 0xFF || fgB < 0xFF)) {\n      // Increase by 10% until the ratio is hit\n      fgR = Math.min(0xFF, fgR + Math.ceil((255 - fgR) * 0.1));\n      fgG = Math.min(0xFF, fgG + Math.ceil((255 - fgG) * 0.1));\n      fgB = Math.min(0xFF, fgB + Math.ceil((255 - fgB) * 0.1));\n      cr = contrastRatio(rgb.relativeLuminance2(fgR, fgG, fgB), rgb.relativeLuminance2(bgR, bgG, bgB));\n    }\n    return (fgR << 24 | fgG << 16 | fgB << 8 | 0xFF) >>> 0;\n  }\n\n  export function toChannels(value: number): [number, number, number, number] {\n    return [(value >> 24) & 0xFF, (value >> 16) & 0xFF, (value >> 8) & 0xFF, value & 0xFF];\n  }\n}\n\nexport function toPaddedHex(c: number): string {\n  const s = c.toString(16);\n  return s.length < 2 ? '0' + s : s;\n}\n\n/**\n * Gets the contrast ratio between two relative luminance values.\n * @param l1 The first relative luminance.\n * @param l2 The first relative luminance.\n * @see https://www.w3.org/TR/WCAG20/#contrast-ratiodef\n */\nexport function contrastRatio(l1: number, l2: number): number {\n  if (l1 < l2) {\n    return (l2 + 0.05) / (l1 + 0.05);\n  }\n  return (l1 + 0.05) / (l2 + 0.05);\n}\n","/**\n * Copyright (c) 2022 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nexport class TwoKeyMap<TFirst extends string | number, TSecond extends string | number, TValue> {\n  private _data: { [bg: string | number]: { [fg: string | number]: TValue | undefined } | undefined } = {};\n\n  public set(first: TFirst, second: TSecond, value: TValue): void {\n    if (!this._data[first]) {\n      this._data[first] = {};\n    }\n    this._data[first as string | number]![second] = value;\n  }\n\n  public get(first: TFirst, second: TSecond): TValue | undefined {\n    return this._data[first as string | number] ? this._data[first as string | number]![second] : undefined;\n  }\n\n  public clear(): void {\n    this._data = {};\n  }\n}\n\nexport class FourKeyMap<TFirst extends string | number, TSecond extends string | number, TThird extends string | number, TFourth extends string | number, TValue> {\n  private _data: TwoKeyMap<TFirst, TSecond, TwoKeyMap<TThird, TFourth, TValue>> = new TwoKeyMap();\n\n  public set(first: TFirst, second: TSecond, third: TThird, fourth: TFourth, value: TValue): void {\n    if (!this._data.get(first, second)) {\n      this._data.set(first, second, new TwoKeyMap());\n    }\n    this._data.get(first, second)!.set(third, fourth, value);\n  }\n\n  public get(first: TFirst, second: TSecond, third: TThird, fourth: TFourth): TValue | undefined {\n    return this._data.get(first, second)?.get(third, fourth);\n  }\n\n  public clear(): void {\n    this._data.clear();\n  }\n}\n","/**\n * Copyright (c) 2016 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\ninterface INavigator {\n  userAgent: string;\n  language: string;\n  platform: string;\n}\n\n// We're declaring a navigator global here as we expect it in all runtimes (node and browser), but\n// we want this module to live in common.\ndeclare const navigator: INavigator;\ndeclare const process: unknown;\n\nexport const isNode = (typeof process !== 'undefined' && 'title' in (process as any)) ? true : false;\nconst userAgent = (isNode) ? 'node' : navigator.userAgent;\nconst platform = (isNode) ? 'node' : navigator.platform;\n\nexport const isFirefox = userAgent.includes('Firefox');\nexport const isLegacyEdge = userAgent.includes('Edge');\nexport const isSafari = /^((?!chrome|android).)*safari/i.test(userAgent);\nexport function getSafariVersion(): number {\n  if (!isSafari) {\n    return 0;\n  }\n  const majorVersion = userAgent.match(/Version\\/(\\d+)/);\n  if (majorVersion === null || majorVersion.length < 2) {\n    return 0;\n  }\n  return parseInt(majorVersion[1]);\n}\n\n// Find the users platform. We use this to interpret the meta key\n// and ISO third level shifts.\n// http://stackoverflow.com/q/19877924/577598\nexport const isMac = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'].includes(platform);\nexport const isIpad = platform === 'iPad';\nexport const isIphone = platform === 'iPhone';\nexport const isWindows = ['Windows', 'Win16', 'Win32', 'WinCE'].includes(platform);\nexport const isLinux = platform.indexOf('Linux') >= 0;\n// Note that when this is true, isLinux will also be true.\nexport const isChromeOS = /\\bCrOS\\b/.test(userAgent);\n","/**\n * Copyright (c) 2022 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { isNode } from 'common/Platform';\n\ninterface ITaskQueue {\n  /**\n   * Adds a task to the queue which will run in a future idle callback.\n   * To avoid perceivable stalls on the mainthread, tasks with heavy workload\n   * should split their work into smaller pieces and return `true` to get\n   * called again until the work is done (on falsy return value).\n   */\n  enqueue(task: () => boolean | void): void;\n\n  /**\n   * Flushes the queue, running all remaining tasks synchronously.\n   */\n  flush(): void;\n\n  /**\n   * Clears any remaining tasks from the queue, these will not be run.\n   */\n  clear(): void;\n}\n\ninterface ITaskDeadline {\n  timeRemaining(): number;\n}\ntype CallbackWithDeadline = (deadline: ITaskDeadline) => void;\n\nabstract class TaskQueue implements ITaskQueue {\n  private _tasks: (() => boolean | void)[] = [];\n  private _idleCallback?: number;\n  private _i = 0;\n\n  protected abstract _requestCallback(callback: CallbackWithDeadline): number;\n  protected abstract _cancelCallback(identifier: number): void;\n\n  public enqueue(task: () => boolean | void): void {\n    this._tasks.push(task);\n    this._start();\n  }\n\n  public flush(): void {\n    while (this._i < this._tasks.length) {\n      if (!this._tasks[this._i]()) {\n        this._i++;\n      }\n    }\n    this.clear();\n  }\n\n  public clear(): void {\n    if (this._idleCallback) {\n      this._cancelCallback(this._idleCallback);\n      this._idleCallback = undefined;\n    }\n    this._i = 0;\n    this._tasks.length = 0;\n  }\n\n  private _start(): void {\n    if (!this._idleCallback) {\n      this._idleCallback = this._requestCallback(this._process.bind(this));\n    }\n  }\n\n  private _process(deadline: ITaskDeadline): void {\n    this._idleCallback = undefined;\n    let taskDuration = 0;\n    let longestTask = 0;\n    let lastDeadlineRemaining = deadline.timeRemaining();\n    let deadlineRemaining = 0;\n    while (this._i < this._tasks.length) {\n      taskDuration = performance.now();\n      if (!this._tasks[this._i]()) {\n        this._i++;\n      }\n      // other than performance.now, performance.now might not be stable (changes on wall clock\n      // changes), this is not an issue here as a clock change during a short running task is very\n      // unlikely in case it still happened and leads to negative duration, simply assume 1 msec\n      taskDuration = Math.max(1, performance.now() - taskDuration);\n      longestTask = Math.max(taskDuration, longestTask);\n      // Guess the following task will take a similar time to the longest task in this batch, allow\n      // additional room to try avoid exceeding the deadline\n      deadlineRemaining = deadline.timeRemaining();\n      if (longestTask * 1.5 > deadlineRemaining) {\n        // Warn when the time exceeding the deadline is over 20ms, if this happens in practice the\n        // task should be split into sub-tasks to ensure the UI remains responsive.\n        if (lastDeadlineRemaining - taskDuration < -20) {\n          console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(lastDeadlineRemaining - taskDuration))}ms`);\n        }\n        this._start();\n        return;\n      }\n      lastDeadlineRemaining = deadlineRemaining;\n    }\n    this.clear();\n  }\n}\n\n/**\n * A queue of that runs tasks over several tasks via setTimeout, trying to maintain above 60 frames\n * per second. The tasks will run in the order they are enqueued, but they will run some time later,\n * and care should be taken to ensure they're non-urgent and will not introduce race conditions.\n */\nexport class PriorityTaskQueue extends TaskQueue {\n  protected _requestCallback(callback: CallbackWithDeadline): number {\n    return setTimeout(() => callback(this._createDeadline(16)));\n  }\n\n  protected _cancelCallback(identifier: number): void {\n    clearTimeout(identifier);\n  }\n\n  private _createDeadline(duration: number): ITaskDeadline {\n    const end = performance.now() + duration;\n    return {\n      timeRemaining: () => Math.max(0, end - performance.now())\n    };\n  }\n}\n\nclass IdleTaskQueueInternal extends TaskQueue {\n  protected _requestCallback(callback: IdleRequestCallback): number {\n    return requestIdleCallback(callback);\n  }\n\n  protected _cancelCallback(identifier: number): void {\n    cancelIdleCallback(identifier);\n  }\n}\n\n/**\n * A queue of that runs tasks over several idle callbacks, trying to respect the idle callback's\n * deadline given by the environment. The tasks will run in the order they are enqueued, but they\n * will run some time later, and care should be taken to ensure they're non-urgent and will not\n * introduce race conditions.\n *\n * This reverts to a {@link PriorityTaskQueue} if the environment does not support idle callbacks.\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport const IdleTaskQueue = (!isNode && 'requestIdleCallback' in window) ? IdleTaskQueueInternal : PriorityTaskQueue;\n\n/**\n * An object that tracks a single debounced task that will run on the next idle frame. When called\n * multiple times, only the last set task will run.\n */\nexport class DebouncedIdleTask {\n  private _queue: ITaskQueue;\n\n  constructor() {\n    this._queue = new IdleTaskQueue();\n  }\n\n  public set(task: () => boolean | void): void {\n    this._queue.clear();\n    this._queue.enqueue(task);\n  }\n\n  public flush(): void {\n    this._queue.flush();\n  }\n}\n","/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IAttributeData, IColorRGB, IExtendedAttrs } from 'common/Types';\nimport { Attributes, FgFlags, BgFlags, UnderlineStyle, ExtFlags } from 'common/buffer/Constants';\n\nexport class AttributeData implements IAttributeData {\n  public static toColorRGB(value: number): IColorRGB {\n    return [\n      value >>> Attributes.RED_SHIFT & 255,\n      value >>> Attributes.GREEN_SHIFT & 255,\n      value & 255\n    ];\n  }\n\n  public static fromColorRGB(value: IColorRGB): number {\n    return (value[0] & 255) << Attributes.RED_SHIFT | (value[1] & 255) << Attributes.GREEN_SHIFT | value[2] & 255;\n  }\n\n  public clone(): IAttributeData {\n    const newObj = new AttributeData();\n    newObj.fg = this.fg;\n    newObj.bg = this.bg;\n    newObj.extended = this.extended.clone();\n    return newObj;\n  }\n\n  // data\n  public fg = 0;\n  public bg = 0;\n  public extended: IExtendedAttrs = new ExtendedAttrs();\n\n  // flags\n  public isInverse(): number       { return this.fg & FgFlags.INVERSE; }\n  public isBold(): number          { return this.fg & FgFlags.BOLD; }\n  public isUnderline(): number     {\n    if (this.hasExtendedAttrs() && this.extended.underlineStyle !== UnderlineStyle.NONE) {\n      return 1;\n    }\n    return this.fg & FgFlags.UNDERLINE;\n  }\n  public isBlink(): number         { return this.fg & FgFlags.BLINK; }\n  public isInvisible(): number     { return this.fg & FgFlags.INVISIBLE; }\n  public isItalic(): number        { return this.bg & BgFlags.ITALIC; }\n  public isDim(): number           { return this.bg & BgFlags.DIM; }\n  public isStrikethrough(): number { return this.fg & FgFlags.STRIKETHROUGH; }\n  public isProtected(): number     { return this.bg & BgFlags.PROTECTED; }\n  public isOverline(): number      { return this.bg & BgFlags.OVERLINE; }\n\n  // color modes\n  public getFgColorMode(): number { return this.fg & Attributes.CM_MASK; }\n  public getBgColorMode(): number { return this.bg & Attributes.CM_MASK; }\n  public isFgRGB(): boolean       { return (this.fg & Attributes.CM_MASK) === Attributes.CM_RGB; }\n  public isBgRGB(): boolean       { return (this.bg & Attributes.CM_MASK) === Attributes.CM_RGB; }\n  public isFgPalette(): boolean   { return (this.fg & Attributes.CM_MASK) === Attributes.CM_P16 || (this.fg & Attributes.CM_MASK) === Attributes.CM_P256; }\n  public isBgPalette(): boolean   { return (this.bg & Attributes.CM_MASK) === Attributes.CM_P16 || (this.bg & Attributes.CM_MASK) === Attributes.CM_P256; }\n  public isFgDefault(): boolean   { return (this.fg & Attributes.CM_MASK) === 0; }\n  public isBgDefault(): boolean   { return (this.bg & Attributes.CM_MASK) === 0; }\n  public isAttributeDefault(): boolean { return this.fg === 0 && this.bg === 0; }\n\n  // colors\n  public getFgColor(): number {\n    switch (this.fg & Attributes.CM_MASK) {\n      case Attributes.CM_P16:\n      case Attributes.CM_P256:  return this.fg & Attributes.PCOLOR_MASK;\n      case Attributes.CM_RGB:   return this.fg & Attributes.RGB_MASK;\n      default:                  return -1;  // CM_DEFAULT defaults to -1\n    }\n  }\n  public getBgColor(): number {\n    switch (this.bg & Attributes.CM_MASK) {\n      case Attributes.CM_P16:\n      case Attributes.CM_P256:  return this.bg & Attributes.PCOLOR_MASK;\n      case Attributes.CM_RGB:   return this.bg & Attributes.RGB_MASK;\n      default:                  return -1;  // CM_DEFAULT defaults to -1\n    }\n  }\n\n  // extended attrs\n  public hasExtendedAttrs(): number {\n    return this.bg & BgFlags.HAS_EXTENDED;\n  }\n  public updateExtended(): void {\n    if (this.extended.isEmpty()) {\n      this.bg &= ~BgFlags.HAS_EXTENDED;\n    } else {\n      this.bg |= BgFlags.HAS_EXTENDED;\n    }\n  }\n  public getUnderlineColor(): number {\n    if ((this.bg & BgFlags.HAS_EXTENDED) && ~this.extended.underlineColor) {\n      switch (this.extended.underlineColor & Attributes.CM_MASK) {\n        case Attributes.CM_P16:\n        case Attributes.CM_P256:  return this.extended.underlineColor & Attributes.PCOLOR_MASK;\n        case Attributes.CM_RGB:   return this.extended.underlineColor & Attributes.RGB_MASK;\n        default:                  return this.getFgColor();\n      }\n    }\n    return this.getFgColor();\n  }\n  public getUnderlineColorMode(): number {\n    return (this.bg & BgFlags.HAS_EXTENDED) && ~this.extended.underlineColor\n      ? this.extended.underlineColor & Attributes.CM_MASK\n      : this.getFgColorMode();\n  }\n  public isUnderlineColorRGB(): boolean {\n    return (this.bg & BgFlags.HAS_EXTENDED) && ~this.extended.underlineColor\n      ? (this.extended.underlineColor & Attributes.CM_MASK) === Attributes.CM_RGB\n      : this.isFgRGB();\n  }\n  public isUnderlineColorPalette(): boolean {\n    return (this.bg & BgFlags.HAS_EXTENDED) && ~this.extended.underlineColor\n      ? (this.extended.underlineColor & Attributes.CM_MASK) === Attributes.CM_P16\n          || (this.extended.underlineColor & Attributes.CM_MASK) === Attributes.CM_P256\n      : this.isFgPalette();\n  }\n  public isUnderlineColorDefault(): boolean {\n    return (this.bg & BgFlags.HAS_EXTENDED) && ~this.extended.underlineColor\n      ? (this.extended.underlineColor & Attributes.CM_MASK) === 0\n      : this.isFgDefault();\n  }\n  public getUnderlineStyle(): UnderlineStyle {\n    return this.fg & FgFlags.UNDERLINE\n      ? (this.bg & BgFlags.HAS_EXTENDED ? this.extended.underlineStyle : UnderlineStyle.SINGLE)\n      : UnderlineStyle.NONE;\n  }\n  public getUnderlineVariantOffset(): number {\n    return this.extended.underlineVariantOffset;\n  }\n}\n\n\n/**\n * Extended attributes for a cell.\n * Holds information about different underline styles and color.\n */\nexport class ExtendedAttrs implements IExtendedAttrs {\n  private _ext: number = 0;\n  public get ext(): number {\n    if (this._urlId) {\n      return (\n        (this._ext & ~ExtFlags.UNDERLINE_STYLE) |\n        (this.underlineStyle << 26)\n      );\n    }\n    return this._ext;\n  }\n  public set ext(value: number) { this._ext = value; }\n\n  public get underlineStyle(): UnderlineStyle {\n    // Always return the URL style if it has one\n    if (this._urlId) {\n      return UnderlineStyle.DASHED;\n    }\n    return (this._ext & ExtFlags.UNDERLINE_STYLE) >> 26;\n  }\n  public set underlineStyle(value: UnderlineStyle) {\n    this._ext &= ~ExtFlags.UNDERLINE_STYLE;\n    this._ext |= (value << 26) & ExtFlags.UNDERLINE_STYLE;\n  }\n\n  public get underlineColor(): number {\n    return this._ext & (Attributes.CM_MASK | Attributes.RGB_MASK);\n  }\n  public set underlineColor(value: number) {\n    this._ext &= ~(Attributes.CM_MASK | Attributes.RGB_MASK);\n    this._ext |= value & (Attributes.CM_MASK | Attributes.RGB_MASK);\n  }\n\n  private _urlId: number = 0;\n  public get urlId(): number {\n    return this._urlId;\n  }\n  public set urlId(value: number) {\n    this._urlId = value;\n  }\n\n  public get underlineVariantOffset(): number {\n    const val = (this._ext & ExtFlags.VARIANT_OFFSET) >> 29;\n    if (val < 0) {\n      return val ^ 0xFFFFFFF8;\n    }\n    return val;\n  }\n  public set underlineVariantOffset(value: number) {\n    this._ext &= ~ExtFlags.VARIANT_OFFSET;\n    this._ext |= (value << 29) & ExtFlags.VARIANT_OFFSET;\n  }\n\n  constructor(\n    ext: number = 0,\n    urlId: number = 0\n  ) {\n    this._ext = ext;\n    this._urlId = urlId;\n  }\n\n  public clone(): IExtendedAttrs {\n    return new ExtendedAttrs(this._ext, this._urlId);\n  }\n\n  /**\n   * Convenient method to indicate whether the object holds no additional information,\n   * that needs to be persistant in the buffer.\n   */\n  public isEmpty(): boolean {\n    return this.underlineStyle === UnderlineStyle.NONE && this._urlId === 0;\n  }\n}\n","/**\n * Copyright (c) 2018 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { CharData, ICellData, IExtendedAttrs } from 'common/Types';\nimport { stringFromCodePoint } from 'common/input/TextDecoder';\nimport { CHAR_DATA_CHAR_INDEX, CHAR_DATA_WIDTH_INDEX, CHAR_DATA_ATTR_INDEX, Content } from 'common/buffer/Constants';\nimport { AttributeData, ExtendedAttrs } from 'common/buffer/AttributeData';\n\n/**\n * CellData - represents a single Cell in the terminal buffer.\n */\nexport class CellData extends AttributeData implements ICellData {\n  /** Helper to create CellData from CharData. */\n  public static fromCharData(value: CharData): CellData {\n    const obj = new CellData();\n    obj.setFromCharData(value);\n    return obj;\n  }\n  /** Primitives from terminal buffer. */\n  public content = 0;\n  public fg = 0;\n  public bg = 0;\n  public extended: IExtendedAttrs = new ExtendedAttrs();\n  public combinedData = '';\n  /** Whether cell contains a combined string. */\n  public isCombined(): number {\n    return this.content & Content.IS_COMBINED_MASK;\n  }\n  /** Width of the cell. */\n  public getWidth(): number {\n    return this.content >> Content.WIDTH_SHIFT;\n  }\n  /** JS string of the content. */\n  public getChars(): string {\n    if (this.content & Content.IS_COMBINED_MASK) {\n      return this.combinedData;\n    }\n    if (this.content & Content.CODEPOINT_MASK) {\n      return stringFromCodePoint(this.content & Content.CODEPOINT_MASK);\n    }\n    return '';\n  }\n  /**\n   * Codepoint of cell\n   * Note this returns the UTF32 codepoint of single chars,\n   * if content is a combined string it returns the codepoint\n   * of the last char in string to be in line with code in CharData.\n   */\n  public getCode(): number {\n    return (this.isCombined())\n      ? this.combinedData.charCodeAt(this.combinedData.length - 1)\n      : this.content & Content.CODEPOINT_MASK;\n  }\n  /** Set data from CharData */\n  public setFromCharData(value: CharData): void {\n    this.fg = value[CHAR_DATA_ATTR_INDEX];\n    this.bg = 0;\n    let combined = false;\n    // surrogates and combined strings need special treatment\n    if (value[CHAR_DATA_CHAR_INDEX].length > 2) {\n      combined = true;\n    }\n    else if (value[CHAR_DATA_CHAR_INDEX].length === 2) {\n      const code = value[CHAR_DATA_CHAR_INDEX].charCodeAt(0);\n      // if the 2-char string is a surrogate create single codepoint\n      // everything else is combined\n      if (0xD800 <= code && code <= 0xDBFF) {\n        const second = value[CHAR_DATA_CHAR_INDEX].charCodeAt(1);\n        if (0xDC00 <= second && second <= 0xDFFF) {\n          this.content = ((code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000) | (value[CHAR_DATA_WIDTH_INDEX] << Content.WIDTH_SHIFT);\n        }\n        else {\n          combined = true;\n        }\n      }\n      else {\n        combined = true;\n      }\n    }\n    else {\n      this.content = value[CHAR_DATA_CHAR_INDEX].charCodeAt(0) | (value[CHAR_DATA_WIDTH_INDEX] << Content.WIDTH_SHIFT);\n    }\n    if (combined) {\n      this.combinedData = value[CHAR_DATA_CHAR_INDEX];\n      this.content = Content.IS_COMBINED_MASK | (value[CHAR_DATA_WIDTH_INDEX] << Content.WIDTH_SHIFT);\n    }\n  }\n  /** Get data as CharData. */\n  public getAsCharData(): CharData {\n    return [this.fg, this.getChars(), this.getWidth(), this.getCode()];\n  }\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nexport const DEFAULT_COLOR = 0;\nexport const DEFAULT_ATTR = (0 << 18) | (DEFAULT_COLOR << 9) | (256 << 0);\nexport const DEFAULT_EXT = 0;\n\nexport const CHAR_DATA_ATTR_INDEX = 0;\nexport const CHAR_DATA_CHAR_INDEX = 1;\nexport const CHAR_DATA_WIDTH_INDEX = 2;\nexport const CHAR_DATA_CODE_INDEX = 3;\n\n/**\n * Null cell - a real empty cell (containing nothing).\n * Note that code should always be 0 for a null cell as\n * several test condition of the buffer line rely on this.\n */\nexport const NULL_CELL_CHAR = '';\nexport const NULL_CELL_WIDTH = 1;\nexport const NULL_CELL_CODE = 0;\n\n/**\n * Whitespace cell.\n * This is meant as a replacement for empty cells when needed\n * during rendering lines to preserve correct aligment.\n */\nexport const WHITESPACE_CELL_CHAR = ' ';\nexport const WHITESPACE_CELL_WIDTH = 1;\nexport const WHITESPACE_CELL_CODE = 32;\n\n/**\n * Bitmasks for accessing data in `content`.\n */\nexport const enum Content {\n  /**\n   * bit 1..21    codepoint, max allowed in UTF32 is 0x10FFFF (21 bits taken)\n   *              read:   `codepoint = content & Content.codepointMask;`\n   *              write:  `content |= codepoint & Content.codepointMask;`\n   *                      shortcut if precondition `codepoint <= 0x10FFFF` is met:\n   *                      `content |= codepoint;`\n   */\n  CODEPOINT_MASK = 0x1FFFFF,\n\n  /**\n   * bit 22       flag indication whether a cell contains combined content\n   *              read:   `isCombined = content & Content.isCombined;`\n   *              set:    `content |= Content.isCombined;`\n   *              clear:  `content &= ~Content.isCombined;`\n   */\n  IS_COMBINED_MASK = 0x200000,  // 1 << 21\n\n  /**\n   * bit 1..22    mask to check whether a cell contains any string data\n   *              we need to check for codepoint and isCombined bits to see\n   *              whether a cell contains anything\n   *              read:   `isEmpty = !(content & Content.hasContent)`\n   */\n  HAS_CONTENT_MASK = 0x3FFFFF,\n\n  /**\n   * bit 23..24   wcwidth value of cell, takes 2 bits (ranges from 0..2)\n   *              read:   `width = (content & Content.widthMask) >> Content.widthShift;`\n   *                      `hasWidth = content & Content.widthMask;`\n   *                      as long as wcwidth is highest value in `content`:\n   *                      `width = content >> Content.widthShift;`\n   *              write:  `content |= (width << Content.widthShift) & Content.widthMask;`\n   *                      shortcut if precondition `0 <= width <= 3` is met:\n   *                      `content |= width << Content.widthShift;`\n   */\n  WIDTH_MASK = 0xC00000,   // 3 << 22\n  WIDTH_SHIFT = 22\n}\n\nexport const enum Attributes {\n  /**\n   * bit 1..8     blue in RGB, color in P256 and P16\n   */\n  BLUE_MASK = 0xFF,\n  BLUE_SHIFT = 0,\n  PCOLOR_MASK = 0xFF,\n  PCOLOR_SHIFT = 0,\n\n  /**\n   * bit 9..16    green in RGB\n   */\n  GREEN_MASK = 0xFF00,\n  GREEN_SHIFT = 8,\n\n  /**\n   * bit 17..24   red in RGB\n   */\n  RED_MASK = 0xFF0000,\n  RED_SHIFT = 16,\n\n  /**\n   * bit 25..26   color mode: DEFAULT (0) | P16 (1) | P256 (2) | RGB (3)\n   */\n  CM_MASK = 0x3000000,\n  CM_DEFAULT = 0,\n  CM_P16 = 0x1000000,\n  CM_P256 = 0x2000000,\n  CM_RGB = 0x3000000,\n\n  /**\n   * bit 1..24  RGB room\n   */\n  RGB_MASK = 0xFFFFFF\n}\n\nexport const enum FgFlags {\n  /**\n   * bit 27..32\n   */\n  INVERSE = 0x4000000,\n  BOLD = 0x8000000,\n  UNDERLINE = 0x10000000,\n  BLINK = 0x20000000,\n  INVISIBLE = 0x40000000,\n  STRIKETHROUGH = 0x80000000,\n}\n\nexport const enum BgFlags {\n  /**\n   * bit 27..32 (upper 2 unused)\n   */\n  ITALIC = 0x4000000,\n  DIM = 0x8000000,\n  HAS_EXTENDED = 0x10000000,\n  PROTECTED = 0x20000000,\n  OVERLINE = 0x40000000\n}\n\nexport const enum ExtFlags {\n  /**\n   * bit 27..29\n   */\n  UNDERLINE_STYLE = 0x1C000000,\n\n  /**\n   * bit 30..32\n   *\n   * An optional variant for the glyph, this can be used for example to offset underlines by a\n   * number of pixels to create a perfect pattern.\n   */\n  VARIANT_OFFSET = 0xE0000000\n}\n\nexport const enum UnderlineStyle {\n  NONE = 0,\n  SINGLE = 1,\n  DOUBLE = 2,\n  CURLY = 3,\n  DOTTED = 4,\n  DASHED = 5\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\n/**\n * Polyfill - Convert UTF32 codepoint into JS string.\n * Note: The built-in String.fromCodePoint happens to be much slower\n *       due to additional sanity checks. We can avoid them since\n *       we always operate on legal UTF32 (granted by the input decoders)\n *       and use this faster version instead.\n */\nexport function stringFromCodePoint(codePoint: number): string {\n  if (codePoint > 0xFFFF) {\n    codePoint -= 0x10000;\n    return String.fromCharCode((codePoint >> 10) + 0xD800) + String.fromCharCode((codePoint % 0x400) + 0xDC00);\n  }\n  return String.fromCharCode(codePoint);\n}\n\n/**\n * Convert UTF32 char codes into JS string.\n * Basically the same as `stringFromCodePoint` but for multiple codepoints\n * in a loop (which is a lot faster).\n */\nexport function utf32ToString(data: Uint32Array, start: number = 0, end: number = data.length): string {\n  let result = '';\n  for (let i = start; i < end; ++i) {\n    let codepoint = data[i];\n    if (codepoint > 0xFFFF) {\n      // JS strings are encoded as UTF16, thus a non BMP codepoint gets converted into a surrogate\n      // pair conversion rules:\n      //  - subtract 0x10000 from code point, leaving a 20 bit number\n      //  - add high 10 bits to 0xD800  --> first surrogate\n      //  - add low 10 bits to 0xDC00   --> second surrogate\n      codepoint -= 0x10000;\n      result += String.fromCharCode((codepoint >> 10) + 0xD800) + String.fromCharCode((codepoint % 0x400) + 0xDC00);\n    } else {\n      result += String.fromCharCode(codepoint);\n    }\n  }\n  return result;\n}\n\n/**\n * StringToUtf32 - decodes UTF16 sequences into UTF32 codepoints.\n * To keep the decoder in line with JS strings it handles single surrogates as UCS2.\n */\nexport class StringToUtf32 {\n  private _interim: number = 0;\n\n  /**\n   * Clears interim and resets decoder to clean state.\n   */\n  public clear(): void {\n    this._interim = 0;\n  }\n\n  /**\n   * Decode JS string to UTF32 codepoints.\n   * The methods assumes stream input and will store partly transmitted\n   * surrogate pairs and decode them with the next data chunk.\n   * Note: The method does no bound checks for target, therefore make sure\n   * the provided input data does not exceed the size of `target`.\n   * Returns the number of written codepoints in `target`.\n   */\n  public decode(input: string, target: Uint32Array): number {\n    const length = input.length;\n\n    if (!length) {\n      return 0;\n    }\n\n    let size = 0;\n    let startPos = 0;\n\n    // handle leftover surrogate high\n    if (this._interim) {\n      const second = input.charCodeAt(startPos++);\n      if (0xDC00 <= second && second <= 0xDFFF) {\n        target[size++] = (this._interim - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n      } else {\n        // illegal codepoint (USC2 handling)\n        target[size++] = this._interim;\n        target[size++] = second;\n      }\n      this._interim = 0;\n    }\n\n    for (let i = startPos; i < length; ++i) {\n      const code = input.charCodeAt(i);\n      // surrogate pair first\n      if (0xD800 <= code && code <= 0xDBFF) {\n        if (++i >= length) {\n          this._interim = code;\n          return size;\n        }\n        const second = input.charCodeAt(i);\n        if (0xDC00 <= second && second <= 0xDFFF) {\n          target[size++] = (code - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;\n        } else {\n          // illegal codepoint (USC2 handling)\n          target[size++] = code;\n          target[size++] = second;\n        }\n        continue;\n      }\n      if (code === 0xFEFF) {\n        // BOM\n        continue;\n      }\n      target[size++] = code;\n    }\n    return size;\n  }\n}\n\n/**\n * Utf8Decoder - decodes UTF8 byte sequences into UTF32 codepoints.\n */\nexport class Utf8ToUtf32 {\n  public interim: Uint8Array = new Uint8Array(3);\n\n  /**\n   * Clears interim bytes and resets decoder to clean state.\n   */\n  public clear(): void {\n    this.interim.fill(0);\n  }\n\n  /**\n   * Decodes UTF8 byte sequences in `input` to UTF32 codepoints in `target`.\n   * The methods assumes stream input and will store partly transmitted bytes\n   * and decode them with the next data chunk.\n   * Note: The method does no bound checks for target, therefore make sure\n   * the provided data chunk does not exceed the size of `target`.\n   * Returns the number of written codepoints in `target`.\n   */\n  public decode(input: Uint8Array, target: Uint32Array): number {\n    const length = input.length;\n\n    if (!length) {\n      return 0;\n    }\n\n    let size = 0;\n    let byte1: number;\n    let byte2: number;\n    let byte3: number;\n    let byte4: number;\n    let codepoint = 0;\n    let startPos = 0;\n\n    // handle leftover bytes\n    if (this.interim[0]) {\n      let discardInterim = false;\n      let cp = this.interim[0];\n      cp &= ((((cp & 0xE0) === 0xC0)) ? 0x1F : (((cp & 0xF0) === 0xE0)) ? 0x0F : 0x07);\n      let pos = 0;\n      let tmp: number;\n      while ((tmp = this.interim[++pos] & 0x3F) && pos < 4) {\n        cp <<= 6;\n        cp |= tmp;\n      }\n      // missing bytes - read ahead from input\n      const type = (((this.interim[0] & 0xE0) === 0xC0)) ? 2 : (((this.interim[0] & 0xF0) === 0xE0)) ? 3 : 4;\n      const missing = type - pos;\n      while (startPos < missing) {\n        if (startPos >= length) {\n          return 0;\n        }\n        tmp = input[startPos++];\n        if ((tmp & 0xC0) !== 0x80) {\n          // wrong continuation, discard interim bytes completely\n          startPos--;\n          discardInterim = true;\n          break;\n        } else {\n          // need to save so we can continue short inputs in next call\n          this.interim[pos++] = tmp;\n          cp <<= 6;\n          cp |= tmp & 0x3F;\n        }\n      }\n      if (!discardInterim) {\n        // final test is type dependent\n        if (type === 2) {\n          if (cp < 0x80) {\n            // wrong starter byte\n            startPos--;\n          } else {\n            target[size++] = cp;\n          }\n        } else if (type === 3) {\n          if (cp < 0x0800 || (cp >= 0xD800 && cp <= 0xDFFF) || cp === 0xFEFF) {\n            // illegal codepoint or BOM\n          } else {\n            target[size++] = cp;\n          }\n        } else {\n          if (cp < 0x010000 || cp > 0x10FFFF) {\n            // illegal codepoint\n          } else {\n            target[size++] = cp;\n          }\n        }\n      }\n      this.interim.fill(0);\n    }\n\n    // loop through input\n    const fourStop = length - 4;\n    let i = startPos;\n    while (i < length) {\n      /**\n       * ASCII shortcut with loop unrolled to 4 consecutive ASCII chars.\n       * This is a compromise between speed gain for ASCII\n       * and penalty for non ASCII:\n       * For best ASCII performance the char should be stored directly into target,\n       * but even a single attempt to write to target and compare afterwards\n       * penalizes non ASCII really bad (-50%), thus we load the char into byteX first,\n       * which reduces ASCII performance by ~15%.\n       * This trial for ASCII reduces non ASCII performance by ~10% which seems acceptible\n       * compared to the gains.\n       * Note that this optimization only takes place for 4 consecutive ASCII chars,\n       * for any shorter it bails out. Worst case - all 4 bytes being read but\n       * thrown away due to the last being a non ASCII char (-10% performance).\n       */\n      while (i < fourStop\n        && !((byte1 = input[i]) & 0x80)\n        && !((byte2 = input[i + 1]) & 0x80)\n        && !((byte3 = input[i + 2]) & 0x80)\n        && !((byte4 = input[i + 3]) & 0x80))\n      {\n        target[size++] = byte1;\n        target[size++] = byte2;\n        target[size++] = byte3;\n        target[size++] = byte4;\n        i += 4;\n      }\n\n      // reread byte1\n      byte1 = input[i++];\n\n      // 1 byte\n      if (byte1 < 0x80) {\n        target[size++] = byte1;\n\n        // 2 bytes\n      } else if ((byte1 & 0xE0) === 0xC0) {\n        if (i >= length) {\n          this.interim[0] = byte1;\n          return size;\n        }\n        byte2 = input[i++];\n        if ((byte2 & 0xC0) !== 0x80) {\n          // wrong continuation\n          i--;\n          continue;\n        }\n        codepoint = (byte1 & 0x1F) << 6 | (byte2 & 0x3F);\n        if (codepoint < 0x80) {\n          // wrong starter byte\n          i--;\n          continue;\n        }\n        target[size++] = codepoint;\n\n        // 3 bytes\n      } else if ((byte1 & 0xF0) === 0xE0) {\n        if (i >= length) {\n          this.interim[0] = byte1;\n          return size;\n        }\n        byte2 = input[i++];\n        if ((byte2 & 0xC0) !== 0x80) {\n          // wrong continuation\n          i--;\n          continue;\n        }\n        if (i >= length) {\n          this.interim[0] = byte1;\n          this.interim[1] = byte2;\n          return size;\n        }\n        byte3 = input[i++];\n        if ((byte3 & 0xC0) !== 0x80) {\n          // wrong continuation\n          i--;\n          continue;\n        }\n        codepoint = (byte1 & 0x0F) << 12 | (byte2 & 0x3F) << 6 | (byte3 & 0x3F);\n        if (codepoint < 0x0800 || (codepoint >= 0xD800 && codepoint <= 0xDFFF) || codepoint === 0xFEFF) {\n          // illegal codepoint or BOM, no i-- here\n          continue;\n        }\n        target[size++] = codepoint;\n\n        // 4 bytes\n      } else if ((byte1 & 0xF8) === 0xF0) {\n        if (i >= length) {\n          this.interim[0] = byte1;\n          return size;\n        }\n        byte2 = input[i++];\n        if ((byte2 & 0xC0) !== 0x80) {\n          // wrong continuation\n          i--;\n          continue;\n        }\n        if (i >= length) {\n          this.interim[0] = byte1;\n          this.interim[1] = byte2;\n          return size;\n        }\n        byte3 = input[i++];\n        if ((byte3 & 0xC0) !== 0x80) {\n          // wrong continuation\n          i--;\n          continue;\n        }\n        if (i >= length) {\n          this.interim[0] = byte1;\n          this.interim[1] = byte2;\n          this.interim[2] = byte3;\n          return size;\n        }\n        byte4 = input[i++];\n        if ((byte4 & 0xC0) !== 0x80) {\n          // wrong continuation\n          i--;\n          continue;\n        }\n        codepoint = (byte1 & 0x07) << 18 | (byte2 & 0x3F) << 12 | (byte3 & 0x3F) << 6 | (byte4 & 0x3F);\n        if (codepoint < 0x010000 || codepoint > 0x10FFFF) {\n          // illegal codepoint, no i-- here\n          continue;\n        }\n        target[size++] = codepoint;\n      } else {\n        // illegal byte, just skip\n      }\n    }\n    return size;\n  }\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { ILogService, IOptionsService, LogLevelEnum } from 'common/services/Services';\n\ntype LogType = (message?: any, ...optionalParams: any[]) => void;\n\ninterface IConsole {\n  log: LogType;\n  error: LogType;\n  info: LogType;\n  trace: LogType;\n  warn: LogType;\n}\n\n// console is available on both node.js and browser contexts but the common\n// module doesn't depend on them so we need to explicitly declare it.\ndeclare const console: IConsole;\n\nconst optionsKeyToLogLevel: { [key: string]: LogLevelEnum } = {\n  trace: LogLevelEnum.TRACE,\n  debug: LogLevelEnum.DEBUG,\n  info: LogLevelEnum.INFO,\n  warn: LogLevelEnum.WARN,\n  error: LogLevelEnum.ERROR,\n  off: LogLevelEnum.OFF\n};\n\nconst LOG_PREFIX = 'xterm.js: ';\n\nexport class LogService extends Disposable implements ILogService {\n  public serviceBrand: any;\n\n  private _logLevel: LogLevelEnum = LogLevelEnum.OFF;\n  public get logLevel(): LogLevelEnum { return this._logLevel; }\n\n  constructor(\n    @IOptionsService private readonly _optionsService: IOptionsService\n  ) {\n    super();\n    this._updateLogLevel();\n    this._register(this._optionsService.onSpecificOptionChange('logLevel', () => this._updateLogLevel()));\n\n    // For trace logging, assume the latest created log service is valid\n    traceLogger = this;\n  }\n\n  private _updateLogLevel(): void {\n    this._logLevel = optionsKeyToLogLevel[this._optionsService.rawOptions.logLevel];\n  }\n\n  private _evalLazyOptionalParams(optionalParams: any[]): void {\n    for (let i = 0; i < optionalParams.length; i++) {\n      if (typeof optionalParams[i] === 'function') {\n        optionalParams[i] = optionalParams[i]();\n      }\n    }\n  }\n\n  private _log(type: LogType, message: string, optionalParams: any[]): void {\n    this._evalLazyOptionalParams(optionalParams);\n    type.call(console, (this._optionsService.options.logger ? '' : LOG_PREFIX) + message, ...optionalParams);\n  }\n\n  public trace(message: string, ...optionalParams: any[]): void {\n    if (this._logLevel <= LogLevelEnum.TRACE) {\n      this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger) ?? console.log, message, optionalParams);\n    }\n  }\n\n  public debug(message: string, ...optionalParams: any[]): void {\n    if (this._logLevel <= LogLevelEnum.DEBUG) {\n      this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger) ?? console.log, message, optionalParams);\n    }\n  }\n\n  public info(message: string, ...optionalParams: any[]): void {\n    if (this._logLevel <= LogLevelEnum.INFO) {\n      this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger) ?? console.info, message, optionalParams);\n    }\n  }\n\n  public warn(message: string, ...optionalParams: any[]): void {\n    if (this._logLevel <= LogLevelEnum.WARN) {\n      this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger) ?? console.warn, message, optionalParams);\n    }\n  }\n\n  public error(message: string, ...optionalParams: any[]): void {\n    if (this._logLevel <= LogLevelEnum.ERROR) {\n      this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger) ?? console.error, message, optionalParams);\n    }\n  }\n}\n\nlet traceLogger: ILogService;\nexport function setTraceLogger(logger: ILogService): void {\n  traceLogger = logger;\n}\n\n/**\n * A decorator that can be used to automatically log trace calls to the decorated function.\n */\nexport function traceCall(_target: any, key: string, descriptor: any): any {\n  if (typeof descriptor.value !== 'function') {\n    throw new Error('not supported');\n  }\n  const fnKey = 'value';\n  const fn = descriptor.value;\n  descriptor[fnKey] = function (...args: any[]) {\n    // Early exit\n    if (traceLogger.logLevel !== LogLevelEnum.TRACE) {\n      return fn.apply(this, args);\n    }\n\n    traceLogger.trace(`GlyphRenderer#${fn.name}(${args.map(e => JSON.stringify(e)).join(', ')})`);\n    const result = fn.apply(this, args);\n    traceLogger.trace(`GlyphRenderer#${fn.name} return`, result);\n    return result;\n  };\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n *\n * This was heavily inspired from microsoft/vscode's dependency injection system (MIT).\n */\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IServiceIdentifier } from 'common/services/Services';\n\nconst DI_TARGET = 'di$target';\nconst DI_DEPENDENCIES = 'di$dependencies';\n\nexport const serviceRegistry: Map<string, IServiceIdentifier<any>> = new Map();\n\nexport function getServiceDependencies(ctor: any): { id: IServiceIdentifier<any>, index: number, optional: boolean }[] {\n  return ctor[DI_DEPENDENCIES] || [];\n}\n\nexport function createDecorator<T>(id: string): IServiceIdentifier<T> {\n  if (serviceRegistry.has(id)) {\n    return serviceRegistry.get(id)!;\n  }\n\n  const decorator: any = function (target: Function, key: string, index: number): any {\n    if (arguments.length !== 3) {\n      throw new Error('@IServiceName-decorator can only be used to decorate a parameter');\n    }\n\n    storeServiceDependency(decorator, target, index);\n  };\n\n  decorator._id = id;\n\n  serviceRegistry.set(id, decorator);\n  return decorator;\n}\n\nfunction storeServiceDependency(id: Function, target: Function, index: number): void {\n  if ((target as any)[DI_TARGET] === target) {\n    (target as any)[DI_DEPENDENCIES].push({ id, index });\n  } else {\n    (target as any)[DI_DEPENDENCIES] = [{ id, index }];\n    (target as any)[DI_TARGET] = target;\n  }\n}\n","/**\n * Copyright (c) 2019 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport { IDecoration, IDecorationOptions, ILinkHandler, ILogger, IWindowsPty, type IOverviewRulerOptions } from '@xterm/xterm';\nimport { CoreMouseEncoding, CoreMouseEventType, CursorInactiveStyle, CursorStyle, IAttributeData, ICharset, IColor, ICoreMouseEvent, ICoreMouseProtocol, IDecPrivateModes, IDisposable, IModes, IOscLinkData, IWindowOptions } from 'common/Types';\nimport { IBuffer, IBufferSet } from 'common/buffer/Types';\nimport { createDecorator } from 'common/services/ServiceRegistry';\nimport type { Emitter, Event } from 'vs/base/common/event';\n\nexport const IBufferService = createDecorator<IBufferService>('BufferService');\nexport interface IBufferService {\n  serviceBrand: undefined;\n\n  readonly cols: number;\n  readonly rows: number;\n  readonly buffer: IBuffer;\n  readonly buffers: IBufferSet;\n  isUserScrolling: boolean;\n  onResize: Event<IBufferResizeEvent>;\n  onScroll: Event<number>;\n  scroll(eraseAttr: IAttributeData, isWrapped?: boolean): void;\n  scrollLines(disp: number, suppressScrollEvent?: boolean): void;\n  resize(cols: number, rows: number): void;\n  reset(): void;\n}\n\nexport interface IBufferResizeEvent {\n  cols: number;\n  rows: number;\n  colsChanged: boolean;\n  rowsChanged: boolean;\n}\n\nexport const ICoreMouseService = createDecorator<ICoreMouseService>('CoreMouseService');\nexport interface ICoreMouseService {\n  serviceBrand: undefined;\n\n  activeProtocol: string;\n  activeEncoding: string;\n  areMouseEventsActive: boolean;\n  addProtocol(name: string, protocol: ICoreMouseProtocol): void;\n  addEncoding(name: string, encoding: CoreMouseEncoding): void;\n  reset(): void;\n\n  /**\n   * Triggers a mouse event to be sent.\n   *\n   * Returns true if the event passed all protocol restrictions and a report\n   * was sent, otherwise false. The return value may be used to decide whether\n   * the default event action in the bowser component should be omitted.\n   *\n   * Note: The method will change values of the given event object\n   * to fullfill protocol and encoding restrictions.\n   */\n  triggerMouseEvent(event: ICoreMouseEvent): boolean;\n\n  /**\n   * Event to announce changes in mouse tracking.\n   */\n  onProtocolChange: Event<CoreMouseEventType>;\n\n  /**\n   * Human readable version of mouse events.\n   */\n  explainEvents(events: CoreMouseEventType): { [event: string]: boolean };\n\n  /**\n   * Process wheel event taking partial scroll into account.\n   */\n  consumeWheelEvent(ev: WheelEvent, cellHeight?: number, dpr?: number): number;\n}\n\nexport const ICoreService = createDecorator<ICoreService>('CoreService');\nexport interface ICoreService {\n  serviceBrand: undefined;\n\n  /**\n   * Initially the cursor will not be visible until the first time the terminal\n   * is focused.\n   */\n  isCursorInitialized: boolean;\n  isCursorHidden: boolean;\n\n  readonly modes: IModes;\n  readonly decPrivateModes: IDecPrivateModes;\n\n  readonly onData: Event<string>;\n  readonly onUserInput: Event<void>;\n  readonly onBinary: Event<string>;\n  readonly onRequestScrollToBottom: Event<void>;\n\n  reset(): void;\n\n  /**\n   * Triggers the onData event in the public API.\n   * @param data The data that is being emitted.\n   * @param wasUserInput Whether the data originated from the user (as opposed to\n   * resulting from parsing incoming data). When true this will also:\n   * - Scroll to the bottom of the buffer if option scrollOnUserInput is true.\n   * - Fire the `onUserInput` event (so selection can be cleared).\n   */\n  triggerDataEvent(data: string, wasUserInput?: boolean): void;\n\n  /**\n   * Triggers the onBinary event in the public API.\n   * @param data The data that is being emitted.\n   */\n  triggerBinaryEvent(data: string): void;\n}\n\nexport const ICharsetService = createDecorator<ICharsetService>('CharsetService');\nexport interface ICharsetService {\n  serviceBrand: undefined;\n\n  charset: ICharset | undefined;\n  readonly glevel: number;\n\n  reset(): void;\n\n  /**\n   * Set the G level of the terminal.\n   * @param g\n   */\n  setgLevel(g: number): void;\n\n  /**\n   * Set the charset for the given G level of the terminal.\n   * @param g\n   * @param charset\n   */\n  setgCharset(g: number, charset: ICharset | undefined): void;\n}\n\nexport interface IServiceIdentifier<T> {\n  (...args: any[]): void;\n  type: T;\n  _id: string;\n}\n\nexport interface IBrandedService {\n  serviceBrand: undefined;\n}\n\ntype GetLeadingNonServiceArgs<TArgs extends any[]> = TArgs extends [] ? []\n  : TArgs extends [...infer TFirst, infer TLast] ? TLast extends IBrandedService ? GetLeadingNonServiceArgs<TFirst> : TArgs\n    : never;\n\nexport const IInstantiationService = createDecorator<IInstantiationService>('InstantiationService');\nexport interface IInstantiationService {\n  serviceBrand: undefined;\n\n  setService<T>(id: IServiceIdentifier<T>, instance: T): void;\n  getService<T>(id: IServiceIdentifier<T>): T | undefined;\n  createInstance<Ctor extends new (...args: any[]) => any, R extends InstanceType<Ctor>>(t: Ctor, ...args: GetLeadingNonServiceArgs<ConstructorParameters<Ctor>>): R;\n}\n\nexport enum LogLevelEnum {\n  TRACE = 0,\n  DEBUG = 1,\n  INFO = 2,\n  WARN = 3,\n  ERROR = 4,\n  OFF = 5\n}\n\nexport const ILogService = createDecorator<ILogService>('LogService');\nexport interface ILogService {\n  serviceBrand: undefined;\n\n  readonly logLevel: LogLevelEnum;\n\n  trace(message: any, ...optionalParams: any[]): void;\n  debug(message: any, ...optionalParams: any[]): void;\n  info(message: any, ...optionalParams: any[]): void;\n  warn(message: any, ...optionalParams: any[]): void;\n  error(message: any, ...optionalParams: any[]): void;\n}\n\nexport const IOptionsService = createDecorator<IOptionsService>('OptionsService');\nexport interface IOptionsService {\n  serviceBrand: undefined;\n\n  /**\n   * Read only access to the raw options object, this is an internal-only fast path for accessing\n   * single options without any validation as we trust TypeScript to enforce correct usage\n   * internally.\n   */\n  readonly rawOptions: Required<ITerminalOptions>;\n\n  /**\n   * Options as exposed through the public API, this property uses getters and setters with\n   * validation which makes it safer but slower. {@link rawOptions} should be used for pretty much\n   * all internal usage for performance reasons.\n   */\n  readonly options: Required<ITerminalOptions>;\n\n  /**\n   * Adds an event listener for when any option changes.\n   */\n  readonly onOptionChange: Event<keyof ITerminalOptions>;\n\n  /**\n   * Adds an event listener for when a specific option changes, this is a convenience method that is\n   * preferred over {@link onOptionChange} when only a single option is being listened to.\n   */\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  onSpecificOptionChange<T extends keyof ITerminalOptions>(key: T, listener: (arg1: Required<ITerminalOptions>[T]) => any): IDisposable;\n\n  /**\n   * Adds an event listener for when a set of specific options change, this is a convenience method\n   * that is preferred over {@link onOptionChange} when multiple options are being listened to and\n   * handled the same way.\n   */\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  onMultipleOptionChange(keys: (keyof ITerminalOptions)[], listener: () => any): IDisposable;\n}\n\nexport type FontWeight = 'normal' | 'bold' | '100' | '200' | '300' | '400' | '500' | '600' | '700' | '800' | '900' | number;\nexport type LogLevel = 'trace' | 'debug' | 'info' | 'warn' | 'error' | 'off';\n\nexport interface ITerminalOptions {\n  allowProposedApi?: boolean;\n  allowTransparency?: boolean;\n  altClickMovesCursor?: boolean;\n  cols?: number;\n  convertEol?: boolean;\n  cursorBlink?: boolean;\n  cursorStyle?: CursorStyle;\n  cursorWidth?: number;\n  cursorInactiveStyle?: CursorInactiveStyle;\n  customGlyphs?: boolean;\n  disableStdin?: boolean;\n  documentOverride?: any | null;\n  drawBoldTextInBrightColors?: boolean;\n  /** @deprecated No longer supported */\n  fastScrollModifier?: 'none' | 'alt' | 'ctrl' | 'shift';\n  fastScrollSensitivity?: number;\n  fontSize?: number;\n  fontFamily?: string;\n  fontWeight?: FontWeight;\n  fontWeightBold?: FontWeight;\n  ignoreBracketedPasteMode?: boolean;\n  letterSpacing?: number;\n  lineHeight?: number;\n  linkHandler?: ILinkHandler | null;\n  logLevel?: LogLevel;\n  logger?: ILogger | null;\n  macOptionIsMeta?: boolean;\n  macOptionClickForcesSelection?: boolean;\n  minimumContrastRatio?: number;\n  reflowCursorLine?: boolean;\n  rescaleOverlappingGlyphs?: boolean;\n  rightClickSelectsWord?: boolean;\n  rows?: number;\n  screenReaderMode?: boolean;\n  scrollback?: number;\n  scrollOnUserInput?: boolean;\n  scrollSensitivity?: number;\n  smoothScrollDuration?: number;\n  tabStopWidth?: number;\n  theme?: ITheme;\n  windowsMode?: boolean;\n  windowsPty?: IWindowsPty;\n  windowOptions?: IWindowOptions;\n  wordSeparator?: string;\n  overviewRuler?: IOverviewRulerOptions;\n  scrollOnEraseInDisplay?: boolean;\n\n  [key: string]: any;\n  cancelEvents: boolean;\n  termName: string;\n}\n\nexport interface ITheme {\n  foreground?: string;\n  background?: string;\n  cursor?: string;\n  cursorAccent?: string;\n  selectionForeground?: string;\n  selectionBackground?: string;\n  selectionInactiveBackground?: string;\n  scrollbarSliderBackground?: string;\n  scrollbarSliderHoverBackground?: string;\n  scrollbarSliderActiveBackground?: string;\n  overviewRulerBorder?: string;\n  black?: string;\n  red?: string;\n  green?: string;\n  yellow?: string;\n  blue?: string;\n  magenta?: string;\n  cyan?: string;\n  white?: string;\n  brightBlack?: string;\n  brightRed?: string;\n  brightGreen?: string;\n  brightYellow?: string;\n  brightBlue?: string;\n  brightMagenta?: string;\n  brightCyan?: string;\n  brightWhite?: string;\n  extendedAnsi?: string[];\n}\n\nexport const IOscLinkService = createDecorator<IOscLinkService>('OscLinkService');\nexport interface IOscLinkService {\n  serviceBrand: undefined;\n  /**\n   * Registers a link to the service, returning the link ID. The link data is managed by this\n   * service and will be freed when this current cursor position is trimmed off the buffer.\n   */\n  registerLink(linkData: IOscLinkData): number;\n  /**\n   * Adds a line to a link if needed.\n   */\n  addLineToLink(linkId: number, y: number): void;\n  /** Get the link data associated with a link ID. */\n  getLinkData(linkId: number): IOscLinkData | undefined;\n}\n\n/*\n * Width and Grapheme_Cluster_Break properties of a character as a bit mask.\n *\n * bit 0: shouldJoin - should combine with preceding character.\n * bit 1..2: wcwidth - see UnicodeCharWidth.\n * bit 3..31: class of character (currently only 4 bits are used).\n *   This is used to determined grapheme clustering - i.e. which codepoints\n *   are to be combined into a single compound character.\n *\n * Use the UnicodeService static function createPropertyValue to create a\n * UnicodeCharProperties; use extractShouldJoin, extractWidth, and\n * extractCharKind to extract the components.\n */\nexport type UnicodeCharProperties = number;\n\n/**\n * Width in columns of a character.\n * In a CJK context, \"half-width\" characters (such as Latin) are width 1,\n * while \"full-width\" characters (such as Kanji) are 2 columns wide.\n * Combining characters (such as accents) are width 0.\n */\nexport type UnicodeCharWidth = 0 | 1 | 2;\n\nexport const IUnicodeService = createDecorator<IUnicodeService>('UnicodeService');\nexport interface IUnicodeService {\n  serviceBrand: undefined;\n  /** Register an Unicode version provider. */\n  register(provider: IUnicodeVersionProvider): void;\n  /** Registered Unicode versions. */\n  readonly versions: string[];\n  /** Currently active version. */\n  activeVersion: string;\n  /** Event triggered, when activate version changed. */\n  readonly onChange: Event<string>;\n\n  /**\n   * Unicode version dependent\n   */\n  wcwidth(codepoint: number): UnicodeCharWidth;\n  getStringCellWidth(s: string): number;\n  /**\n   * Return character width and type for grapheme clustering.\n   * If preceding != 0, it is the return code from the previous character;\n   * in that case the result specifies if the characters should be joined.\n   */\n  charProperties(codepoint: number, preceding: UnicodeCharProperties): UnicodeCharProperties;\n}\n\nexport interface IUnicodeVersionProvider {\n  readonly version: string;\n  wcwidth(ucs: number): UnicodeCharWidth;\n  charProperties(codepoint: number, preceding: UnicodeCharProperties): UnicodeCharProperties;\n}\n\nexport const IDecorationService = createDecorator<IDecorationService>('DecorationService');\nexport interface IDecorationService extends IDisposable {\n  serviceBrand: undefined;\n  readonly decorations: IterableIterator<IInternalDecoration>;\n  readonly onDecorationRegistered: Event<IInternalDecoration>;\n  readonly onDecorationRemoved: Event<IInternalDecoration>;\n  registerDecoration(decorationOptions: IDecorationOptions): IDecoration | undefined;\n  reset(): void;\n  /**\n   * Trigger a callback over the decoration at a cell (in no particular order). This uses a callback\n   * instead of an iterator as it's typically used in hot code paths.\n   */\n  forEachDecorationAtCell(x: number, line: number, layer: 'bottom' | 'top' | undefined, callback: (decoration: IInternalDecoration) => void): void;\n}\nexport interface IInternalDecoration extends IDecoration {\n  readonly options: IDecorationOptions;\n  readonly backgroundColorRGB: IColor | undefined;\n  readonly foregroundColorRGB: IColor | undefined;\n  readonly onRenderEmitter: Emitter<HTMLElement>;\n}\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isAndroid = exports.isElectron = exports.isWebkitWebView = exports.isSafari = exports.isChrome = exports.isWebKit = exports.isFirefox = exports.onDidChangeFullscreen = exports.onDidChangeZoomLevel = void 0;\nexports.addMatchMediaChangeListener = addMatchMediaChangeListener;\nexports.setZoomLevel = setZoomLevel;\nexports.getZoomLevel = getZoomLevel;\nexports.getZoomFactor = getZoomFactor;\nexports.setZoomFactor = setZoomFactor;\nexports.setFullscreen = setFullscreen;\nexports.isFullscreen = isFullscreen;\nexports.isStandalone = isStandalone;\nexports.isWCOEnabled = isWCOEnabled;\nexports.getWCOBoundingRect = getWCOBoundingRect;\nconst window_1 = require(\"vs/base/browser/window\");\nconst event_1 = require(\"vs/base/common/event\");\nclass WindowManager {\n    constructor() {\n        // --- Zoom Level\n        this.mapWindowIdToZoomLevel = new Map();\n        this._onDidChangeZoomLevel = new event_1.Emitter();\n        this.onDidChangeZoomLevel = this._onDidChangeZoomLevel.event;\n        // --- Zoom Factor\n        this.mapWindowIdToZoomFactor = new Map();\n        // --- Fullscreen\n        this._onDidChangeFullscreen = new event_1.Emitter();\n        this.onDidChangeFullscreen = this._onDidChangeFullscreen.event;\n        this.mapWindowIdToFullScreen = new Map();\n    }\n    static { this.INSTANCE = new WindowManager(); }\n    getZoomLevel(targetWindow) {\n        return this.mapWindowIdToZoomLevel.get(this.getWindowId(targetWindow)) ?? 0;\n    }\n    setZoomLevel(zoomLevel, targetWindow) {\n        if (this.getZoomLevel(targetWindow) === zoomLevel) {\n            return;\n        }\n        const targetWindowId = this.getWindowId(targetWindow);\n        this.mapWindowIdToZoomLevel.set(targetWindowId, zoomLevel);\n        this._onDidChangeZoomLevel.fire(targetWindowId);\n    }\n    getZoomFactor(targetWindow) {\n        return this.mapWindowIdToZoomFactor.get(this.getWindowId(targetWindow)) ?? 1;\n    }\n    setZoomFactor(zoomFactor, targetWindow) {\n        this.mapWindowIdToZoomFactor.set(this.getWindowId(targetWindow), zoomFactor);\n    }\n    setFullscreen(fullscreen, targetWindow) {\n        if (this.isFullscreen(targetWindow) === fullscreen) {\n            return;\n        }\n        const windowId = this.getWindowId(targetWindow);\n        this.mapWindowIdToFullScreen.set(windowId, fullscreen);\n        this._onDidChangeFullscreen.fire(windowId);\n    }\n    isFullscreen(targetWindow) {\n        return !!this.mapWindowIdToFullScreen.get(this.getWindowId(targetWindow));\n    }\n    getWindowId(targetWindow) {\n        return targetWindow.vscodeWindowId;\n    }\n}\nfunction addMatchMediaChangeListener(targetWindow, query, callback) {\n    if (typeof query === 'string') {\n        query = targetWindow.matchMedia(query);\n    }\n    query.addEventListener('change', callback);\n}\n/** A zoom index, e.g. 1, 2, 3 */\nfunction setZoomLevel(zoomLevel, targetWindow) {\n    WindowManager.INSTANCE.setZoomLevel(zoomLevel, targetWindow);\n}\nfunction getZoomLevel(targetWindow) {\n    return WindowManager.INSTANCE.getZoomLevel(targetWindow);\n}\nexports.onDidChangeZoomLevel = WindowManager.INSTANCE.onDidChangeZoomLevel;\n/** The zoom scale for an index, e.g. 1, 1.2, 1.4 */\nfunction getZoomFactor(targetWindow) {\n    return WindowManager.INSTANCE.getZoomFactor(targetWindow);\n}\nfunction setZoomFactor(zoomFactor, targetWindow) {\n    WindowManager.INSTANCE.setZoomFactor(zoomFactor, targetWindow);\n}\nfunction setFullscreen(fullscreen, targetWindow) {\n    WindowManager.INSTANCE.setFullscreen(fullscreen, targetWindow);\n}\nfunction isFullscreen(targetWindow) {\n    return WindowManager.INSTANCE.isFullscreen(targetWindow);\n}\nexports.onDidChangeFullscreen = WindowManager.INSTANCE.onDidChangeFullscreen;\nconst userAgent = typeof navigator === 'object' ? navigator.userAgent : '';\nexports.isFirefox = (userAgent.indexOf('Firefox') >= 0);\nexports.isWebKit = (userAgent.indexOf('AppleWebKit') >= 0);\nexports.isChrome = (userAgent.indexOf('Chrome') >= 0);\nexports.isSafari = (!exports.isChrome && (userAgent.indexOf('Safari') >= 0));\nexports.isWebkitWebView = (!exports.isChrome && !exports.isSafari && exports.isWebKit);\nexports.isElectron = (userAgent.indexOf('Electron/') >= 0);\nexports.isAndroid = (userAgent.indexOf('Android') >= 0);\nlet standalone = false;\nif (typeof window_1.mainWindow.matchMedia === 'function') {\n    const standaloneMatchMedia = window_1.mainWindow.matchMedia('(display-mode: standalone) or (display-mode: window-controls-overlay)');\n    const fullScreenMatchMedia = window_1.mainWindow.matchMedia('(display-mode: fullscreen)');\n    standalone = standaloneMatchMedia.matches;\n    addMatchMediaChangeListener(window_1.mainWindow, standaloneMatchMedia, ({ matches }) => {\n        // entering fullscreen would change standaloneMatchMedia.matches to false\n        // if standalone is true (running as PWA) and entering fullscreen, skip this change\n        if (standalone && fullScreenMatchMedia.matches) {\n            return;\n        }\n        // otherwise update standalone (browser to PWA or PWA to browser)\n        standalone = matches;\n    });\n}\nfunction isStandalone() {\n    return standalone;\n}\n// Visible means that the feature is enabled, not necessarily being rendered\n// e.g. visible is true even in fullscreen mode where the controls are hidden\n// See docs at https://developer.mozilla.org/en-US/docs/Web/API/WindowControlsOverlay/visible\nfunction isWCOEnabled() {\n    return navigator?.windowControlsOverlay?.visible;\n}\n// Returns the bounding rect of the titlebar area if it is supported and defined\n// See docs at https://developer.mozilla.org/en-US/docs/Web/API/WindowControlsOverlay/getTitlebarAreaRect\nfunction getWCOBoundingRect() {\n    return navigator?.windowControlsOverlay?.getTitlebarAreaRect();\n}\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowserFeatures = exports.KeyboardSupport = void 0;\nconst browser = __importStar(require(\"vs/base/browser/browser\"));\nconst window_1 = require(\"vs/base/browser/window\");\nconst platform = __importStar(require(\"vs/base/common/platform\"));\nvar KeyboardSupport;\n(function (KeyboardSupport) {\n    KeyboardSupport[KeyboardSupport[\"Always\"] = 0] = \"Always\";\n    KeyboardSupport[KeyboardSupport[\"FullScreen\"] = 1] = \"FullScreen\";\n    KeyboardSupport[KeyboardSupport[\"None\"] = 2] = \"None\";\n})(KeyboardSupport || (exports.KeyboardSupport = KeyboardSupport = {}));\nconst safeNavigator = typeof navigator === 'object' ? navigator : {};\n/**\n * Browser feature we can support in current platform, browser and environment.\n */\nexports.BrowserFeatures = {\n    clipboard: {\n        writeText: (platform.isNative\n            || (document.queryCommandSupported && document.queryCommandSupported('copy'))\n            || !!(safeNavigator && safeNavigator.clipboard && safeNavigator.clipboard.writeText)),\n        readText: (platform.isNative\n            || !!(safeNavigator && safeNavigator.clipboard && safeNavigator.clipboard.readText))\n    },\n    keyboard: (() => {\n        if (platform.isNative || browser.isStandalone()) {\n            return KeyboardSupport.Always;\n        }\n        if (safeNavigator.keyboard || browser.isSafari) {\n            return KeyboardSupport.FullScreen;\n        }\n        return KeyboardSupport.None;\n    })(),\n    // 'ontouchstart' in window always evaluates to true with typescript's modern typings. This causes `window` to be\n    // `never` later in `window.navigator`. That's why we need the explicit `window as Window` cast\n    touch: 'ontouchstart' in window_1.mainWindow || safeNavigator.maxTouchPoints > 0,\n    pointerEvents: window_1.mainWindow.PointerEvent && ('ontouchstart' in window_1.mainWindow || navigator.maxTouchPoints > 0)\n};\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SafeTriangle = exports.DragAndDropObserver = exports.ModifierKeyEmitter = exports.DetectedFullscreenMode = exports.Namespace = exports.EventHelper = exports.EventType = exports.sharedMutationObserver = exports.Dimension = exports.WindowIntervalTimer = exports.scheduleAtNextAnimationFrame = exports.runAtThisOrScheduleAtNextAnimationFrame = exports.WindowIdleValue = exports.addStandardDisposableGenericMouseUpListener = exports.addStandardDisposableGenericMouseDownListener = exports.addStandardDisposableListener = exports.onDidUnregisterWindow = exports.onWillUnregisterWindow = exports.onDidRegisterWindow = exports.hasWindow = exports.getWindowById = exports.getWindowId = exports.getWindowsCount = exports.getWindows = exports.getDocument = exports.getWindow = exports.registerWindow = void 0;\nexports.clearNode = clearNode;\nexports.clearNodeRecursively = clearNodeRecursively;\nexports.addDisposableListener = addDisposableListener;\nexports.addDisposableGenericMouseDownListener = addDisposableGenericMouseDownListener;\nexports.addDisposableGenericMouseMoveListener = addDisposableGenericMouseMoveListener;\nexports.addDisposableGenericMouseUpListener = addDisposableGenericMouseUpListener;\nexports.runWhenWindowIdle = runWhenWindowIdle;\nexports.disposableWindowInterval = disposableWindowInterval;\nexports.measure = measure;\nexports.modify = modify;\nexports.addDisposableThrottledListener = addDisposableThrottledListener;\nexports.getComputedStyle = getComputedStyle;\nexports.getClientArea = getClientArea;\nexports.getTopLeftOffset = getTopLeftOffset;\nexports.size = size;\nexports.position = position;\nexports.getDomNodePagePosition = getDomNodePagePosition;\nexports.getDomNodeZoomLevel = getDomNodeZoomLevel;\nexports.getTotalWidth = getTotalWidth;\nexports.getContentWidth = getContentWidth;\nexports.getTotalScrollWidth = getTotalScrollWidth;\nexports.getContentHeight = getContentHeight;\nexports.getTotalHeight = getTotalHeight;\nexports.getLargestChildWidth = getLargestChildWidth;\nexports.isAncestor = isAncestor;\nexports.setParentFlowTo = setParentFlowTo;\nexports.isAncestorUsingFlowTo = isAncestorUsingFlowTo;\nexports.findParentWithClass = findParentWithClass;\nexports.hasParentWithClass = hasParentWithClass;\nexports.isShadowRoot = isShadowRoot;\nexports.isInShadowDOM = isInShadowDOM;\nexports.getShadowRoot = getShadowRoot;\nexports.getActiveElement = getActiveElement;\nexports.isActiveElement = isActiveElement;\nexports.isAncestorOfActiveElement = isAncestorOfActiveElement;\nexports.isActiveDocument = isActiveDocument;\nexports.getActiveDocument = getActiveDocument;\nexports.getActiveWindow = getActiveWindow;\nexports.isGlobalStylesheet = isGlobalStylesheet;\nexports.createStyleSheet2 = createStyleSheet2;\nexports.createStyleSheet = createStyleSheet;\nexports.cloneGlobalStylesheets = cloneGlobalStylesheets;\nexports.createMetaElement = createMetaElement;\nexports.createLinkElement = createLinkElement;\nexports.createCSSRule = createCSSRule;\nexports.removeCSSRulesContainingSelector = removeCSSRulesContainingSelector;\nexports.isHTMLElement = isHTMLElement;\nexports.isHTMLAnchorElement = isHTMLAnchorElement;\nexports.isHTMLSpanElement = isHTMLSpanElement;\nexports.isHTMLTextAreaElement = isHTMLTextAreaElement;\nexports.isHTMLInputElement = isHTMLInputElement;\nexports.isHTMLButtonElement = isHTMLButtonElement;\nexports.isHTMLDivElement = isHTMLDivElement;\nexports.isSVGElement = isSVGElement;\nexports.isMouseEvent = isMouseEvent;\nexports.isKeyboardEvent = isKeyboardEvent;\nexports.isPointerEvent = isPointerEvent;\nexports.isDragEvent = isDragEvent;\nexports.isEventLike = isEventLike;\nexports.saveParentsScrollTop = saveParentsScrollTop;\nexports.restoreParentsScrollTop = restoreParentsScrollTop;\nexports.trackFocus = trackFocus;\nexports.after = after;\nexports.append = append;\nexports.prepend = prepend;\nexports.reset = reset;\nexports.$ = $;\nexports.join = join;\nexports.setVisibility = setVisibility;\nexports.show = show;\nexports.hide = hide;\nexports.removeTabIndexAndUpdateFocus = removeTabIndexAndUpdateFocus;\nexports.finalHandler = finalHandler;\nexports.domContentLoaded = domContentLoaded;\nexports.computeScreenAwareSize = computeScreenAwareSize;\nexports.windowOpenNoOpener = windowOpenNoOpener;\nexports.windowOpenPopup = windowOpenPopup;\nexports.windowOpenWithSuccess = windowOpenWithSuccess;\nexports.animate = animate;\nexports.asCSSPropertyValue = asCSSPropertyValue;\nexports.asCssValueWithDefault = asCssValueWithDefault;\nexports.detectFullscreen = detectFullscreen;\nexports.multibyteAwareBtoa = multibyteAwareBtoa;\nexports.getCookieValue = getCookieValue;\nexports.h = h;\nexports.svgElem = svgElem;\nexports.copyAttributes = copyAttributes;\nexports.trackAttributes = trackAttributes;\nconst browser = __importStar(require(\"vs/base/browser/browser\"));\nconst canIUse_1 = require(\"vs/base/browser/canIUse\");\nconst keyboardEvent_1 = require(\"vs/base/browser/keyboardEvent\");\nconst mouseEvent_1 = require(\"vs/base/browser/mouseEvent\");\nconst async_1 = require(\"vs/base/common/async\");\nconst errors_1 = require(\"vs/base/common/errors\");\nconst event = __importStar(require(\"vs/base/common/event\"));\nconst keyCodes_1 = require(\"vs/base/common/keyCodes\");\nconst lifecycle_1 = require(\"vs/base/common/lifecycle\");\nconst platform = __importStar(require(\"vs/base/common/platform\"));\nconst hash_1 = require(\"vs/base/common/hash\");\nconst window_1 = require(\"vs/base/browser/window\");\nconst numbers_1 = require(\"vs/base/common/numbers\");\n//# region Multi-Window Support Utilities\n_a = (function () {\n    const windows = new Map();\n    (0, window_1.ensureCodeWindow)(window_1.mainWindow, 1);\n    const mainWindowRegistration = { window: window_1.mainWindow, disposables: new lifecycle_1.DisposableStore() };\n    windows.set(window_1.mainWindow.vscodeWindowId, mainWindowRegistration);\n    const onDidRegisterWindow = new event.Emitter();\n    const onDidUnregisterWindow = new event.Emitter();\n    const onWillUnregisterWindow = new event.Emitter();\n    function getWindowById(windowId, fallbackToMain) {\n        const window = typeof windowId === 'number' ? windows.get(windowId) : undefined;\n        return window ?? (fallbackToMain ? mainWindowRegistration : undefined);\n    }\n    return {\n        onDidRegisterWindow: onDidRegisterWindow.event,\n        onWillUnregisterWindow: onWillUnregisterWindow.event,\n        onDidUnregisterWindow: onDidUnregisterWindow.event,\n        registerWindow(window) {\n            if (windows.has(window.vscodeWindowId)) {\n                return lifecycle_1.Disposable.None;\n            }\n            const disposables = new lifecycle_1.DisposableStore();\n            const registeredWindow = {\n                window,\n                disposables: disposables.add(new lifecycle_1.DisposableStore())\n            };\n            windows.set(window.vscodeWindowId, registeredWindow);\n            disposables.add((0, lifecycle_1.toDisposable)(() => {\n                windows.delete(window.vscodeWindowId);\n                onDidUnregisterWindow.fire(window);\n            }));\n            disposables.add(addDisposableListener(window, exports.EventType.BEFORE_UNLOAD, () => {\n                onWillUnregisterWindow.fire(window);\n            }));\n            onDidRegisterWindow.fire(registeredWindow);\n            return disposables;\n        },\n        getWindows() {\n            return windows.values();\n        },\n        getWindowsCount() {\n            return windows.size;\n        },\n        getWindowId(targetWindow) {\n            return targetWindow.vscodeWindowId;\n        },\n        hasWindow(windowId) {\n            return windows.has(windowId);\n        },\n        getWindowById,\n        getWindow(e) {\n            const candidateNode = e;\n            if (candidateNode?.ownerDocument?.defaultView) {\n                return candidateNode.ownerDocument.defaultView.window;\n            }\n            const candidateEvent = e;\n            if (candidateEvent?.view) {\n                return candidateEvent.view.window;\n            }\n            return window_1.mainWindow;\n        },\n        getDocument(e) {\n            const candidateNode = e;\n            return (0, exports.getWindow)(candidateNode).document;\n        }\n    };\n})(), exports.registerWindow = _a.registerWindow, exports.getWindow = _a.getWindow, exports.getDocument = _a.getDocument, exports.getWindows = _a.getWindows, exports.getWindowsCount = _a.getWindowsCount, exports.getWindowId = _a.getWindowId, exports.getWindowById = _a.getWindowById, exports.hasWindow = _a.hasWindow, exports.onDidRegisterWindow = _a.onDidRegisterWindow, exports.onWillUnregisterWindow = _a.onWillUnregisterWindow, exports.onDidUnregisterWindow = _a.onDidUnregisterWindow;\n//#endregion\nfunction clearNode(node) {\n    while (node.firstChild) {\n        node.firstChild.remove();\n    }\n}\nfunction clearNodeRecursively(domNode) {\n    while (domNode.firstChild) {\n        const element = domNode.firstChild;\n        element.remove();\n        clearNodeRecursively(element);\n    }\n}\nclass DomListener {\n    constructor(node, type, handler, options) {\n        this._node = node;\n        this._type = type;\n        this._handler = handler;\n        this._options = (options || false);\n        this._node.addEventListener(this._type, this._handler, this._options);\n    }\n    dispose() {\n        if (!this._handler) {\n            // Already disposed\n            return;\n        }\n        this._node.removeEventListener(this._type, this._handler, this._options);\n        // Prevent leakers from holding on to the dom or handler func\n        this._node = null;\n        this._handler = null;\n    }\n}\nfunction addDisposableListener(node, type, handler, useCaptureOrOptions) {\n    return new DomListener(node, type, handler, useCaptureOrOptions);\n}\nfunction _wrapAsStandardMouseEvent(targetWindow, handler) {\n    return function (e) {\n        return handler(new mouseEvent_1.StandardMouseEvent(targetWindow, e));\n    };\n}\nfunction _wrapAsStandardKeyboardEvent(handler) {\n    return function (e) {\n        return handler(new keyboardEvent_1.StandardKeyboardEvent(e));\n    };\n}\nconst addStandardDisposableListener = function addStandardDisposableListener(node, type, handler, useCapture) {\n    let wrapHandler = handler;\n    if (type === 'click' || type === 'mousedown' || type === 'contextmenu') {\n        wrapHandler = _wrapAsStandardMouseEvent((0, exports.getWindow)(node), handler);\n    }\n    else if (type === 'keydown' || type === 'keypress' || type === 'keyup') {\n        wrapHandler = _wrapAsStandardKeyboardEvent(handler);\n    }\n    return addDisposableListener(node, type, wrapHandler, useCapture);\n};\nexports.addStandardDisposableListener = addStandardDisposableListener;\nconst addStandardDisposableGenericMouseDownListener = function addStandardDisposableListener(node, handler, useCapture) {\n    const wrapHandler = _wrapAsStandardMouseEvent((0, exports.getWindow)(node), handler);\n    return addDisposableGenericMouseDownListener(node, wrapHandler, useCapture);\n};\nexports.addStandardDisposableGenericMouseDownListener = addStandardDisposableGenericMouseDownListener;\nconst addStandardDisposableGenericMouseUpListener = function addStandardDisposableListener(node, handler, useCapture) {\n    const wrapHandler = _wrapAsStandardMouseEvent((0, exports.getWindow)(node), handler);\n    return addDisposableGenericMouseUpListener(node, wrapHandler, useCapture);\n};\nexports.addStandardDisposableGenericMouseUpListener = addStandardDisposableGenericMouseUpListener;\nfunction addDisposableGenericMouseDownListener(node, handler, useCapture) {\n    return addDisposableListener(node, platform.isIOS && canIUse_1.BrowserFeatures.pointerEvents ? exports.EventType.POINTER_DOWN : exports.EventType.MOUSE_DOWN, handler, useCapture);\n}\nfunction addDisposableGenericMouseMoveListener(node, handler, useCapture) {\n    return addDisposableListener(node, platform.isIOS && canIUse_1.BrowserFeatures.pointerEvents ? exports.EventType.POINTER_MOVE : exports.EventType.MOUSE_MOVE, handler, useCapture);\n}\nfunction addDisposableGenericMouseUpListener(node, handler, useCapture) {\n    return addDisposableListener(node, platform.isIOS && canIUse_1.BrowserFeatures.pointerEvents ? exports.EventType.POINTER_UP : exports.EventType.MOUSE_UP, handler, useCapture);\n}\n/**\n * Execute the callback the next time the browser is idle, returning an\n * {@link IDisposable} that will cancel the callback when disposed. This wraps\n * [requestIdleCallback] so it will fallback to [setTimeout] if the environment\n * doesn't support it.\n *\n * @param targetWindow The window for which to run the idle callback\n * @param callback The callback to run when idle, this includes an\n * [IdleDeadline] that provides the time alloted for the idle callback by the\n * browser. Not respecting this deadline will result in a degraded user\n * experience.\n * @param timeout A timeout at which point to queue no longer wait for an idle\n * callback but queue it on the regular event loop (like setTimeout). Typically\n * this should not be used.\n *\n * [IdleDeadline]: https://developer.mozilla.org/en-US/docs/Web/API/IdleDeadline\n * [requestIdleCallback]: https://developer.mozilla.org/en-US/docs/Web/API/Window/requestIdleCallback\n * [setTimeout]: https://developer.mozilla.org/en-US/docs/Web/API/Window/setTimeout\n */\nfunction runWhenWindowIdle(targetWindow, callback, timeout) {\n    return (0, async_1._runWhenIdle)(targetWindow, callback, timeout);\n}\n/**\n * An implementation of the \"idle-until-urgent\"-strategy as introduced\n * here: https://philipwalton.com/articles/idle-until-urgent/\n */\nclass WindowIdleValue extends async_1.AbstractIdleValue {\n    constructor(targetWindow, executor) {\n        super(targetWindow, executor);\n    }\n}\nexports.WindowIdleValue = WindowIdleValue;\nfunction disposableWindowInterval(targetWindow, handler, interval, iterations) {\n    let iteration = 0;\n    const timer = targetWindow.setInterval(() => {\n        iteration++;\n        if ((typeof iterations === 'number' && iteration >= iterations) || handler() === true) {\n            disposable.dispose();\n        }\n    }, interval);\n    const disposable = (0, lifecycle_1.toDisposable)(() => {\n        targetWindow.clearInterval(timer);\n    });\n    return disposable;\n}\nclass WindowIntervalTimer extends async_1.IntervalTimer {\n    /**\n     *\n     * @param node The optional node from which the target window is determined\n     */\n    constructor(node) {\n        super();\n        this.defaultTarget = node && (0, exports.getWindow)(node);\n    }\n    cancelAndSet(runner, interval, targetWindow) {\n        return super.cancelAndSet(runner, interval, targetWindow ?? this.defaultTarget);\n    }\n}\nexports.WindowIntervalTimer = WindowIntervalTimer;\nclass AnimationFrameQueueItem {\n    constructor(runner, priority = 0) {\n        this._runner = runner;\n        this.priority = priority;\n        this._canceled = false;\n    }\n    dispose() {\n        this._canceled = true;\n    }\n    execute() {\n        if (this._canceled) {\n            return;\n        }\n        try {\n            this._runner();\n        }\n        catch (e) {\n            (0, errors_1.onUnexpectedError)(e);\n        }\n    }\n    // Sort by priority (largest to lowest)\n    static sort(a, b) {\n        return b.priority - a.priority;\n    }\n}\n(function () {\n    /**\n     * The runners scheduled at the next animation frame\n     */\n    const NEXT_QUEUE = new Map();\n    /**\n     * The runners scheduled at the current animation frame\n     */\n    const CURRENT_QUEUE = new Map();\n    /**\n     * A flag to keep track if the native requestAnimationFrame was already called\n     */\n    const animFrameRequested = new Map();\n    /**\n     * A flag to indicate if currently handling a native requestAnimationFrame callback\n     */\n    const inAnimationFrameRunner = new Map();\n    const animationFrameRunner = (targetWindowId) => {\n        animFrameRequested.set(targetWindowId, false);\n        const currentQueue = NEXT_QUEUE.get(targetWindowId) ?? [];\n        CURRENT_QUEUE.set(targetWindowId, currentQueue);\n        NEXT_QUEUE.set(targetWindowId, []);\n        inAnimationFrameRunner.set(targetWindowId, true);\n        while (currentQueue.length > 0) {\n            currentQueue.sort(AnimationFrameQueueItem.sort);\n            const top = currentQueue.shift();\n            top.execute();\n        }\n        inAnimationFrameRunner.set(targetWindowId, false);\n    };\n    exports.scheduleAtNextAnimationFrame = (targetWindow, runner, priority = 0) => {\n        const targetWindowId = (0, exports.getWindowId)(targetWindow);\n        const item = new AnimationFrameQueueItem(runner, priority);\n        let nextQueue = NEXT_QUEUE.get(targetWindowId);\n        if (!nextQueue) {\n            nextQueue = [];\n            NEXT_QUEUE.set(targetWindowId, nextQueue);\n        }\n        nextQueue.push(item);\n        if (!animFrameRequested.get(targetWindowId)) {\n            animFrameRequested.set(targetWindowId, true);\n            targetWindow.requestAnimationFrame(() => animationFrameRunner(targetWindowId));\n        }\n        return item;\n    };\n    exports.runAtThisOrScheduleAtNextAnimationFrame = (targetWindow, runner, priority) => {\n        const targetWindowId = (0, exports.getWindowId)(targetWindow);\n        if (inAnimationFrameRunner.get(targetWindowId)) {\n            const item = new AnimationFrameQueueItem(runner, priority);\n            let currentQueue = CURRENT_QUEUE.get(targetWindowId);\n            if (!currentQueue) {\n                currentQueue = [];\n                CURRENT_QUEUE.set(targetWindowId, currentQueue);\n            }\n            currentQueue.push(item);\n            return item;\n        }\n        else {\n            return (0, exports.scheduleAtNextAnimationFrame)(targetWindow, runner, priority);\n        }\n    };\n})();\nfunction measure(targetWindow, callback) {\n    return (0, exports.scheduleAtNextAnimationFrame)(targetWindow, callback, 10000 /* must be early */);\n}\nfunction modify(targetWindow, callback) {\n    return (0, exports.scheduleAtNextAnimationFrame)(targetWindow, callback, -10000 /* must be late */);\n}\nconst MINIMUM_TIME_MS = 8;\nconst DEFAULT_EVENT_MERGER = function (lastEvent, currentEvent) {\n    return currentEvent;\n};\nclass TimeoutThrottledDomListener extends lifecycle_1.Disposable {\n    constructor(node, type, handler, eventMerger = DEFAULT_EVENT_MERGER, minimumTimeMs = MINIMUM_TIME_MS) {\n        super();\n        let lastEvent = null;\n        let lastHandlerTime = 0;\n        const timeout = this._register(new async_1.TimeoutTimer());\n        const invokeHandler = () => {\n            lastHandlerTime = (new Date()).getTime();\n            handler(lastEvent);\n            lastEvent = null;\n        };\n        this._register(addDisposableListener(node, type, (e) => {\n            lastEvent = eventMerger(lastEvent, e);\n            const elapsedTime = (new Date()).getTime() - lastHandlerTime;\n            if (elapsedTime >= minimumTimeMs) {\n                timeout.cancel();\n                invokeHandler();\n            }\n            else {\n                timeout.setIfNotSet(invokeHandler, minimumTimeMs - elapsedTime);\n            }\n        }));\n    }\n}\nfunction addDisposableThrottledListener(node, type, handler, eventMerger, minimumTimeMs) {\n    return new TimeoutThrottledDomListener(node, type, handler, eventMerger, minimumTimeMs);\n}\nfunction getComputedStyle(el) {\n    return (0, exports.getWindow)(el).getComputedStyle(el, null);\n}\nfunction getClientArea(element, fallback) {\n    const elWindow = (0, exports.getWindow)(element);\n    const elDocument = elWindow.document;\n    // Try with DOM clientWidth / clientHeight\n    if (element !== elDocument.body) {\n        return new Dimension(element.clientWidth, element.clientHeight);\n    }\n    // If visual view port exits and it's on mobile, it should be used instead of window innerWidth / innerHeight, or document.body.clientWidth / document.body.clientHeight\n    if (platform.isIOS && elWindow?.visualViewport) {\n        return new Dimension(elWindow.visualViewport.width, elWindow.visualViewport.height);\n    }\n    // Try innerWidth / innerHeight\n    if (elWindow?.innerWidth && elWindow.innerHeight) {\n        return new Dimension(elWindow.innerWidth, elWindow.innerHeight);\n    }\n    // Try with document.body.clientWidth / document.body.clientHeight\n    if (elDocument.body && elDocument.body.clientWidth && elDocument.body.clientHeight) {\n        return new Dimension(elDocument.body.clientWidth, elDocument.body.clientHeight);\n    }\n    // Try with document.documentElement.clientWidth / document.documentElement.clientHeight\n    if (elDocument.documentElement && elDocument.documentElement.clientWidth && elDocument.documentElement.clientHeight) {\n        return new Dimension(elDocument.documentElement.clientWidth, elDocument.documentElement.clientHeight);\n    }\n    if (fallback) {\n        return getClientArea(fallback);\n    }\n    throw new Error('Unable to figure out browser width and height');\n}\nclass SizeUtils {\n    // Adapted from WinJS\n    // Converts a CSS positioning string for the specified element to pixels.\n    static convertToPixels(element, value) {\n        return parseFloat(value) || 0;\n    }\n    static getDimension(element, cssPropertyName, jsPropertyName) {\n        const computedStyle = getComputedStyle(element);\n        const value = computedStyle ? computedStyle.getPropertyValue(cssPropertyName) : '0';\n        return SizeUtils.convertToPixels(element, value);\n    }\n    static getBorderLeftWidth(element) {\n        return SizeUtils.getDimension(element, 'border-left-width', 'borderLeftWidth');\n    }\n    static getBorderRightWidth(element) {\n        return SizeUtils.getDimension(element, 'border-right-width', 'borderRightWidth');\n    }\n    static getBorderTopWidth(element) {\n        return SizeUtils.getDimension(element, 'border-top-width', 'borderTopWidth');\n    }\n    static getBorderBottomWidth(element) {\n        return SizeUtils.getDimension(element, 'border-bottom-width', 'borderBottomWidth');\n    }\n    static getPaddingLeft(element) {\n        return SizeUtils.getDimension(element, 'padding-left', 'paddingLeft');\n    }\n    static getPaddingRight(element) {\n        return SizeUtils.getDimension(element, 'padding-right', 'paddingRight');\n    }\n    static getPaddingTop(element) {\n        return SizeUtils.getDimension(element, 'padding-top', 'paddingTop');\n    }\n    static getPaddingBottom(element) {\n        return SizeUtils.getDimension(element, 'padding-bottom', 'paddingBottom');\n    }\n    static getMarginLeft(element) {\n        return SizeUtils.getDimension(element, 'margin-left', 'marginLeft');\n    }\n    static getMarginTop(element) {\n        return SizeUtils.getDimension(element, 'margin-top', 'marginTop');\n    }\n    static getMarginRight(element) {\n        return SizeUtils.getDimension(element, 'margin-right', 'marginRight');\n    }\n    static getMarginBottom(element) {\n        return SizeUtils.getDimension(element, 'margin-bottom', 'marginBottom');\n    }\n}\nclass Dimension {\n    static { this.None = new Dimension(0, 0); }\n    constructor(width, height) {\n        this.width = width;\n        this.height = height;\n    }\n    with(width = this.width, height = this.height) {\n        if (width !== this.width || height !== this.height) {\n            return new Dimension(width, height);\n        }\n        else {\n            return this;\n        }\n    }\n    static is(obj) {\n        return typeof obj === 'object' && typeof obj.height === 'number' && typeof obj.width === 'number';\n    }\n    static lift(obj) {\n        if (obj instanceof Dimension) {\n            return obj;\n        }\n        else {\n            return new Dimension(obj.width, obj.height);\n        }\n    }\n    static equals(a, b) {\n        if (a === b) {\n            return true;\n        }\n        if (!a || !b) {\n            return false;\n        }\n        return a.width === b.width && a.height === b.height;\n    }\n}\nexports.Dimension = Dimension;\nfunction getTopLeftOffset(element) {\n    // Adapted from WinJS.Utilities.getPosition\n    // and added borders to the mix\n    let offsetParent = element.offsetParent;\n    let top = element.offsetTop;\n    let left = element.offsetLeft;\n    while ((element = element.parentNode) !== null\n        && element !== element.ownerDocument.body\n        && element !== element.ownerDocument.documentElement) {\n        top -= element.scrollTop;\n        const c = isShadowRoot(element) ? null : getComputedStyle(element);\n        if (c) {\n            left -= c.direction !== 'rtl' ? element.scrollLeft : -element.scrollLeft;\n        }\n        if (element === offsetParent) {\n            left += SizeUtils.getBorderLeftWidth(element);\n            top += SizeUtils.getBorderTopWidth(element);\n            top += element.offsetTop;\n            left += element.offsetLeft;\n            offsetParent = element.offsetParent;\n        }\n    }\n    return {\n        left: left,\n        top: top\n    };\n}\nfunction size(element, width, height) {\n    if (typeof width === 'number') {\n        element.style.width = `${width}px`;\n    }\n    if (typeof height === 'number') {\n        element.style.height = `${height}px`;\n    }\n}\nfunction position(element, top, right, bottom, left, position = 'absolute') {\n    if (typeof top === 'number') {\n        element.style.top = `${top}px`;\n    }\n    if (typeof right === 'number') {\n        element.style.right = `${right}px`;\n    }\n    if (typeof bottom === 'number') {\n        element.style.bottom = `${bottom}px`;\n    }\n    if (typeof left === 'number') {\n        element.style.left = `${left}px`;\n    }\n    element.style.position = position;\n}\n/**\n * Returns the position of a dom node relative to the entire page.\n */\nfunction getDomNodePagePosition(domNode) {\n    const bb = domNode.getBoundingClientRect();\n    const window = (0, exports.getWindow)(domNode);\n    return {\n        left: bb.left + window.scrollX,\n        top: bb.top + window.scrollY,\n        width: bb.width,\n        height: bb.height\n    };\n}\n/**\n * Returns the effective zoom on a given element before window zoom level is applied\n */\nfunction getDomNodeZoomLevel(domNode) {\n    let testElement = domNode;\n    let zoom = 1.0;\n    do {\n        const elementZoomLevel = getComputedStyle(testElement).zoom;\n        if (elementZoomLevel !== null && elementZoomLevel !== undefined && elementZoomLevel !== '1') {\n            zoom *= elementZoomLevel;\n        }\n        testElement = testElement.parentElement;\n    } while (testElement !== null && testElement !== testElement.ownerDocument.documentElement);\n    return zoom;\n}\n// Adapted from WinJS\n// Gets the width of the element, including margins.\nfunction getTotalWidth(element) {\n    const margin = SizeUtils.getMarginLeft(element) + SizeUtils.getMarginRight(element);\n    return element.offsetWidth + margin;\n}\nfunction getContentWidth(element) {\n    const border = SizeUtils.getBorderLeftWidth(element) + SizeUtils.getBorderRightWidth(element);\n    const padding = SizeUtils.getPaddingLeft(element) + SizeUtils.getPaddingRight(element);\n    return element.offsetWidth - border - padding;\n}\nfunction getTotalScrollWidth(element) {\n    const margin = SizeUtils.getMarginLeft(element) + SizeUtils.getMarginRight(element);\n    return element.scrollWidth + margin;\n}\n// Adapted from WinJS\n// Gets the height of the content of the specified element. The content height does not include borders or padding.\nfunction getContentHeight(element) {\n    const border = SizeUtils.getBorderTopWidth(element) + SizeUtils.getBorderBottomWidth(element);\n    const padding = SizeUtils.getPaddingTop(element) + SizeUtils.getPaddingBottom(element);\n    return element.offsetHeight - border - padding;\n}\n// Adapted from WinJS\n// Gets the height of the element, including its margins.\nfunction getTotalHeight(element) {\n    const margin = SizeUtils.getMarginTop(element) + SizeUtils.getMarginBottom(element);\n    return element.offsetHeight + margin;\n}\n// Gets the left coordinate of the specified element relative to the specified parent.\nfunction getRelativeLeft(element, parent) {\n    if (element === null) {\n        return 0;\n    }\n    const elementPosition = getTopLeftOffset(element);\n    const parentPosition = getTopLeftOffset(parent);\n    return elementPosition.left - parentPosition.left;\n}\nfunction getLargestChildWidth(parent, children) {\n    const childWidths = children.map((child) => {\n        return Math.max(getTotalScrollWidth(child), getTotalWidth(child)) + getRelativeLeft(child, parent) || 0;\n    });\n    const maxWidth = Math.max(...childWidths);\n    return maxWidth;\n}\n// ----------------------------------------------------------------------------------------\nfunction isAncestor(testChild, testAncestor) {\n    return Boolean(testAncestor?.contains(testChild));\n}\nconst parentFlowToDataKey = 'parentFlowToElementId';\n/**\n * Set an explicit parent to use for nodes that are not part of the\n * regular dom structure.\n */\nfunction setParentFlowTo(fromChildElement, toParentElement) {\n    fromChildElement.dataset[parentFlowToDataKey] = toParentElement.id;\n}\nfunction getParentFlowToElement(node) {\n    const flowToParentId = node.dataset[parentFlowToDataKey];\n    if (typeof flowToParentId === 'string') {\n        return node.ownerDocument.getElementById(flowToParentId);\n    }\n    return null;\n}\n/**\n * Check if `testAncestor` is an ancestor of `testChild`, observing the explicit\n * parents set by `setParentFlowTo`.\n */\nfunction isAncestorUsingFlowTo(testChild, testAncestor) {\n    let node = testChild;\n    while (node) {\n        if (node === testAncestor) {\n            return true;\n        }\n        if (isHTMLElement(node)) {\n            const flowToParentElement = getParentFlowToElement(node);\n            if (flowToParentElement) {\n                node = flowToParentElement;\n                continue;\n            }\n        }\n        node = node.parentNode;\n    }\n    return false;\n}\nfunction findParentWithClass(node, clazz, stopAtClazzOrNode) {\n    while (node && node.nodeType === node.ELEMENT_NODE) {\n        if (node.classList.contains(clazz)) {\n            return node;\n        }\n        if (stopAtClazzOrNode) {\n            if (typeof stopAtClazzOrNode === 'string') {\n                if (node.classList.contains(stopAtClazzOrNode)) {\n                    return null;\n                }\n            }\n            else {\n                if (node === stopAtClazzOrNode) {\n                    return null;\n                }\n            }\n        }\n        node = node.parentNode;\n    }\n    return null;\n}\nfunction hasParentWithClass(node, clazz, stopAtClazzOrNode) {\n    return !!findParentWithClass(node, clazz, stopAtClazzOrNode);\n}\nfunction isShadowRoot(node) {\n    return (node && !!node.host && !!node.mode);\n}\nfunction isInShadowDOM(domNode) {\n    return !!getShadowRoot(domNode);\n}\nfunction getShadowRoot(domNode) {\n    while (domNode.parentNode) {\n        if (domNode === domNode.ownerDocument?.body) {\n            // reached the body\n            return null;\n        }\n        domNode = domNode.parentNode;\n    }\n    return isShadowRoot(domNode) ? domNode : null;\n}\n/**\n * Returns the active element across all child windows\n * based on document focus. Falls back to the main\n * window if no window has focus.\n */\nfunction getActiveElement() {\n    let result = getActiveDocument().activeElement;\n    while (result?.shadowRoot) {\n        result = result.shadowRoot.activeElement;\n    }\n    return result;\n}\n/**\n * Returns true if the focused window active element matches\n * the provided element. Falls back to the main window if no\n * window has focus.\n */\nfunction isActiveElement(element) {\n    return getActiveElement() === element;\n}\n/**\n * Returns true if the focused window active element is contained in\n * `ancestor`. Falls back to the main window if no window has focus.\n */\nfunction isAncestorOfActiveElement(ancestor) {\n    return isAncestor(getActiveElement(), ancestor);\n}\n/**\n * Returns whether the element is in the active `document`. The active\n * document has focus or will be the main windows document.\n */\nfunction isActiveDocument(element) {\n    return element.ownerDocument === getActiveDocument();\n}\n/**\n * Returns the active document across main and child windows.\n * Prefers the window with focus, otherwise falls back to\n * the main windows document.\n */\nfunction getActiveDocument() {\n    if ((0, exports.getWindowsCount)() <= 1) {\n        return window_1.mainWindow.document;\n    }\n    const documents = Array.from((0, exports.getWindows)()).map(({ window }) => window.document);\n    return documents.find(doc => doc.hasFocus()) ?? window_1.mainWindow.document;\n}\n/**\n * Returns the active window across main and child windows.\n * Prefers the window with focus, otherwise falls back to\n * the main window.\n */\nfunction getActiveWindow() {\n    const document = getActiveDocument();\n    return (document.defaultView?.window ?? window_1.mainWindow);\n}\nconst globalStylesheets = new Map();\nfunction isGlobalStylesheet(node) {\n    return globalStylesheets.has(node);\n}\n/**\n * A version of createStyleSheet which has a unified API to initialize/set the style content.\n */\nfunction createStyleSheet2() {\n    return new WrappedStyleElement();\n}\nclass WrappedStyleElement {\n    constructor() {\n        this._currentCssStyle = '';\n        this._styleSheet = undefined;\n    }\n    setStyle(cssStyle) {\n        if (cssStyle === this._currentCssStyle) {\n            return;\n        }\n        this._currentCssStyle = cssStyle;\n        if (!this._styleSheet) {\n            this._styleSheet = createStyleSheet(window_1.mainWindow.document.head, (s) => s.innerText = cssStyle);\n        }\n        else {\n            this._styleSheet.innerText = cssStyle;\n        }\n    }\n    dispose() {\n        if (this._styleSheet) {\n            this._styleSheet.remove();\n            this._styleSheet = undefined;\n        }\n    }\n}\nfunction createStyleSheet(container = window_1.mainWindow.document.head, beforeAppend, disposableStore) {\n    const style = document.createElement('style');\n    style.type = 'text/css';\n    style.media = 'screen';\n    beforeAppend?.(style);\n    container.appendChild(style);\n    if (disposableStore) {\n        disposableStore.add((0, lifecycle_1.toDisposable)(() => style.remove()));\n    }\n    // With <head> as container, the stylesheet becomes global and is tracked\n    // to support auxiliary windows to clone the stylesheet.\n    if (container === window_1.mainWindow.document.head) {\n        const globalStylesheetClones = new Set();\n        globalStylesheets.set(style, globalStylesheetClones);\n        for (const { window: targetWindow, disposables } of (0, exports.getWindows)()) {\n            if (targetWindow === window_1.mainWindow) {\n                continue; // main window is already tracked\n            }\n            const cloneDisposable = disposables.add(cloneGlobalStyleSheet(style, globalStylesheetClones, targetWindow));\n            disposableStore?.add(cloneDisposable);\n        }\n    }\n    return style;\n}\nfunction cloneGlobalStylesheets(targetWindow) {\n    const disposables = new lifecycle_1.DisposableStore();\n    for (const [globalStylesheet, clonedGlobalStylesheets] of globalStylesheets) {\n        disposables.add(cloneGlobalStyleSheet(globalStylesheet, clonedGlobalStylesheets, targetWindow));\n    }\n    return disposables;\n}\nfunction cloneGlobalStyleSheet(globalStylesheet, globalStylesheetClones, targetWindow) {\n    const disposables = new lifecycle_1.DisposableStore();\n    const clone = globalStylesheet.cloneNode(true);\n    targetWindow.document.head.appendChild(clone);\n    disposables.add((0, lifecycle_1.toDisposable)(() => clone.remove()));\n    for (const rule of getDynamicStyleSheetRules(globalStylesheet)) {\n        clone.sheet?.insertRule(rule.cssText, clone.sheet?.cssRules.length);\n    }\n    disposables.add(exports.sharedMutationObserver.observe(globalStylesheet, disposables, { childList: true })(() => {\n        clone.textContent = globalStylesheet.textContent;\n    }));\n    globalStylesheetClones.add(clone);\n    disposables.add((0, lifecycle_1.toDisposable)(() => globalStylesheetClones.delete(clone)));\n    return disposables;\n}\nexports.sharedMutationObserver = new class {\n    constructor() {\n        this.mutationObservers = new Map();\n    }\n    observe(target, disposables, options) {\n        let mutationObserversPerTarget = this.mutationObservers.get(target);\n        if (!mutationObserversPerTarget) {\n            mutationObserversPerTarget = new Map();\n            this.mutationObservers.set(target, mutationObserversPerTarget);\n        }\n        const optionsHash = (0, hash_1.hash)(options);\n        let mutationObserverPerOptions = mutationObserversPerTarget.get(optionsHash);\n        if (!mutationObserverPerOptions) {\n            const onDidMutate = new event.Emitter();\n            const observer = new MutationObserver(mutations => onDidMutate.fire(mutations));\n            observer.observe(target, options);\n            const resolvedMutationObserverPerOptions = mutationObserverPerOptions = {\n                users: 1,\n                observer,\n                onDidMutate: onDidMutate.event\n            };\n            disposables.add((0, lifecycle_1.toDisposable)(() => {\n                resolvedMutationObserverPerOptions.users -= 1;\n                if (resolvedMutationObserverPerOptions.users === 0) {\n                    onDidMutate.dispose();\n                    observer.disconnect();\n                    mutationObserversPerTarget?.delete(optionsHash);\n                    if (mutationObserversPerTarget?.size === 0) {\n                        this.mutationObservers.delete(target);\n                    }\n                }\n            }));\n            mutationObserversPerTarget.set(optionsHash, mutationObserverPerOptions);\n        }\n        else {\n            mutationObserverPerOptions.users += 1;\n        }\n        return mutationObserverPerOptions.onDidMutate;\n    }\n};\nfunction createMetaElement(container = window_1.mainWindow.document.head) {\n    return createHeadElement('meta', container);\n}\nfunction createLinkElement(container = window_1.mainWindow.document.head) {\n    return createHeadElement('link', container);\n}\nfunction createHeadElement(tagName, container = window_1.mainWindow.document.head) {\n    const element = document.createElement(tagName);\n    container.appendChild(element);\n    return element;\n}\nlet _sharedStyleSheet = null;\nfunction getSharedStyleSheet() {\n    if (!_sharedStyleSheet) {\n        _sharedStyleSheet = createStyleSheet();\n    }\n    return _sharedStyleSheet;\n}\nfunction getDynamicStyleSheetRules(style) {\n    if (style?.sheet?.rules) {\n        // Chrome, IE\n        return style.sheet.rules;\n    }\n    if (style?.sheet?.cssRules) {\n        // FF\n        return style.sheet.cssRules;\n    }\n    return [];\n}\nfunction createCSSRule(selector, cssText, style = getSharedStyleSheet()) {\n    if (!style || !cssText) {\n        return;\n    }\n    style.sheet?.insertRule(`${selector} {${cssText}}`, 0);\n    // Apply rule also to all cloned global stylesheets\n    for (const clonedGlobalStylesheet of globalStylesheets.get(style) ?? []) {\n        createCSSRule(selector, cssText, clonedGlobalStylesheet);\n    }\n}\nfunction removeCSSRulesContainingSelector(ruleName, style = getSharedStyleSheet()) {\n    if (!style) {\n        return;\n    }\n    const rules = getDynamicStyleSheetRules(style);\n    const toDelete = [];\n    for (let i = 0; i < rules.length; i++) {\n        const rule = rules[i];\n        if (isCSSStyleRule(rule) && rule.selectorText.indexOf(ruleName) !== -1) {\n            toDelete.push(i);\n        }\n    }\n    for (let i = toDelete.length - 1; i >= 0; i--) {\n        style.sheet?.deleteRule(toDelete[i]);\n    }\n    // Remove rules also from all cloned global stylesheets\n    for (const clonedGlobalStylesheet of globalStylesheets.get(style) ?? []) {\n        removeCSSRulesContainingSelector(ruleName, clonedGlobalStylesheet);\n    }\n}\nfunction isCSSStyleRule(rule) {\n    return typeof rule.selectorText === 'string';\n}\nfunction isHTMLElement(e) {\n    // eslint-disable-next-line no-restricted-syntax\n    return e instanceof HTMLElement || e instanceof (0, exports.getWindow)(e).HTMLElement;\n}\nfunction isHTMLAnchorElement(e) {\n    // eslint-disable-next-line no-restricted-syntax\n    return e instanceof HTMLAnchorElement || e instanceof (0, exports.getWindow)(e).HTMLAnchorElement;\n}\nfunction isHTMLSpanElement(e) {\n    // eslint-disable-next-line no-restricted-syntax\n    return e instanceof HTMLSpanElement || e instanceof (0, exports.getWindow)(e).HTMLSpanElement;\n}\nfunction isHTMLTextAreaElement(e) {\n    // eslint-disable-next-line no-restricted-syntax\n    return e instanceof HTMLTextAreaElement || e instanceof (0, exports.getWindow)(e).HTMLTextAreaElement;\n}\nfunction isHTMLInputElement(e) {\n    // eslint-disable-next-line no-restricted-syntax\n    return e instanceof HTMLInputElement || e instanceof (0, exports.getWindow)(e).HTMLInputElement;\n}\nfunction isHTMLButtonElement(e) {\n    // eslint-disable-next-line no-restricted-syntax\n    return e instanceof HTMLButtonElement || e instanceof (0, exports.getWindow)(e).HTMLButtonElement;\n}\nfunction isHTMLDivElement(e) {\n    // eslint-disable-next-line no-restricted-syntax\n    return e instanceof HTMLDivElement || e instanceof (0, exports.getWindow)(e).HTMLDivElement;\n}\nfunction isSVGElement(e) {\n    // eslint-disable-next-line no-restricted-syntax\n    return e instanceof SVGElement || e instanceof (0, exports.getWindow)(e).SVGElement;\n}\nfunction isMouseEvent(e) {\n    // eslint-disable-next-line no-restricted-syntax\n    return e instanceof MouseEvent || e instanceof (0, exports.getWindow)(e).MouseEvent;\n}\nfunction isKeyboardEvent(e) {\n    // eslint-disable-next-line no-restricted-syntax\n    return e instanceof KeyboardEvent || e instanceof (0, exports.getWindow)(e).KeyboardEvent;\n}\nfunction isPointerEvent(e) {\n    // eslint-disable-next-line no-restricted-syntax\n    return e instanceof PointerEvent || e instanceof (0, exports.getWindow)(e).PointerEvent;\n}\nfunction isDragEvent(e) {\n    // eslint-disable-next-line no-restricted-syntax\n    return e instanceof DragEvent || e instanceof (0, exports.getWindow)(e).DragEvent;\n}\nexports.EventType = {\n    // Mouse\n    CLICK: 'click',\n    AUXCLICK: 'auxclick',\n    DBLCLICK: 'dblclick',\n    MOUSE_UP: 'mouseup',\n    MOUSE_DOWN: 'mousedown',\n    MOUSE_OVER: 'mouseover',\n    MOUSE_MOVE: 'mousemove',\n    MOUSE_OUT: 'mouseout',\n    MOUSE_ENTER: 'mouseenter',\n    MOUSE_LEAVE: 'mouseleave',\n    MOUSE_WHEEL: 'wheel',\n    POINTER_UP: 'pointerup',\n    POINTER_DOWN: 'pointerdown',\n    POINTER_MOVE: 'pointermove',\n    POINTER_LEAVE: 'pointerleave',\n    CONTEXT_MENU: 'contextmenu',\n    WHEEL: 'wheel',\n    // Keyboard\n    KEY_DOWN: 'keydown',\n    KEY_PRESS: 'keypress',\n    KEY_UP: 'keyup',\n    // HTML Document\n    LOAD: 'load',\n    BEFORE_UNLOAD: 'beforeunload',\n    UNLOAD: 'unload',\n    PAGE_SHOW: 'pageshow',\n    PAGE_HIDE: 'pagehide',\n    PASTE: 'paste',\n    ABORT: 'abort',\n    ERROR: 'error',\n    RESIZE: 'resize',\n    SCROLL: 'scroll',\n    FULLSCREEN_CHANGE: 'fullscreenchange',\n    WK_FULLSCREEN_CHANGE: 'webkitfullscreenchange',\n    // Form\n    SELECT: 'select',\n    CHANGE: 'change',\n    SUBMIT: 'submit',\n    RESET: 'reset',\n    FOCUS: 'focus',\n    FOCUS_IN: 'focusin',\n    FOCUS_OUT: 'focusout',\n    BLUR: 'blur',\n    INPUT: 'input',\n    // Local Storage\n    STORAGE: 'storage',\n    // Drag\n    DRAG_START: 'dragstart',\n    DRAG: 'drag',\n    DRAG_ENTER: 'dragenter',\n    DRAG_LEAVE: 'dragleave',\n    DRAG_OVER: 'dragover',\n    DROP: 'drop',\n    DRAG_END: 'dragend',\n    // Animation\n    ANIMATION_START: browser.isWebKit ? 'webkitAnimationStart' : 'animationstart',\n    ANIMATION_END: browser.isWebKit ? 'webkitAnimationEnd' : 'animationend',\n    ANIMATION_ITERATION: browser.isWebKit ? 'webkitAnimationIteration' : 'animationiteration'\n};\nfunction isEventLike(obj) {\n    const candidate = obj;\n    return !!(candidate && typeof candidate.preventDefault === 'function' && typeof candidate.stopPropagation === 'function');\n}\nexports.EventHelper = {\n    stop: (e, cancelBubble) => {\n        e.preventDefault();\n        if (cancelBubble) {\n            e.stopPropagation();\n        }\n        return e;\n    }\n};\nfunction saveParentsScrollTop(node) {\n    const r = [];\n    for (let i = 0; node && node.nodeType === node.ELEMENT_NODE; i++) {\n        r[i] = node.scrollTop;\n        node = node.parentNode;\n    }\n    return r;\n}\nfunction restoreParentsScrollTop(node, state) {\n    for (let i = 0; node && node.nodeType === node.ELEMENT_NODE; i++) {\n        if (node.scrollTop !== state[i]) {\n            node.scrollTop = state[i];\n        }\n        node = node.parentNode;\n    }\n}\nclass FocusTracker extends lifecycle_1.Disposable {\n    static hasFocusWithin(element) {\n        if (isHTMLElement(element)) {\n            const shadowRoot = getShadowRoot(element);\n            const activeElement = (shadowRoot ? shadowRoot.activeElement : element.ownerDocument.activeElement);\n            return isAncestor(activeElement, element);\n        }\n        else {\n            const window = element;\n            return isAncestor(window.document.activeElement, window.document);\n        }\n    }\n    constructor(element) {\n        super();\n        this._onDidFocus = this._register(new event.Emitter());\n        this.onDidFocus = this._onDidFocus.event;\n        this._onDidBlur = this._register(new event.Emitter());\n        this.onDidBlur = this._onDidBlur.event;\n        let hasFocus = FocusTracker.hasFocusWithin(element);\n        let loosingFocus = false;\n        const onFocus = () => {\n            loosingFocus = false;\n            if (!hasFocus) {\n                hasFocus = true;\n                this._onDidFocus.fire();\n            }\n        };\n        const onBlur = () => {\n            if (hasFocus) {\n                loosingFocus = true;\n                (isHTMLElement(element) ? (0, exports.getWindow)(element) : element).setTimeout(() => {\n                    if (loosingFocus) {\n                        loosingFocus = false;\n                        hasFocus = false;\n                        this._onDidBlur.fire();\n                    }\n                }, 0);\n            }\n        };\n        this._refreshStateHandler = () => {\n            const currentNodeHasFocus = FocusTracker.hasFocusWithin(element);\n            if (currentNodeHasFocus !== hasFocus) {\n                if (hasFocus) {\n                    onBlur();\n                }\n                else {\n                    onFocus();\n                }\n            }\n        };\n        this._register(addDisposableListener(element, exports.EventType.FOCUS, onFocus, true));\n        this._register(addDisposableListener(element, exports.EventType.BLUR, onBlur, true));\n        if (isHTMLElement(element)) {\n            this._register(addDisposableListener(element, exports.EventType.FOCUS_IN, () => this._refreshStateHandler()));\n            this._register(addDisposableListener(element, exports.EventType.FOCUS_OUT, () => this._refreshStateHandler()));\n        }\n    }\n    refreshState() {\n        this._refreshStateHandler();\n    }\n}\n/**\n * Creates a new `IFocusTracker` instance that tracks focus changes on the given `element` and its descendants.\n *\n * @param element The `HTMLElement` or `Window` to track focus changes on.\n * @returns An `IFocusTracker` instance.\n */\nfunction trackFocus(element) {\n    return new FocusTracker(element);\n}\nfunction after(sibling, child) {\n    sibling.after(child);\n    return child;\n}\nfunction append(parent, ...children) {\n    parent.append(...children);\n    if (children.length === 1 && typeof children[0] !== 'string') {\n        return children[0];\n    }\n}\nfunction prepend(parent, child) {\n    parent.insertBefore(child, parent.firstChild);\n    return child;\n}\n/**\n * Removes all children from `parent` and appends `children`\n */\nfunction reset(parent, ...children) {\n    parent.innerText = '';\n    append(parent, ...children);\n}\nconst SELECTOR_REGEX = /([\\w\\-]+)?(#([\\w\\-]+))?((\\.([\\w\\-]+))*)/;\nvar Namespace;\n(function (Namespace) {\n    Namespace[\"HTML\"] = \"http://www.w3.org/1999/xhtml\";\n    Namespace[\"SVG\"] = \"http://www.w3.org/2000/svg\";\n})(Namespace || (exports.Namespace = Namespace = {}));\nfunction _$(namespace, description, attrs, ...children) {\n    const match = SELECTOR_REGEX.exec(description);\n    if (!match) {\n        throw new Error('Bad use of emmet');\n    }\n    const tagName = match[1] || 'div';\n    let result;\n    if (namespace !== Namespace.HTML) {\n        result = document.createElementNS(namespace, tagName);\n    }\n    else {\n        result = document.createElement(tagName);\n    }\n    if (match[3]) {\n        result.id = match[3];\n    }\n    if (match[4]) {\n        result.className = match[4].replace(/\\./g, ' ').trim();\n    }\n    if (attrs) {\n        Object.entries(attrs).forEach(([name, value]) => {\n            if (typeof value === 'undefined') {\n                return;\n            }\n            if (/^on\\w+$/.test(name)) {\n                result[name] = value;\n            }\n            else if (name === 'selected') {\n                if (value) {\n                    result.setAttribute(name, 'true');\n                }\n            }\n            else {\n                result.setAttribute(name, value);\n            }\n        });\n    }\n    result.append(...children);\n    return result;\n}\nfunction $(description, attrs, ...children) {\n    return _$(Namespace.HTML, description, attrs, ...children);\n}\n$.SVG = function (description, attrs, ...children) {\n    return _$(Namespace.SVG, description, attrs, ...children);\n};\nfunction join(nodes, separator) {\n    const result = [];\n    nodes.forEach((node, index) => {\n        if (index > 0) {\n            if (separator instanceof Node) {\n                result.push(separator.cloneNode());\n            }\n            else {\n                result.push(document.createTextNode(separator));\n            }\n        }\n        result.push(node);\n    });\n    return result;\n}\nfunction setVisibility(visible, ...elements) {\n    if (visible) {\n        show(...elements);\n    }\n    else {\n        hide(...elements);\n    }\n}\nfunction show(...elements) {\n    for (const element of elements) {\n        element.style.display = '';\n        element.removeAttribute('aria-hidden');\n    }\n}\nfunction hide(...elements) {\n    for (const element of elements) {\n        element.style.display = 'none';\n        element.setAttribute('aria-hidden', 'true');\n    }\n}\nfunction findParentWithAttribute(node, attribute) {\n    while (node && node.nodeType === node.ELEMENT_NODE) {\n        if (isHTMLElement(node) && node.hasAttribute(attribute)) {\n            return node;\n        }\n        node = node.parentNode;\n    }\n    return null;\n}\nfunction removeTabIndexAndUpdateFocus(node) {\n    if (!node || !node.hasAttribute('tabIndex')) {\n        return;\n    }\n    // If we are the currently focused element and tabIndex is removed,\n    // standard DOM behavior is to move focus to the <body> element. We\n    // typically never want that, rather put focus to the closest element\n    // in the hierarchy of the parent DOM nodes.\n    if (node.ownerDocument.activeElement === node) {\n        const parentFocusable = findParentWithAttribute(node.parentElement, 'tabIndex');\n        parentFocusable?.focus();\n    }\n    node.removeAttribute('tabindex');\n}\nfunction finalHandler(fn) {\n    return e => {\n        e.preventDefault();\n        e.stopPropagation();\n        fn(e);\n    };\n}\nfunction domContentLoaded(targetWindow) {\n    return new Promise(resolve => {\n        const readyState = targetWindow.document.readyState;\n        if (readyState === 'complete' || (targetWindow.document && targetWindow.document.body !== null)) {\n            resolve(undefined);\n        }\n        else {\n            const listener = () => {\n                targetWindow.window.removeEventListener('DOMContentLoaded', listener, false);\n                resolve();\n            };\n            targetWindow.window.addEventListener('DOMContentLoaded', listener, false);\n        }\n    });\n}\n/**\n * Find a value usable for a dom node size such that the likelihood that it would be\n * displayed with constant screen pixels size is as high as possible.\n *\n * e.g. We would desire for the cursors to be 2px (CSS px) wide. Under a devicePixelRatio\n * of 1.25, the cursor will be 2.5 screen pixels wide. Depending on how the dom node aligns/\"snaps\"\n * with the screen pixels, it will sometimes be rendered with 2 screen pixels, and sometimes with 3 screen pixels.\n */\nfunction computeScreenAwareSize(window, cssPx) {\n    const screenPx = window.devicePixelRatio * cssPx;\n    return Math.max(1, Math.floor(screenPx)) / window.devicePixelRatio;\n}\n/**\n * Open safely a new window. This is the best way to do so, but you cannot tell\n * if the window was opened or if it was blocked by the browser's popup blocker.\n * If you want to tell if the browser blocked the new window, use {@link windowOpenWithSuccess}.\n *\n * See https://github.com/microsoft/monaco-editor/issues/601\n * To protect against malicious code in the linked site, particularly phishing attempts,\n * the window.opener should be set to null to prevent the linked site from having access\n * to change the location of the current page.\n * See https://mathiasbynens.github.io/rel-noopener/\n */\nfunction windowOpenNoOpener(url) {\n    // By using 'noopener' in the `windowFeatures` argument, the newly created window will\n    // not be able to use `window.opener` to reach back to the current page.\n    // See https://stackoverflow.com/a/46958731\n    // See https://developer.mozilla.org/en-US/docs/Web/API/Window/open#noopener\n    // However, this also doesn't allow us to realize if the browser blocked\n    // the creation of the window.\n    window_1.mainWindow.open(url, '_blank', 'noopener');\n}\n/**\n * Open a new window in a popup. This is the best way to do so, but you cannot tell\n * if the window was opened or if it was blocked by the browser's popup blocker.\n * If you want to tell if the browser blocked the new window, use {@link windowOpenWithSuccess}.\n *\n * Note: this does not set {@link window.opener} to null. This is to allow the opened popup to\n * be able to use {@link window.close} to close itself. Because of this, you should only use\n * this function on urls that you trust.\n *\n * In otherwords, you should almost always use {@link windowOpenNoOpener} instead of this function.\n */\nconst popupWidth = 780, popupHeight = 640;\nfunction windowOpenPopup(url) {\n    const left = Math.floor(window_1.mainWindow.screenLeft + window_1.mainWindow.innerWidth / 2 - popupWidth / 2);\n    const top = Math.floor(window_1.mainWindow.screenTop + window_1.mainWindow.innerHeight / 2 - popupHeight / 2);\n    window_1.mainWindow.open(url, '_blank', `width=${popupWidth},height=${popupHeight},top=${top},left=${left}`);\n}\n/**\n * Attempts to open a window and returns whether it succeeded. This technique is\n * not appropriate in certain contexts, like for example when the JS context is\n * executing inside a sandboxed iframe. If it is not necessary to know if the\n * browser blocked the new window, use {@link windowOpenNoOpener}.\n *\n * See https://github.com/microsoft/monaco-editor/issues/601\n * See https://github.com/microsoft/monaco-editor/issues/2474\n * See https://mathiasbynens.github.io/rel-noopener/\n *\n * @param url the url to open\n * @param noOpener whether or not to set the {@link window.opener} to null. You should leave the default\n * (true) unless you trust the url that is being opened.\n * @returns boolean indicating if the {@link window.open} call succeeded\n */\nfunction windowOpenWithSuccess(url, noOpener = true) {\n    const newTab = window_1.mainWindow.open();\n    if (newTab) {\n        if (noOpener) {\n            // see `windowOpenNoOpener` for details on why this is important\n            newTab.opener = null;\n        }\n        newTab.location.href = url;\n        return true;\n    }\n    return false;\n}\nfunction animate(targetWindow, fn) {\n    const step = () => {\n        fn();\n        stepDisposable = (0, exports.scheduleAtNextAnimationFrame)(targetWindow, step);\n    };\n    let stepDisposable = (0, exports.scheduleAtNextAnimationFrame)(targetWindow, step);\n    return (0, lifecycle_1.toDisposable)(() => stepDisposable.dispose());\n}\nfunction asCSSPropertyValue(value) {\n    return `'${value.replace(/'/g, '%27')}'`;\n}\nfunction asCssValueWithDefault(cssPropertyValue, dflt) {\n    if (cssPropertyValue !== undefined) {\n        const variableMatch = cssPropertyValue.match(/^\\s*var\\((.+)\\)$/);\n        if (variableMatch) {\n            const varArguments = variableMatch[1].split(',', 2);\n            if (varArguments.length === 2) {\n                dflt = asCssValueWithDefault(varArguments[1].trim(), dflt);\n            }\n            return `var(${varArguments[0]}, ${dflt})`;\n        }\n        return cssPropertyValue;\n    }\n    return dflt;\n}\nvar DetectedFullscreenMode;\n(function (DetectedFullscreenMode) {\n    /**\n     * The document is fullscreen, e.g. because an element\n     * in the document requested to be fullscreen.\n     */\n    DetectedFullscreenMode[DetectedFullscreenMode[\"DOCUMENT\"] = 1] = \"DOCUMENT\";\n    /**\n     * The browser is fullscreen, e.g. because the user enabled\n     * native window fullscreen for it.\n     */\n    DetectedFullscreenMode[DetectedFullscreenMode[\"BROWSER\"] = 2] = \"BROWSER\";\n})(DetectedFullscreenMode || (exports.DetectedFullscreenMode = DetectedFullscreenMode = {}));\nfunction detectFullscreen(targetWindow) {\n    // Browser fullscreen: use DOM APIs to detect\n    if (targetWindow.document.fullscreenElement || targetWindow.document.webkitFullscreenElement || targetWindow.document.webkitIsFullScreen) {\n        return { mode: DetectedFullscreenMode.DOCUMENT, guess: false };\n    }\n    // There is no standard way to figure out if the browser\n    // is using native fullscreen. Via checking on screen\n    // height and comparing that to window height, we can guess\n    // it though.\n    if (targetWindow.innerHeight === targetWindow.screen.height) {\n        // if the height of the window matches the screen height, we can\n        // safely assume that the browser is fullscreen because no browser\n        // chrome is taking height away (e.g. like toolbars).\n        return { mode: DetectedFullscreenMode.BROWSER, guess: false };\n    }\n    if (platform.isMacintosh || platform.isLinux) {\n        // macOS and Linux do not properly report `innerHeight`, only Windows does\n        if (targetWindow.outerHeight === targetWindow.screen.height && targetWindow.outerWidth === targetWindow.screen.width) {\n            // if the height of the browser matches the screen height, we can\n            // only guess that we are in fullscreen. It is also possible that\n            // the user has turned off taskbars in the OS and the browser is\n            // simply able to span the entire size of the screen.\n            return { mode: DetectedFullscreenMode.BROWSER, guess: true };\n        }\n    }\n    // Not in fullscreen\n    return null;\n}\n/**\n * Convert a Unicode string to a string in which each 16-bit unit occupies only one byte\n *\n * From https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/btoa\n */\nfunction toBinary(str) {\n    const codeUnits = new Uint16Array(str.length);\n    for (let i = 0; i < codeUnits.length; i++) {\n        codeUnits[i] = str.charCodeAt(i);\n    }\n    let binary = '';\n    const uint8array = new Uint8Array(codeUnits.buffer);\n    for (let i = 0; i < uint8array.length; i++) {\n        binary += String.fromCharCode(uint8array[i]);\n    }\n    return binary;\n}\n/**\n * Version of the global `btoa` function that handles multi-byte characters instead\n * of throwing an exception.\n */\nfunction multibyteAwareBtoa(str) {\n    return btoa(toBinary(str));\n}\nclass ModifierKeyEmitter extends event.Emitter {\n    constructor() {\n        super();\n        this._subscriptions = new lifecycle_1.DisposableStore();\n        this._keyStatus = {\n            altKey: false,\n            shiftKey: false,\n            ctrlKey: false,\n            metaKey: false\n        };\n        this._subscriptions.add(event.Event.runAndSubscribe(exports.onDidRegisterWindow, ({ window, disposables }) => this.registerListeners(window, disposables), { window: window_1.mainWindow, disposables: this._subscriptions }));\n    }\n    registerListeners(window, disposables) {\n        disposables.add(addDisposableListener(window, 'keydown', e => {\n            if (e.defaultPrevented) {\n                return;\n            }\n            const event = new keyboardEvent_1.StandardKeyboardEvent(e);\n            // If Alt-key keydown event is repeated, ignore it #112347\n            // Only known to be necessary for Alt-Key at the moment #115810\n            if (event.keyCode === keyCodes_1.KeyCode.Alt && e.repeat) {\n                return;\n            }\n            if (e.altKey && !this._keyStatus.altKey) {\n                this._keyStatus.lastKeyPressed = 'alt';\n            }\n            else if (e.ctrlKey && !this._keyStatus.ctrlKey) {\n                this._keyStatus.lastKeyPressed = 'ctrl';\n            }\n            else if (e.metaKey && !this._keyStatus.metaKey) {\n                this._keyStatus.lastKeyPressed = 'meta';\n            }\n            else if (e.shiftKey && !this._keyStatus.shiftKey) {\n                this._keyStatus.lastKeyPressed = 'shift';\n            }\n            else if (event.keyCode !== keyCodes_1.KeyCode.Alt) {\n                this._keyStatus.lastKeyPressed = undefined;\n            }\n            else {\n                return;\n            }\n            this._keyStatus.altKey = e.altKey;\n            this._keyStatus.ctrlKey = e.ctrlKey;\n            this._keyStatus.metaKey = e.metaKey;\n            this._keyStatus.shiftKey = e.shiftKey;\n            if (this._keyStatus.lastKeyPressed) {\n                this._keyStatus.event = e;\n                this.fire(this._keyStatus);\n            }\n        }, true));\n        disposables.add(addDisposableListener(window, 'keyup', e => {\n            if (e.defaultPrevented) {\n                return;\n            }\n            if (!e.altKey && this._keyStatus.altKey) {\n                this._keyStatus.lastKeyReleased = 'alt';\n            }\n            else if (!e.ctrlKey && this._keyStatus.ctrlKey) {\n                this._keyStatus.lastKeyReleased = 'ctrl';\n            }\n            else if (!e.metaKey && this._keyStatus.metaKey) {\n                this._keyStatus.lastKeyReleased = 'meta';\n            }\n            else if (!e.shiftKey && this._keyStatus.shiftKey) {\n                this._keyStatus.lastKeyReleased = 'shift';\n            }\n            else {\n                this._keyStatus.lastKeyReleased = undefined;\n            }\n            if (this._keyStatus.lastKeyPressed !== this._keyStatus.lastKeyReleased) {\n                this._keyStatus.lastKeyPressed = undefined;\n            }\n            this._keyStatus.altKey = e.altKey;\n            this._keyStatus.ctrlKey = e.ctrlKey;\n            this._keyStatus.metaKey = e.metaKey;\n            this._keyStatus.shiftKey = e.shiftKey;\n            if (this._keyStatus.lastKeyReleased) {\n                this._keyStatus.event = e;\n                this.fire(this._keyStatus);\n            }\n        }, true));\n        disposables.add(addDisposableListener(window.document.body, 'mousedown', () => {\n            this._keyStatus.lastKeyPressed = undefined;\n        }, true));\n        disposables.add(addDisposableListener(window.document.body, 'mouseup', () => {\n            this._keyStatus.lastKeyPressed = undefined;\n        }, true));\n        disposables.add(addDisposableListener(window.document.body, 'mousemove', e => {\n            if (e.buttons) {\n                this._keyStatus.lastKeyPressed = undefined;\n            }\n        }, true));\n        disposables.add(addDisposableListener(window, 'blur', () => {\n            this.resetKeyStatus();\n        }));\n    }\n    get keyStatus() {\n        return this._keyStatus;\n    }\n    get isModifierPressed() {\n        return this._keyStatus.altKey || this._keyStatus.ctrlKey || this._keyStatus.metaKey || this._keyStatus.shiftKey;\n    }\n    /**\n     * Allows to explicitly reset the key status based on more knowledge (#109062)\n     */\n    resetKeyStatus() {\n        this.doResetKeyStatus();\n        this.fire(this._keyStatus);\n    }\n    doResetKeyStatus() {\n        this._keyStatus = {\n            altKey: false,\n            shiftKey: false,\n            ctrlKey: false,\n            metaKey: false\n        };\n    }\n    static getInstance() {\n        if (!ModifierKeyEmitter.instance) {\n            ModifierKeyEmitter.instance = new ModifierKeyEmitter();\n        }\n        return ModifierKeyEmitter.instance;\n    }\n    dispose() {\n        super.dispose();\n        this._subscriptions.dispose();\n    }\n}\nexports.ModifierKeyEmitter = ModifierKeyEmitter;\nfunction getCookieValue(name) {\n    const match = document.cookie.match('(^|[^;]+)\\\\s*' + name + '\\\\s*=\\\\s*([^;]+)'); // See https://stackoverflow.com/a/25490531\n    return match ? match.pop() : undefined;\n}\nclass DragAndDropObserver extends lifecycle_1.Disposable {\n    constructor(element, callbacks) {\n        super();\n        this.element = element;\n        this.callbacks = callbacks;\n        // A helper to fix issues with repeated DRAG_ENTER / DRAG_LEAVE\n        // calls see https://github.com/microsoft/vscode/issues/14470\n        // when the element has child elements where the events are fired\n        // repeadedly.\n        this.counter = 0;\n        // Allows to measure the duration of the drag operation.\n        this.dragStartTime = 0;\n        this.registerListeners();\n    }\n    registerListeners() {\n        if (this.callbacks.onDragStart) {\n            this._register(addDisposableListener(this.element, exports.EventType.DRAG_START, (e) => {\n                this.callbacks.onDragStart?.(e);\n            }));\n        }\n        if (this.callbacks.onDrag) {\n            this._register(addDisposableListener(this.element, exports.EventType.DRAG, (e) => {\n                this.callbacks.onDrag?.(e);\n            }));\n        }\n        this._register(addDisposableListener(this.element, exports.EventType.DRAG_ENTER, (e) => {\n            this.counter++;\n            this.dragStartTime = e.timeStamp;\n            this.callbacks.onDragEnter?.(e);\n        }));\n        this._register(addDisposableListener(this.element, exports.EventType.DRAG_OVER, (e) => {\n            e.preventDefault(); // needed so that the drop event fires (https://stackoverflow.com/questions/21339924/drop-event-not-firing-in-chrome)\n            this.callbacks.onDragOver?.(e, e.timeStamp - this.dragStartTime);\n        }));\n        this._register(addDisposableListener(this.element, exports.EventType.DRAG_LEAVE, (e) => {\n            this.counter--;\n            if (this.counter === 0) {\n                this.dragStartTime = 0;\n                this.callbacks.onDragLeave?.(e);\n            }\n        }));\n        this._register(addDisposableListener(this.element, exports.EventType.DRAG_END, (e) => {\n            this.counter = 0;\n            this.dragStartTime = 0;\n            this.callbacks.onDragEnd?.(e);\n        }));\n        this._register(addDisposableListener(this.element, exports.EventType.DROP, (e) => {\n            this.counter = 0;\n            this.dragStartTime = 0;\n            this.callbacks.onDrop?.(e);\n        }));\n    }\n}\nexports.DragAndDropObserver = DragAndDropObserver;\nconst H_REGEX = /(?<tag>[\\w\\-]+)?(?:#(?<id>[\\w\\-]+))?(?<class>(?:\\.(?:[\\w\\-]+))*)(?:@(?<name>(?:[\\w\\_])+))?/;\nfunction h(tag, ...args) {\n    let attributes;\n    let children;\n    if (Array.isArray(args[0])) {\n        attributes = {};\n        children = args[0];\n    }\n    else {\n        attributes = args[0] || {};\n        children = args[1];\n    }\n    const match = H_REGEX.exec(tag);\n    if (!match || !match.groups) {\n        throw new Error('Bad use of h');\n    }\n    const tagName = match.groups['tag'] || 'div';\n    const el = document.createElement(tagName);\n    if (match.groups['id']) {\n        el.id = match.groups['id'];\n    }\n    const classNames = [];\n    if (match.groups['class']) {\n        for (const className of match.groups['class'].split('.')) {\n            if (className !== '') {\n                classNames.push(className);\n            }\n        }\n    }\n    if (attributes.className !== undefined) {\n        for (const className of attributes.className.split('.')) {\n            if (className !== '') {\n                classNames.push(className);\n            }\n        }\n    }\n    if (classNames.length > 0) {\n        el.className = classNames.join(' ');\n    }\n    const result = {};\n    if (match.groups['name']) {\n        result[match.groups['name']] = el;\n    }\n    if (children) {\n        for (const c of children) {\n            if (isHTMLElement(c)) {\n                el.appendChild(c);\n            }\n            else if (typeof c === 'string') {\n                el.append(c);\n            }\n            else if ('root' in c) {\n                Object.assign(result, c);\n                el.appendChild(c.root);\n            }\n        }\n    }\n    for (const [key, value] of Object.entries(attributes)) {\n        if (key === 'className') {\n            continue;\n        }\n        else if (key === 'style') {\n            for (const [cssKey, cssValue] of Object.entries(value)) {\n                el.style.setProperty(camelCaseToHyphenCase(cssKey), typeof cssValue === 'number' ? cssValue + 'px' : '' + cssValue);\n            }\n        }\n        else if (key === 'tabIndex') {\n            el.tabIndex = value;\n        }\n        else {\n            el.setAttribute(camelCaseToHyphenCase(key), value.toString());\n        }\n    }\n    result['root'] = el;\n    return result;\n}\nfunction svgElem(tag, ...args) {\n    let attributes;\n    let children;\n    if (Array.isArray(args[0])) {\n        attributes = {};\n        children = args[0];\n    }\n    else {\n        attributes = args[0] || {};\n        children = args[1];\n    }\n    const match = H_REGEX.exec(tag);\n    if (!match || !match.groups) {\n        throw new Error('Bad use of h');\n    }\n    const tagName = match.groups['tag'] || 'div';\n    const el = document.createElementNS('http://www.w3.org/2000/svg', tagName);\n    if (match.groups['id']) {\n        el.id = match.groups['id'];\n    }\n    const classNames = [];\n    if (match.groups['class']) {\n        for (const className of match.groups['class'].split('.')) {\n            if (className !== '') {\n                classNames.push(className);\n            }\n        }\n    }\n    if (attributes.className !== undefined) {\n        for (const className of attributes.className.split('.')) {\n            if (className !== '') {\n                classNames.push(className);\n            }\n        }\n    }\n    if (classNames.length > 0) {\n        el.className = classNames.join(' ');\n    }\n    const result = {};\n    if (match.groups['name']) {\n        result[match.groups['name']] = el;\n    }\n    if (children) {\n        for (const c of children) {\n            if (isHTMLElement(c)) {\n                el.appendChild(c);\n            }\n            else if (typeof c === 'string') {\n                el.append(c);\n            }\n            else if ('root' in c) {\n                Object.assign(result, c);\n                el.appendChild(c.root);\n            }\n        }\n    }\n    for (const [key, value] of Object.entries(attributes)) {\n        if (key === 'className') {\n            continue;\n        }\n        else if (key === 'style') {\n            for (const [cssKey, cssValue] of Object.entries(value)) {\n                el.style.setProperty(camelCaseToHyphenCase(cssKey), typeof cssValue === 'number' ? cssValue + 'px' : '' + cssValue);\n            }\n        }\n        else if (key === 'tabIndex') {\n            el.tabIndex = value;\n        }\n        else {\n            el.setAttribute(camelCaseToHyphenCase(key), value.toString());\n        }\n    }\n    result['root'] = el;\n    return result;\n}\nfunction camelCaseToHyphenCase(str) {\n    return str.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n}\nfunction copyAttributes(from, to, filter) {\n    for (const { name, value } of from.attributes) {\n        if (!filter || filter.includes(name)) {\n            to.setAttribute(name, value);\n        }\n    }\n}\nfunction copyAttribute(from, to, name) {\n    const value = from.getAttribute(name);\n    if (value) {\n        to.setAttribute(name, value);\n    }\n    else {\n        to.removeAttribute(name);\n    }\n}\nfunction trackAttributes(from, to, filter) {\n    copyAttributes(from, to, filter);\n    const disposables = new lifecycle_1.DisposableStore();\n    disposables.add(exports.sharedMutationObserver.observe(from, disposables, { attributes: true, attributeFilter: filter })(mutations => {\n        for (const mutation of mutations) {\n            if (mutation.type === 'attributes' && mutation.attributeName) {\n                copyAttribute(from, to, mutation.attributeName);\n            }\n        }\n    }));\n    return disposables;\n}\n/**\n * Helper for calculating the \"safe triangle\" occluded by hovers to avoid early dismissal.\n * @see https://www.smashingmagazine.com/2023/08/better-context-menus-safe-triangles/ for example\n */\nclass SafeTriangle {\n    constructor(originX, originY, target) {\n        this.originX = originX;\n        this.originY = originY;\n        // 4 triangles, 2 points (x, y) stored for each\n        this.triangles = [];\n        const { top, left, right, bottom } = target.getBoundingClientRect();\n        const t = this.triangles;\n        let i = 0;\n        t[i++] = left;\n        t[i++] = top;\n        t[i++] = right;\n        t[i++] = top;\n        t[i++] = left;\n        t[i++] = top;\n        t[i++] = left;\n        t[i++] = bottom;\n        t[i++] = right;\n        t[i++] = top;\n        t[i++] = right;\n        t[i++] = bottom;\n        t[i++] = left;\n        t[i++] = bottom;\n        t[i++] = right;\n        t[i++] = bottom;\n    }\n    contains(x, y) {\n        const { triangles, originX, originY } = this;\n        for (let i = 0; i < 4; i++) {\n            if ((0, numbers_1.isPointWithinTriangle)(x, y, originX, originY, triangles[2 * i], triangles[2 * i + 1], triangles[2 * i + 2], triangles[2 * i + 3])) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\nexports.SafeTriangle = SafeTriangle;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.IframeUtils = void 0;\nexports.parentOriginHash = parentOriginHash;\nconst sameOriginWindowChainCache = new WeakMap();\nfunction getParentWindowIfSameOrigin(w) {\n    if (!w.parent || w.parent === w) {\n        return null;\n    }\n    // Cannot really tell if we have access to the parent window unless we try to access something in it\n    try {\n        const location = w.location;\n        const parentLocation = w.parent.location;\n        if (location.origin !== 'null' && parentLocation.origin !== 'null' && location.origin !== parentLocation.origin) {\n            return null;\n        }\n    }\n    catch (e) {\n        return null;\n    }\n    return w.parent;\n}\nclass IframeUtils {\n    /**\n     * Returns a chain of embedded windows with the same origin (which can be accessed programmatically).\n     * Having a chain of length 1 might mean that the current execution environment is running outside of an iframe or inside an iframe embedded in a window with a different origin.\n     */\n    static getSameOriginWindowChain(targetWindow) {\n        let windowChainCache = sameOriginWindowChainCache.get(targetWindow);\n        if (!windowChainCache) {\n            windowChainCache = [];\n            sameOriginWindowChainCache.set(targetWindow, windowChainCache);\n            let w = targetWindow;\n            let parent;\n            do {\n                parent = getParentWindowIfSameOrigin(w);\n                if (parent) {\n                    windowChainCache.push({\n                        window: new WeakRef(w),\n                        iframeElement: w.frameElement || null\n                    });\n                }\n                else {\n                    windowChainCache.push({\n                        window: new WeakRef(w),\n                        iframeElement: null\n                    });\n                }\n                w = parent;\n            } while (w);\n        }\n        return windowChainCache.slice(0);\n    }\n    /**\n     * Returns the position of `childWindow` relative to `ancestorWindow`\n     */\n    static getPositionOfChildWindowRelativeToAncestorWindow(childWindow, ancestorWindow) {\n        if (!ancestorWindow || childWindow === ancestorWindow) {\n            return {\n                top: 0,\n                left: 0\n            };\n        }\n        let top = 0, left = 0;\n        const windowChain = this.getSameOriginWindowChain(childWindow);\n        for (const windowChainEl of windowChain) {\n            const windowInChain = windowChainEl.window.deref();\n            top += windowInChain?.scrollY ?? 0;\n            left += windowInChain?.scrollX ?? 0;\n            if (windowInChain === ancestorWindow) {\n                break;\n            }\n            if (!windowChainEl.iframeElement) {\n                break;\n            }\n            const boundingRect = windowChainEl.iframeElement.getBoundingClientRect();\n            top += boundingRect.top;\n            left += boundingRect.left;\n        }\n        return {\n            top: top,\n            left: left\n        };\n    }\n}\nexports.IframeUtils = IframeUtils;\n/**\n * Returns a sha-256 composed of `parentOrigin` and `salt` converted to base 32\n */\nasync function parentOriginHash(parentOrigin, salt) {\n    // This same code is also inlined at `src/vs/workbench/services/extensions/worker/webWorkerExtensionHostIframe.html`\n    if (!crypto.subtle) {\n        throw new Error(`'crypto.subtle' is not available so webviews will not work. This is likely because the editor is not running in a secure context (https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts).`);\n    }\n    const strData = JSON.stringify({ parentOrigin, salt });\n    const encoder = new TextEncoder();\n    const arrData = encoder.encode(strData);\n    const hash = await crypto.subtle.digest('sha-256', arrData);\n    return sha256AsBase32(hash);\n}\nfunction sha256AsBase32(bytes) {\n    const array = Array.from(new Uint8Array(bytes));\n    const hexArray = array.map(b => b.toString(16).padStart(2, '0')).join('');\n    // sha256 has 256 bits, so we need at most ceil(lg(2^256-1)/lg(32)) = 52 chars to represent it in base 32\n    return BigInt(`0x${hexArray}`).toString(32).padStart(52, '0');\n}\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StandardKeyboardEvent = void 0;\nexports.printKeyboardEvent = printKeyboardEvent;\nexports.printStandardKeyboardEvent = printStandardKeyboardEvent;\nconst browser = __importStar(require(\"vs/base/browser/browser\"));\nconst keyCodes_1 = require(\"vs/base/common/keyCodes\");\nconst keybindings_1 = require(\"vs/base/common/keybindings\");\nconst platform = __importStar(require(\"vs/base/common/platform\"));\nfunction extractKeyCode(e) {\n    if (e.charCode) {\n        // \"keypress\" events mostly\n        const char = String.fromCharCode(e.charCode).toUpperCase();\n        return keyCodes_1.KeyCodeUtils.fromString(char);\n    }\n    const keyCode = e.keyCode;\n    // browser quirks\n    if (keyCode === 3) {\n        return keyCodes_1.KeyCode.PauseBreak;\n    }\n    else if (browser.isFirefox) {\n        switch (keyCode) {\n            case 59: return keyCodes_1.KeyCode.Semicolon;\n            case 60:\n                if (platform.isLinux) {\n                    return keyCodes_1.KeyCode.IntlBackslash;\n                }\n                break;\n            case 61: return keyCodes_1.KeyCode.Equal;\n            // based on: https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode#numpad_keys\n            case 107: return keyCodes_1.KeyCode.NumpadAdd;\n            case 109: return keyCodes_1.KeyCode.NumpadSubtract;\n            case 173: return keyCodes_1.KeyCode.Minus;\n            case 224:\n                if (platform.isMacintosh) {\n                    return keyCodes_1.KeyCode.Meta;\n                }\n                break;\n        }\n    }\n    else if (browser.isWebKit) {\n        if (platform.isMacintosh && keyCode === 93) {\n            // the two meta keys in the Mac have different key codes (91 and 93)\n            return keyCodes_1.KeyCode.Meta;\n        }\n        else if (!platform.isMacintosh && keyCode === 92) {\n            return keyCodes_1.KeyCode.Meta;\n        }\n    }\n    // cross browser keycodes:\n    return keyCodes_1.EVENT_KEY_CODE_MAP[keyCode] || keyCodes_1.KeyCode.Unknown;\n}\nconst ctrlKeyMod = (platform.isMacintosh ? keyCodes_1.KeyMod.WinCtrl : keyCodes_1.KeyMod.CtrlCmd);\nconst altKeyMod = keyCodes_1.KeyMod.Alt;\nconst shiftKeyMod = keyCodes_1.KeyMod.Shift;\nconst metaKeyMod = (platform.isMacintosh ? keyCodes_1.KeyMod.CtrlCmd : keyCodes_1.KeyMod.WinCtrl);\nfunction printKeyboardEvent(e) {\n    const modifiers = [];\n    if (e.ctrlKey) {\n        modifiers.push(`ctrl`);\n    }\n    if (e.shiftKey) {\n        modifiers.push(`shift`);\n    }\n    if (e.altKey) {\n        modifiers.push(`alt`);\n    }\n    if (e.metaKey) {\n        modifiers.push(`meta`);\n    }\n    return `modifiers: [${modifiers.join(',')}], code: ${e.code}, keyCode: ${e.keyCode}, key: ${e.key}`;\n}\nfunction printStandardKeyboardEvent(e) {\n    const modifiers = [];\n    if (e.ctrlKey) {\n        modifiers.push(`ctrl`);\n    }\n    if (e.shiftKey) {\n        modifiers.push(`shift`);\n    }\n    if (e.altKey) {\n        modifiers.push(`alt`);\n    }\n    if (e.metaKey) {\n        modifiers.push(`meta`);\n    }\n    return `modifiers: [${modifiers.join(',')}], code: ${e.code}, keyCode: ${e.keyCode} ('${keyCodes_1.KeyCodeUtils.toString(e.keyCode)}')`;\n}\nclass StandardKeyboardEvent {\n    constructor(source) {\n        this._standardKeyboardEventBrand = true;\n        const e = source;\n        this.browserEvent = e;\n        this.target = e.target;\n        this.ctrlKey = e.ctrlKey;\n        this.shiftKey = e.shiftKey;\n        this.altKey = e.altKey;\n        this.metaKey = e.metaKey;\n        this.altGraphKey = e.getModifierState?.('AltGraph');\n        this.keyCode = extractKeyCode(e);\n        this.code = e.code;\n        // console.info(e.type + \": keyCode: \" + e.keyCode + \", which: \" + e.which + \", charCode: \" + e.charCode + \", detail: \" + e.detail + \" ====> \" + this.keyCode + ' -- ' + KeyCode[this.keyCode]);\n        this.ctrlKey = this.ctrlKey || this.keyCode === keyCodes_1.KeyCode.Ctrl;\n        this.altKey = this.altKey || this.keyCode === keyCodes_1.KeyCode.Alt;\n        this.shiftKey = this.shiftKey || this.keyCode === keyCodes_1.KeyCode.Shift;\n        this.metaKey = this.metaKey || this.keyCode === keyCodes_1.KeyCode.Meta;\n        this._asKeybinding = this._computeKeybinding();\n        this._asKeyCodeChord = this._computeKeyCodeChord();\n        // console.log(`code: ${e.code}, keyCode: ${e.keyCode}, key: ${e.key}`);\n    }\n    preventDefault() {\n        if (this.browserEvent && this.browserEvent.preventDefault) {\n            this.browserEvent.preventDefault();\n        }\n    }\n    stopPropagation() {\n        if (this.browserEvent && this.browserEvent.stopPropagation) {\n            this.browserEvent.stopPropagation();\n        }\n    }\n    toKeyCodeChord() {\n        return this._asKeyCodeChord;\n    }\n    equals(other) {\n        return this._asKeybinding === other;\n    }\n    _computeKeybinding() {\n        let key = keyCodes_1.KeyCode.Unknown;\n        if (this.keyCode !== keyCodes_1.KeyCode.Ctrl && this.keyCode !== keyCodes_1.KeyCode.Shift && this.keyCode !== keyCodes_1.KeyCode.Alt && this.keyCode !== keyCodes_1.KeyCode.Meta) {\n            key = this.keyCode;\n        }\n        let result = 0;\n        if (this.ctrlKey) {\n            result |= ctrlKeyMod;\n        }\n        if (this.altKey) {\n            result |= altKeyMod;\n        }\n        if (this.shiftKey) {\n            result |= shiftKeyMod;\n        }\n        if (this.metaKey) {\n            result |= metaKeyMod;\n        }\n        result |= key;\n        return result;\n    }\n    _computeKeyCodeChord() {\n        let key = keyCodes_1.KeyCode.Unknown;\n        if (this.keyCode !== keyCodes_1.KeyCode.Ctrl && this.keyCode !== keyCodes_1.KeyCode.Shift && this.keyCode !== keyCodes_1.KeyCode.Alt && this.keyCode !== keyCodes_1.KeyCode.Meta) {\n            key = this.keyCode;\n        }\n        return new keybindings_1.KeyCodeChord(this.ctrlKey, this.shiftKey, this.altKey, this.metaKey, key);\n    }\n}\nexports.StandardKeyboardEvent = StandardKeyboardEvent;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StandardWheelEvent = exports.DragMouseEvent = exports.StandardMouseEvent = void 0;\nconst browser = __importStar(require(\"vs/base/browser/browser\"));\nconst iframe_1 = require(\"vs/base/browser/iframe\");\nconst platform = __importStar(require(\"vs/base/common/platform\"));\nclass StandardMouseEvent {\n    constructor(targetWindow, e) {\n        this.timestamp = Date.now();\n        this.browserEvent = e;\n        this.leftButton = e.button === 0;\n        this.middleButton = e.button === 1;\n        this.rightButton = e.button === 2;\n        this.buttons = e.buttons;\n        this.target = e.target;\n        this.detail = e.detail || 1;\n        if (e.type === 'dblclick') {\n            this.detail = 2;\n        }\n        this.ctrlKey = e.ctrlKey;\n        this.shiftKey = e.shiftKey;\n        this.altKey = e.altKey;\n        this.metaKey = e.metaKey;\n        if (typeof e.pageX === 'number') {\n            this.posx = e.pageX;\n            this.posy = e.pageY;\n        }\n        else {\n            // Probably hit by MSGestureEvent\n            this.posx = e.clientX + this.target.ownerDocument.body.scrollLeft + this.target.ownerDocument.documentElement.scrollLeft;\n            this.posy = e.clientY + this.target.ownerDocument.body.scrollTop + this.target.ownerDocument.documentElement.scrollTop;\n        }\n        // Find the position of the iframe this code is executing in relative to the iframe where the event was captured.\n        const iframeOffsets = iframe_1.IframeUtils.getPositionOfChildWindowRelativeToAncestorWindow(targetWindow, e.view);\n        this.posx -= iframeOffsets.left;\n        this.posy -= iframeOffsets.top;\n    }\n    preventDefault() {\n        this.browserEvent.preventDefault();\n    }\n    stopPropagation() {\n        this.browserEvent.stopPropagation();\n    }\n}\nexports.StandardMouseEvent = StandardMouseEvent;\nclass DragMouseEvent extends StandardMouseEvent {\n    constructor(targetWindow, e) {\n        super(targetWindow, e);\n        this.dataTransfer = e.dataTransfer;\n    }\n}\nexports.DragMouseEvent = DragMouseEvent;\nclass StandardWheelEvent {\n    constructor(e, deltaX = 0, deltaY = 0) {\n        this.browserEvent = e || null;\n        this.target = e ? (e.target || e.targetNode || e.srcElement) : null;\n        this.deltaY = deltaY;\n        this.deltaX = deltaX;\n        let shouldFactorDPR = false;\n        if (browser.isChrome) {\n            // Chrome version >= 123 contains the fix to factor devicePixelRatio into the wheel event.\n            // See https://chromium.googlesource.com/chromium/src.git/+/be51b448441ff0c9d1f17e0f25c4bf1ab3f11f61\n            const chromeVersionMatch = navigator.userAgent.match(/Chrome\\/(\\d+)/);\n            const chromeMajorVersion = chromeVersionMatch ? parseInt(chromeVersionMatch[1]) : 123;\n            shouldFactorDPR = chromeMajorVersion <= 122;\n        }\n        if (e) {\n            // Old (deprecated) wheel events\n            const e1 = e;\n            const e2 = e;\n            const devicePixelRatio = e.view?.devicePixelRatio || 1;\n            // vertical delta scroll\n            if (typeof e1.wheelDeltaY !== 'undefined') {\n                if (shouldFactorDPR) {\n                    // Refs https://github.com/microsoft/vscode/issues/146403#issuecomment-1854538928\n                    this.deltaY = e1.wheelDeltaY / (120 * devicePixelRatio);\n                }\n                else {\n                    this.deltaY = e1.wheelDeltaY / 120;\n                }\n            }\n            else if (typeof e2.VERTICAL_AXIS !== 'undefined' && e2.axis === e2.VERTICAL_AXIS) {\n                this.deltaY = -e2.detail / 3;\n            }\n            else if (e.type === 'wheel') {\n                // Modern wheel event\n                // https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent\n                const ev = e;\n                if (ev.deltaMode === ev.DOM_DELTA_LINE) {\n                    // the deltas are expressed in lines\n                    if (browser.isFirefox && !platform.isMacintosh) {\n                        this.deltaY = -e.deltaY / 3;\n                    }\n                    else {\n                        this.deltaY = -e.deltaY;\n                    }\n                }\n                else {\n                    this.deltaY = -e.deltaY / 40;\n                }\n            }\n            // horizontal delta scroll\n            if (typeof e1.wheelDeltaX !== 'undefined') {\n                if (browser.isSafari && platform.isWindows) {\n                    this.deltaX = -(e1.wheelDeltaX / 120);\n                }\n                else if (shouldFactorDPR) {\n                    // Refs https://github.com/microsoft/vscode/issues/146403#issuecomment-1854538928\n                    this.deltaX = e1.wheelDeltaX / (120 * devicePixelRatio);\n                }\n                else {\n                    this.deltaX = e1.wheelDeltaX / 120;\n                }\n            }\n            else if (typeof e2.HORIZONTAL_AXIS !== 'undefined' && e2.axis === e2.HORIZONTAL_AXIS) {\n                this.deltaX = -e.detail / 3;\n            }\n            else if (e.type === 'wheel') {\n                // Modern wheel event\n                // https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent\n                const ev = e;\n                if (ev.deltaMode === ev.DOM_DELTA_LINE) {\n                    // the deltas are expressed in lines\n                    if (browser.isFirefox && !platform.isMacintosh) {\n                        this.deltaX = -e.deltaX / 3;\n                    }\n                    else {\n                        this.deltaX = -e.deltaX;\n                    }\n                }\n                else {\n                    this.deltaX = -e.deltaX / 40;\n                }\n            }\n            // Assume a vertical scroll if nothing else worked\n            if (this.deltaY === 0 && this.deltaX === 0 && e.wheelDelta) {\n                if (shouldFactorDPR) {\n                    // Refs https://github.com/microsoft/vscode/issues/146403#issuecomment-1854538928\n                    this.deltaY = e.wheelDelta / (120 * devicePixelRatio);\n                }\n                else {\n                    this.deltaY = e.wheelDelta / 120;\n                }\n            }\n        }\n    }\n    preventDefault() {\n        this.browserEvent?.preventDefault();\n    }\n    stopPropagation() {\n        this.browserEvent?.stopPropagation();\n    }\n}\nexports.StandardWheelEvent = StandardWheelEvent;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mainWindow = void 0;\nexports.ensureCodeWindow = ensureCodeWindow;\nfunction ensureCodeWindow(targetWindow, fallbackWindowId) {\n}\n// eslint-disable-next-line no-restricted-globals\nexports.mainWindow = (typeof window === 'object' ? window : globalThis);\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Permutation = exports.CallbackIterable = exports.ArrayQueue = exports.booleanComparator = exports.numberComparator = exports.CompareResult = void 0;\nexports.tail = tail;\nexports.tail2 = tail2;\nexports.equals = equals;\nexports.removeFastWithoutKeepingOrder = removeFastWithoutKeepingOrder;\nexports.binarySearch = binarySearch;\nexports.binarySearch2 = binarySearch2;\nexports.quickSelect = quickSelect;\nexports.groupBy = groupBy;\nexports.groupAdjacentBy = groupAdjacentBy;\nexports.forEachAdjacent = forEachAdjacent;\nexports.forEachWithNeighbors = forEachWithNeighbors;\nexports.sortedDiff = sortedDiff;\nexports.delta = delta;\nexports.top = top;\nexports.topAsync = topAsync;\nexports.coalesce = coalesce;\nexports.coalesceInPlace = coalesceInPlace;\nexports.move = move;\nexports.isFalsyOrEmpty = isFalsyOrEmpty;\nexports.isNonEmptyArray = isNonEmptyArray;\nexports.distinct = distinct;\nexports.uniqueFilter = uniqueFilter;\nexports.firstOrDefault = firstOrDefault;\nexports.lastOrDefault = lastOrDefault;\nexports.commonPrefixLength = commonPrefixLength;\nexports.range = range;\nexports.index = index;\nexports.insert = insert;\nexports.remove = remove;\nexports.arrayInsert = arrayInsert;\nexports.shuffle = shuffle;\nexports.pushToStart = pushToStart;\nexports.pushToEnd = pushToEnd;\nexports.pushMany = pushMany;\nexports.mapArrayOrNot = mapArrayOrNot;\nexports.asArray = asArray;\nexports.getRandomElement = getRandomElement;\nexports.insertInto = insertInto;\nexports.splice = splice;\nexports.compareBy = compareBy;\nexports.tieBreakComparators = tieBreakComparators;\nexports.reverseOrder = reverseOrder;\nconst errors_1 = require(\"vs/base/common/errors\");\nconst arraysFind_1 = require(\"./arraysFind\");\n/**\n * Returns the last element of an array.\n * @param array The array.\n * @param n Which element from the end (default is zero).\n */\nfunction tail(array, n = 0) {\n    return array[array.length - (1 + n)];\n}\nfunction tail2(arr) {\n    if (arr.length === 0) {\n        throw new Error('Invalid tail call');\n    }\n    return [arr.slice(0, arr.length - 1), arr[arr.length - 1]];\n}\nfunction equals(one, other, itemEquals = (a, b) => a === b) {\n    if (one === other) {\n        return true;\n    }\n    if (!one || !other) {\n        return false;\n    }\n    if (one.length !== other.length) {\n        return false;\n    }\n    for (let i = 0, len = one.length; i < len; i++) {\n        if (!itemEquals(one[i], other[i])) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Remove the element at `index` by replacing it with the last element. This is faster than `splice`\n * but changes the order of the array\n */\nfunction removeFastWithoutKeepingOrder(array, index) {\n    const last = array.length - 1;\n    if (index < last) {\n        array[index] = array[last];\n    }\n    array.pop();\n}\n/**\n * Performs a binary search algorithm over a sorted array.\n *\n * @param array The array being searched.\n * @param key The value we search for.\n * @param comparator A function that takes two array elements and returns zero\n *   if they are equal, a negative number if the first element precedes the\n *   second one in the sorting order, or a positive number if the second element\n *   precedes the first one.\n * @return See {@link binarySearch2}\n */\nfunction binarySearch(array, key, comparator) {\n    return binarySearch2(array.length, i => comparator(array[i], key));\n}\n/**\n * Performs a binary search algorithm over a sorted collection. Useful for cases\n * when we need to perform a binary search over something that isn't actually an\n * array, and converting data to an array would defeat the use of binary search\n * in the first place.\n *\n * @param length The collection length.\n * @param compareToKey A function that takes an index of an element in the\n *   collection and returns zero if the value at this index is equal to the\n *   search key, a negative number if the value precedes the search key in the\n *   sorting order, or a positive number if the search key precedes the value.\n * @return A non-negative index of an element, if found. If not found, the\n *   result is -(n+1) (or ~n, using bitwise notation), where n is the index\n *   where the key should be inserted to maintain the sorting order.\n */\nfunction binarySearch2(length, compareToKey) {\n    let low = 0, high = length - 1;\n    while (low <= high) {\n        const mid = ((low + high) / 2) | 0;\n        const comp = compareToKey(mid);\n        if (comp < 0) {\n            low = mid + 1;\n        }\n        else if (comp > 0) {\n            high = mid - 1;\n        }\n        else {\n            return mid;\n        }\n    }\n    return -(low + 1);\n}\nfunction quickSelect(nth, data, compare) {\n    nth = nth | 0;\n    if (nth >= data.length) {\n        throw new TypeError('invalid index');\n    }\n    const pivotValue = data[Math.floor(data.length * Math.random())];\n    const lower = [];\n    const higher = [];\n    const pivots = [];\n    for (const value of data) {\n        const val = compare(value, pivotValue);\n        if (val < 0) {\n            lower.push(value);\n        }\n        else if (val > 0) {\n            higher.push(value);\n        }\n        else {\n            pivots.push(value);\n        }\n    }\n    if (nth < lower.length) {\n        return quickSelect(nth, lower, compare);\n    }\n    else if (nth < lower.length + pivots.length) {\n        return pivots[0];\n    }\n    else {\n        return quickSelect(nth - (lower.length + pivots.length), higher, compare);\n    }\n}\nfunction groupBy(data, compare) {\n    const result = [];\n    let currentGroup = undefined;\n    for (const element of data.slice(0).sort(compare)) {\n        if (!currentGroup || compare(currentGroup[0], element) !== 0) {\n            currentGroup = [element];\n            result.push(currentGroup);\n        }\n        else {\n            currentGroup.push(element);\n        }\n    }\n    return result;\n}\n/**\n * Splits the given items into a list of (non-empty) groups.\n * `shouldBeGrouped` is used to decide if two consecutive items should be in the same group.\n * The order of the items is preserved.\n */\nfunction* groupAdjacentBy(items, shouldBeGrouped) {\n    let currentGroup;\n    let last;\n    for (const item of items) {\n        if (last !== undefined && shouldBeGrouped(last, item)) {\n            currentGroup.push(item);\n        }\n        else {\n            if (currentGroup) {\n                yield currentGroup;\n            }\n            currentGroup = [item];\n        }\n        last = item;\n    }\n    if (currentGroup) {\n        yield currentGroup;\n    }\n}\nfunction forEachAdjacent(arr, f) {\n    for (let i = 0; i <= arr.length; i++) {\n        f(i === 0 ? undefined : arr[i - 1], i === arr.length ? undefined : arr[i]);\n    }\n}\nfunction forEachWithNeighbors(arr, f) {\n    for (let i = 0; i < arr.length; i++) {\n        f(i === 0 ? undefined : arr[i - 1], arr[i], i + 1 === arr.length ? undefined : arr[i + 1]);\n    }\n}\n/**\n * Diffs two *sorted* arrays and computes the splices which apply the diff.\n */\nfunction sortedDiff(before, after, compare) {\n    const result = [];\n    function pushSplice(start, deleteCount, toInsert) {\n        if (deleteCount === 0 && toInsert.length === 0) {\n            return;\n        }\n        const latest = result[result.length - 1];\n        if (latest && latest.start + latest.deleteCount === start) {\n            latest.deleteCount += deleteCount;\n            latest.toInsert.push(...toInsert);\n        }\n        else {\n            result.push({ start, deleteCount, toInsert });\n        }\n    }\n    let beforeIdx = 0;\n    let afterIdx = 0;\n    while (true) {\n        if (beforeIdx === before.length) {\n            pushSplice(beforeIdx, 0, after.slice(afterIdx));\n            break;\n        }\n        if (afterIdx === after.length) {\n            pushSplice(beforeIdx, before.length - beforeIdx, []);\n            break;\n        }\n        const beforeElement = before[beforeIdx];\n        const afterElement = after[afterIdx];\n        const n = compare(beforeElement, afterElement);\n        if (n === 0) {\n            // equal\n            beforeIdx += 1;\n            afterIdx += 1;\n        }\n        else if (n < 0) {\n            // beforeElement is smaller -> before element removed\n            pushSplice(beforeIdx, 1, []);\n            beforeIdx += 1;\n        }\n        else if (n > 0) {\n            // beforeElement is greater -> after element added\n            pushSplice(beforeIdx, 0, [afterElement]);\n            afterIdx += 1;\n        }\n    }\n    return result;\n}\n/**\n * Takes two *sorted* arrays and computes their delta (removed, added elements).\n * Finishes in `Math.min(before.length, after.length)` steps.\n */\nfunction delta(before, after, compare) {\n    const splices = sortedDiff(before, after, compare);\n    const removed = [];\n    const added = [];\n    for (const splice of splices) {\n        removed.push(...before.slice(splice.start, splice.start + splice.deleteCount));\n        added.push(...splice.toInsert);\n    }\n    return { removed, added };\n}\n/**\n * Returns the top N elements from the array.\n *\n * Faster than sorting the entire array when the array is a lot larger than N.\n *\n * @param array The unsorted array.\n * @param compare A sort function for the elements.\n * @param n The number of elements to return.\n * @return The first n elements from array when sorted with compare.\n */\nfunction top(array, compare, n) {\n    if (n === 0) {\n        return [];\n    }\n    const result = array.slice(0, n).sort(compare);\n    topStep(array, compare, result, n, array.length);\n    return result;\n}\n/**\n * Asynchronous variant of `top()` allowing for splitting up work in batches between which the event loop can run.\n *\n * Returns the top N elements from the array.\n *\n * Faster than sorting the entire array when the array is a lot larger than N.\n *\n * @param array The unsorted array.\n * @param compare A sort function for the elements.\n * @param n The number of elements to return.\n * @param batch The number of elements to examine before yielding to the event loop.\n * @return The first n elements from array when sorted with compare.\n */\nfunction topAsync(array, compare, n, batch, token) {\n    if (n === 0) {\n        return Promise.resolve([]);\n    }\n    return new Promise((resolve, reject) => {\n        (async () => {\n            const o = array.length;\n            const result = array.slice(0, n).sort(compare);\n            for (let i = n, m = Math.min(n + batch, o); i < o; i = m, m = Math.min(m + batch, o)) {\n                if (i > n) {\n                    await new Promise(resolve => setTimeout(resolve)); // any other delay function would starve I/O\n                }\n                if (token && token.isCancellationRequested) {\n                    throw new errors_1.CancellationError();\n                }\n                topStep(array, compare, result, i, m);\n            }\n            return result;\n        })()\n            .then(resolve, reject);\n    });\n}\nfunction topStep(array, compare, result, i, m) {\n    for (const n = result.length; i < m; i++) {\n        const element = array[i];\n        if (compare(element, result[n - 1]) < 0) {\n            result.pop();\n            const j = (0, arraysFind_1.findFirstIdxMonotonousOrArrLen)(result, e => compare(element, e) < 0);\n            result.splice(j, 0, element);\n        }\n    }\n}\n/**\n * @returns New array with all falsy values removed. The original array IS NOT modified.\n */\nfunction coalesce(array) {\n    return array.filter((e) => !!e);\n}\n/**\n * Remove all falsy values from `array`. The original array IS modified.\n */\nfunction coalesceInPlace(array) {\n    let to = 0;\n    for (let i = 0; i < array.length; i++) {\n        if (!!array[i]) {\n            array[to] = array[i];\n            to += 1;\n        }\n    }\n    array.length = to;\n}\n/**\n * @deprecated Use `Array.copyWithin` instead\n */\nfunction move(array, from, to) {\n    array.splice(to, 0, array.splice(from, 1)[0]);\n}\n/**\n * @returns false if the provided object is an array and not empty.\n */\nfunction isFalsyOrEmpty(obj) {\n    return !Array.isArray(obj) || obj.length === 0;\n}\nfunction isNonEmptyArray(obj) {\n    return Array.isArray(obj) && obj.length > 0;\n}\n/**\n * Removes duplicates from the given array. The optional keyFn allows to specify\n * how elements are checked for equality by returning an alternate value for each.\n */\nfunction distinct(array, keyFn = value => value) {\n    const seen = new Set();\n    return array.filter(element => {\n        const key = keyFn(element);\n        if (seen.has(key)) {\n            return false;\n        }\n        seen.add(key);\n        return true;\n    });\n}\nfunction uniqueFilter(keyFn) {\n    const seen = new Set();\n    return element => {\n        const key = keyFn(element);\n        if (seen.has(key)) {\n            return false;\n        }\n        seen.add(key);\n        return true;\n    };\n}\nfunction firstOrDefault(array, notFoundValue) {\n    return array.length > 0 ? array[0] : notFoundValue;\n}\nfunction lastOrDefault(array, notFoundValue) {\n    return array.length > 0 ? array[array.length - 1] : notFoundValue;\n}\nfunction commonPrefixLength(one, other, equals = (a, b) => a === b) {\n    let result = 0;\n    for (let i = 0, len = Math.min(one.length, other.length); i < len && equals(one[i], other[i]); i++) {\n        result++;\n    }\n    return result;\n}\nfunction range(arg, to) {\n    let from = typeof to === 'number' ? arg : 0;\n    if (typeof to === 'number') {\n        from = arg;\n    }\n    else {\n        from = 0;\n        to = arg;\n    }\n    const result = [];\n    if (from <= to) {\n        for (let i = from; i < to; i++) {\n            result.push(i);\n        }\n    }\n    else {\n        for (let i = from; i > to; i--) {\n            result.push(i);\n        }\n    }\n    return result;\n}\nfunction index(array, indexer, mapper) {\n    return array.reduce((r, t) => {\n        r[indexer(t)] = mapper ? mapper(t) : t;\n        return r;\n    }, Object.create(null));\n}\n/**\n * Inserts an element into an array. Returns a function which, when\n * called, will remove that element from the array.\n *\n * @deprecated In almost all cases, use a `Set<T>` instead.\n */\nfunction insert(array, element) {\n    array.push(element);\n    return () => remove(array, element);\n}\n/**\n * Removes an element from an array if it can be found.\n *\n * @deprecated In almost all cases, use a `Set<T>` instead.\n */\nfunction remove(array, element) {\n    const index = array.indexOf(element);\n    if (index > -1) {\n        array.splice(index, 1);\n        return element;\n    }\n    return undefined;\n}\n/**\n * Insert `insertArr` inside `target` at `insertIndex`.\n * Please don't touch unless you understand https://jsperf.com/inserting-an-array-within-an-array\n */\nfunction arrayInsert(target, insertIndex, insertArr) {\n    const before = target.slice(0, insertIndex);\n    const after = target.slice(insertIndex);\n    return before.concat(insertArr, after);\n}\n/**\n * Uses Fisher-Yates shuffle to shuffle the given array\n */\nfunction shuffle(array, _seed) {\n    let rand;\n    if (typeof _seed === 'number') {\n        let seed = _seed;\n        // Seeded random number generator in JS. Modified from:\n        // https://stackoverflow.com/questions/521295/seeding-the-random-number-generator-in-javascript\n        rand = () => {\n            const x = Math.sin(seed++) * 179426549; // throw away most significant digits and reduce any potential bias\n            return x - Math.floor(x);\n        };\n    }\n    else {\n        rand = Math.random;\n    }\n    for (let i = array.length - 1; i > 0; i -= 1) {\n        const j = Math.floor(rand() * (i + 1));\n        const temp = array[i];\n        array[i] = array[j];\n        array[j] = temp;\n    }\n}\n/**\n * Pushes an element to the start of the array, if found.\n */\nfunction pushToStart(arr, value) {\n    const index = arr.indexOf(value);\n    if (index > -1) {\n        arr.splice(index, 1);\n        arr.unshift(value);\n    }\n}\n/**\n * Pushes an element to the end of the array, if found.\n */\nfunction pushToEnd(arr, value) {\n    const index = arr.indexOf(value);\n    if (index > -1) {\n        arr.splice(index, 1);\n        arr.push(value);\n    }\n}\nfunction pushMany(arr, items) {\n    for (const item of items) {\n        arr.push(item);\n    }\n}\nfunction mapArrayOrNot(items, fn) {\n    return Array.isArray(items) ?\n        items.map(fn) :\n        fn(items);\n}\nfunction asArray(x) {\n    return Array.isArray(x) ? x : [x];\n}\nfunction getRandomElement(arr) {\n    return arr[Math.floor(Math.random() * arr.length)];\n}\n/**\n * Insert the new items in the array.\n * @param array The original array.\n * @param start The zero-based location in the array from which to start inserting elements.\n * @param newItems The items to be inserted\n */\nfunction insertInto(array, start, newItems) {\n    const startIdx = getActualStartIndex(array, start);\n    const originalLength = array.length;\n    const newItemsLength = newItems.length;\n    array.length = originalLength + newItemsLength;\n    // Move the items after the start index, start from the end so that we don't overwrite any value.\n    for (let i = originalLength - 1; i >= startIdx; i--) {\n        array[i + newItemsLength] = array[i];\n    }\n    for (let i = 0; i < newItemsLength; i++) {\n        array[i + startIdx] = newItems[i];\n    }\n}\n/**\n * Removes elements from an array and inserts new elements in their place, returning the deleted elements. Alternative to the native Array.splice method, it\n * can only support limited number of items due to the maximum call stack size limit.\n * @param array The original array.\n * @param start The zero-based location in the array from which to start removing elements.\n * @param deleteCount The number of elements to remove.\n * @returns An array containing the elements that were deleted.\n */\nfunction splice(array, start, deleteCount, newItems) {\n    const index = getActualStartIndex(array, start);\n    let result = array.splice(index, deleteCount);\n    if (result === undefined) {\n        // see https://bugs.webkit.org/show_bug.cgi?id=261140\n        result = [];\n    }\n    insertInto(array, index, newItems);\n    return result;\n}\n/**\n * Determine the actual start index (same logic as the native splice() or slice())\n * If greater than the length of the array, start will be set to the length of the array. In this case, no element will be deleted but the method will behave as an adding function, adding as many element as item[n*] provided.\n * If negative, it will begin that many elements from the end of the array. (In this case, the origin -1, meaning -n is the index of the nth last element, and is therefore equivalent to the index of array.length - n.) If array.length + start is less than 0, it will begin from index 0.\n * @param array The target array.\n * @param start The operation index.\n */\nfunction getActualStartIndex(array, start) {\n    return start < 0 ? Math.max(start + array.length, 0) : Math.min(start, array.length);\n}\nvar CompareResult;\n(function (CompareResult) {\n    function isLessThan(result) {\n        return result < 0;\n    }\n    CompareResult.isLessThan = isLessThan;\n    function isLessThanOrEqual(result) {\n        return result <= 0;\n    }\n    CompareResult.isLessThanOrEqual = isLessThanOrEqual;\n    function isGreaterThan(result) {\n        return result > 0;\n    }\n    CompareResult.isGreaterThan = isGreaterThan;\n    function isNeitherLessOrGreaterThan(result) {\n        return result === 0;\n    }\n    CompareResult.isNeitherLessOrGreaterThan = isNeitherLessOrGreaterThan;\n    CompareResult.greaterThan = 1;\n    CompareResult.lessThan = -1;\n    CompareResult.neitherLessOrGreaterThan = 0;\n})(CompareResult || (exports.CompareResult = CompareResult = {}));\nfunction compareBy(selector, comparator) {\n    return (a, b) => comparator(selector(a), selector(b));\n}\nfunction tieBreakComparators(...comparators) {\n    return (item1, item2) => {\n        for (const comparator of comparators) {\n            const result = comparator(item1, item2);\n            if (!CompareResult.isNeitherLessOrGreaterThan(result)) {\n                return result;\n            }\n        }\n        return CompareResult.neitherLessOrGreaterThan;\n    };\n}\n/**\n * The natural order on numbers.\n*/\nconst numberComparator = (a, b) => a - b;\nexports.numberComparator = numberComparator;\nconst booleanComparator = (a, b) => (0, exports.numberComparator)(a ? 1 : 0, b ? 1 : 0);\nexports.booleanComparator = booleanComparator;\nfunction reverseOrder(comparator) {\n    return (a, b) => -comparator(a, b);\n}\nclass ArrayQueue {\n    /**\n     * Constructs a queue that is backed by the given array. Runtime is O(1).\n    */\n    constructor(items) {\n        this.items = items;\n        this.firstIdx = 0;\n        this.lastIdx = this.items.length - 1;\n    }\n    get length() {\n        return this.lastIdx - this.firstIdx + 1;\n    }\n    /**\n     * Consumes elements from the beginning of the queue as long as the predicate returns true.\n     * If no elements were consumed, `null` is returned. Has a runtime of O(result.length).\n    */\n    takeWhile(predicate) {\n        // P(k) := k <= this.lastIdx && predicate(this.items[k])\n        // Find s := min { k | k >= this.firstIdx && !P(k) } and return this.data[this.firstIdx...s)\n        let startIdx = this.firstIdx;\n        while (startIdx < this.items.length && predicate(this.items[startIdx])) {\n            startIdx++;\n        }\n        const result = startIdx === this.firstIdx ? null : this.items.slice(this.firstIdx, startIdx);\n        this.firstIdx = startIdx;\n        return result;\n    }\n    /**\n     * Consumes elements from the end of the queue as long as the predicate returns true.\n     * If no elements were consumed, `null` is returned.\n     * The result has the same order as the underlying array!\n    */\n    takeFromEndWhile(predicate) {\n        // P(k) := this.firstIdx >= k && predicate(this.items[k])\n        // Find s := max { k | k <= this.lastIdx && !P(k) } and return this.data(s...this.lastIdx]\n        let endIdx = this.lastIdx;\n        while (endIdx >= 0 && predicate(this.items[endIdx])) {\n            endIdx--;\n        }\n        const result = endIdx === this.lastIdx ? null : this.items.slice(endIdx + 1, this.lastIdx + 1);\n        this.lastIdx = endIdx;\n        return result;\n    }\n    peek() {\n        if (this.length === 0) {\n            return undefined;\n        }\n        return this.items[this.firstIdx];\n    }\n    peekLast() {\n        if (this.length === 0) {\n            return undefined;\n        }\n        return this.items[this.lastIdx];\n    }\n    dequeue() {\n        const result = this.items[this.firstIdx];\n        this.firstIdx++;\n        return result;\n    }\n    removeLast() {\n        const result = this.items[this.lastIdx];\n        this.lastIdx--;\n        return result;\n    }\n    takeCount(count) {\n        const result = this.items.slice(this.firstIdx, this.firstIdx + count);\n        this.firstIdx += count;\n        return result;\n    }\n}\nexports.ArrayQueue = ArrayQueue;\n/**\n * This class is faster than an iterator and array for lazy computed data.\n*/\nclass CallbackIterable {\n    static { this.empty = new CallbackIterable(_callback => { }); }\n    constructor(\n    /**\n     * Calls the callback for every item.\n     * Stops when the callback returns false.\n    */\n    iterate) {\n        this.iterate = iterate;\n    }\n    forEach(handler) {\n        this.iterate(item => { handler(item); return true; });\n    }\n    toArray() {\n        const result = [];\n        this.iterate(item => { result.push(item); return true; });\n        return result;\n    }\n    filter(predicate) {\n        return new CallbackIterable(cb => this.iterate(item => predicate(item) ? cb(item) : true));\n    }\n    map(mapFn) {\n        return new CallbackIterable(cb => this.iterate(item => cb(mapFn(item))));\n    }\n    some(predicate) {\n        let result = false;\n        this.iterate(item => { result = predicate(item); return !result; });\n        return result;\n    }\n    findFirst(predicate) {\n        let result;\n        this.iterate(item => {\n            if (predicate(item)) {\n                result = item;\n                return false;\n            }\n            return true;\n        });\n        return result;\n    }\n    findLast(predicate) {\n        let result;\n        this.iterate(item => {\n            if (predicate(item)) {\n                result = item;\n            }\n            return true;\n        });\n        return result;\n    }\n    findLastMaxBy(comparator) {\n        let result;\n        let first = true;\n        this.iterate(item => {\n            if (first || CompareResult.isGreaterThan(comparator(item, result))) {\n                first = false;\n                result = item;\n            }\n            return true;\n        });\n        return result;\n    }\n}\nexports.CallbackIterable = CallbackIterable;\n/**\n * Represents a re-arrangement of items in an array.\n */\nclass Permutation {\n    constructor(_indexMap) {\n        this._indexMap = _indexMap;\n    }\n    /**\n     * Returns a permutation that sorts the given array according to the given compare function.\n     */\n    static createSortPermutation(arr, compareFn) {\n        const sortIndices = Array.from(arr.keys()).sort((index1, index2) => compareFn(arr[index1], arr[index2]));\n        return new Permutation(sortIndices);\n    }\n    /**\n     * Returns a new array with the elements of the given array re-arranged according to this permutation.\n     */\n    apply(arr) {\n        return arr.map((_, index) => arr[this._indexMap[index]]);\n    }\n    /**\n     * Returns a new permutation that undoes the re-arrangement of this permutation.\n    */\n    inverse() {\n        const inverseIndexMap = this._indexMap.slice();\n        for (let i = 0; i < this._indexMap.length; i++) {\n            inverseIndexMap[this._indexMap[i]] = i;\n        }\n        return new Permutation(inverseIndexMap);\n    }\n}\nexports.Permutation = Permutation;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MonotonousArray = void 0;\nexports.findLast = findLast;\nexports.findLastIdx = findLastIdx;\nexports.findLastMonotonous = findLastMonotonous;\nexports.findLastIdxMonotonous = findLastIdxMonotonous;\nexports.findFirstMonotonous = findFirstMonotonous;\nexports.findFirstIdxMonotonousOrArrLen = findFirstIdxMonotonousOrArrLen;\nexports.findFirstIdxMonotonous = findFirstIdxMonotonous;\nexports.findFirstMax = findFirstMax;\nexports.findLastMax = findLastMax;\nexports.findFirstMin = findFirstMin;\nexports.findMaxIdx = findMaxIdx;\nexports.mapFindFirst = mapFindFirst;\nfunction findLast(array, predicate) {\n    const idx = findLastIdx(array, predicate);\n    if (idx === -1) {\n        return undefined;\n    }\n    return array[idx];\n}\nfunction findLastIdx(array, predicate, fromIndex = array.length - 1) {\n    for (let i = fromIndex; i >= 0; i--) {\n        const element = array[i];\n        if (predicate(element)) {\n            return i;\n        }\n    }\n    return -1;\n}\n/**\n * Finds the last item where predicate is true using binary search.\n * `predicate` must be monotonous, i.e. `arr.map(predicate)` must be like `[true, ..., true, false, ..., false]`!\n *\n * @returns `undefined` if no item matches, otherwise the last item that matches the predicate.\n */\nfunction findLastMonotonous(array, predicate) {\n    const idx = findLastIdxMonotonous(array, predicate);\n    return idx === -1 ? undefined : array[idx];\n}\n/**\n * Finds the last item where predicate is true using binary search.\n * `predicate` must be monotonous, i.e. `arr.map(predicate)` must be like `[true, ..., true, false, ..., false]`!\n *\n * @returns `startIdx - 1` if predicate is false for all items, otherwise the index of the last item that matches the predicate.\n */\nfunction findLastIdxMonotonous(array, predicate, startIdx = 0, endIdxEx = array.length) {\n    let i = startIdx;\n    let j = endIdxEx;\n    while (i < j) {\n        const k = Math.floor((i + j) / 2);\n        if (predicate(array[k])) {\n            i = k + 1;\n        }\n        else {\n            j = k;\n        }\n    }\n    return i - 1;\n}\n/**\n * Finds the first item where predicate is true using binary search.\n * `predicate` must be monotonous, i.e. `arr.map(predicate)` must be like `[false, ..., false, true, ..., true]`!\n *\n * @returns `undefined` if no item matches, otherwise the first item that matches the predicate.\n */\nfunction findFirstMonotonous(array, predicate) {\n    const idx = findFirstIdxMonotonousOrArrLen(array, predicate);\n    return idx === array.length ? undefined : array[idx];\n}\n/**\n * Finds the first item where predicate is true using binary search.\n * `predicate` must be monotonous, i.e. `arr.map(predicate)` must be like `[false, ..., false, true, ..., true]`!\n *\n * @returns `endIdxEx` if predicate is false for all items, otherwise the index of the first item that matches the predicate.\n */\nfunction findFirstIdxMonotonousOrArrLen(array, predicate, startIdx = 0, endIdxEx = array.length) {\n    let i = startIdx;\n    let j = endIdxEx;\n    while (i < j) {\n        const k = Math.floor((i + j) / 2);\n        if (predicate(array[k])) {\n            j = k;\n        }\n        else {\n            i = k + 1;\n        }\n    }\n    return i;\n}\nfunction findFirstIdxMonotonous(array, predicate, startIdx = 0, endIdxEx = array.length) {\n    const idx = findFirstIdxMonotonousOrArrLen(array, predicate, startIdx, endIdxEx);\n    return idx === array.length ? -1 : idx;\n}\n/**\n * Use this when\n * * You have a sorted array\n * * You query this array with a monotonous predicate to find the last item that has a certain property.\n * * You query this array multiple times with monotonous predicates that get weaker and weaker.\n */\nclass MonotonousArray {\n    static { this.assertInvariants = false; }\n    constructor(_array) {\n        this._array = _array;\n        this._findLastMonotonousLastIdx = 0;\n    }\n    /**\n     * The predicate must be monotonous, i.e. `arr.map(predicate)` must be like `[true, ..., true, false, ..., false]`!\n     * For subsequent calls, current predicate must be weaker than (or equal to) the previous predicate, i.e. more entries must be `true`.\n     */\n    findLastMonotonous(predicate) {\n        if (MonotonousArray.assertInvariants) {\n            if (this._prevFindLastPredicate) {\n                for (const item of this._array) {\n                    if (this._prevFindLastPredicate(item) && !predicate(item)) {\n                        throw new Error('MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.');\n                    }\n                }\n            }\n            this._prevFindLastPredicate = predicate;\n        }\n        const idx = findLastIdxMonotonous(this._array, predicate, this._findLastMonotonousLastIdx);\n        this._findLastMonotonousLastIdx = idx + 1;\n        return idx === -1 ? undefined : this._array[idx];\n    }\n}\nexports.MonotonousArray = MonotonousArray;\n/**\n * Returns the first item that is equal to or greater than every other item.\n*/\nfunction findFirstMax(array, comparator) {\n    if (array.length === 0) {\n        return undefined;\n    }\n    let max = array[0];\n    for (let i = 1; i < array.length; i++) {\n        const item = array[i];\n        if (comparator(item, max) > 0) {\n            max = item;\n        }\n    }\n    return max;\n}\n/**\n * Returns the last item that is equal to or greater than every other item.\n*/\nfunction findLastMax(array, comparator) {\n    if (array.length === 0) {\n        return undefined;\n    }\n    let max = array[0];\n    for (let i = 1; i < array.length; i++) {\n        const item = array[i];\n        if (comparator(item, max) >= 0) {\n            max = item;\n        }\n    }\n    return max;\n}\n/**\n * Returns the first item that is equal to or less than every other item.\n*/\nfunction findFirstMin(array, comparator) {\n    return findFirstMax(array, (a, b) => -comparator(a, b));\n}\nfunction findMaxIdx(array, comparator) {\n    if (array.length === 0) {\n        return -1;\n    }\n    let maxIdx = 0;\n    for (let i = 1; i < array.length; i++) {\n        const item = array[i];\n        if (comparator(item, array[maxIdx]) > 0) {\n            maxIdx = i;\n        }\n    }\n    return maxIdx;\n}\n/**\n * Returns the first mapped value of the array which is not undefined.\n */\nfunction mapFindFirst(items, mapFn) {\n    for (const value of items) {\n        const mapped = mapFn(value);\n        if (mapped !== undefined) {\n            return mapped;\n        }\n    }\n    return undefined;\n}\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AsyncIterableSource = exports.CancelableAsyncIterableObject = exports.AsyncIterableObject = exports.LazyStatefulPromise = exports.StatefulPromise = exports.Promises = exports.DeferredPromise = exports.IntervalCounter = exports.TaskSequentializer = exports.GlobalIdleValue = exports.AbstractIdleValue = exports._runWhenIdle = exports.runWhenGlobalIdle = exports.ThrottledWorker = exports.RunOnceWorker = exports.ProcessTimeRunOnceScheduler = exports.RunOnceScheduler = exports.IntervalTimer = exports.TimeoutTimer = exports.LimitedQueue = exports.Queue = exports.Limiter = exports.AutoOpenBarrier = exports.Barrier = exports.ThrottledDelayer = exports.Delayer = exports.SequencerByKey = exports.Sequencer = exports.Throttler = void 0;\nexports.isThenable = isThenable;\nexports.createCancelablePromise = createCancelablePromise;\nexports.raceCancellation = raceCancellation;\nexports.raceCancellationError = raceCancellationError;\nexports.raceCancellablePromises = raceCancellablePromises;\nexports.raceTimeout = raceTimeout;\nexports.asPromise = asPromise;\nexports.promiseWithResolvers = promiseWithResolvers;\nexports.timeout = timeout;\nexports.disposableTimeout = disposableTimeout;\nexports.sequence = sequence;\nexports.first = first;\nexports.firstParallel = firstParallel;\nexports.retry = retry;\nexports.createCancelableAsyncIterable = createCancelableAsyncIterable;\nconst cancellation_1 = require(\"vs/base/common/cancellation\");\nconst errors_1 = require(\"vs/base/common/errors\");\nconst event_1 = require(\"vs/base/common/event\");\nconst lifecycle_1 = require(\"vs/base/common/lifecycle\");\nconst platform_1 = require(\"vs/base/common/platform\");\nconst symbols_1 = require(\"./symbols\");\nconst lazy_1 = require(\"vs/base/common/lazy\");\nfunction isThenable(obj) {\n    return !!obj && typeof obj.then === 'function';\n}\nfunction createCancelablePromise(callback) {\n    const source = new cancellation_1.CancellationTokenSource();\n    const thenable = callback(source.token);\n    const promise = new Promise((resolve, reject) => {\n        const subscription = source.token.onCancellationRequested(() => {\n            subscription.dispose();\n            reject(new errors_1.CancellationError());\n        });\n        Promise.resolve(thenable).then(value => {\n            subscription.dispose();\n            source.dispose();\n            resolve(value);\n        }, err => {\n            subscription.dispose();\n            source.dispose();\n            reject(err);\n        });\n    });\n    return new class {\n        cancel() {\n            source.cancel();\n            source.dispose();\n        }\n        then(resolve, reject) {\n            return promise.then(resolve, reject);\n        }\n        catch(reject) {\n            return this.then(undefined, reject);\n        }\n        finally(onfinally) {\n            return promise.finally(onfinally);\n        }\n    };\n}\nfunction raceCancellation(promise, token, defaultValue) {\n    return new Promise((resolve, reject) => {\n        const ref = token.onCancellationRequested(() => {\n            ref.dispose();\n            resolve(defaultValue);\n        });\n        promise.then(resolve, reject).finally(() => ref.dispose());\n    });\n}\n/**\n * Returns a promise that rejects with an {@CancellationError} as soon as the passed token is cancelled.\n * @see {@link raceCancellation}\n */\nfunction raceCancellationError(promise, token) {\n    return new Promise((resolve, reject) => {\n        const ref = token.onCancellationRequested(() => {\n            ref.dispose();\n            reject(new errors_1.CancellationError());\n        });\n        promise.then(resolve, reject).finally(() => ref.dispose());\n    });\n}\n/**\n * Returns as soon as one of the promises resolves or rejects and cancels remaining promises\n */\nasync function raceCancellablePromises(cancellablePromises) {\n    let resolvedPromiseIndex = -1;\n    const promises = cancellablePromises.map((promise, index) => promise.then(result => { resolvedPromiseIndex = index; return result; }));\n    try {\n        const result = await Promise.race(promises);\n        return result;\n    }\n    finally {\n        cancellablePromises.forEach((cancellablePromise, index) => {\n            if (index !== resolvedPromiseIndex) {\n                cancellablePromise.cancel();\n            }\n        });\n    }\n}\nfunction raceTimeout(promise, timeout, onTimeout) {\n    let promiseResolve = undefined;\n    const timer = setTimeout(() => {\n        promiseResolve?.(undefined);\n        onTimeout?.();\n    }, timeout);\n    return Promise.race([\n        promise.finally(() => clearTimeout(timer)),\n        new Promise(resolve => promiseResolve = resolve)\n    ]);\n}\nfunction asPromise(callback) {\n    return new Promise((resolve, reject) => {\n        const item = callback();\n        if (isThenable(item)) {\n            item.then(resolve, reject);\n        }\n        else {\n            resolve(item);\n        }\n    });\n}\n/**\n * Creates and returns a new promise, plus its `resolve` and `reject` callbacks.\n *\n * Replace with standardized [`Promise.withResolvers`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/withResolvers) once it is supported\n */\nfunction promiseWithResolvers() {\n    let resolve;\n    let reject;\n    const promise = new Promise((res, rej) => {\n        resolve = res;\n        reject = rej;\n    });\n    return { promise, resolve: resolve, reject: reject };\n}\n/**\n * A helper to prevent accumulation of sequential async tasks.\n *\n * Imagine a mail man with the sole task of delivering letters. As soon as\n * a letter submitted for delivery, he drives to the destination, delivers it\n * and returns to his base. Imagine that during the trip, N more letters were submitted.\n * When the mail man returns, he picks those N letters and delivers them all in a\n * single trip. Even though N+1 submissions occurred, only 2 deliveries were made.\n *\n * The throttler implements this via the queue() method, by providing it a task\n * factory. Following the example:\n *\n * \t\tconst throttler = new Throttler();\n * \t\tconst letters = [];\n *\n * \t\tfunction deliver() {\n * \t\t\tconst lettersToDeliver = letters;\n * \t\t\tletters = [];\n * \t\t\treturn makeTheTrip(lettersToDeliver);\n * \t\t}\n *\n * \t\tfunction onLetterReceived(l) {\n * \t\t\tletters.push(l);\n * \t\t\tthrottler.queue(deliver);\n * \t\t}\n */\nclass Throttler {\n    constructor() {\n        this.isDisposed = false;\n        this.activePromise = null;\n        this.queuedPromise = null;\n        this.queuedPromiseFactory = null;\n    }\n    queue(promiseFactory) {\n        if (this.isDisposed) {\n            return Promise.reject(new Error('Throttler is disposed'));\n        }\n        if (this.activePromise) {\n            this.queuedPromiseFactory = promiseFactory;\n            if (!this.queuedPromise) {\n                const onComplete = () => {\n                    this.queuedPromise = null;\n                    if (this.isDisposed) {\n                        return;\n                    }\n                    const result = this.queue(this.queuedPromiseFactory);\n                    this.queuedPromiseFactory = null;\n                    return result;\n                };\n                this.queuedPromise = new Promise(resolve => {\n                    this.activePromise.then(onComplete, onComplete).then(resolve);\n                });\n            }\n            return new Promise((resolve, reject) => {\n                this.queuedPromise.then(resolve, reject);\n            });\n        }\n        this.activePromise = promiseFactory();\n        return new Promise((resolve, reject) => {\n            this.activePromise.then((result) => {\n                this.activePromise = null;\n                resolve(result);\n            }, (err) => {\n                this.activePromise = null;\n                reject(err);\n            });\n        });\n    }\n    dispose() {\n        this.isDisposed = true;\n    }\n}\nexports.Throttler = Throttler;\nclass Sequencer {\n    constructor() {\n        this.current = Promise.resolve(null);\n    }\n    queue(promiseTask) {\n        return this.current = this.current.then(() => promiseTask(), () => promiseTask());\n    }\n}\nexports.Sequencer = Sequencer;\nclass SequencerByKey {\n    constructor() {\n        this.promiseMap = new Map();\n    }\n    queue(key, promiseTask) {\n        const runningPromise = this.promiseMap.get(key) ?? Promise.resolve();\n        const newPromise = runningPromise\n            .catch(() => { })\n            .then(promiseTask)\n            .finally(() => {\n            if (this.promiseMap.get(key) === newPromise) {\n                this.promiseMap.delete(key);\n            }\n        });\n        this.promiseMap.set(key, newPromise);\n        return newPromise;\n    }\n}\nexports.SequencerByKey = SequencerByKey;\nconst timeoutDeferred = (timeout, fn) => {\n    let scheduled = true;\n    const handle = setTimeout(() => {\n        scheduled = false;\n        fn();\n    }, timeout);\n    return {\n        isTriggered: () => scheduled,\n        dispose: () => {\n            clearTimeout(handle);\n            scheduled = false;\n        },\n    };\n};\nconst microtaskDeferred = (fn) => {\n    let scheduled = true;\n    queueMicrotask(() => {\n        if (scheduled) {\n            scheduled = false;\n            fn();\n        }\n    });\n    return {\n        isTriggered: () => scheduled,\n        dispose: () => { scheduled = false; },\n    };\n};\n/**\n * A helper to delay (debounce) execution of a task that is being requested often.\n *\n * Following the throttler, now imagine the mail man wants to optimize the number of\n * trips proactively. The trip itself can be long, so he decides not to make the trip\n * as soon as a letter is submitted. Instead he waits a while, in case more\n * letters are submitted. After said waiting period, if no letters were submitted, he\n * decides to make the trip. Imagine that N more letters were submitted after the first\n * one, all within a short period of time between each other. Even though N+1\n * submissions occurred, only 1 delivery was made.\n *\n * The delayer offers this behavior via the trigger() method, into which both the task\n * to be executed and the waiting period (delay) must be passed in as arguments. Following\n * the example:\n *\n * \t\tconst delayer = new Delayer(WAITING_PERIOD);\n * \t\tconst letters = [];\n *\n * \t\tfunction letterReceived(l) {\n * \t\t\tletters.push(l);\n * \t\t\tdelayer.trigger(() => { return makeTheTrip(); });\n * \t\t}\n */\nclass Delayer {\n    constructor(defaultDelay) {\n        this.defaultDelay = defaultDelay;\n        this.deferred = null;\n        this.completionPromise = null;\n        this.doResolve = null;\n        this.doReject = null;\n        this.task = null;\n    }\n    trigger(task, delay = this.defaultDelay) {\n        this.task = task;\n        this.cancelTimeout();\n        if (!this.completionPromise) {\n            this.completionPromise = new Promise((resolve, reject) => {\n                this.doResolve = resolve;\n                this.doReject = reject;\n            }).then(() => {\n                this.completionPromise = null;\n                this.doResolve = null;\n                if (this.task) {\n                    const task = this.task;\n                    this.task = null;\n                    return task();\n                }\n                return undefined;\n            });\n        }\n        const fn = () => {\n            this.deferred = null;\n            this.doResolve?.(null);\n        };\n        this.deferred = delay === symbols_1.MicrotaskDelay ? microtaskDeferred(fn) : timeoutDeferred(delay, fn);\n        return this.completionPromise;\n    }\n    isTriggered() {\n        return !!this.deferred?.isTriggered();\n    }\n    cancel() {\n        this.cancelTimeout();\n        if (this.completionPromise) {\n            this.doReject?.(new errors_1.CancellationError());\n            this.completionPromise = null;\n        }\n    }\n    cancelTimeout() {\n        this.deferred?.dispose();\n        this.deferred = null;\n    }\n    dispose() {\n        this.cancel();\n    }\n}\nexports.Delayer = Delayer;\n/**\n * A helper to delay execution of a task that is being requested often, while\n * preventing accumulation of consecutive executions, while the task runs.\n *\n * The mail man is clever and waits for a certain amount of time, before going\n * out to deliver letters. While the mail man is going out, more letters arrive\n * and can only be delivered once he is back. Once he is back the mail man will\n * do one more trip to deliver the letters that have accumulated while he was out.\n */\nclass ThrottledDelayer {\n    constructor(defaultDelay) {\n        this.delayer = new Delayer(defaultDelay);\n        this.throttler = new Throttler();\n    }\n    trigger(promiseFactory, delay) {\n        return this.delayer.trigger(() => this.throttler.queue(promiseFactory), delay);\n    }\n    isTriggered() {\n        return this.delayer.isTriggered();\n    }\n    cancel() {\n        this.delayer.cancel();\n    }\n    dispose() {\n        this.delayer.dispose();\n        this.throttler.dispose();\n    }\n}\nexports.ThrottledDelayer = ThrottledDelayer;\n/**\n * A barrier that is initially closed and then becomes opened permanently.\n */\nclass Barrier {\n    constructor() {\n        this._isOpen = false;\n        this._promise = new Promise((c, e) => {\n            this._completePromise = c;\n        });\n    }\n    isOpen() {\n        return this._isOpen;\n    }\n    open() {\n        this._isOpen = true;\n        this._completePromise(true);\n    }\n    wait() {\n        return this._promise;\n    }\n}\nexports.Barrier = Barrier;\n/**\n * A barrier that is initially closed and then becomes opened permanently after a certain period of\n * time or when open is called explicitly\n */\nclass AutoOpenBarrier extends Barrier {\n    constructor(autoOpenTimeMs) {\n        super();\n        this._timeout = setTimeout(() => this.open(), autoOpenTimeMs);\n    }\n    open() {\n        clearTimeout(this._timeout);\n        super.open();\n    }\n}\nexports.AutoOpenBarrier = AutoOpenBarrier;\nfunction timeout(millis, token) {\n    if (!token) {\n        return createCancelablePromise(token => timeout(millis, token));\n    }\n    return new Promise((resolve, reject) => {\n        const handle = setTimeout(() => {\n            disposable.dispose();\n            resolve();\n        }, millis);\n        const disposable = token.onCancellationRequested(() => {\n            clearTimeout(handle);\n            disposable.dispose();\n            reject(new errors_1.CancellationError());\n        });\n    });\n}\n/**\n * Creates a timeout that can be disposed using its returned value.\n * @param handler The timeout handler.\n * @param timeout An optional timeout in milliseconds.\n * @param store An optional {@link DisposableStore} that will have the timeout disposable managed automatically.\n *\n * @example\n * const store = new DisposableStore;\n * // Call the timeout after 1000ms at which point it will be automatically\n * // evicted from the store.\n * const timeoutDisposable = disposableTimeout(() => {}, 1000, store);\n *\n * if (foo) {\n *   // Cancel the timeout and evict it from store.\n *   timeoutDisposable.dispose();\n * }\n */\nfunction disposableTimeout(handler, timeout = 0, store) {\n    const timer = setTimeout(() => {\n        handler();\n        if (store) {\n            disposable.dispose();\n        }\n    }, timeout);\n    const disposable = (0, lifecycle_1.toDisposable)(() => {\n        clearTimeout(timer);\n        store?.deleteAndLeak(disposable);\n    });\n    store?.add(disposable);\n    return disposable;\n}\n/**\n * Runs the provided list of promise factories in sequential order. The returned\n * promise will complete to an array of results from each promise.\n */\nfunction sequence(promiseFactories) {\n    const results = [];\n    let index = 0;\n    const len = promiseFactories.length;\n    function next() {\n        return index < len ? promiseFactories[index++]() : null;\n    }\n    function thenHandler(result) {\n        if (result !== undefined && result !== null) {\n            results.push(result);\n        }\n        const n = next();\n        if (n) {\n            return n.then(thenHandler);\n        }\n        return Promise.resolve(results);\n    }\n    return Promise.resolve(null).then(thenHandler);\n}\nfunction first(promiseFactories, shouldStop = t => !!t, defaultValue = null) {\n    let index = 0;\n    const len = promiseFactories.length;\n    const loop = () => {\n        if (index >= len) {\n            return Promise.resolve(defaultValue);\n        }\n        const factory = promiseFactories[index++];\n        const promise = Promise.resolve(factory());\n        return promise.then(result => {\n            if (shouldStop(result)) {\n                return Promise.resolve(result);\n            }\n            return loop();\n        });\n    };\n    return loop();\n}\nfunction firstParallel(promiseList, shouldStop = t => !!t, defaultValue = null) {\n    if (promiseList.length === 0) {\n        return Promise.resolve(defaultValue);\n    }\n    let todo = promiseList.length;\n    const finish = () => {\n        todo = -1;\n        for (const promise of promiseList) {\n            promise.cancel?.();\n        }\n    };\n    return new Promise((resolve, reject) => {\n        for (const promise of promiseList) {\n            promise.then(result => {\n                if (--todo >= 0 && shouldStop(result)) {\n                    finish();\n                    resolve(result);\n                }\n                else if (todo === 0) {\n                    resolve(defaultValue);\n                }\n            })\n                .catch(err => {\n                if (--todo >= 0) {\n                    finish();\n                    reject(err);\n                }\n            });\n        }\n    });\n}\n/**\n * A helper to queue N promises and run them all with a max degree of parallelism. The helper\n * ensures that at any time no more than M promises are running at the same time.\n */\nclass Limiter {\n    constructor(maxDegreeOfParalellism) {\n        this._size = 0;\n        this._isDisposed = false;\n        this.maxDegreeOfParalellism = maxDegreeOfParalellism;\n        this.outstandingPromises = [];\n        this.runningPromises = 0;\n        this._onDrained = new event_1.Emitter();\n    }\n    /**\n     *\n     * @returns A promise that resolved when all work is done (onDrained) or when\n     * there is nothing to do\n     */\n    whenIdle() {\n        return this.size > 0\n            ? event_1.Event.toPromise(this.onDrained)\n            : Promise.resolve();\n    }\n    get onDrained() {\n        return this._onDrained.event;\n    }\n    get size() {\n        return this._size;\n    }\n    queue(factory) {\n        if (this._isDisposed) {\n            throw new Error('Object has been disposed');\n        }\n        this._size++;\n        return new Promise((c, e) => {\n            this.outstandingPromises.push({ factory, c, e });\n            this.consume();\n        });\n    }\n    consume() {\n        while (this.outstandingPromises.length && this.runningPromises < this.maxDegreeOfParalellism) {\n            const iLimitedTask = this.outstandingPromises.shift();\n            this.runningPromises++;\n            const promise = iLimitedTask.factory();\n            promise.then(iLimitedTask.c, iLimitedTask.e);\n            promise.then(() => this.consumed(), () => this.consumed());\n        }\n    }\n    consumed() {\n        if (this._isDisposed) {\n            return;\n        }\n        this.runningPromises--;\n        if (--this._size === 0) {\n            this._onDrained.fire();\n        }\n        if (this.outstandingPromises.length > 0) {\n            this.consume();\n        }\n    }\n    clear() {\n        if (this._isDisposed) {\n            throw new Error('Object has been disposed');\n        }\n        this.outstandingPromises.length = 0;\n        this._size = this.runningPromises;\n    }\n    dispose() {\n        this._isDisposed = true;\n        this.outstandingPromises.length = 0; // stop further processing\n        this._size = 0;\n        this._onDrained.dispose();\n    }\n}\nexports.Limiter = Limiter;\n/**\n * A queue is handles one promise at a time and guarantees that at any time only one promise is executing.\n */\nclass Queue extends Limiter {\n    constructor() {\n        super(1);\n    }\n}\nexports.Queue = Queue;\n/**\n * Same as `Queue`, ensures that only 1 task is executed at the same time. The difference to `Queue` is that\n * there is only 1 task about to be scheduled next. As such, calling `queue` while a task is executing will\n * replace the currently queued task until it executes.\n *\n * As such, the returned promise may not be from the factory that is passed in but from the next factory that\n * is running after having called `queue`.\n */\nclass LimitedQueue {\n    constructor() {\n        this.sequentializer = new TaskSequentializer();\n        this.tasks = 0;\n    }\n    queue(factory) {\n        if (!this.sequentializer.isRunning()) {\n            return this.sequentializer.run(this.tasks++, factory());\n        }\n        return this.sequentializer.queue(() => {\n            return this.sequentializer.run(this.tasks++, factory());\n        });\n    }\n}\nexports.LimitedQueue = LimitedQueue;\nclass TimeoutTimer {\n    constructor(runner, timeout) {\n        this._isDisposed = false;\n        this._token = -1;\n        if (typeof runner === 'function' && typeof timeout === 'number') {\n            this.setIfNotSet(runner, timeout);\n        }\n    }\n    dispose() {\n        this.cancel();\n        this._isDisposed = true;\n    }\n    cancel() {\n        if (this._token !== -1) {\n            clearTimeout(this._token);\n            this._token = -1;\n        }\n    }\n    cancelAndSet(runner, timeout) {\n        if (this._isDisposed) {\n            throw new errors_1.BugIndicatingError(`Calling 'cancelAndSet' on a disposed TimeoutTimer`);\n        }\n        this.cancel();\n        this._token = setTimeout(() => {\n            this._token = -1;\n            runner();\n        }, timeout);\n    }\n    setIfNotSet(runner, timeout) {\n        if (this._isDisposed) {\n            throw new errors_1.BugIndicatingError(`Calling 'setIfNotSet' on a disposed TimeoutTimer`);\n        }\n        if (this._token !== -1) {\n            // timer is already set\n            return;\n        }\n        this._token = setTimeout(() => {\n            this._token = -1;\n            runner();\n        }, timeout);\n    }\n}\nexports.TimeoutTimer = TimeoutTimer;\nclass IntervalTimer {\n    constructor() {\n        this.disposable = undefined;\n        this.isDisposed = false;\n    }\n    cancel() {\n        this.disposable?.dispose();\n        this.disposable = undefined;\n    }\n    cancelAndSet(runner, interval, context = globalThis) {\n        if (this.isDisposed) {\n            throw new errors_1.BugIndicatingError(`Calling 'cancelAndSet' on a disposed IntervalTimer`);\n        }\n        this.cancel();\n        const handle = context.setInterval(() => {\n            runner();\n        }, interval);\n        this.disposable = (0, lifecycle_1.toDisposable)(() => {\n            context.clearInterval(handle);\n            this.disposable = undefined;\n        });\n    }\n    dispose() {\n        this.cancel();\n        this.isDisposed = true;\n    }\n}\nexports.IntervalTimer = IntervalTimer;\nclass RunOnceScheduler {\n    constructor(runner, delay) {\n        this.timeoutToken = -1;\n        this.runner = runner;\n        this.timeout = delay;\n        this.timeoutHandler = this.onTimeout.bind(this);\n    }\n    /**\n     * Dispose RunOnceScheduler\n     */\n    dispose() {\n        this.cancel();\n        this.runner = null;\n    }\n    /**\n     * Cancel current scheduled runner (if any).\n     */\n    cancel() {\n        if (this.isScheduled()) {\n            clearTimeout(this.timeoutToken);\n            this.timeoutToken = -1;\n        }\n    }\n    /**\n     * Cancel previous runner (if any) & schedule a new runner.\n     */\n    schedule(delay = this.timeout) {\n        this.cancel();\n        this.timeoutToken = setTimeout(this.timeoutHandler, delay);\n    }\n    get delay() {\n        return this.timeout;\n    }\n    set delay(value) {\n        this.timeout = value;\n    }\n    /**\n     * Returns true if scheduled.\n     */\n    isScheduled() {\n        return this.timeoutToken !== -1;\n    }\n    flush() {\n        if (this.isScheduled()) {\n            this.cancel();\n            this.doRun();\n        }\n    }\n    onTimeout() {\n        this.timeoutToken = -1;\n        if (this.runner) {\n            this.doRun();\n        }\n    }\n    doRun() {\n        this.runner?.();\n    }\n}\nexports.RunOnceScheduler = RunOnceScheduler;\n/**\n * Same as `RunOnceScheduler`, but doesn't count the time spent in sleep mode.\n * > **NOTE**: Only offers 1s resolution.\n *\n * When calling `setTimeout` with 3hrs, and putting the computer immediately to sleep\n * for 8hrs, `setTimeout` will fire **as soon as the computer wakes from sleep**. But\n * this scheduler will execute 3hrs **after waking the computer from sleep**.\n */\nclass ProcessTimeRunOnceScheduler {\n    constructor(runner, delay) {\n        if (delay % 1000 !== 0) {\n            console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${delay}ms is not a multiple of 1000ms.`);\n        }\n        this.runner = runner;\n        this.timeout = delay;\n        this.counter = 0;\n        this.intervalToken = -1;\n        this.intervalHandler = this.onInterval.bind(this);\n    }\n    dispose() {\n        this.cancel();\n        this.runner = null;\n    }\n    cancel() {\n        if (this.isScheduled()) {\n            clearInterval(this.intervalToken);\n            this.intervalToken = -1;\n        }\n    }\n    /**\n     * Cancel previous runner (if any) & schedule a new runner.\n     */\n    schedule(delay = this.timeout) {\n        if (delay % 1000 !== 0) {\n            console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${delay}ms is not a multiple of 1000ms.`);\n        }\n        this.cancel();\n        this.counter = Math.ceil(delay / 1000);\n        this.intervalToken = setInterval(this.intervalHandler, 1000);\n    }\n    /**\n     * Returns true if scheduled.\n     */\n    isScheduled() {\n        return this.intervalToken !== -1;\n    }\n    onInterval() {\n        this.counter--;\n        if (this.counter > 0) {\n            // still need to wait\n            return;\n        }\n        // time elapsed\n        clearInterval(this.intervalToken);\n        this.intervalToken = -1;\n        this.runner?.();\n    }\n}\nexports.ProcessTimeRunOnceScheduler = ProcessTimeRunOnceScheduler;\nclass RunOnceWorker extends RunOnceScheduler {\n    constructor(runner, timeout) {\n        super(runner, timeout);\n        this.units = [];\n    }\n    work(unit) {\n        this.units.push(unit);\n        if (!this.isScheduled()) {\n            this.schedule();\n        }\n    }\n    doRun() {\n        const units = this.units;\n        this.units = [];\n        this.runner?.(units);\n    }\n    dispose() {\n        this.units = [];\n        super.dispose();\n    }\n}\nexports.RunOnceWorker = RunOnceWorker;\n/**\n * The `ThrottledWorker` will accept units of work `T`\n * to handle. The contract is:\n * * there is a maximum of units the worker can handle at once (via `maxWorkChunkSize`)\n * * there is a maximum of units the worker will keep in memory for processing (via `maxBufferedWork`)\n * * after having handled `maxWorkChunkSize` units, the worker needs to rest (via `throttleDelay`)\n */\nclass ThrottledWorker extends lifecycle_1.Disposable {\n    constructor(options, handler) {\n        super();\n        this.options = options;\n        this.handler = handler;\n        this.pendingWork = [];\n        this.throttler = this._register(new lifecycle_1.MutableDisposable());\n        this.disposed = false;\n    }\n    /**\n     * The number of work units that are pending to be processed.\n     */\n    get pending() { return this.pendingWork.length; }\n    /**\n     * Add units to be worked on. Use `pending` to figure out\n     * how many units are not yet processed after this method\n     * was called.\n     *\n     * @returns whether the work was accepted or not. If the\n     * worker is disposed, it will not accept any more work.\n     * If the number of pending units would become larger\n     * than `maxPendingWork`, more work will also not be accepted.\n     */\n    work(units) {\n        if (this.disposed) {\n            return false; // work not accepted: disposed\n        }\n        // Check for reaching maximum of pending work\n        if (typeof this.options.maxBufferedWork === 'number') {\n            // Throttled: simple check if pending + units exceeds max pending\n            if (this.throttler.value) {\n                if (this.pending + units.length > this.options.maxBufferedWork) {\n                    return false; // work not accepted: too much pending work\n                }\n            }\n            // Unthrottled: same as throttled, but account for max chunk getting\n            // worked on directly without being pending\n            else {\n                if (this.pending + units.length - this.options.maxWorkChunkSize > this.options.maxBufferedWork) {\n                    return false; // work not accepted: too much pending work\n                }\n            }\n        }\n        // Add to pending units first\n        for (const unit of units) {\n            this.pendingWork.push(unit);\n        }\n        // If not throttled, start working directly\n        // Otherwise, when the throttle delay has\n        // past, pending work will be worked again.\n        if (!this.throttler.value) {\n            this.doWork();\n        }\n        return true; // work accepted\n    }\n    doWork() {\n        // Extract chunk to handle and handle it\n        this.handler(this.pendingWork.splice(0, this.options.maxWorkChunkSize));\n        // If we have remaining work, schedule it after a delay\n        if (this.pendingWork.length > 0) {\n            this.throttler.value = new RunOnceScheduler(() => {\n                this.throttler.clear();\n                this.doWork();\n            }, this.options.throttleDelay);\n            this.throttler.value.schedule();\n        }\n    }\n    dispose() {\n        super.dispose();\n        this.disposed = true;\n    }\n}\nexports.ThrottledWorker = ThrottledWorker;\n(function () {\n    if (typeof globalThis.requestIdleCallback !== 'function' || typeof globalThis.cancelIdleCallback !== 'function') {\n        exports._runWhenIdle = (_targetWindow, runner) => {\n            (0, platform_1.setTimeout0)(() => {\n                if (disposed) {\n                    return;\n                }\n                const end = Date.now() + 15; // one frame at 64fps\n                const deadline = {\n                    didTimeout: true,\n                    timeRemaining() {\n                        return Math.max(0, end - Date.now());\n                    }\n                };\n                runner(Object.freeze(deadline));\n            });\n            let disposed = false;\n            return {\n                dispose() {\n                    if (disposed) {\n                        return;\n                    }\n                    disposed = true;\n                }\n            };\n        };\n    }\n    else {\n        exports._runWhenIdle = (targetWindow, runner, timeout) => {\n            const handle = targetWindow.requestIdleCallback(runner, typeof timeout === 'number' ? { timeout } : undefined);\n            let disposed = false;\n            return {\n                dispose() {\n                    if (disposed) {\n                        return;\n                    }\n                    disposed = true;\n                    targetWindow.cancelIdleCallback(handle);\n                }\n            };\n        };\n    }\n    exports.runWhenGlobalIdle = (runner) => (0, exports._runWhenIdle)(globalThis, runner);\n})();\nclass AbstractIdleValue {\n    constructor(targetWindow, executor) {\n        this._didRun = false;\n        this._executor = () => {\n            try {\n                this._value = executor();\n            }\n            catch (err) {\n                this._error = err;\n            }\n            finally {\n                this._didRun = true;\n            }\n        };\n        this._handle = (0, exports._runWhenIdle)(targetWindow, () => this._executor());\n    }\n    dispose() {\n        this._handle.dispose();\n    }\n    get value() {\n        if (!this._didRun) {\n            this._handle.dispose();\n            this._executor();\n        }\n        if (this._error) {\n            throw this._error;\n        }\n        return this._value;\n    }\n    get isInitialized() {\n        return this._didRun;\n    }\n}\nexports.AbstractIdleValue = AbstractIdleValue;\n/**\n * An `IdleValue` that always uses the current window (which might be throttled or inactive)\n *\n * **Note** that there is `dom.ts#WindowIdleValue` which is better suited when running inside a browser\n * context\n */\nclass GlobalIdleValue extends AbstractIdleValue {\n    constructor(executor) {\n        super(globalThis, executor);\n    }\n}\nexports.GlobalIdleValue = GlobalIdleValue;\n//#endregion\nasync function retry(task, delay, retries) {\n    let lastError;\n    for (let i = 0; i < retries; i++) {\n        try {\n            return await task();\n        }\n        catch (error) {\n            lastError = error;\n            await timeout(delay);\n        }\n    }\n    throw lastError;\n}\n/**\n * @deprecated use `LimitedQueue` instead for an easier to use API\n */\nclass TaskSequentializer {\n    isRunning(taskId) {\n        if (typeof taskId === 'number') {\n            return this._running?.taskId === taskId;\n        }\n        return !!this._running;\n    }\n    get running() {\n        return this._running?.promise;\n    }\n    cancelRunning() {\n        this._running?.cancel();\n    }\n    run(taskId, promise, onCancel) {\n        this._running = { taskId, cancel: () => onCancel?.(), promise };\n        promise.then(() => this.doneRunning(taskId), () => this.doneRunning(taskId));\n        return promise;\n    }\n    doneRunning(taskId) {\n        if (this._running && taskId === this._running.taskId) {\n            // only set running to done if the promise finished that is associated with that taskId\n            this._running = undefined;\n            // schedule the queued task now that we are free if we have any\n            this.runQueued();\n        }\n    }\n    runQueued() {\n        if (this._queued) {\n            const queued = this._queued;\n            this._queued = undefined;\n            // Run queued task and complete on the associated promise\n            queued.run().then(queued.promiseResolve, queued.promiseReject);\n        }\n    }\n    /**\n     * Note: the promise to schedule as next run MUST itself call `run`.\n     *       Otherwise, this sequentializer will report `false` for `isRunning`\n     *       even when this task is running. Missing this detail means that\n     *       suddenly multiple tasks will run in parallel.\n     */\n    queue(run) {\n        // this is our first queued task, so we create associated promise with it\n        // so that we can return a promise that completes when the task has\n        // completed.\n        if (!this._queued) {\n            const { promise, resolve: promiseResolve, reject: promiseReject } = promiseWithResolvers();\n            this._queued = {\n                run,\n                promise,\n                promiseResolve: promiseResolve,\n                promiseReject: promiseReject\n            };\n        }\n        // we have a previous queued task, just overwrite it\n        else {\n            this._queued.run = run;\n        }\n        return this._queued.promise;\n    }\n    hasQueued() {\n        return !!this._queued;\n    }\n    async join() {\n        return this._queued?.promise ?? this._running?.promise;\n    }\n}\nexports.TaskSequentializer = TaskSequentializer;\n//#endregion\n//#region\n/**\n * The `IntervalCounter` allows to count the number\n * of calls to `increment()` over a duration of\n * `interval`. This utility can be used to conditionally\n * throttle a frequent task when a certain threshold\n * is reached.\n */\nclass IntervalCounter {\n    constructor(interval, nowFn = () => Date.now()) {\n        this.interval = interval;\n        this.nowFn = nowFn;\n        this.lastIncrementTime = 0;\n        this.value = 0;\n    }\n    increment() {\n        const now = this.nowFn();\n        // We are outside of the range of `interval` and as such\n        // start counting from 0 and remember the time\n        if (now - this.lastIncrementTime > this.interval) {\n            this.lastIncrementTime = now;\n            this.value = 0;\n        }\n        this.value++;\n        return this.value;\n    }\n}\nexports.IntervalCounter = IntervalCounter;\nvar DeferredOutcome;\n(function (DeferredOutcome) {\n    DeferredOutcome[DeferredOutcome[\"Resolved\"] = 0] = \"Resolved\";\n    DeferredOutcome[DeferredOutcome[\"Rejected\"] = 1] = \"Rejected\";\n})(DeferredOutcome || (DeferredOutcome = {}));\n/**\n * Creates a promise whose resolution or rejection can be controlled imperatively.\n */\nclass DeferredPromise {\n    get isRejected() {\n        return this.outcome?.outcome === DeferredOutcome.Rejected;\n    }\n    get isResolved() {\n        return this.outcome?.outcome === DeferredOutcome.Resolved;\n    }\n    get isSettled() {\n        return !!this.outcome;\n    }\n    get value() {\n        return this.outcome?.outcome === DeferredOutcome.Resolved ? this.outcome?.value : undefined;\n    }\n    constructor() {\n        this.p = new Promise((c, e) => {\n            this.completeCallback = c;\n            this.errorCallback = e;\n        });\n    }\n    complete(value) {\n        return new Promise(resolve => {\n            this.completeCallback(value);\n            this.outcome = { outcome: DeferredOutcome.Resolved, value };\n            resolve();\n        });\n    }\n    error(err) {\n        return new Promise(resolve => {\n            this.errorCallback(err);\n            this.outcome = { outcome: DeferredOutcome.Rejected, value: err };\n            resolve();\n        });\n    }\n    cancel() {\n        return this.error(new errors_1.CancellationError());\n    }\n}\nexports.DeferredPromise = DeferredPromise;\n//#endregion\n//#region Promises\nvar Promises;\n(function (Promises) {\n    /**\n     * A drop-in replacement for `Promise.all` with the only difference\n     * that the method awaits every promise to either fulfill or reject.\n     *\n     * Similar to `Promise.all`, only the first error will be returned\n     * if any.\n     */\n    async function settled(promises) {\n        let firstError = undefined;\n        const result = await Promise.all(promises.map(promise => promise.then(value => value, error => {\n            if (!firstError) {\n                firstError = error;\n            }\n            return undefined; // do not rethrow so that other promises can settle\n        })));\n        if (typeof firstError !== 'undefined') {\n            throw firstError;\n        }\n        return result; // cast is needed and protected by the `throw` above\n    }\n    Promises.settled = settled;\n    /**\n     * A helper to create a new `Promise<T>` with a body that is a promise\n     * itself. By default, an error that raises from the async body will\n     * end up as a unhandled rejection, so this utility properly awaits the\n     * body and rejects the promise as a normal promise does without async\n     * body.\n     *\n     * This method should only be used in rare cases where otherwise `async`\n     * cannot be used (e.g. when callbacks are involved that require this).\n     */\n    function withAsyncBody(bodyFn) {\n        // eslint-disable-next-line no-async-promise-executor\n        return new Promise(async (resolve, reject) => {\n            try {\n                await bodyFn(resolve, reject);\n            }\n            catch (error) {\n                reject(error);\n            }\n        });\n    }\n    Promises.withAsyncBody = withAsyncBody;\n})(Promises || (exports.Promises = Promises = {}));\nclass StatefulPromise {\n    get value() { return this._value; }\n    get error() { return this._error; }\n    get isResolved() { return this._isResolved; }\n    constructor(promise) {\n        this._value = undefined;\n        this._error = undefined;\n        this._isResolved = false;\n        this.promise = promise.then(value => {\n            this._value = value;\n            this._isResolved = true;\n            return value;\n        }, error => {\n            this._error = error;\n            this._isResolved = true;\n            throw error;\n        });\n    }\n    /**\n     * Returns the resolved value.\n     * Throws if the promise is not resolved yet.\n     */\n    requireValue() {\n        if (!this._isResolved) {\n            throw new errors_1.BugIndicatingError('Promise is not resolved yet');\n        }\n        if (this._error) {\n            throw this._error;\n        }\n        return this._value;\n    }\n}\nexports.StatefulPromise = StatefulPromise;\nclass LazyStatefulPromise {\n    constructor(_compute) {\n        this._compute = _compute;\n        this._promise = new lazy_1.Lazy(() => new StatefulPromise(this._compute()));\n    }\n    /**\n     * Returns the resolved value.\n     * Throws if the promise is not resolved yet.\n     */\n    requireValue() {\n        return this._promise.value.requireValue();\n    }\n    /**\n     * Returns the promise (and triggers a computation of the promise if not yet done so).\n     */\n    getPromise() {\n        return this._promise.value.promise;\n    }\n    /**\n     * Reads the current value without triggering a computation of the promise.\n     */\n    get currentValue() {\n        return this._promise.rawValue?.value;\n    }\n}\nexports.LazyStatefulPromise = LazyStatefulPromise;\n//#endregion\n//#region\nvar AsyncIterableSourceState;\n(function (AsyncIterableSourceState) {\n    AsyncIterableSourceState[AsyncIterableSourceState[\"Initial\"] = 0] = \"Initial\";\n    AsyncIterableSourceState[AsyncIterableSourceState[\"DoneOK\"] = 1] = \"DoneOK\";\n    AsyncIterableSourceState[AsyncIterableSourceState[\"DoneError\"] = 2] = \"DoneError\";\n})(AsyncIterableSourceState || (AsyncIterableSourceState = {}));\n/**\n * A rich implementation for an `AsyncIterable<T>`.\n */\nclass AsyncIterableObject {\n    static fromArray(items) {\n        return new AsyncIterableObject((writer) => {\n            writer.emitMany(items);\n        });\n    }\n    static fromPromise(promise) {\n        return new AsyncIterableObject(async (emitter) => {\n            emitter.emitMany(await promise);\n        });\n    }\n    static fromPromises(promises) {\n        return new AsyncIterableObject(async (emitter) => {\n            await Promise.all(promises.map(async (p) => emitter.emitOne(await p)));\n        });\n    }\n    static merge(iterables) {\n        return new AsyncIterableObject(async (emitter) => {\n            await Promise.all(iterables.map(async (iterable) => {\n                for await (const item of iterable) {\n                    emitter.emitOne(item);\n                }\n            }));\n        });\n    }\n    static { this.EMPTY = AsyncIterableObject.fromArray([]); }\n    constructor(executor, onReturn) {\n        this._state = AsyncIterableSourceState.Initial;\n        this._results = [];\n        this._error = null;\n        this._onReturn = onReturn;\n        this._onStateChanged = new event_1.Emitter();\n        queueMicrotask(async () => {\n            const writer = {\n                emitOne: (item) => this.emitOne(item),\n                emitMany: (items) => this.emitMany(items),\n                reject: (error) => this.reject(error)\n            };\n            try {\n                await Promise.resolve(executor(writer));\n                this.resolve();\n            }\n            catch (err) {\n                this.reject(err);\n            }\n            finally {\n                writer.emitOne = undefined;\n                writer.emitMany = undefined;\n                writer.reject = undefined;\n            }\n        });\n    }\n    [Symbol.asyncIterator]() {\n        let i = 0;\n        return {\n            next: async () => {\n                do {\n                    if (this._state === AsyncIterableSourceState.DoneError) {\n                        throw this._error;\n                    }\n                    if (i < this._results.length) {\n                        return { done: false, value: this._results[i++] };\n                    }\n                    if (this._state === AsyncIterableSourceState.DoneOK) {\n                        return { done: true, value: undefined };\n                    }\n                    await event_1.Event.toPromise(this._onStateChanged.event);\n                } while (true);\n            },\n            return: async () => {\n                this._onReturn?.();\n                return { done: true, value: undefined };\n            }\n        };\n    }\n    static map(iterable, mapFn) {\n        return new AsyncIterableObject(async (emitter) => {\n            for await (const item of iterable) {\n                emitter.emitOne(mapFn(item));\n            }\n        });\n    }\n    map(mapFn) {\n        return AsyncIterableObject.map(this, mapFn);\n    }\n    static filter(iterable, filterFn) {\n        return new AsyncIterableObject(async (emitter) => {\n            for await (const item of iterable) {\n                if (filterFn(item)) {\n                    emitter.emitOne(item);\n                }\n            }\n        });\n    }\n    filter(filterFn) {\n        return AsyncIterableObject.filter(this, filterFn);\n    }\n    static coalesce(iterable) {\n        return AsyncIterableObject.filter(iterable, item => !!item);\n    }\n    coalesce() {\n        return AsyncIterableObject.coalesce(this);\n    }\n    static async toPromise(iterable) {\n        const result = [];\n        for await (const item of iterable) {\n            result.push(item);\n        }\n        return result;\n    }\n    toPromise() {\n        return AsyncIterableObject.toPromise(this);\n    }\n    /**\n     * The value will be appended at the end.\n     *\n     * **NOTE** If `resolve()` or `reject()` have already been called, this method has no effect.\n     */\n    emitOne(value) {\n        if (this._state !== AsyncIterableSourceState.Initial) {\n            return;\n        }\n        // it is important to add new values at the end,\n        // as we may have iterators already running on the array\n        this._results.push(value);\n        this._onStateChanged.fire();\n    }\n    /**\n     * The values will be appended at the end.\n     *\n     * **NOTE** If `resolve()` or `reject()` have already been called, this method has no effect.\n     */\n    emitMany(values) {\n        if (this._state !== AsyncIterableSourceState.Initial) {\n            return;\n        }\n        // it is important to add new values at the end,\n        // as we may have iterators already running on the array\n        this._results = this._results.concat(values);\n        this._onStateChanged.fire();\n    }\n    /**\n     * Calling `resolve()` will mark the result array as complete.\n     *\n     * **NOTE** `resolve()` must be called, otherwise all consumers of this iterable will hang indefinitely, similar to a non-resolved promise.\n     * **NOTE** If `resolve()` or `reject()` have already been called, this method has no effect.\n     */\n    resolve() {\n        if (this._state !== AsyncIterableSourceState.Initial) {\n            return;\n        }\n        this._state = AsyncIterableSourceState.DoneOK;\n        this._onStateChanged.fire();\n    }\n    /**\n     * Writing an error will permanently invalidate this iterable.\n     * The current users will receive an error thrown, as will all future users.\n     *\n     * **NOTE** If `resolve()` or `reject()` have already been called, this method has no effect.\n     */\n    reject(error) {\n        if (this._state !== AsyncIterableSourceState.Initial) {\n            return;\n        }\n        this._state = AsyncIterableSourceState.DoneError;\n        this._error = error;\n        this._onStateChanged.fire();\n    }\n}\nexports.AsyncIterableObject = AsyncIterableObject;\nclass CancelableAsyncIterableObject extends AsyncIterableObject {\n    constructor(_source, executor) {\n        super(executor);\n        this._source = _source;\n    }\n    cancel() {\n        this._source.cancel();\n    }\n}\nexports.CancelableAsyncIterableObject = CancelableAsyncIterableObject;\nfunction createCancelableAsyncIterable(callback) {\n    const source = new cancellation_1.CancellationTokenSource();\n    const innerIterable = callback(source.token);\n    return new CancelableAsyncIterableObject(source, async (emitter) => {\n        const subscription = source.token.onCancellationRequested(() => {\n            subscription.dispose();\n            source.dispose();\n            emitter.reject(new errors_1.CancellationError());\n        });\n        try {\n            for await (const item of innerIterable) {\n                if (source.token.isCancellationRequested) {\n                    // canceled in the meantime\n                    return;\n                }\n                emitter.emitOne(item);\n            }\n            subscription.dispose();\n            source.dispose();\n        }\n        catch (err) {\n            subscription.dispose();\n            source.dispose();\n            emitter.reject(err);\n        }\n    });\n}\nclass AsyncIterableSource {\n    /**\n     *\n     * @param onReturn A function that will be called when consuming the async iterable\n     * has finished by the consumer, e.g the for-await-loop has be existed (break, return) early.\n     * This is NOT called when resolving this source by its owner.\n     */\n    constructor(onReturn) {\n        this._deferred = new DeferredPromise();\n        this._asyncIterable = new AsyncIterableObject(emitter => {\n            if (earlyError) {\n                emitter.reject(earlyError);\n                return;\n            }\n            if (earlyItems) {\n                emitter.emitMany(earlyItems);\n            }\n            this._errorFn = (error) => emitter.reject(error);\n            this._emitFn = (item) => emitter.emitOne(item);\n            return this._deferred.p;\n        }, onReturn);\n        let earlyError;\n        let earlyItems;\n        this._emitFn = (item) => {\n            if (!earlyItems) {\n                earlyItems = [];\n            }\n            earlyItems.push(item);\n        };\n        this._errorFn = (error) => {\n            if (!earlyError) {\n                earlyError = error;\n            }\n        };\n    }\n    get asyncIterable() {\n        return this._asyncIterable;\n    }\n    resolve() {\n        this._deferred.complete();\n    }\n    reject(error) {\n        this._errorFn(error);\n        this._deferred.complete();\n    }\n    emitOne(item) {\n        this._emitFn(item);\n    }\n}\nexports.AsyncIterableSource = AsyncIterableSource;\n//#endregion\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CancellationTokenSource = exports.CancellationToken = void 0;\nexports.cancelOnDispose = cancelOnDispose;\nconst event_1 = require(\"vs/base/common/event\");\nconst shortcutEvent = Object.freeze(function (callback, context) {\n    const handle = setTimeout(callback.bind(context), 0);\n    return { dispose() { clearTimeout(handle); } };\n});\nvar CancellationToken;\n(function (CancellationToken) {\n    function isCancellationToken(thing) {\n        if (thing === CancellationToken.None || thing === CancellationToken.Cancelled) {\n            return true;\n        }\n        if (thing instanceof MutableToken) {\n            return true;\n        }\n        if (!thing || typeof thing !== 'object') {\n            return false;\n        }\n        return typeof thing.isCancellationRequested === 'boolean'\n            && typeof thing.onCancellationRequested === 'function';\n    }\n    CancellationToken.isCancellationToken = isCancellationToken;\n    CancellationToken.None = Object.freeze({\n        isCancellationRequested: false,\n        onCancellationRequested: event_1.Event.None\n    });\n    CancellationToken.Cancelled = Object.freeze({\n        isCancellationRequested: true,\n        onCancellationRequested: shortcutEvent\n    });\n})(CancellationToken || (exports.CancellationToken = CancellationToken = {}));\nclass MutableToken {\n    constructor() {\n        this._isCancelled = false;\n        this._emitter = null;\n    }\n    cancel() {\n        if (!this._isCancelled) {\n            this._isCancelled = true;\n            if (this._emitter) {\n                this._emitter.fire(undefined);\n                this.dispose();\n            }\n        }\n    }\n    get isCancellationRequested() {\n        return this._isCancelled;\n    }\n    get onCancellationRequested() {\n        if (this._isCancelled) {\n            return shortcutEvent;\n        }\n        if (!this._emitter) {\n            this._emitter = new event_1.Emitter();\n        }\n        return this._emitter.event;\n    }\n    dispose() {\n        if (this._emitter) {\n            this._emitter.dispose();\n            this._emitter = null;\n        }\n    }\n}\nclass CancellationTokenSource {\n    constructor(parent) {\n        this._token = undefined;\n        this._parentListener = undefined;\n        this._parentListener = parent && parent.onCancellationRequested(this.cancel, this);\n    }\n    get token() {\n        if (!this._token) {\n            // be lazy and create the token only when\n            // actually needed\n            this._token = new MutableToken();\n        }\n        return this._token;\n    }\n    cancel() {\n        if (!this._token) {\n            // save an object by returning the default\n            // cancelled token when cancellation happens\n            // before someone asks for the token\n            this._token = CancellationToken.Cancelled;\n        }\n        else if (this._token instanceof MutableToken) {\n            // actually cancel\n            this._token.cancel();\n        }\n    }\n    dispose(cancel = false) {\n        if (cancel) {\n            this.cancel();\n        }\n        this._parentListener?.dispose();\n        if (!this._token) {\n            // ensure to initialize with an empty token if we had none\n            this._token = CancellationToken.None;\n        }\n        else if (this._token instanceof MutableToken) {\n            // actually dispose\n            this._token.dispose();\n        }\n    }\n}\nexports.CancellationTokenSource = CancellationTokenSource;\nfunction cancelOnDispose(store) {\n    const source = new CancellationTokenSource();\n    store.add({ dispose() { source.cancel(); } });\n    return source.token;\n}\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CharCode = void 0;\n// Names from https://blog.codinghorror.com/ascii-pronunciation-rules-for-programmers/\n/**\n * An inlined enum containing useful character codes (to be used with String.charCodeAt).\n * Please leave the const keyword such that it gets inlined when compiled to JavaScript!\n */\nvar CharCode;\n(function (CharCode) {\n    CharCode[CharCode[\"Null\"] = 0] = \"Null\";\n    /**\n     * The `\\b` character.\n     */\n    CharCode[CharCode[\"Backspace\"] = 8] = \"Backspace\";\n    /**\n     * The `\\t` character.\n     */\n    CharCode[CharCode[\"Tab\"] = 9] = \"Tab\";\n    /**\n     * The `\\n` character.\n     */\n    CharCode[CharCode[\"LineFeed\"] = 10] = \"LineFeed\";\n    /**\n     * The `\\r` character.\n     */\n    CharCode[CharCode[\"CarriageReturn\"] = 13] = \"CarriageReturn\";\n    CharCode[CharCode[\"Space\"] = 32] = \"Space\";\n    /**\n     * The `!` character.\n     */\n    CharCode[CharCode[\"ExclamationMark\"] = 33] = \"ExclamationMark\";\n    /**\n     * The `\"` character.\n     */\n    CharCode[CharCode[\"DoubleQuote\"] = 34] = \"DoubleQuote\";\n    /**\n     * The `#` character.\n     */\n    CharCode[CharCode[\"Hash\"] = 35] = \"Hash\";\n    /**\n     * The `$` character.\n     */\n    CharCode[CharCode[\"DollarSign\"] = 36] = \"DollarSign\";\n    /**\n     * The `%` character.\n     */\n    CharCode[CharCode[\"PercentSign\"] = 37] = \"PercentSign\";\n    /**\n     * The `&` character.\n     */\n    CharCode[CharCode[\"Ampersand\"] = 38] = \"Ampersand\";\n    /**\n     * The `'` character.\n     */\n    CharCode[CharCode[\"SingleQuote\"] = 39] = \"SingleQuote\";\n    /**\n     * The `(` character.\n     */\n    CharCode[CharCode[\"OpenParen\"] = 40] = \"OpenParen\";\n    /**\n     * The `)` character.\n     */\n    CharCode[CharCode[\"CloseParen\"] = 41] = \"CloseParen\";\n    /**\n     * The `*` character.\n     */\n    CharCode[CharCode[\"Asterisk\"] = 42] = \"Asterisk\";\n    /**\n     * The `+` character.\n     */\n    CharCode[CharCode[\"Plus\"] = 43] = \"Plus\";\n    /**\n     * The `,` character.\n     */\n    CharCode[CharCode[\"Comma\"] = 44] = \"Comma\";\n    /**\n     * The `-` character.\n     */\n    CharCode[CharCode[\"Dash\"] = 45] = \"Dash\";\n    /**\n     * The `.` character.\n     */\n    CharCode[CharCode[\"Period\"] = 46] = \"Period\";\n    /**\n     * The `/` character.\n     */\n    CharCode[CharCode[\"Slash\"] = 47] = \"Slash\";\n    CharCode[CharCode[\"Digit0\"] = 48] = \"Digit0\";\n    CharCode[CharCode[\"Digit1\"] = 49] = \"Digit1\";\n    CharCode[CharCode[\"Digit2\"] = 50] = \"Digit2\";\n    CharCode[CharCode[\"Digit3\"] = 51] = \"Digit3\";\n    CharCode[CharCode[\"Digit4\"] = 52] = \"Digit4\";\n    CharCode[CharCode[\"Digit5\"] = 53] = \"Digit5\";\n    CharCode[CharCode[\"Digit6\"] = 54] = \"Digit6\";\n    CharCode[CharCode[\"Digit7\"] = 55] = \"Digit7\";\n    CharCode[CharCode[\"Digit8\"] = 56] = \"Digit8\";\n    CharCode[CharCode[\"Digit9\"] = 57] = \"Digit9\";\n    /**\n     * The `:` character.\n     */\n    CharCode[CharCode[\"Colon\"] = 58] = \"Colon\";\n    /**\n     * The `;` character.\n     */\n    CharCode[CharCode[\"Semicolon\"] = 59] = \"Semicolon\";\n    /**\n     * The `<` character.\n     */\n    CharCode[CharCode[\"LessThan\"] = 60] = \"LessThan\";\n    /**\n     * The `=` character.\n     */\n    CharCode[CharCode[\"Equals\"] = 61] = \"Equals\";\n    /**\n     * The `>` character.\n     */\n    CharCode[CharCode[\"GreaterThan\"] = 62] = \"GreaterThan\";\n    /**\n     * The `?` character.\n     */\n    CharCode[CharCode[\"QuestionMark\"] = 63] = \"QuestionMark\";\n    /**\n     * The `@` character.\n     */\n    CharCode[CharCode[\"AtSign\"] = 64] = \"AtSign\";\n    CharCode[CharCode[\"A\"] = 65] = \"A\";\n    CharCode[CharCode[\"B\"] = 66] = \"B\";\n    CharCode[CharCode[\"C\"] = 67] = \"C\";\n    CharCode[CharCode[\"D\"] = 68] = \"D\";\n    CharCode[CharCode[\"E\"] = 69] = \"E\";\n    CharCode[CharCode[\"F\"] = 70] = \"F\";\n    CharCode[CharCode[\"G\"] = 71] = \"G\";\n    CharCode[CharCode[\"H\"] = 72] = \"H\";\n    CharCode[CharCode[\"I\"] = 73] = \"I\";\n    CharCode[CharCode[\"J\"] = 74] = \"J\";\n    CharCode[CharCode[\"K\"] = 75] = \"K\";\n    CharCode[CharCode[\"L\"] = 76] = \"L\";\n    CharCode[CharCode[\"M\"] = 77] = \"M\";\n    CharCode[CharCode[\"N\"] = 78] = \"N\";\n    CharCode[CharCode[\"O\"] = 79] = \"O\";\n    CharCode[CharCode[\"P\"] = 80] = \"P\";\n    CharCode[CharCode[\"Q\"] = 81] = \"Q\";\n    CharCode[CharCode[\"R\"] = 82] = \"R\";\n    CharCode[CharCode[\"S\"] = 83] = \"S\";\n    CharCode[CharCode[\"T\"] = 84] = \"T\";\n    CharCode[CharCode[\"U\"] = 85] = \"U\";\n    CharCode[CharCode[\"V\"] = 86] = \"V\";\n    CharCode[CharCode[\"W\"] = 87] = \"W\";\n    CharCode[CharCode[\"X\"] = 88] = \"X\";\n    CharCode[CharCode[\"Y\"] = 89] = \"Y\";\n    CharCode[CharCode[\"Z\"] = 90] = \"Z\";\n    /**\n     * The `[` character.\n     */\n    CharCode[CharCode[\"OpenSquareBracket\"] = 91] = \"OpenSquareBracket\";\n    /**\n     * The `\\` character.\n     */\n    CharCode[CharCode[\"Backslash\"] = 92] = \"Backslash\";\n    /**\n     * The `]` character.\n     */\n    CharCode[CharCode[\"CloseSquareBracket\"] = 93] = \"CloseSquareBracket\";\n    /**\n     * The `^` character.\n     */\n    CharCode[CharCode[\"Caret\"] = 94] = \"Caret\";\n    /**\n     * The `_` character.\n     */\n    CharCode[CharCode[\"Underline\"] = 95] = \"Underline\";\n    /**\n     * The ``(`)`` character.\n     */\n    CharCode[CharCode[\"BackTick\"] = 96] = \"BackTick\";\n    CharCode[CharCode[\"a\"] = 97] = \"a\";\n    CharCode[CharCode[\"b\"] = 98] = \"b\";\n    CharCode[CharCode[\"c\"] = 99] = \"c\";\n    CharCode[CharCode[\"d\"] = 100] = \"d\";\n    CharCode[CharCode[\"e\"] = 101] = \"e\";\n    CharCode[CharCode[\"f\"] = 102] = \"f\";\n    CharCode[CharCode[\"g\"] = 103] = \"g\";\n    CharCode[CharCode[\"h\"] = 104] = \"h\";\n    CharCode[CharCode[\"i\"] = 105] = \"i\";\n    CharCode[CharCode[\"j\"] = 106] = \"j\";\n    CharCode[CharCode[\"k\"] = 107] = \"k\";\n    CharCode[CharCode[\"l\"] = 108] = \"l\";\n    CharCode[CharCode[\"m\"] = 109] = \"m\";\n    CharCode[CharCode[\"n\"] = 110] = \"n\";\n    CharCode[CharCode[\"o\"] = 111] = \"o\";\n    CharCode[CharCode[\"p\"] = 112] = \"p\";\n    CharCode[CharCode[\"q\"] = 113] = \"q\";\n    CharCode[CharCode[\"r\"] = 114] = \"r\";\n    CharCode[CharCode[\"s\"] = 115] = \"s\";\n    CharCode[CharCode[\"t\"] = 116] = \"t\";\n    CharCode[CharCode[\"u\"] = 117] = \"u\";\n    CharCode[CharCode[\"v\"] = 118] = \"v\";\n    CharCode[CharCode[\"w\"] = 119] = \"w\";\n    CharCode[CharCode[\"x\"] = 120] = \"x\";\n    CharCode[CharCode[\"y\"] = 121] = \"y\";\n    CharCode[CharCode[\"z\"] = 122] = \"z\";\n    /**\n     * The `{` character.\n     */\n    CharCode[CharCode[\"OpenCurlyBrace\"] = 123] = \"OpenCurlyBrace\";\n    /**\n     * The `|` character.\n     */\n    CharCode[CharCode[\"Pipe\"] = 124] = \"Pipe\";\n    /**\n     * The `}` character.\n     */\n    CharCode[CharCode[\"CloseCurlyBrace\"] = 125] = \"CloseCurlyBrace\";\n    /**\n     * The `~` character.\n     */\n    CharCode[CharCode[\"Tilde\"] = 126] = \"Tilde\";\n    /**\n     * The &nbsp; (no-break space) character.\n     * Unicode Character 'NO-BREAK SPACE' (U+00A0)\n     */\n    CharCode[CharCode[\"NoBreakSpace\"] = 160] = \"NoBreakSpace\";\n    CharCode[CharCode[\"U_Combining_Grave_Accent\"] = 768] = \"U_Combining_Grave_Accent\";\n    CharCode[CharCode[\"U_Combining_Acute_Accent\"] = 769] = \"U_Combining_Acute_Accent\";\n    CharCode[CharCode[\"U_Combining_Circumflex_Accent\"] = 770] = \"U_Combining_Circumflex_Accent\";\n    CharCode[CharCode[\"U_Combining_Tilde\"] = 771] = \"U_Combining_Tilde\";\n    CharCode[CharCode[\"U_Combining_Macron\"] = 772] = \"U_Combining_Macron\";\n    CharCode[CharCode[\"U_Combining_Overline\"] = 773] = \"U_Combining_Overline\";\n    CharCode[CharCode[\"U_Combining_Breve\"] = 774] = \"U_Combining_Breve\";\n    CharCode[CharCode[\"U_Combining_Dot_Above\"] = 775] = \"U_Combining_Dot_Above\";\n    CharCode[CharCode[\"U_Combining_Diaeresis\"] = 776] = \"U_Combining_Diaeresis\";\n    CharCode[CharCode[\"U_Combining_Hook_Above\"] = 777] = \"U_Combining_Hook_Above\";\n    CharCode[CharCode[\"U_Combining_Ring_Above\"] = 778] = \"U_Combining_Ring_Above\";\n    CharCode[CharCode[\"U_Combining_Double_Acute_Accent\"] = 779] = \"U_Combining_Double_Acute_Accent\";\n    CharCode[CharCode[\"U_Combining_Caron\"] = 780] = \"U_Combining_Caron\";\n    CharCode[CharCode[\"U_Combining_Vertical_Line_Above\"] = 781] = \"U_Combining_Vertical_Line_Above\";\n    CharCode[CharCode[\"U_Combining_Double_Vertical_Line_Above\"] = 782] = \"U_Combining_Double_Vertical_Line_Above\";\n    CharCode[CharCode[\"U_Combining_Double_Grave_Accent\"] = 783] = \"U_Combining_Double_Grave_Accent\";\n    CharCode[CharCode[\"U_Combining_Candrabindu\"] = 784] = \"U_Combining_Candrabindu\";\n    CharCode[CharCode[\"U_Combining_Inverted_Breve\"] = 785] = \"U_Combining_Inverted_Breve\";\n    CharCode[CharCode[\"U_Combining_Turned_Comma_Above\"] = 786] = \"U_Combining_Turned_Comma_Above\";\n    CharCode[CharCode[\"U_Combining_Comma_Above\"] = 787] = \"U_Combining_Comma_Above\";\n    CharCode[CharCode[\"U_Combining_Reversed_Comma_Above\"] = 788] = \"U_Combining_Reversed_Comma_Above\";\n    CharCode[CharCode[\"U_Combining_Comma_Above_Right\"] = 789] = \"U_Combining_Comma_Above_Right\";\n    CharCode[CharCode[\"U_Combining_Grave_Accent_Below\"] = 790] = \"U_Combining_Grave_Accent_Below\";\n    CharCode[CharCode[\"U_Combining_Acute_Accent_Below\"] = 791] = \"U_Combining_Acute_Accent_Below\";\n    CharCode[CharCode[\"U_Combining_Left_Tack_Below\"] = 792] = \"U_Combining_Left_Tack_Below\";\n    CharCode[CharCode[\"U_Combining_Right_Tack_Below\"] = 793] = \"U_Combining_Right_Tack_Below\";\n    CharCode[CharCode[\"U_Combining_Left_Angle_Above\"] = 794] = \"U_Combining_Left_Angle_Above\";\n    CharCode[CharCode[\"U_Combining_Horn\"] = 795] = \"U_Combining_Horn\";\n    CharCode[CharCode[\"U_Combining_Left_Half_Ring_Below\"] = 796] = \"U_Combining_Left_Half_Ring_Below\";\n    CharCode[CharCode[\"U_Combining_Up_Tack_Below\"] = 797] = \"U_Combining_Up_Tack_Below\";\n    CharCode[CharCode[\"U_Combining_Down_Tack_Below\"] = 798] = \"U_Combining_Down_Tack_Below\";\n    CharCode[CharCode[\"U_Combining_Plus_Sign_Below\"] = 799] = \"U_Combining_Plus_Sign_Below\";\n    CharCode[CharCode[\"U_Combining_Minus_Sign_Below\"] = 800] = \"U_Combining_Minus_Sign_Below\";\n    CharCode[CharCode[\"U_Combining_Palatalized_Hook_Below\"] = 801] = \"U_Combining_Palatalized_Hook_Below\";\n    CharCode[CharCode[\"U_Combining_Retroflex_Hook_Below\"] = 802] = \"U_Combining_Retroflex_Hook_Below\";\n    CharCode[CharCode[\"U_Combining_Dot_Below\"] = 803] = \"U_Combining_Dot_Below\";\n    CharCode[CharCode[\"U_Combining_Diaeresis_Below\"] = 804] = \"U_Combining_Diaeresis_Below\";\n    CharCode[CharCode[\"U_Combining_Ring_Below\"] = 805] = \"U_Combining_Ring_Below\";\n    CharCode[CharCode[\"U_Combining_Comma_Below\"] = 806] = \"U_Combining_Comma_Below\";\n    CharCode[CharCode[\"U_Combining_Cedilla\"] = 807] = \"U_Combining_Cedilla\";\n    CharCode[CharCode[\"U_Combining_Ogonek\"] = 808] = \"U_Combining_Ogonek\";\n    CharCode[CharCode[\"U_Combining_Vertical_Line_Below\"] = 809] = \"U_Combining_Vertical_Line_Below\";\n    CharCode[CharCode[\"U_Combining_Bridge_Below\"] = 810] = \"U_Combining_Bridge_Below\";\n    CharCode[CharCode[\"U_Combining_Inverted_Double_Arch_Below\"] = 811] = \"U_Combining_Inverted_Double_Arch_Below\";\n    CharCode[CharCode[\"U_Combining_Caron_Below\"] = 812] = \"U_Combining_Caron_Below\";\n    CharCode[CharCode[\"U_Combining_Circumflex_Accent_Below\"] = 813] = \"U_Combining_Circumflex_Accent_Below\";\n    CharCode[CharCode[\"U_Combining_Breve_Below\"] = 814] = \"U_Combining_Breve_Below\";\n    CharCode[CharCode[\"U_Combining_Inverted_Breve_Below\"] = 815] = \"U_Combining_Inverted_Breve_Below\";\n    CharCode[CharCode[\"U_Combining_Tilde_Below\"] = 816] = \"U_Combining_Tilde_Below\";\n    CharCode[CharCode[\"U_Combining_Macron_Below\"] = 817] = \"U_Combining_Macron_Below\";\n    CharCode[CharCode[\"U_Combining_Low_Line\"] = 818] = \"U_Combining_Low_Line\";\n    CharCode[CharCode[\"U_Combining_Double_Low_Line\"] = 819] = \"U_Combining_Double_Low_Line\";\n    CharCode[CharCode[\"U_Combining_Tilde_Overlay\"] = 820] = \"U_Combining_Tilde_Overlay\";\n    CharCode[CharCode[\"U_Combining_Short_Stroke_Overlay\"] = 821] = \"U_Combining_Short_Stroke_Overlay\";\n    CharCode[CharCode[\"U_Combining_Long_Stroke_Overlay\"] = 822] = \"U_Combining_Long_Stroke_Overlay\";\n    CharCode[CharCode[\"U_Combining_Short_Solidus_Overlay\"] = 823] = \"U_Combining_Short_Solidus_Overlay\";\n    CharCode[CharCode[\"U_Combining_Long_Solidus_Overlay\"] = 824] = \"U_Combining_Long_Solidus_Overlay\";\n    CharCode[CharCode[\"U_Combining_Right_Half_Ring_Below\"] = 825] = \"U_Combining_Right_Half_Ring_Below\";\n    CharCode[CharCode[\"U_Combining_Inverted_Bridge_Below\"] = 826] = \"U_Combining_Inverted_Bridge_Below\";\n    CharCode[CharCode[\"U_Combining_Square_Below\"] = 827] = \"U_Combining_Square_Below\";\n    CharCode[CharCode[\"U_Combining_Seagull_Below\"] = 828] = \"U_Combining_Seagull_Below\";\n    CharCode[CharCode[\"U_Combining_X_Above\"] = 829] = \"U_Combining_X_Above\";\n    CharCode[CharCode[\"U_Combining_Vertical_Tilde\"] = 830] = \"U_Combining_Vertical_Tilde\";\n    CharCode[CharCode[\"U_Combining_Double_Overline\"] = 831] = \"U_Combining_Double_Overline\";\n    CharCode[CharCode[\"U_Combining_Grave_Tone_Mark\"] = 832] = \"U_Combining_Grave_Tone_Mark\";\n    CharCode[CharCode[\"U_Combining_Acute_Tone_Mark\"] = 833] = \"U_Combining_Acute_Tone_Mark\";\n    CharCode[CharCode[\"U_Combining_Greek_Perispomeni\"] = 834] = \"U_Combining_Greek_Perispomeni\";\n    CharCode[CharCode[\"U_Combining_Greek_Koronis\"] = 835] = \"U_Combining_Greek_Koronis\";\n    CharCode[CharCode[\"U_Combining_Greek_Dialytika_Tonos\"] = 836] = \"U_Combining_Greek_Dialytika_Tonos\";\n    CharCode[CharCode[\"U_Combining_Greek_Ypogegrammeni\"] = 837] = \"U_Combining_Greek_Ypogegrammeni\";\n    CharCode[CharCode[\"U_Combining_Bridge_Above\"] = 838] = \"U_Combining_Bridge_Above\";\n    CharCode[CharCode[\"U_Combining_Equals_Sign_Below\"] = 839] = \"U_Combining_Equals_Sign_Below\";\n    CharCode[CharCode[\"U_Combining_Double_Vertical_Line_Below\"] = 840] = \"U_Combining_Double_Vertical_Line_Below\";\n    CharCode[CharCode[\"U_Combining_Left_Angle_Below\"] = 841] = \"U_Combining_Left_Angle_Below\";\n    CharCode[CharCode[\"U_Combining_Not_Tilde_Above\"] = 842] = \"U_Combining_Not_Tilde_Above\";\n    CharCode[CharCode[\"U_Combining_Homothetic_Above\"] = 843] = \"U_Combining_Homothetic_Above\";\n    CharCode[CharCode[\"U_Combining_Almost_Equal_To_Above\"] = 844] = \"U_Combining_Almost_Equal_To_Above\";\n    CharCode[CharCode[\"U_Combining_Left_Right_Arrow_Below\"] = 845] = \"U_Combining_Left_Right_Arrow_Below\";\n    CharCode[CharCode[\"U_Combining_Upwards_Arrow_Below\"] = 846] = \"U_Combining_Upwards_Arrow_Below\";\n    CharCode[CharCode[\"U_Combining_Grapheme_Joiner\"] = 847] = \"U_Combining_Grapheme_Joiner\";\n    CharCode[CharCode[\"U_Combining_Right_Arrowhead_Above\"] = 848] = \"U_Combining_Right_Arrowhead_Above\";\n    CharCode[CharCode[\"U_Combining_Left_Half_Ring_Above\"] = 849] = \"U_Combining_Left_Half_Ring_Above\";\n    CharCode[CharCode[\"U_Combining_Fermata\"] = 850] = \"U_Combining_Fermata\";\n    CharCode[CharCode[\"U_Combining_X_Below\"] = 851] = \"U_Combining_X_Below\";\n    CharCode[CharCode[\"U_Combining_Left_Arrowhead_Below\"] = 852] = \"U_Combining_Left_Arrowhead_Below\";\n    CharCode[CharCode[\"U_Combining_Right_Arrowhead_Below\"] = 853] = \"U_Combining_Right_Arrowhead_Below\";\n    CharCode[CharCode[\"U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below\"] = 854] = \"U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below\";\n    CharCode[CharCode[\"U_Combining_Right_Half_Ring_Above\"] = 855] = \"U_Combining_Right_Half_Ring_Above\";\n    CharCode[CharCode[\"U_Combining_Dot_Above_Right\"] = 856] = \"U_Combining_Dot_Above_Right\";\n    CharCode[CharCode[\"U_Combining_Asterisk_Below\"] = 857] = \"U_Combining_Asterisk_Below\";\n    CharCode[CharCode[\"U_Combining_Double_Ring_Below\"] = 858] = \"U_Combining_Double_Ring_Below\";\n    CharCode[CharCode[\"U_Combining_Zigzag_Above\"] = 859] = \"U_Combining_Zigzag_Above\";\n    CharCode[CharCode[\"U_Combining_Double_Breve_Below\"] = 860] = \"U_Combining_Double_Breve_Below\";\n    CharCode[CharCode[\"U_Combining_Double_Breve\"] = 861] = \"U_Combining_Double_Breve\";\n    CharCode[CharCode[\"U_Combining_Double_Macron\"] = 862] = \"U_Combining_Double_Macron\";\n    CharCode[CharCode[\"U_Combining_Double_Macron_Below\"] = 863] = \"U_Combining_Double_Macron_Below\";\n    CharCode[CharCode[\"U_Combining_Double_Tilde\"] = 864] = \"U_Combining_Double_Tilde\";\n    CharCode[CharCode[\"U_Combining_Double_Inverted_Breve\"] = 865] = \"U_Combining_Double_Inverted_Breve\";\n    CharCode[CharCode[\"U_Combining_Double_Rightwards_Arrow_Below\"] = 866] = \"U_Combining_Double_Rightwards_Arrow_Below\";\n    CharCode[CharCode[\"U_Combining_Latin_Small_Letter_A\"] = 867] = \"U_Combining_Latin_Small_Letter_A\";\n    CharCode[CharCode[\"U_Combining_Latin_Small_Letter_E\"] = 868] = \"U_Combining_Latin_Small_Letter_E\";\n    CharCode[CharCode[\"U_Combining_Latin_Small_Letter_I\"] = 869] = \"U_Combining_Latin_Small_Letter_I\";\n    CharCode[CharCode[\"U_Combining_Latin_Small_Letter_O\"] = 870] = \"U_Combining_Latin_Small_Letter_O\";\n    CharCode[CharCode[\"U_Combining_Latin_Small_Letter_U\"] = 871] = \"U_Combining_Latin_Small_Letter_U\";\n    CharCode[CharCode[\"U_Combining_Latin_Small_Letter_C\"] = 872] = \"U_Combining_Latin_Small_Letter_C\";\n    CharCode[CharCode[\"U_Combining_Latin_Small_Letter_D\"] = 873] = \"U_Combining_Latin_Small_Letter_D\";\n    CharCode[CharCode[\"U_Combining_Latin_Small_Letter_H\"] = 874] = \"U_Combining_Latin_Small_Letter_H\";\n    CharCode[CharCode[\"U_Combining_Latin_Small_Letter_M\"] = 875] = \"U_Combining_Latin_Small_Letter_M\";\n    CharCode[CharCode[\"U_Combining_Latin_Small_Letter_R\"] = 876] = \"U_Combining_Latin_Small_Letter_R\";\n    CharCode[CharCode[\"U_Combining_Latin_Small_Letter_T\"] = 877] = \"U_Combining_Latin_Small_Letter_T\";\n    CharCode[CharCode[\"U_Combining_Latin_Small_Letter_V\"] = 878] = \"U_Combining_Latin_Small_Letter_V\";\n    CharCode[CharCode[\"U_Combining_Latin_Small_Letter_X\"] = 879] = \"U_Combining_Latin_Small_Letter_X\";\n    /**\n     * Unicode Character 'LINE SEPARATOR' (U+2028)\n     * http://www.fileformat.info/info/unicode/char/2028/index.htm\n     */\n    CharCode[CharCode[\"LINE_SEPARATOR\"] = 8232] = \"LINE_SEPARATOR\";\n    /**\n     * Unicode Character 'PARAGRAPH SEPARATOR' (U+2029)\n     * http://www.fileformat.info/info/unicode/char/2029/index.htm\n     */\n    CharCode[CharCode[\"PARAGRAPH_SEPARATOR\"] = 8233] = \"PARAGRAPH_SEPARATOR\";\n    /**\n     * Unicode Character 'NEXT LINE' (U+0085)\n     * http://www.fileformat.info/info/unicode/char/0085/index.htm\n     */\n    CharCode[CharCode[\"NEXT_LINE\"] = 133] = \"NEXT_LINE\";\n    // http://www.fileformat.info/info/unicode/category/Sk/list.htm\n    CharCode[CharCode[\"U_CIRCUMFLEX\"] = 94] = \"U_CIRCUMFLEX\";\n    CharCode[CharCode[\"U_GRAVE_ACCENT\"] = 96] = \"U_GRAVE_ACCENT\";\n    CharCode[CharCode[\"U_DIAERESIS\"] = 168] = \"U_DIAERESIS\";\n    CharCode[CharCode[\"U_MACRON\"] = 175] = \"U_MACRON\";\n    CharCode[CharCode[\"U_ACUTE_ACCENT\"] = 180] = \"U_ACUTE_ACCENT\";\n    CharCode[CharCode[\"U_CEDILLA\"] = 184] = \"U_CEDILLA\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_LEFT_ARROWHEAD\"] = 706] = \"U_MODIFIER_LETTER_LEFT_ARROWHEAD\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_RIGHT_ARROWHEAD\"] = 707] = \"U_MODIFIER_LETTER_RIGHT_ARROWHEAD\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_UP_ARROWHEAD\"] = 708] = \"U_MODIFIER_LETTER_UP_ARROWHEAD\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_DOWN_ARROWHEAD\"] = 709] = \"U_MODIFIER_LETTER_DOWN_ARROWHEAD\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING\"] = 722] = \"U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING\"] = 723] = \"U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_UP_TACK\"] = 724] = \"U_MODIFIER_LETTER_UP_TACK\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_DOWN_TACK\"] = 725] = \"U_MODIFIER_LETTER_DOWN_TACK\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_PLUS_SIGN\"] = 726] = \"U_MODIFIER_LETTER_PLUS_SIGN\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_MINUS_SIGN\"] = 727] = \"U_MODIFIER_LETTER_MINUS_SIGN\";\n    CharCode[CharCode[\"U_BREVE\"] = 728] = \"U_BREVE\";\n    CharCode[CharCode[\"U_DOT_ABOVE\"] = 729] = \"U_DOT_ABOVE\";\n    CharCode[CharCode[\"U_RING_ABOVE\"] = 730] = \"U_RING_ABOVE\";\n    CharCode[CharCode[\"U_OGONEK\"] = 731] = \"U_OGONEK\";\n    CharCode[CharCode[\"U_SMALL_TILDE\"] = 732] = \"U_SMALL_TILDE\";\n    CharCode[CharCode[\"U_DOUBLE_ACUTE_ACCENT\"] = 733] = \"U_DOUBLE_ACUTE_ACCENT\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_RHOTIC_HOOK\"] = 734] = \"U_MODIFIER_LETTER_RHOTIC_HOOK\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_CROSS_ACCENT\"] = 735] = \"U_MODIFIER_LETTER_CROSS_ACCENT\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR\"] = 741] = \"U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_HIGH_TONE_BAR\"] = 742] = \"U_MODIFIER_LETTER_HIGH_TONE_BAR\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_MID_TONE_BAR\"] = 743] = \"U_MODIFIER_LETTER_MID_TONE_BAR\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_LOW_TONE_BAR\"] = 744] = \"U_MODIFIER_LETTER_LOW_TONE_BAR\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR\"] = 745] = \"U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK\"] = 746] = \"U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK\"] = 747] = \"U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_UNASPIRATED\"] = 749] = \"U_MODIFIER_LETTER_UNASPIRATED\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD\"] = 751] = \"U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_LOW_UP_ARROWHEAD\"] = 752] = \"U_MODIFIER_LETTER_LOW_UP_ARROWHEAD\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD\"] = 753] = \"U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD\"] = 754] = \"U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_LOW_RING\"] = 755] = \"U_MODIFIER_LETTER_LOW_RING\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT\"] = 756] = \"U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT\"] = 757] = \"U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT\"] = 758] = \"U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_LOW_TILDE\"] = 759] = \"U_MODIFIER_LETTER_LOW_TILDE\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_RAISED_COLON\"] = 760] = \"U_MODIFIER_LETTER_RAISED_COLON\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_BEGIN_HIGH_TONE\"] = 761] = \"U_MODIFIER_LETTER_BEGIN_HIGH_TONE\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_END_HIGH_TONE\"] = 762] = \"U_MODIFIER_LETTER_END_HIGH_TONE\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_BEGIN_LOW_TONE\"] = 763] = \"U_MODIFIER_LETTER_BEGIN_LOW_TONE\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_END_LOW_TONE\"] = 764] = \"U_MODIFIER_LETTER_END_LOW_TONE\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_SHELF\"] = 765] = \"U_MODIFIER_LETTER_SHELF\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_OPEN_SHELF\"] = 766] = \"U_MODIFIER_LETTER_OPEN_SHELF\";\n    CharCode[CharCode[\"U_MODIFIER_LETTER_LOW_LEFT_ARROW\"] = 767] = \"U_MODIFIER_LETTER_LOW_LEFT_ARROW\";\n    CharCode[CharCode[\"U_GREEK_LOWER_NUMERAL_SIGN\"] = 885] = \"U_GREEK_LOWER_NUMERAL_SIGN\";\n    CharCode[CharCode[\"U_GREEK_TONOS\"] = 900] = \"U_GREEK_TONOS\";\n    CharCode[CharCode[\"U_GREEK_DIALYTIKA_TONOS\"] = 901] = \"U_GREEK_DIALYTIKA_TONOS\";\n    CharCode[CharCode[\"U_GREEK_KORONIS\"] = 8125] = \"U_GREEK_KORONIS\";\n    CharCode[CharCode[\"U_GREEK_PSILI\"] = 8127] = \"U_GREEK_PSILI\";\n    CharCode[CharCode[\"U_GREEK_PERISPOMENI\"] = 8128] = \"U_GREEK_PERISPOMENI\";\n    CharCode[CharCode[\"U_GREEK_DIALYTIKA_AND_PERISPOMENI\"] = 8129] = \"U_GREEK_DIALYTIKA_AND_PERISPOMENI\";\n    CharCode[CharCode[\"U_GREEK_PSILI_AND_VARIA\"] = 8141] = \"U_GREEK_PSILI_AND_VARIA\";\n    CharCode[CharCode[\"U_GREEK_PSILI_AND_OXIA\"] = 8142] = \"U_GREEK_PSILI_AND_OXIA\";\n    CharCode[CharCode[\"U_GREEK_PSILI_AND_PERISPOMENI\"] = 8143] = \"U_GREEK_PSILI_AND_PERISPOMENI\";\n    CharCode[CharCode[\"U_GREEK_DASIA_AND_VARIA\"] = 8157] = \"U_GREEK_DASIA_AND_VARIA\";\n    CharCode[CharCode[\"U_GREEK_DASIA_AND_OXIA\"] = 8158] = \"U_GREEK_DASIA_AND_OXIA\";\n    CharCode[CharCode[\"U_GREEK_DASIA_AND_PERISPOMENI\"] = 8159] = \"U_GREEK_DASIA_AND_PERISPOMENI\";\n    CharCode[CharCode[\"U_GREEK_DIALYTIKA_AND_VARIA\"] = 8173] = \"U_GREEK_DIALYTIKA_AND_VARIA\";\n    CharCode[CharCode[\"U_GREEK_DIALYTIKA_AND_OXIA\"] = 8174] = \"U_GREEK_DIALYTIKA_AND_OXIA\";\n    CharCode[CharCode[\"U_GREEK_VARIA\"] = 8175] = \"U_GREEK_VARIA\";\n    CharCode[CharCode[\"U_GREEK_OXIA\"] = 8189] = \"U_GREEK_OXIA\";\n    CharCode[CharCode[\"U_GREEK_DASIA\"] = 8190] = \"U_GREEK_DASIA\";\n    CharCode[CharCode[\"U_IDEOGRAPHIC_FULL_STOP\"] = 12290] = \"U_IDEOGRAPHIC_FULL_STOP\";\n    CharCode[CharCode[\"U_LEFT_CORNER_BRACKET\"] = 12300] = \"U_LEFT_CORNER_BRACKET\";\n    CharCode[CharCode[\"U_RIGHT_CORNER_BRACKET\"] = 12301] = \"U_RIGHT_CORNER_BRACKET\";\n    CharCode[CharCode[\"U_LEFT_BLACK_LENTICULAR_BRACKET\"] = 12304] = \"U_LEFT_BLACK_LENTICULAR_BRACKET\";\n    CharCode[CharCode[\"U_RIGHT_BLACK_LENTICULAR_BRACKET\"] = 12305] = \"U_RIGHT_BLACK_LENTICULAR_BRACKET\";\n    CharCode[CharCode[\"U_OVERLINE\"] = 8254] = \"U_OVERLINE\";\n    /**\n     * UTF-8 BOM\n     * Unicode Character 'ZERO WIDTH NO-BREAK SPACE' (U+FEFF)\n     * http://www.fileformat.info/info/unicode/char/feff/index.htm\n     */\n    CharCode[CharCode[\"UTF8_BOM\"] = 65279] = \"UTF8_BOM\";\n    CharCode[CharCode[\"U_FULLWIDTH_SEMICOLON\"] = 65307] = \"U_FULLWIDTH_SEMICOLON\";\n    CharCode[CharCode[\"U_FULLWIDTH_COMMA\"] = 65292] = \"U_FULLWIDTH_COMMA\";\n})(CharCode || (exports.CharCode = CharCode = {}));\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SetWithKey = void 0;\nexports.groupBy = groupBy;\nexports.diffSets = diffSets;\nexports.diffMaps = diffMaps;\nexports.intersection = intersection;\n/**\n * Groups the collection into a dictionary based on the provided\n * group function.\n */\nfunction groupBy(data, groupFn) {\n    const result = Object.create(null);\n    for (const element of data) {\n        const key = groupFn(element);\n        let target = result[key];\n        if (!target) {\n            target = result[key] = [];\n        }\n        target.push(element);\n    }\n    return result;\n}\nfunction diffSets(before, after) {\n    const removed = [];\n    const added = [];\n    for (const element of before) {\n        if (!after.has(element)) {\n            removed.push(element);\n        }\n    }\n    for (const element of after) {\n        if (!before.has(element)) {\n            added.push(element);\n        }\n    }\n    return { removed, added };\n}\nfunction diffMaps(before, after) {\n    const removed = [];\n    const added = [];\n    for (const [index, value] of before) {\n        if (!after.has(index)) {\n            removed.push(value);\n        }\n    }\n    for (const [index, value] of after) {\n        if (!before.has(index)) {\n            added.push(value);\n        }\n    }\n    return { removed, added };\n}\n/**\n * Computes the intersection of two sets.\n *\n * @param setA - The first set.\n * @param setB - The second iterable.\n * @returns A new set containing the elements that are in both `setA` and `setB`.\n */\nfunction intersection(setA, setB) {\n    const result = new Set();\n    for (const elem of setB) {\n        if (setA.has(elem)) {\n            result.add(elem);\n        }\n    }\n    return result;\n}\nclass SetWithKey {\n    static { _a = Symbol.toStringTag; }\n    constructor(values, toKey) {\n        this.toKey = toKey;\n        this._map = new Map();\n        this[_a] = 'SetWithKey';\n        for (const value of values) {\n            this.add(value);\n        }\n    }\n    get size() {\n        return this._map.size;\n    }\n    add(value) {\n        const key = this.toKey(value);\n        this._map.set(key, value);\n        return this;\n    }\n    delete(value) {\n        return this._map.delete(this.toKey(value));\n    }\n    has(value) {\n        return this._map.has(this.toKey(value));\n    }\n    *entries() {\n        for (const entry of this._map.values()) {\n            yield [entry, entry];\n        }\n    }\n    keys() {\n        return this.values();\n    }\n    *values() {\n        for (const entry of this._map.values()) {\n            yield entry;\n        }\n    }\n    clear() {\n        this._map.clear();\n    }\n    forEach(callbackfn, thisArg) {\n        this._map.forEach(entry => callbackfn.call(thisArg, entry, entry, this));\n    }\n    [Symbol.iterator]() {\n        return this.values();\n    }\n}\nexports.SetWithKey = SetWithKey;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BugIndicatingError = exports.ErrorNoTelemetry = exports.ExpectedError = exports.NotSupportedError = exports.NotImplementedError = exports.ReadonlyError = exports.CancellationError = exports.errorHandler = exports.ErrorHandler = void 0;\nexports.setUnexpectedErrorHandler = setUnexpectedErrorHandler;\nexports.isSigPipeError = isSigPipeError;\nexports.onUnexpectedError = onUnexpectedError;\nexports.onUnexpectedExternalError = onUnexpectedExternalError;\nexports.transformErrorForSerialization = transformErrorForSerialization;\nexports.transformErrorFromSerialization = transformErrorFromSerialization;\nexports.isCancellationError = isCancellationError;\nexports.canceled = canceled;\nexports.illegalArgument = illegalArgument;\nexports.illegalState = illegalState;\nexports.getErrorMessage = getErrorMessage;\n// Avoid circular dependency on EventEmitter by implementing a subset of the interface.\nclass ErrorHandler {\n    constructor() {\n        this.listeners = [];\n        this.unexpectedErrorHandler = function (e) {\n            setTimeout(() => {\n                if (e.stack) {\n                    if (ErrorNoTelemetry.isErrorNoTelemetry(e)) {\n                        throw new ErrorNoTelemetry(e.message + '\\n\\n' + e.stack);\n                    }\n                    throw new Error(e.message + '\\n\\n' + e.stack);\n                }\n                throw e;\n            }, 0);\n        };\n    }\n    addListener(listener) {\n        this.listeners.push(listener);\n        return () => {\n            this._removeListener(listener);\n        };\n    }\n    emit(e) {\n        this.listeners.forEach((listener) => {\n            listener(e);\n        });\n    }\n    _removeListener(listener) {\n        this.listeners.splice(this.listeners.indexOf(listener), 1);\n    }\n    setUnexpectedErrorHandler(newUnexpectedErrorHandler) {\n        this.unexpectedErrorHandler = newUnexpectedErrorHandler;\n    }\n    getUnexpectedErrorHandler() {\n        return this.unexpectedErrorHandler;\n    }\n    onUnexpectedError(e) {\n        this.unexpectedErrorHandler(e);\n        this.emit(e);\n    }\n    // For external errors, we don't want the listeners to be called\n    onUnexpectedExternalError(e) {\n        this.unexpectedErrorHandler(e);\n    }\n}\nexports.ErrorHandler = ErrorHandler;\nexports.errorHandler = new ErrorHandler();\n/** @skipMangle */\nfunction setUnexpectedErrorHandler(newUnexpectedErrorHandler) {\n    exports.errorHandler.setUnexpectedErrorHandler(newUnexpectedErrorHandler);\n}\n/**\n * Returns if the error is a SIGPIPE error. SIGPIPE errors should generally be\n * logged at most once, to avoid a loop.\n *\n * @see https://github.com/microsoft/vscode-remote-release/issues/6481\n */\nfunction isSigPipeError(e) {\n    if (!e || typeof e !== 'object') {\n        return false;\n    }\n    const cast = e;\n    return cast.code === 'EPIPE' && cast.syscall?.toUpperCase() === 'WRITE';\n}\nfunction onUnexpectedError(e) {\n    // ignore errors from cancelled promises\n    if (!isCancellationError(e)) {\n        exports.errorHandler.onUnexpectedError(e);\n    }\n    return undefined;\n}\nfunction onUnexpectedExternalError(e) {\n    // ignore errors from cancelled promises\n    if (!isCancellationError(e)) {\n        exports.errorHandler.onUnexpectedExternalError(e);\n    }\n    return undefined;\n}\nfunction transformErrorForSerialization(error) {\n    if (error instanceof Error) {\n        const { name, message } = error;\n        const stack = error.stacktrace || error.stack;\n        return {\n            $isError: true,\n            name,\n            message,\n            stack,\n            noTelemetry: ErrorNoTelemetry.isErrorNoTelemetry(error)\n        };\n    }\n    // return as is\n    return error;\n}\nfunction transformErrorFromSerialization(data) {\n    let error;\n    if (data.noTelemetry) {\n        error = new ErrorNoTelemetry();\n    }\n    else {\n        error = new Error();\n        error.name = data.name;\n    }\n    error.message = data.message;\n    error.stack = data.stack;\n    return error;\n}\nconst canceledName = 'Canceled';\n/**\n * Checks if the given error is a promise in canceled state\n */\nfunction isCancellationError(error) {\n    if (error instanceof CancellationError) {\n        return true;\n    }\n    return error instanceof Error && error.name === canceledName && error.message === canceledName;\n}\n// !!!IMPORTANT!!!\n// Do NOT change this class because it is also used as an API-type.\nclass CancellationError extends Error {\n    constructor() {\n        super(canceledName);\n        this.name = this.message;\n    }\n}\nexports.CancellationError = CancellationError;\n/**\n * @deprecated use {@link CancellationError `new CancellationError()`} instead\n */\nfunction canceled() {\n    const error = new Error(canceledName);\n    error.name = error.message;\n    return error;\n}\nfunction illegalArgument(name) {\n    if (name) {\n        return new Error(`Illegal argument: ${name}`);\n    }\n    else {\n        return new Error('Illegal argument');\n    }\n}\nfunction illegalState(name) {\n    if (name) {\n        return new Error(`Illegal state: ${name}`);\n    }\n    else {\n        return new Error('Illegal state');\n    }\n}\nclass ReadonlyError extends TypeError {\n    constructor(name) {\n        super(name ? `${name} is read-only and cannot be changed` : 'Cannot change read-only property');\n    }\n}\nexports.ReadonlyError = ReadonlyError;\nfunction getErrorMessage(err) {\n    if (!err) {\n        return 'Error';\n    }\n    if (err.message) {\n        return err.message;\n    }\n    if (err.stack) {\n        return err.stack.split('\\n')[0];\n    }\n    return String(err);\n}\nclass NotImplementedError extends Error {\n    constructor(message) {\n        super('NotImplemented');\n        if (message) {\n            this.message = message;\n        }\n    }\n}\nexports.NotImplementedError = NotImplementedError;\nclass NotSupportedError extends Error {\n    constructor(message) {\n        super('NotSupported');\n        if (message) {\n            this.message = message;\n        }\n    }\n}\nexports.NotSupportedError = NotSupportedError;\nclass ExpectedError extends Error {\n    constructor() {\n        super(...arguments);\n        this.isExpected = true;\n    }\n}\nexports.ExpectedError = ExpectedError;\n/**\n * Error that when thrown won't be logged in telemetry as an unhandled error.\n */\nclass ErrorNoTelemetry extends Error {\n    constructor(msg) {\n        super(msg);\n        this.name = 'CodeExpectedError';\n    }\n    static fromError(err) {\n        if (err instanceof ErrorNoTelemetry) {\n            return err;\n        }\n        const result = new ErrorNoTelemetry();\n        result.message = err.message;\n        result.stack = err.stack;\n        return result;\n    }\n    static isErrorNoTelemetry(err) {\n        return err.name === 'CodeExpectedError';\n    }\n}\nexports.ErrorNoTelemetry = ErrorNoTelemetry;\n/**\n * This error indicates a bug.\n * Do not throw this for invalid user input.\n * Only catch this error to recover gracefully from bugs.\n */\nclass BugIndicatingError extends Error {\n    constructor(message) {\n        super(message || 'An unexpected bug occurred.');\n        Object.setPrototypeOf(this, BugIndicatingError.prototype);\n        // Because we know for sure only buggy code throws this,\n        // we definitely want to break here and fix the bug.\n        // eslint-disable-next-line no-debugger\n        // debugger;\n    }\n}\nexports.BugIndicatingError = BugIndicatingError;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ValueWithChangeEvent = exports.Relay = exports.EventBufferer = exports.DynamicListEventMultiplexer = exports.EventMultiplexer = exports.MicrotaskEmitter = exports.DebounceEmitter = exports.PauseableEmitter = exports.AsyncEmitter = exports.createEventDeliveryQueue = exports.Emitter = exports.ListenerRefusalError = exports.ListenerLeakError = exports.EventProfiling = exports.Event = void 0;\nexports.setGlobalLeakWarningThreshold = setGlobalLeakWarningThreshold;\nconst errors_1 = require(\"vs/base/common/errors\");\nconst functional_1 = require(\"vs/base/common/functional\");\nconst lifecycle_1 = require(\"vs/base/common/lifecycle\");\nconst linkedList_1 = require(\"vs/base/common/linkedList\");\nconst stopwatch_1 = require(\"vs/base/common/stopwatch\");\n// -----------------------------------------------------------------------------------------------------------------------\n// Uncomment the next line to print warnings whenever a listener is GC'ed without having been disposed. This is a LEAK.\n// -----------------------------------------------------------------------------------------------------------------------\nconst _enableListenerGCedWarning = false;\n// -----------------------------------------------------------------------------------------------------------------------\n// Uncomment the next line to print warnings whenever an emitter with listeners is disposed. That is a sign of code smell.\n// -----------------------------------------------------------------------------------------------------------------------\nconst _enableDisposeWithListenerWarning = false;\n// -----------------------------------------------------------------------------------------------------------------------\n// Uncomment the next line to print warnings whenever a snapshotted event is used repeatedly without cleanup.\n// See https://github.com/microsoft/vscode/issues/142851\n// -----------------------------------------------------------------------------------------------------------------------\nconst _enableSnapshotPotentialLeakWarning = false;\nvar Event;\n(function (Event) {\n    Event.None = () => lifecycle_1.Disposable.None;\n    function _addLeakageTraceLogic(options) {\n        if (_enableSnapshotPotentialLeakWarning) {\n            const { onDidAddListener: origListenerDidAdd } = options;\n            const stack = Stacktrace.create();\n            let count = 0;\n            options.onDidAddListener = () => {\n                if (++count === 2) {\n                    console.warn('snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here');\n                    stack.print();\n                }\n                origListenerDidAdd?.();\n            };\n        }\n    }\n    /**\n     * Given an event, returns another event which debounces calls and defers the listeners to a later task via a shared\n     * `setTimeout`. The event is converted into a signal (`Event<void>`) to avoid additional object creation as a\n     * result of merging events and to try prevent race conditions that could arise when using related deferred and\n     * non-deferred events.\n     *\n     * This is useful for deferring non-critical work (eg. general UI updates) to ensure it does not block critical work\n     * (eg. latency of keypress to text rendered).\n     *\n     * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n     * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n     * returned event causes this utility to leak a listener on the original event.\n     *\n     * @param event The event source for the new event.\n     * @param disposable A disposable store to add the new EventEmitter to.\n     */\n    function defer(event, disposable) {\n        return debounce(event, () => void 0, 0, undefined, true, undefined, disposable);\n    }\n    Event.defer = defer;\n    /**\n     * Given an event, returns another event which only fires once.\n     *\n     * @param event The event source for the new event.\n     */\n    function once(event) {\n        return (listener, thisArgs = null, disposables) => {\n            // we need this, in case the event fires during the listener call\n            let didFire = false;\n            let result = undefined;\n            result = event(e => {\n                if (didFire) {\n                    return;\n                }\n                else if (result) {\n                    result.dispose();\n                }\n                else {\n                    didFire = true;\n                }\n                return listener.call(thisArgs, e);\n            }, null, disposables);\n            if (didFire) {\n                result.dispose();\n            }\n            return result;\n        };\n    }\n    Event.once = once;\n    /**\n     * Maps an event of one type into an event of another type using a mapping function, similar to how\n     * `Array.prototype.map` works.\n     *\n     * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n     * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n     * returned event causes this utility to leak a listener on the original event.\n     *\n     * @param event The event source for the new event.\n     * @param map The mapping function.\n     * @param disposable A disposable store to add the new EventEmitter to.\n     */\n    function map(event, map, disposable) {\n        return snapshot((listener, thisArgs = null, disposables) => event(i => listener.call(thisArgs, map(i)), null, disposables), disposable);\n    }\n    Event.map = map;\n    /**\n     * Wraps an event in another event that performs some function on the event object before firing.\n     *\n     * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n     * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n     * returned event causes this utility to leak a listener on the original event.\n     *\n     * @param event The event source for the new event.\n     * @param each The function to perform on the event object.\n     * @param disposable A disposable store to add the new EventEmitter to.\n     */\n    function forEach(event, each, disposable) {\n        return snapshot((listener, thisArgs = null, disposables) => event(i => { each(i); listener.call(thisArgs, i); }, null, disposables), disposable);\n    }\n    Event.forEach = forEach;\n    function filter(event, filter, disposable) {\n        return snapshot((listener, thisArgs = null, disposables) => event(e => filter(e) && listener.call(thisArgs, e), null, disposables), disposable);\n    }\n    Event.filter = filter;\n    /**\n     * Given an event, returns the same event but typed as `Event<void>`.\n     */\n    function signal(event) {\n        return event;\n    }\n    Event.signal = signal;\n    function any(...events) {\n        return (listener, thisArgs = null, disposables) => {\n            const disposable = (0, lifecycle_1.combinedDisposable)(...events.map(event => event(e => listener.call(thisArgs, e))));\n            return addAndReturnDisposable(disposable, disposables);\n        };\n    }\n    Event.any = any;\n    /**\n     * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n     * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n     * returned event causes this utility to leak a listener on the original event.\n     */\n    function reduce(event, merge, initial, disposable) {\n        let output = initial;\n        return map(event, e => {\n            output = merge(output, e);\n            return output;\n        }, disposable);\n    }\n    Event.reduce = reduce;\n    function snapshot(event, disposable) {\n        let listener;\n        const options = {\n            onWillAddFirstListener() {\n                listener = event(emitter.fire, emitter);\n            },\n            onDidRemoveLastListener() {\n                listener?.dispose();\n            }\n        };\n        if (!disposable) {\n            _addLeakageTraceLogic(options);\n        }\n        const emitter = new Emitter(options);\n        disposable?.add(emitter);\n        return emitter.event;\n    }\n    /**\n     * Adds the IDisposable to the store if it's set, and returns it. Useful to\n     * Event function implementation.\n     */\n    function addAndReturnDisposable(d, store) {\n        if (store instanceof Array) {\n            store.push(d);\n        }\n        else if (store) {\n            store.add(d);\n        }\n        return d;\n    }\n    function debounce(event, merge, delay = 100, leading = false, flushOnListenerRemove = false, leakWarningThreshold, disposable) {\n        let subscription;\n        let output = undefined;\n        let handle = undefined;\n        let numDebouncedCalls = 0;\n        let doFire;\n        const options = {\n            leakWarningThreshold,\n            onWillAddFirstListener() {\n                subscription = event(cur => {\n                    numDebouncedCalls++;\n                    output = merge(output, cur);\n                    if (leading && !handle) {\n                        emitter.fire(output);\n                        output = undefined;\n                    }\n                    doFire = () => {\n                        const _output = output;\n                        output = undefined;\n                        handle = undefined;\n                        if (!leading || numDebouncedCalls > 1) {\n                            emitter.fire(_output);\n                        }\n                        numDebouncedCalls = 0;\n                    };\n                    if (typeof delay === 'number') {\n                        clearTimeout(handle);\n                        handle = setTimeout(doFire, delay);\n                    }\n                    else {\n                        if (handle === undefined) {\n                            handle = 0;\n                            queueMicrotask(doFire);\n                        }\n                    }\n                });\n            },\n            onWillRemoveListener() {\n                if (flushOnListenerRemove && numDebouncedCalls > 0) {\n                    doFire?.();\n                }\n            },\n            onDidRemoveLastListener() {\n                doFire = undefined;\n                subscription.dispose();\n            }\n        };\n        if (!disposable) {\n            _addLeakageTraceLogic(options);\n        }\n        const emitter = new Emitter(options);\n        disposable?.add(emitter);\n        return emitter.event;\n    }\n    Event.debounce = debounce;\n    /**\n     * Debounces an event, firing after some delay (default=0) with an array of all event original objects.\n     *\n     * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n     * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n     * returned event causes this utility to leak a listener on the original event.\n     */\n    function accumulate(event, delay = 0, disposable) {\n        return Event.debounce(event, (last, e) => {\n            if (!last) {\n                return [e];\n            }\n            last.push(e);\n            return last;\n        }, delay, undefined, true, undefined, disposable);\n    }\n    Event.accumulate = accumulate;\n    /**\n     * Filters an event such that some condition is _not_ met more than once in a row, effectively ensuring duplicate\n     * event objects from different sources do not fire the same event object.\n     *\n     * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n     * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n     * returned event causes this utility to leak a listener on the original event.\n     *\n     * @param event The event source for the new event.\n     * @param equals The equality condition.\n     * @param disposable A disposable store to add the new EventEmitter to.\n     *\n     * @example\n     * ```\n     * // Fire only one time when a single window is opened or focused\n     * Event.latch(Event.any(onDidOpenWindow, onDidFocusWindow))\n     * ```\n     */\n    function latch(event, equals = (a, b) => a === b, disposable) {\n        let firstCall = true;\n        let cache;\n        return filter(event, value => {\n            const shouldEmit = firstCall || !equals(value, cache);\n            firstCall = false;\n            cache = value;\n            return shouldEmit;\n        }, disposable);\n    }\n    Event.latch = latch;\n    /**\n     * Splits an event whose parameter is a union type into 2 separate events for each type in the union.\n     *\n     * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n     * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n     * returned event causes this utility to leak a listener on the original event.\n     *\n     * @example\n     * ```\n     * const event = new EventEmitter<number | undefined>().event;\n     * const [numberEvent, undefinedEvent] = Event.split(event, isUndefined);\n     * ```\n     *\n     * @param event The event source for the new event.\n     * @param isT A function that determines what event is of the first type.\n     * @param disposable A disposable store to add the new EventEmitter to.\n     */\n    function split(event, isT, disposable) {\n        return [\n            Event.filter(event, isT, disposable),\n            Event.filter(event, e => !isT(e), disposable),\n        ];\n    }\n    Event.split = split;\n    /**\n     * Buffers an event until it has a listener attached.\n     *\n     * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n     * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n     * returned event causes this utility to leak a listener on the original event.\n     *\n     * @param event The event source for the new event.\n     * @param flushAfterTimeout Determines whether to flush the buffer after a timeout immediately or after a\n     * `setTimeout` when the first event listener is added.\n     * @param _buffer Internal: A source event array used for tests.\n     *\n     * @example\n     * ```\n     * // Start accumulating events, when the first listener is attached, flush\n     * // the event after a timeout such that multiple listeners attached before\n     * // the timeout would receive the event\n     * this.onInstallExtension = Event.buffer(service.onInstallExtension, true);\n     * ```\n     */\n    function buffer(event, flushAfterTimeout = false, _buffer = [], disposable) {\n        let buffer = _buffer.slice();\n        let listener = event(e => {\n            if (buffer) {\n                buffer.push(e);\n            }\n            else {\n                emitter.fire(e);\n            }\n        });\n        if (disposable) {\n            disposable.add(listener);\n        }\n        const flush = () => {\n            buffer?.forEach(e => emitter.fire(e));\n            buffer = null;\n        };\n        const emitter = new Emitter({\n            onWillAddFirstListener() {\n                if (!listener) {\n                    listener = event(e => emitter.fire(e));\n                    if (disposable) {\n                        disposable.add(listener);\n                    }\n                }\n            },\n            onDidAddFirstListener() {\n                if (buffer) {\n                    if (flushAfterTimeout) {\n                        setTimeout(flush);\n                    }\n                    else {\n                        flush();\n                    }\n                }\n            },\n            onDidRemoveLastListener() {\n                if (listener) {\n                    listener.dispose();\n                }\n                listener = null;\n            }\n        });\n        if (disposable) {\n            disposable.add(emitter);\n        }\n        return emitter.event;\n    }\n    Event.buffer = buffer;\n    /**\n     * Wraps the event in an {@link IChainableEvent}, allowing a more functional programming style.\n     *\n     * @example\n     * ```\n     * // Normal\n     * const onEnterPressNormal = Event.filter(\n     *   Event.map(onKeyPress.event, e => new StandardKeyboardEvent(e)),\n     *   e.keyCode === KeyCode.Enter\n     * ).event;\n     *\n     * // Using chain\n     * const onEnterPressChain = Event.chain(onKeyPress.event, $ => $\n     *   .map(e => new StandardKeyboardEvent(e))\n     *   .filter(e => e.keyCode === KeyCode.Enter)\n     * );\n     * ```\n     */\n    function chain(event, sythensize) {\n        const fn = (listener, thisArgs, disposables) => {\n            const cs = sythensize(new ChainableSynthesis());\n            return event(function (value) {\n                const result = cs.evaluate(value);\n                if (result !== HaltChainable) {\n                    listener.call(thisArgs, result);\n                }\n            }, undefined, disposables);\n        };\n        return fn;\n    }\n    Event.chain = chain;\n    const HaltChainable = Symbol('HaltChainable');\n    class ChainableSynthesis {\n        constructor() {\n            this.steps = [];\n        }\n        map(fn) {\n            this.steps.push(fn);\n            return this;\n        }\n        forEach(fn) {\n            this.steps.push(v => {\n                fn(v);\n                return v;\n            });\n            return this;\n        }\n        filter(fn) {\n            this.steps.push(v => fn(v) ? v : HaltChainable);\n            return this;\n        }\n        reduce(merge, initial) {\n            let last = initial;\n            this.steps.push(v => {\n                last = merge(last, v);\n                return last;\n            });\n            return this;\n        }\n        latch(equals = (a, b) => a === b) {\n            let firstCall = true;\n            let cache;\n            this.steps.push(value => {\n                const shouldEmit = firstCall || !equals(value, cache);\n                firstCall = false;\n                cache = value;\n                return shouldEmit ? value : HaltChainable;\n            });\n            return this;\n        }\n        evaluate(value) {\n            for (const step of this.steps) {\n                value = step(value);\n                if (value === HaltChainable) {\n                    break;\n                }\n            }\n            return value;\n        }\n    }\n    /**\n     * Creates an {@link Event} from a node event emitter.\n     */\n    function fromNodeEventEmitter(emitter, eventName, map = id => id) {\n        const fn = (...args) => result.fire(map(...args));\n        const onFirstListenerAdd = () => emitter.on(eventName, fn);\n        const onLastListenerRemove = () => emitter.removeListener(eventName, fn);\n        const result = new Emitter({ onWillAddFirstListener: onFirstListenerAdd, onDidRemoveLastListener: onLastListenerRemove });\n        return result.event;\n    }\n    Event.fromNodeEventEmitter = fromNodeEventEmitter;\n    /**\n     * Creates an {@link Event} from a DOM event emitter.\n     */\n    function fromDOMEventEmitter(emitter, eventName, map = id => id) {\n        const fn = (...args) => result.fire(map(...args));\n        const onFirstListenerAdd = () => emitter.addEventListener(eventName, fn);\n        const onLastListenerRemove = () => emitter.removeEventListener(eventName, fn);\n        const result = new Emitter({ onWillAddFirstListener: onFirstListenerAdd, onDidRemoveLastListener: onLastListenerRemove });\n        return result.event;\n    }\n    Event.fromDOMEventEmitter = fromDOMEventEmitter;\n    /**\n     * Creates a promise out of an event, using the {@link Event.once} helper.\n     */\n    function toPromise(event) {\n        return new Promise(resolve => once(event)(resolve));\n    }\n    Event.toPromise = toPromise;\n    /**\n     * Creates an event out of a promise that fires once when the promise is\n     * resolved with the result of the promise or `undefined`.\n     */\n    function fromPromise(promise) {\n        const result = new Emitter();\n        promise.then(res => {\n            result.fire(res);\n        }, () => {\n            result.fire(undefined);\n        }).finally(() => {\n            result.dispose();\n        });\n        return result.event;\n    }\n    Event.fromPromise = fromPromise;\n    /**\n     * A convenience function for forwarding an event to another emitter which\n     * improves readability.allows Event.forward(event, emitter) instead of `event(e => emitter.fire(e))`.\n     * @param from The event to forward.\n     * @param to The emitter to forward the event to.\n     * @example\n     * Event.forward(event, emitter);\n     * // equivalent to\n     * event(e => emitter.fire(e));\n     * // equivalent to\n     * event(emitter.fire, emitter);\n     */\n    function forward(from, to) {\n        return from(e => to.fire(e));\n    }\n    Event.forward = forward;\n    function runAndSubscribe(event, handler, initial) {\n        handler(initial);\n        return event(e => handler(e));\n    }\n    Event.runAndSubscribe = runAndSubscribe;\n    class EmitterObserver {\n        constructor(_observable, store) {\n            this._observable = _observable;\n            this._counter = 0;\n            this._hasChanged = false;\n            const options = {\n                onWillAddFirstListener: () => {\n                    _observable.addObserver(this);\n                },\n                onDidRemoveLastListener: () => {\n                    _observable.removeObserver(this);\n                }\n            };\n            if (!store) {\n                _addLeakageTraceLogic(options);\n            }\n            this.emitter = new Emitter(options);\n            if (store) {\n                store.add(this.emitter);\n            }\n        }\n        beginUpdate(_observable) {\n            // assert(_observable === this.obs);\n            this._counter++;\n        }\n        handlePossibleChange(_observable) {\n            // assert(_observable === this.obs);\n        }\n        handleChange(_observable, _change) {\n            // assert(_observable === this.obs);\n            this._hasChanged = true;\n        }\n        endUpdate(_observable) {\n            // assert(_observable === this.obs);\n            this._counter--;\n            if (this._counter === 0) {\n                this._observable.reportChanges();\n                if (this._hasChanged) {\n                    this._hasChanged = false;\n                    this.emitter.fire(this._observable.get());\n                }\n            }\n        }\n    }\n    /**\n     * Creates an event emitter that is fired when the observable changes.\n     * Each listeners subscribes to the emitter.\n     */\n    function fromObservable(obs, store) {\n        const observer = new EmitterObserver(obs, store);\n        return observer.emitter.event;\n    }\n    Event.fromObservable = fromObservable;\n    /**\n     * Each listener is attached to the observable directly.\n     */\n    function fromObservableLight(observable) {\n        return (listener, thisArgs, disposables) => {\n            let count = 0;\n            let didChange = false;\n            const observer = {\n                beginUpdate() {\n                    count++;\n                },\n                endUpdate() {\n                    count--;\n                    if (count === 0) {\n                        observable.reportChanges();\n                        if (didChange) {\n                            didChange = false;\n                            listener.call(thisArgs);\n                        }\n                    }\n                },\n                handlePossibleChange() {\n                    // noop\n                },\n                handleChange() {\n                    didChange = true;\n                }\n            };\n            observable.addObserver(observer);\n            observable.reportChanges();\n            const disposable = {\n                dispose() {\n                    observable.removeObserver(observer);\n                }\n            };\n            if (disposables instanceof lifecycle_1.DisposableStore) {\n                disposables.add(disposable);\n            }\n            else if (Array.isArray(disposables)) {\n                disposables.push(disposable);\n            }\n            return disposable;\n        };\n    }\n    Event.fromObservableLight = fromObservableLight;\n})(Event || (exports.Event = Event = {}));\nclass EventProfiling {\n    static { this.all = new Set(); }\n    static { this._idPool = 0; }\n    constructor(name) {\n        this.listenerCount = 0;\n        this.invocationCount = 0;\n        this.elapsedOverall = 0;\n        this.durations = [];\n        this.name = `${name}_${EventProfiling._idPool++}`;\n        EventProfiling.all.add(this);\n    }\n    start(listenerCount) {\n        this._stopWatch = new stopwatch_1.StopWatch();\n        this.listenerCount = listenerCount;\n    }\n    stop() {\n        if (this._stopWatch) {\n            const elapsed = this._stopWatch.elapsed();\n            this.durations.push(elapsed);\n            this.elapsedOverall += elapsed;\n            this.invocationCount += 1;\n            this._stopWatch = undefined;\n        }\n    }\n}\nexports.EventProfiling = EventProfiling;\nlet _globalLeakWarningThreshold = -1;\nfunction setGlobalLeakWarningThreshold(n) {\n    const oldValue = _globalLeakWarningThreshold;\n    _globalLeakWarningThreshold = n;\n    return {\n        dispose() {\n            _globalLeakWarningThreshold = oldValue;\n        }\n    };\n}\nclass LeakageMonitor {\n    static { this._idPool = 1; }\n    constructor(_errorHandler, threshold, name = (LeakageMonitor._idPool++).toString(16).padStart(3, '0')) {\n        this._errorHandler = _errorHandler;\n        this.threshold = threshold;\n        this.name = name;\n        this._warnCountdown = 0;\n    }\n    dispose() {\n        this._stacks?.clear();\n    }\n    check(stack, listenerCount) {\n        const threshold = this.threshold;\n        if (threshold <= 0 || listenerCount < threshold) {\n            return undefined;\n        }\n        if (!this._stacks) {\n            this._stacks = new Map();\n        }\n        const count = (this._stacks.get(stack.value) || 0);\n        this._stacks.set(stack.value, count + 1);\n        this._warnCountdown -= 1;\n        if (this._warnCountdown <= 0) {\n            // only warn on first exceed and then every time the limit\n            // is exceeded by 50% again\n            this._warnCountdown = threshold * 0.5;\n            const [topStack, topCount] = this.getMostFrequentStack();\n            const message = `[${this.name}] potential listener LEAK detected, having ${listenerCount} listeners already. MOST frequent listener (${topCount}):`;\n            console.warn(message);\n            console.warn(topStack);\n            const error = new ListenerLeakError(message, topStack);\n            this._errorHandler(error);\n        }\n        return () => {\n            const count = (this._stacks.get(stack.value) || 0);\n            this._stacks.set(stack.value, count - 1);\n        };\n    }\n    getMostFrequentStack() {\n        if (!this._stacks) {\n            return undefined;\n        }\n        let topStack;\n        let topCount = 0;\n        for (const [stack, count] of this._stacks) {\n            if (!topStack || topCount < count) {\n                topStack = [stack, count];\n                topCount = count;\n            }\n        }\n        return topStack;\n    }\n}\nclass Stacktrace {\n    static create() {\n        const err = new Error();\n        return new Stacktrace(err.stack ?? '');\n    }\n    constructor(value) {\n        this.value = value;\n    }\n    print() {\n        console.warn(this.value.split('\\n').slice(2).join('\\n'));\n    }\n}\n// error that is logged when going over the configured listener threshold\nclass ListenerLeakError extends Error {\n    constructor(message, stack) {\n        super(message);\n        this.name = 'ListenerLeakError';\n        this.stack = stack;\n    }\n}\nexports.ListenerLeakError = ListenerLeakError;\n// SEVERE error that is logged when having gone way over the configured listener\n// threshold so that the emitter refuses to accept more listeners\nclass ListenerRefusalError extends Error {\n    constructor(message, stack) {\n        super(message);\n        this.name = 'ListenerRefusalError';\n        this.stack = stack;\n    }\n}\nexports.ListenerRefusalError = ListenerRefusalError;\nlet id = 0;\nclass UniqueContainer {\n    constructor(value) {\n        this.value = value;\n        this.id = id++;\n    }\n}\nconst compactionThreshold = 2;\nconst forEachListener = (listeners, fn) => {\n    if (listeners instanceof UniqueContainer) {\n        fn(listeners);\n    }\n    else {\n        for (let i = 0; i < listeners.length; i++) {\n            const l = listeners[i];\n            if (l) {\n                fn(l);\n            }\n        }\n    }\n};\nlet _listenerFinalizers;\nif (_enableListenerGCedWarning) {\n    const leaks = [];\n    setInterval(() => {\n        if (leaks.length === 0) {\n            return;\n        }\n        console.warn('[LEAKING LISTENERS] GC\\'ed these listeners that were NOT yet disposed:');\n        console.warn(leaks.join('\\n'));\n        leaks.length = 0;\n    }, 3000);\n    _listenerFinalizers = new FinalizationRegistry(heldValue => {\n        if (typeof heldValue === 'string') {\n            leaks.push(heldValue);\n        }\n    });\n}\n/**\n * The Emitter can be used to expose an Event to the public\n * to fire it from the insides.\n * Sample:\n    class Document {\n\n        private readonly _onDidChange = new Emitter<(value:string)=>any>();\n\n        public onDidChange = this._onDidChange.event;\n\n        // getter-style\n        // get onDidChange(): Event<(value:string)=>any> {\n        // \treturn this._onDidChange.event;\n        // }\n\n        private _doIt() {\n            //...\n            this._onDidChange.fire(value);\n        }\n    }\n */\nclass Emitter {\n    constructor(options) {\n        this._size = 0;\n        this._options = options;\n        this._leakageMon = (_globalLeakWarningThreshold > 0 || this._options?.leakWarningThreshold)\n            ? new LeakageMonitor(options?.onListenerError ?? errors_1.onUnexpectedError, this._options?.leakWarningThreshold ?? _globalLeakWarningThreshold) :\n            undefined;\n        this._perfMon = this._options?._profName ? new EventProfiling(this._options._profName) : undefined;\n        this._deliveryQueue = this._options?.deliveryQueue;\n    }\n    dispose() {\n        if (!this._disposed) {\n            this._disposed = true;\n            // It is bad to have listeners at the time of disposing an emitter, it is worst to have listeners keep the emitter\n            // alive via the reference that's embedded in their disposables. Therefore we loop over all remaining listeners and\n            // unset their subscriptions/disposables. Looping and blaming remaining listeners is done on next tick because the\n            // the following programming pattern is very popular:\n            //\n            // const someModel = this._disposables.add(new ModelObject()); // (1) create and register model\n            // this._disposables.add(someModel.onDidChange(() => { ... }); // (2) subscribe and register model-event listener\n            // ...later...\n            // this._disposables.dispose(); disposes (1) then (2): don't warn after (1) but after the \"overall dispose\" is done\n            if (this._deliveryQueue?.current === this) {\n                this._deliveryQueue.reset();\n            }\n            if (this._listeners) {\n                if (_enableDisposeWithListenerWarning) {\n                    const listeners = this._listeners;\n                    queueMicrotask(() => {\n                        forEachListener(listeners, l => l.stack?.print());\n                    });\n                }\n                this._listeners = undefined;\n                this._size = 0;\n            }\n            this._options?.onDidRemoveLastListener?.();\n            this._leakageMon?.dispose();\n        }\n    }\n    /**\n     * For the public to allow to subscribe\n     * to events from this Emitter\n     */\n    get event() {\n        this._event ??= (callback, thisArgs, disposables) => {\n            if (this._leakageMon && this._size > this._leakageMon.threshold ** 2) {\n                const message = `[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;\n                console.warn(message);\n                const tuple = this._leakageMon.getMostFrequentStack() ?? ['UNKNOWN stack', -1];\n                const error = new ListenerRefusalError(`${message}. HINT: Stack shows most frequent listener (${tuple[1]}-times)`, tuple[0]);\n                const errorHandler = this._options?.onListenerError || errors_1.onUnexpectedError;\n                errorHandler(error);\n                return lifecycle_1.Disposable.None;\n            }\n            if (this._disposed) {\n                // todo: should we warn if a listener is added to a disposed emitter? This happens often\n                return lifecycle_1.Disposable.None;\n            }\n            if (thisArgs) {\n                callback = callback.bind(thisArgs);\n            }\n            const contained = new UniqueContainer(callback);\n            let removeMonitor;\n            let stack;\n            if (this._leakageMon && this._size >= Math.ceil(this._leakageMon.threshold * 0.2)) {\n                // check and record this emitter for potential leakage\n                contained.stack = Stacktrace.create();\n                removeMonitor = this._leakageMon.check(contained.stack, this._size + 1);\n            }\n            if (_enableDisposeWithListenerWarning) {\n                contained.stack = stack ?? Stacktrace.create();\n            }\n            if (!this._listeners) {\n                this._options?.onWillAddFirstListener?.(this);\n                this._listeners = contained;\n                this._options?.onDidAddFirstListener?.(this);\n            }\n            else if (this._listeners instanceof UniqueContainer) {\n                this._deliveryQueue ??= new EventDeliveryQueuePrivate();\n                this._listeners = [this._listeners, contained];\n            }\n            else {\n                this._listeners.push(contained);\n            }\n            this._size++;\n            const result = (0, lifecycle_1.toDisposable)(() => {\n                _listenerFinalizers?.unregister(result);\n                removeMonitor?.();\n                this._removeListener(contained);\n            });\n            if (disposables instanceof lifecycle_1.DisposableStore) {\n                disposables.add(result);\n            }\n            else if (Array.isArray(disposables)) {\n                disposables.push(result);\n            }\n            if (_listenerFinalizers) {\n                const stack = new Error().stack.split('\\n').slice(2, 3).join('\\n').trim();\n                const match = /(file:|vscode-file:\\/\\/vscode-app)?(\\/[^:]*:\\d+:\\d+)/.exec(stack);\n                _listenerFinalizers.register(result, match?.[2] ?? stack, result);\n            }\n            return result;\n        };\n        return this._event;\n    }\n    _removeListener(listener) {\n        this._options?.onWillRemoveListener?.(this);\n        if (!this._listeners) {\n            return; // expected if a listener gets disposed\n        }\n        if (this._size === 1) {\n            this._listeners = undefined;\n            this._options?.onDidRemoveLastListener?.(this);\n            this._size = 0;\n            return;\n        }\n        // size > 1 which requires that listeners be a list:\n        const listeners = this._listeners;\n        const index = listeners.indexOf(listener);\n        if (index === -1) {\n            console.log('disposed?', this._disposed);\n            console.log('size?', this._size);\n            console.log('arr?', JSON.stringify(this._listeners));\n            throw new Error('Attempted to dispose unknown listener');\n        }\n        this._size--;\n        listeners[index] = undefined;\n        const adjustDeliveryQueue = this._deliveryQueue.current === this;\n        if (this._size * compactionThreshold <= listeners.length) {\n            let n = 0;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listeners[i]) {\n                    listeners[n++] = listeners[i];\n                }\n                else if (adjustDeliveryQueue) {\n                    this._deliveryQueue.end--;\n                    if (n < this._deliveryQueue.i) {\n                        this._deliveryQueue.i--;\n                    }\n                }\n            }\n            listeners.length = n;\n        }\n    }\n    _deliver(listener, value) {\n        if (!listener) {\n            return;\n        }\n        const errorHandler = this._options?.onListenerError || errors_1.onUnexpectedError;\n        if (!errorHandler) {\n            listener.value(value);\n            return;\n        }\n        try {\n            listener.value(value);\n        }\n        catch (e) {\n            errorHandler(e);\n        }\n    }\n    /** Delivers items in the queue. Assumes the queue is ready to go. */\n    _deliverQueue(dq) {\n        const listeners = dq.current._listeners;\n        while (dq.i < dq.end) {\n            // important: dq.i is incremented before calling deliver() because it might reenter deliverQueue()\n            this._deliver(listeners[dq.i++], dq.value);\n        }\n        dq.reset();\n    }\n    /**\n     * To be kept private to fire an event to\n     * subscribers\n     */\n    fire(event) {\n        if (this._deliveryQueue?.current) {\n            this._deliverQueue(this._deliveryQueue);\n            this._perfMon?.stop(); // last fire() will have starting perfmon, stop it before starting the next dispatch\n        }\n        this._perfMon?.start(this._size);\n        if (!this._listeners) {\n            // no-op\n        }\n        else if (this._listeners instanceof UniqueContainer) {\n            this._deliver(this._listeners, event);\n        }\n        else {\n            const dq = this._deliveryQueue;\n            dq.enqueue(this, event, this._listeners.length);\n            this._deliverQueue(dq);\n        }\n        this._perfMon?.stop();\n    }\n    hasListeners() {\n        return this._size > 0;\n    }\n}\nexports.Emitter = Emitter;\nconst createEventDeliveryQueue = () => new EventDeliveryQueuePrivate();\nexports.createEventDeliveryQueue = createEventDeliveryQueue;\nclass EventDeliveryQueuePrivate {\n    constructor() {\n        /**\n         * Index in current's listener list.\n         */\n        this.i = -1;\n        /**\n         * The last index in the listener's list to deliver.\n         */\n        this.end = 0;\n    }\n    enqueue(emitter, value, end) {\n        this.i = 0;\n        this.end = end;\n        this.current = emitter;\n        this.value = value;\n    }\n    reset() {\n        this.i = this.end; // force any current emission loop to stop, mainly for during dispose\n        this.current = undefined;\n        this.value = undefined;\n    }\n}\nclass AsyncEmitter extends Emitter {\n    async fireAsync(data, token, promiseJoin) {\n        if (!this._listeners) {\n            return;\n        }\n        if (!this._asyncDeliveryQueue) {\n            this._asyncDeliveryQueue = new linkedList_1.LinkedList();\n        }\n        forEachListener(this._listeners, listener => this._asyncDeliveryQueue.push([listener.value, data]));\n        while (this._asyncDeliveryQueue.size > 0 && !token.isCancellationRequested) {\n            const [listener, data] = this._asyncDeliveryQueue.shift();\n            const thenables = [];\n            const event = {\n                ...data,\n                token,\n                waitUntil: (p) => {\n                    if (Object.isFrozen(thenables)) {\n                        throw new Error('waitUntil can NOT be called asynchronous');\n                    }\n                    if (promiseJoin) {\n                        p = promiseJoin(p, listener);\n                    }\n                    thenables.push(p);\n                }\n            };\n            try {\n                listener(event);\n            }\n            catch (e) {\n                (0, errors_1.onUnexpectedError)(e);\n                continue;\n            }\n            // freeze thenables-collection to enforce sync-calls to\n            // wait until and then wait for all thenables to resolve\n            Object.freeze(thenables);\n            await Promise.allSettled(thenables).then(values => {\n                for (const value of values) {\n                    if (value.status === 'rejected') {\n                        (0, errors_1.onUnexpectedError)(value.reason);\n                    }\n                }\n            });\n        }\n    }\n}\nexports.AsyncEmitter = AsyncEmitter;\nclass PauseableEmitter extends Emitter {\n    get isPaused() {\n        return this._isPaused !== 0;\n    }\n    constructor(options) {\n        super(options);\n        this._isPaused = 0;\n        this._eventQueue = new linkedList_1.LinkedList();\n        this._mergeFn = options?.merge;\n    }\n    pause() {\n        this._isPaused++;\n    }\n    resume() {\n        if (this._isPaused !== 0 && --this._isPaused === 0) {\n            if (this._mergeFn) {\n                // use the merge function to create a single composite\n                // event. make a copy in case firing pauses this emitter\n                if (this._eventQueue.size > 0) {\n                    const events = Array.from(this._eventQueue);\n                    this._eventQueue.clear();\n                    super.fire(this._mergeFn(events));\n                }\n            }\n            else {\n                // no merging, fire each event individually and test\n                // that this emitter isn't paused halfway through\n                while (!this._isPaused && this._eventQueue.size !== 0) {\n                    super.fire(this._eventQueue.shift());\n                }\n            }\n        }\n    }\n    fire(event) {\n        if (this._size) {\n            if (this._isPaused !== 0) {\n                this._eventQueue.push(event);\n            }\n            else {\n                super.fire(event);\n            }\n        }\n    }\n}\nexports.PauseableEmitter = PauseableEmitter;\nclass DebounceEmitter extends PauseableEmitter {\n    constructor(options) {\n        super(options);\n        this._delay = options.delay ?? 100;\n    }\n    fire(event) {\n        if (!this._handle) {\n            this.pause();\n            this._handle = setTimeout(() => {\n                this._handle = undefined;\n                this.resume();\n            }, this._delay);\n        }\n        super.fire(event);\n    }\n}\nexports.DebounceEmitter = DebounceEmitter;\n/**\n * An emitter which queue all events and then process them at the\n * end of the event loop.\n */\nclass MicrotaskEmitter extends Emitter {\n    constructor(options) {\n        super(options);\n        this._queuedEvents = [];\n        this._mergeFn = options?.merge;\n    }\n    fire(event) {\n        if (!this.hasListeners()) {\n            return;\n        }\n        this._queuedEvents.push(event);\n        if (this._queuedEvents.length === 1) {\n            queueMicrotask(() => {\n                if (this._mergeFn) {\n                    super.fire(this._mergeFn(this._queuedEvents));\n                }\n                else {\n                    this._queuedEvents.forEach(e => super.fire(e));\n                }\n                this._queuedEvents = [];\n            });\n        }\n    }\n}\nexports.MicrotaskEmitter = MicrotaskEmitter;\n/**\n * An event emitter that multiplexes many events into a single event.\n *\n * @example Listen to the `onData` event of all `Thing`s, dynamically adding and removing `Thing`s\n * to the multiplexer as needed.\n *\n * ```typescript\n * const anythingDataMultiplexer = new EventMultiplexer<{ data: string }>();\n *\n * const thingListeners = DisposableMap<Thing, IDisposable>();\n *\n * thingService.onDidAddThing(thing => {\n *   thingListeners.set(thing, anythingDataMultiplexer.add(thing.onData);\n * });\n * thingService.onDidRemoveThing(thing => {\n *   thingListeners.deleteAndDispose(thing);\n * });\n *\n * anythingDataMultiplexer.event(e => {\n *   console.log('Something fired data ' + e.data)\n * });\n * ```\n */\nclass EventMultiplexer {\n    constructor() {\n        this.hasListeners = false;\n        this.events = [];\n        this.emitter = new Emitter({\n            onWillAddFirstListener: () => this.onFirstListenerAdd(),\n            onDidRemoveLastListener: () => this.onLastListenerRemove()\n        });\n    }\n    get event() {\n        return this.emitter.event;\n    }\n    add(event) {\n        const e = { event: event, listener: null };\n        this.events.push(e);\n        if (this.hasListeners) {\n            this.hook(e);\n        }\n        const dispose = () => {\n            if (this.hasListeners) {\n                this.unhook(e);\n            }\n            const idx = this.events.indexOf(e);\n            this.events.splice(idx, 1);\n        };\n        return (0, lifecycle_1.toDisposable)((0, functional_1.createSingleCallFunction)(dispose));\n    }\n    onFirstListenerAdd() {\n        this.hasListeners = true;\n        this.events.forEach(e => this.hook(e));\n    }\n    onLastListenerRemove() {\n        this.hasListeners = false;\n        this.events.forEach(e => this.unhook(e));\n    }\n    hook(e) {\n        e.listener = e.event(r => this.emitter.fire(r));\n    }\n    unhook(e) {\n        e.listener?.dispose();\n        e.listener = null;\n    }\n    dispose() {\n        this.emitter.dispose();\n        for (const e of this.events) {\n            e.listener?.dispose();\n        }\n        this.events = [];\n    }\n}\nexports.EventMultiplexer = EventMultiplexer;\nclass DynamicListEventMultiplexer {\n    constructor(items, onAddItem, onRemoveItem, getEvent) {\n        this._store = new lifecycle_1.DisposableStore();\n        const multiplexer = this._store.add(new EventMultiplexer());\n        const itemListeners = this._store.add(new lifecycle_1.DisposableMap());\n        function addItem(instance) {\n            itemListeners.set(instance, multiplexer.add(getEvent(instance)));\n        }\n        // Existing items\n        for (const instance of items) {\n            addItem(instance);\n        }\n        // Added items\n        this._store.add(onAddItem(instance => {\n            addItem(instance);\n        }));\n        // Removed items\n        this._store.add(onRemoveItem(instance => {\n            itemListeners.deleteAndDispose(instance);\n        }));\n        this.event = multiplexer.event;\n    }\n    dispose() {\n        this._store.dispose();\n    }\n}\nexports.DynamicListEventMultiplexer = DynamicListEventMultiplexer;\n/**\n * The EventBufferer is useful in situations in which you want\n * to delay firing your events during some code.\n * You can wrap that code and be sure that the event will not\n * be fired during that wrap.\n *\n * ```\n * const emitter: Emitter;\n * const delayer = new EventDelayer();\n * const delayedEvent = delayer.wrapEvent(emitter.event);\n *\n * delayedEvent(console.log);\n *\n * delayer.bufferEvents(() => {\n *   emitter.fire(); // event will not be fired yet\n * });\n *\n * // event will only be fired at this point\n * ```\n */\nclass EventBufferer {\n    constructor() {\n        this.data = [];\n    }\n    wrapEvent(event, reduce, initial) {\n        return (listener, thisArgs, disposables) => {\n            return event(i => {\n                const data = this.data[this.data.length - 1];\n                // Non-reduce scenario\n                if (!reduce) {\n                    // Buffering case\n                    if (data) {\n                        data.buffers.push(() => listener.call(thisArgs, i));\n                    }\n                    else {\n                        // Not buffering case\n                        listener.call(thisArgs, i);\n                    }\n                    return;\n                }\n                // Reduce scenario\n                const reduceData = data;\n                // Not buffering case\n                if (!reduceData) {\n                    // TODO: Is there a way to cache this reduce call for all listeners?\n                    listener.call(thisArgs, reduce(initial, i));\n                    return;\n                }\n                // Buffering case\n                reduceData.items ??= [];\n                reduceData.items.push(i);\n                if (reduceData.buffers.length === 0) {\n                    // Include a single buffered function that will reduce all events when we're done buffering events\n                    data.buffers.push(() => {\n                        // cache the reduced result so that the value can be shared across all listeners\n                        reduceData.reducedResult ??= initial\n                            ? reduceData.items.reduce(reduce, initial)\n                            : reduceData.items.reduce(reduce);\n                        listener.call(thisArgs, reduceData.reducedResult);\n                    });\n                }\n            }, undefined, disposables);\n        };\n    }\n    bufferEvents(fn) {\n        const data = { buffers: new Array() };\n        this.data.push(data);\n        const r = fn();\n        this.data.pop();\n        data.buffers.forEach(flush => flush());\n        return r;\n    }\n}\nexports.EventBufferer = EventBufferer;\n/**\n * A Relay is an event forwarder which functions as a replugabble event pipe.\n * Once created, you can connect an input event to it and it will simply forward\n * events from that input event through its own `event` property. The `input`\n * can be changed at any point in time.\n */\nclass Relay {\n    constructor() {\n        this.listening = false;\n        this.inputEvent = Event.None;\n        this.inputEventListener = lifecycle_1.Disposable.None;\n        this.emitter = new Emitter({\n            onDidAddFirstListener: () => {\n                this.listening = true;\n                this.inputEventListener = this.inputEvent(this.emitter.fire, this.emitter);\n            },\n            onDidRemoveLastListener: () => {\n                this.listening = false;\n                this.inputEventListener.dispose();\n            }\n        });\n        this.event = this.emitter.event;\n    }\n    set input(event) {\n        this.inputEvent = event;\n        if (this.listening) {\n            this.inputEventListener.dispose();\n            this.inputEventListener = event(this.emitter.fire, this.emitter);\n        }\n    }\n    dispose() {\n        this.inputEventListener.dispose();\n        this.emitter.dispose();\n    }\n}\nexports.Relay = Relay;\nclass ValueWithChangeEvent {\n    static const(value) {\n        return new ConstValueWithChangeEvent(value);\n    }\n    constructor(_value) {\n        this._value = _value;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n    }\n    get value() {\n        return this._value;\n    }\n    set value(value) {\n        if (value !== this._value) {\n            this._value = value;\n            this._onDidChange.fire(undefined);\n        }\n    }\n}\nexports.ValueWithChangeEvent = ValueWithChangeEvent;\nclass ConstValueWithChangeEvent {\n    constructor(value) {\n        this.value = value;\n        this.onDidChange = Event.None;\n    }\n}\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createSingleCallFunction = createSingleCallFunction;\n/**\n * Given a function, returns a function that is only calling that function once.\n */\nfunction createSingleCallFunction(fn, fnDidRunCallback) {\n    const _this = this;\n    let didCall = false;\n    let result;\n    return function () {\n        if (didCall) {\n            return result;\n        }\n        didCall = true;\n        if (fnDidRunCallback) {\n            try {\n                result = fn.apply(_this, arguments);\n            }\n            finally {\n                fnDidRunCallback();\n            }\n        }\n        else {\n            result = fn.apply(_this, arguments);\n        }\n        return result;\n    };\n}\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StringSHA1 = exports.Hasher = void 0;\nexports.hash = hash;\nexports.doHash = doHash;\nexports.numberHash = numberHash;\nexports.stringHash = stringHash;\nexports.toHexString = toHexString;\nconst strings = __importStar(require(\"vs/base/common/strings\"));\n/**\n * Return a hash value for an object.\n */\nfunction hash(obj) {\n    return doHash(obj, 0);\n}\nfunction doHash(obj, hashVal) {\n    switch (typeof obj) {\n        case 'object':\n            if (obj === null) {\n                return numberHash(349, hashVal);\n            }\n            else if (Array.isArray(obj)) {\n                return arrayHash(obj, hashVal);\n            }\n            return objectHash(obj, hashVal);\n        case 'string':\n            return stringHash(obj, hashVal);\n        case 'boolean':\n            return booleanHash(obj, hashVal);\n        case 'number':\n            return numberHash(obj, hashVal);\n        case 'undefined':\n            return numberHash(937, hashVal);\n        default:\n            return numberHash(617, hashVal);\n    }\n}\nfunction numberHash(val, initialHashVal) {\n    return (((initialHashVal << 5) - initialHashVal) + val) | 0; // hashVal * 31 + ch, keep as int32\n}\nfunction booleanHash(b, initialHashVal) {\n    return numberHash(b ? 433 : 863, initialHashVal);\n}\nfunction stringHash(s, hashVal) {\n    hashVal = numberHash(149417, hashVal);\n    for (let i = 0, length = s.length; i < length; i++) {\n        hashVal = numberHash(s.charCodeAt(i), hashVal);\n    }\n    return hashVal;\n}\nfunction arrayHash(arr, initialHashVal) {\n    initialHashVal = numberHash(104579, initialHashVal);\n    return arr.reduce((hashVal, item) => doHash(item, hashVal), initialHashVal);\n}\nfunction objectHash(obj, initialHashVal) {\n    initialHashVal = numberHash(181387, initialHashVal);\n    return Object.keys(obj).sort().reduce((hashVal, key) => {\n        hashVal = stringHash(key, hashVal);\n        return doHash(obj[key], hashVal);\n    }, initialHashVal);\n}\nclass Hasher {\n    constructor() {\n        this._value = 0;\n    }\n    get value() {\n        return this._value;\n    }\n    hash(obj) {\n        this._value = doHash(obj, this._value);\n        return this._value;\n    }\n}\nexports.Hasher = Hasher;\nvar SHA1Constant;\n(function (SHA1Constant) {\n    SHA1Constant[SHA1Constant[\"BLOCK_SIZE\"] = 64] = \"BLOCK_SIZE\";\n    SHA1Constant[SHA1Constant[\"UNICODE_REPLACEMENT\"] = 65533] = \"UNICODE_REPLACEMENT\";\n})(SHA1Constant || (SHA1Constant = {}));\nfunction leftRotate(value, bits, totalBits = 32) {\n    // delta + bits = totalBits\n    const delta = totalBits - bits;\n    // All ones, expect `delta` zeros aligned to the right\n    const mask = ~((1 << delta) - 1);\n    // Join (value left-shifted `bits` bits) with (masked value right-shifted `delta` bits)\n    return ((value << bits) | ((mask & value) >>> delta)) >>> 0;\n}\nfunction fill(dest, index = 0, count = dest.byteLength, value = 0) {\n    for (let i = 0; i < count; i++) {\n        dest[index + i] = value;\n    }\n}\nfunction leftPad(value, length, char = '0') {\n    while (value.length < length) {\n        value = char + value;\n    }\n    return value;\n}\nfunction toHexString(bufferOrValue, bitsize = 32) {\n    if (bufferOrValue instanceof ArrayBuffer) {\n        return Array.from(new Uint8Array(bufferOrValue)).map(b => b.toString(16).padStart(2, '0')).join('');\n    }\n    return leftPad((bufferOrValue >>> 0).toString(16), bitsize / 4);\n}\n/**\n * A SHA1 implementation that works with strings and does not allocate.\n */\nclass StringSHA1 {\n    static { this._bigBlock32 = new DataView(new ArrayBuffer(320)); } // 80 * 4 = 320\n    constructor() {\n        this._h0 = 0x67452301;\n        this._h1 = 0xEFCDAB89;\n        this._h2 = 0x98BADCFE;\n        this._h3 = 0x10325476;\n        this._h4 = 0xC3D2E1F0;\n        this._buff = new Uint8Array(SHA1Constant.BLOCK_SIZE + 3 /* to fit any utf-8 */);\n        this._buffDV = new DataView(this._buff.buffer);\n        this._buffLen = 0;\n        this._totalLen = 0;\n        this._leftoverHighSurrogate = 0;\n        this._finished = false;\n    }\n    update(str) {\n        const strLen = str.length;\n        if (strLen === 0) {\n            return;\n        }\n        const buff = this._buff;\n        let buffLen = this._buffLen;\n        let leftoverHighSurrogate = this._leftoverHighSurrogate;\n        let charCode;\n        let offset;\n        if (leftoverHighSurrogate !== 0) {\n            charCode = leftoverHighSurrogate;\n            offset = -1;\n            leftoverHighSurrogate = 0;\n        }\n        else {\n            charCode = str.charCodeAt(0);\n            offset = 0;\n        }\n        while (true) {\n            let codePoint = charCode;\n            if (strings.isHighSurrogate(charCode)) {\n                if (offset + 1 < strLen) {\n                    const nextCharCode = str.charCodeAt(offset + 1);\n                    if (strings.isLowSurrogate(nextCharCode)) {\n                        offset++;\n                        codePoint = strings.computeCodePoint(charCode, nextCharCode);\n                    }\n                    else {\n                        // illegal => unicode replacement character\n                        codePoint = SHA1Constant.UNICODE_REPLACEMENT;\n                    }\n                }\n                else {\n                    // last character is a surrogate pair\n                    leftoverHighSurrogate = charCode;\n                    break;\n                }\n            }\n            else if (strings.isLowSurrogate(charCode)) {\n                // illegal => unicode replacement character\n                codePoint = SHA1Constant.UNICODE_REPLACEMENT;\n            }\n            buffLen = this._push(buff, buffLen, codePoint);\n            offset++;\n            if (offset < strLen) {\n                charCode = str.charCodeAt(offset);\n            }\n            else {\n                break;\n            }\n        }\n        this._buffLen = buffLen;\n        this._leftoverHighSurrogate = leftoverHighSurrogate;\n    }\n    _push(buff, buffLen, codePoint) {\n        if (codePoint < 0x0080) {\n            buff[buffLen++] = codePoint;\n        }\n        else if (codePoint < 0x0800) {\n            buff[buffLen++] = 0b11000000 | ((codePoint & 0b00000000000000000000011111000000) >>> 6);\n            buff[buffLen++] = 0b10000000 | ((codePoint & 0b00000000000000000000000000111111) >>> 0);\n        }\n        else if (codePoint < 0x10000) {\n            buff[buffLen++] = 0b11100000 | ((codePoint & 0b00000000000000001111000000000000) >>> 12);\n            buff[buffLen++] = 0b10000000 | ((codePoint & 0b00000000000000000000111111000000) >>> 6);\n            buff[buffLen++] = 0b10000000 | ((codePoint & 0b00000000000000000000000000111111) >>> 0);\n        }\n        else {\n            buff[buffLen++] = 0b11110000 | ((codePoint & 0b00000000000111000000000000000000) >>> 18);\n            buff[buffLen++] = 0b10000000 | ((codePoint & 0b00000000000000111111000000000000) >>> 12);\n            buff[buffLen++] = 0b10000000 | ((codePoint & 0b00000000000000000000111111000000) >>> 6);\n            buff[buffLen++] = 0b10000000 | ((codePoint & 0b00000000000000000000000000111111) >>> 0);\n        }\n        if (buffLen >= SHA1Constant.BLOCK_SIZE) {\n            this._step();\n            buffLen -= SHA1Constant.BLOCK_SIZE;\n            this._totalLen += SHA1Constant.BLOCK_SIZE;\n            // take last 3 in case of UTF8 overflow\n            buff[0] = buff[SHA1Constant.BLOCK_SIZE + 0];\n            buff[1] = buff[SHA1Constant.BLOCK_SIZE + 1];\n            buff[2] = buff[SHA1Constant.BLOCK_SIZE + 2];\n        }\n        return buffLen;\n    }\n    digest() {\n        if (!this._finished) {\n            this._finished = true;\n            if (this._leftoverHighSurrogate) {\n                // illegal => unicode replacement character\n                this._leftoverHighSurrogate = 0;\n                this._buffLen = this._push(this._buff, this._buffLen, SHA1Constant.UNICODE_REPLACEMENT);\n            }\n            this._totalLen += this._buffLen;\n            this._wrapUp();\n        }\n        return toHexString(this._h0) + toHexString(this._h1) + toHexString(this._h2) + toHexString(this._h3) + toHexString(this._h4);\n    }\n    _wrapUp() {\n        this._buff[this._buffLen++] = 0x80;\n        fill(this._buff, this._buffLen);\n        if (this._buffLen > 56) {\n            this._step();\n            fill(this._buff);\n        }\n        // this will fit because the mantissa can cover up to 52 bits\n        const ml = 8 * this._totalLen;\n        this._buffDV.setUint32(56, Math.floor(ml / 4294967296), false);\n        this._buffDV.setUint32(60, ml % 4294967296, false);\n        this._step();\n    }\n    _step() {\n        const bigBlock32 = StringSHA1._bigBlock32;\n        const data = this._buffDV;\n        for (let j = 0; j < 64 /* 16*4 */; j += 4) {\n            bigBlock32.setUint32(j, data.getUint32(j, false), false);\n        }\n        for (let j = 64; j < 320 /* 80*4 */; j += 4) {\n            bigBlock32.setUint32(j, leftRotate((bigBlock32.getUint32(j - 12, false) ^ bigBlock32.getUint32(j - 32, false) ^ bigBlock32.getUint32(j - 56, false) ^ bigBlock32.getUint32(j - 64, false)), 1), false);\n        }\n        let a = this._h0;\n        let b = this._h1;\n        let c = this._h2;\n        let d = this._h3;\n        let e = this._h4;\n        let f, k;\n        let temp;\n        for (let j = 0; j < 80; j++) {\n            if (j < 20) {\n                f = (b & c) | ((~b) & d);\n                k = 0x5A827999;\n            }\n            else if (j < 40) {\n                f = b ^ c ^ d;\n                k = 0x6ED9EBA1;\n            }\n            else if (j < 60) {\n                f = (b & c) | (b & d) | (c & d);\n                k = 0x8F1BBCDC;\n            }\n            else {\n                f = b ^ c ^ d;\n                k = 0xCA62C1D6;\n            }\n            temp = (leftRotate(a, 5) + f + e + k + bigBlock32.getUint32(j * 4, false)) & 0xffffffff;\n            e = d;\n            d = c;\n            c = leftRotate(b, 30);\n            b = a;\n            a = temp;\n        }\n        this._h0 = (this._h0 + a) & 0xffffffff;\n        this._h1 = (this._h1 + b) & 0xffffffff;\n        this._h2 = (this._h2 + c) & 0xffffffff;\n        this._h3 = (this._h3 + d) & 0xffffffff;\n        this._h4 = (this._h4 + e) & 0xffffffff;\n    }\n}\nexports.StringSHA1 = StringSHA1;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Iterable = void 0;\nvar Iterable;\n(function (Iterable) {\n    function is(thing) {\n        return thing && typeof thing === 'object' && typeof thing[Symbol.iterator] === 'function';\n    }\n    Iterable.is = is;\n    const _empty = Object.freeze([]);\n    function empty() {\n        return _empty;\n    }\n    Iterable.empty = empty;\n    function* single(element) {\n        yield element;\n    }\n    Iterable.single = single;\n    function wrap(iterableOrElement) {\n        if (is(iterableOrElement)) {\n            return iterableOrElement;\n        }\n        else {\n            return single(iterableOrElement);\n        }\n    }\n    Iterable.wrap = wrap;\n    function from(iterable) {\n        return iterable || _empty;\n    }\n    Iterable.from = from;\n    function* reverse(array) {\n        for (let i = array.length - 1; i >= 0; i--) {\n            yield array[i];\n        }\n    }\n    Iterable.reverse = reverse;\n    function isEmpty(iterable) {\n        return !iterable || iterable[Symbol.iterator]().next().done === true;\n    }\n    Iterable.isEmpty = isEmpty;\n    function first(iterable) {\n        return iterable[Symbol.iterator]().next().value;\n    }\n    Iterable.first = first;\n    function some(iterable, predicate) {\n        let i = 0;\n        for (const element of iterable) {\n            if (predicate(element, i++)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    Iterable.some = some;\n    function find(iterable, predicate) {\n        for (const element of iterable) {\n            if (predicate(element)) {\n                return element;\n            }\n        }\n        return undefined;\n    }\n    Iterable.find = find;\n    function* filter(iterable, predicate) {\n        for (const element of iterable) {\n            if (predicate(element)) {\n                yield element;\n            }\n        }\n    }\n    Iterable.filter = filter;\n    function* map(iterable, fn) {\n        let index = 0;\n        for (const element of iterable) {\n            yield fn(element, index++);\n        }\n    }\n    Iterable.map = map;\n    function* flatMap(iterable, fn) {\n        let index = 0;\n        for (const element of iterable) {\n            yield* fn(element, index++);\n        }\n    }\n    Iterable.flatMap = flatMap;\n    function* concat(...iterables) {\n        for (const iterable of iterables) {\n            yield* iterable;\n        }\n    }\n    Iterable.concat = concat;\n    function reduce(iterable, reducer, initialValue) {\n        let value = initialValue;\n        for (const element of iterable) {\n            value = reducer(value, element);\n        }\n        return value;\n    }\n    Iterable.reduce = reduce;\n    /**\n     * Returns an iterable slice of the array, with the same semantics as `array.slice()`.\n     */\n    function* slice(arr, from, to = arr.length) {\n        if (from < 0) {\n            from += arr.length;\n        }\n        if (to < 0) {\n            to += arr.length;\n        }\n        else if (to > arr.length) {\n            to = arr.length;\n        }\n        for (; from < to; from++) {\n            yield arr[from];\n        }\n    }\n    Iterable.slice = slice;\n    /**\n     * Consumes `atMost` elements from iterable and returns the consumed elements,\n     * and an iterable for the rest of the elements.\n     */\n    function consume(iterable, atMost = Number.POSITIVE_INFINITY) {\n        const consumed = [];\n        if (atMost === 0) {\n            return [consumed, iterable];\n        }\n        const iterator = iterable[Symbol.iterator]();\n        for (let i = 0; i < atMost; i++) {\n            const next = iterator.next();\n            if (next.done) {\n                return [consumed, Iterable.empty()];\n            }\n            consumed.push(next.value);\n        }\n        return [consumed, { [Symbol.iterator]() { return iterator; } }];\n    }\n    Iterable.consume = consume;\n    async function asyncToArray(iterable) {\n        const result = [];\n        for await (const item of iterable) {\n            result.push(item);\n        }\n        return Promise.resolve(result);\n    }\n    Iterable.asyncToArray = asyncToArray;\n})(Iterable || (exports.Iterable = Iterable = {}));\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.KeyMod = exports.KeyCodeUtils = exports.ScanCodeUtils = exports.NATIVE_WINDOWS_KEY_CODE_TO_KEY_CODE = exports.EVENT_KEY_CODE_MAP = exports.ScanCode = exports.KeyCode = void 0;\nexports.KeyChord = KeyChord;\n/**\n * Virtual Key Codes, the value does not hold any inherent meaning.\n * Inspired somewhat from https://msdn.microsoft.com/en-us/library/windows/desktop/dd375731(v=vs.85).aspx\n * But these are \"more general\", as they should work across browsers & OS`s.\n */\nvar KeyCode;\n(function (KeyCode) {\n    KeyCode[KeyCode[\"DependsOnKbLayout\"] = -1] = \"DependsOnKbLayout\";\n    /**\n     * Placed first to cover the 0 value of the enum.\n     */\n    KeyCode[KeyCode[\"Unknown\"] = 0] = \"Unknown\";\n    KeyCode[KeyCode[\"Backspace\"] = 1] = \"Backspace\";\n    KeyCode[KeyCode[\"Tab\"] = 2] = \"Tab\";\n    KeyCode[KeyCode[\"Enter\"] = 3] = \"Enter\";\n    KeyCode[KeyCode[\"Shift\"] = 4] = \"Shift\";\n    KeyCode[KeyCode[\"Ctrl\"] = 5] = \"Ctrl\";\n    KeyCode[KeyCode[\"Alt\"] = 6] = \"Alt\";\n    KeyCode[KeyCode[\"PauseBreak\"] = 7] = \"PauseBreak\";\n    KeyCode[KeyCode[\"CapsLock\"] = 8] = \"CapsLock\";\n    KeyCode[KeyCode[\"Escape\"] = 9] = \"Escape\";\n    KeyCode[KeyCode[\"Space\"] = 10] = \"Space\";\n    KeyCode[KeyCode[\"PageUp\"] = 11] = \"PageUp\";\n    KeyCode[KeyCode[\"PageDown\"] = 12] = \"PageDown\";\n    KeyCode[KeyCode[\"End\"] = 13] = \"End\";\n    KeyCode[KeyCode[\"Home\"] = 14] = \"Home\";\n    KeyCode[KeyCode[\"LeftArrow\"] = 15] = \"LeftArrow\";\n    KeyCode[KeyCode[\"UpArrow\"] = 16] = \"UpArrow\";\n    KeyCode[KeyCode[\"RightArrow\"] = 17] = \"RightArrow\";\n    KeyCode[KeyCode[\"DownArrow\"] = 18] = \"DownArrow\";\n    KeyCode[KeyCode[\"Insert\"] = 19] = \"Insert\";\n    KeyCode[KeyCode[\"Delete\"] = 20] = \"Delete\";\n    KeyCode[KeyCode[\"Digit0\"] = 21] = \"Digit0\";\n    KeyCode[KeyCode[\"Digit1\"] = 22] = \"Digit1\";\n    KeyCode[KeyCode[\"Digit2\"] = 23] = \"Digit2\";\n    KeyCode[KeyCode[\"Digit3\"] = 24] = \"Digit3\";\n    KeyCode[KeyCode[\"Digit4\"] = 25] = \"Digit4\";\n    KeyCode[KeyCode[\"Digit5\"] = 26] = \"Digit5\";\n    KeyCode[KeyCode[\"Digit6\"] = 27] = \"Digit6\";\n    KeyCode[KeyCode[\"Digit7\"] = 28] = \"Digit7\";\n    KeyCode[KeyCode[\"Digit8\"] = 29] = \"Digit8\";\n    KeyCode[KeyCode[\"Digit9\"] = 30] = \"Digit9\";\n    KeyCode[KeyCode[\"KeyA\"] = 31] = \"KeyA\";\n    KeyCode[KeyCode[\"KeyB\"] = 32] = \"KeyB\";\n    KeyCode[KeyCode[\"KeyC\"] = 33] = \"KeyC\";\n    KeyCode[KeyCode[\"KeyD\"] = 34] = \"KeyD\";\n    KeyCode[KeyCode[\"KeyE\"] = 35] = \"KeyE\";\n    KeyCode[KeyCode[\"KeyF\"] = 36] = \"KeyF\";\n    KeyCode[KeyCode[\"KeyG\"] = 37] = \"KeyG\";\n    KeyCode[KeyCode[\"KeyH\"] = 38] = \"KeyH\";\n    KeyCode[KeyCode[\"KeyI\"] = 39] = \"KeyI\";\n    KeyCode[KeyCode[\"KeyJ\"] = 40] = \"KeyJ\";\n    KeyCode[KeyCode[\"KeyK\"] = 41] = \"KeyK\";\n    KeyCode[KeyCode[\"KeyL\"] = 42] = \"KeyL\";\n    KeyCode[KeyCode[\"KeyM\"] = 43] = \"KeyM\";\n    KeyCode[KeyCode[\"KeyN\"] = 44] = \"KeyN\";\n    KeyCode[KeyCode[\"KeyO\"] = 45] = \"KeyO\";\n    KeyCode[KeyCode[\"KeyP\"] = 46] = \"KeyP\";\n    KeyCode[KeyCode[\"KeyQ\"] = 47] = \"KeyQ\";\n    KeyCode[KeyCode[\"KeyR\"] = 48] = \"KeyR\";\n    KeyCode[KeyCode[\"KeyS\"] = 49] = \"KeyS\";\n    KeyCode[KeyCode[\"KeyT\"] = 50] = \"KeyT\";\n    KeyCode[KeyCode[\"KeyU\"] = 51] = \"KeyU\";\n    KeyCode[KeyCode[\"KeyV\"] = 52] = \"KeyV\";\n    KeyCode[KeyCode[\"KeyW\"] = 53] = \"KeyW\";\n    KeyCode[KeyCode[\"KeyX\"] = 54] = \"KeyX\";\n    KeyCode[KeyCode[\"KeyY\"] = 55] = \"KeyY\";\n    KeyCode[KeyCode[\"KeyZ\"] = 56] = \"KeyZ\";\n    KeyCode[KeyCode[\"Meta\"] = 57] = \"Meta\";\n    KeyCode[KeyCode[\"ContextMenu\"] = 58] = \"ContextMenu\";\n    KeyCode[KeyCode[\"F1\"] = 59] = \"F1\";\n    KeyCode[KeyCode[\"F2\"] = 60] = \"F2\";\n    KeyCode[KeyCode[\"F3\"] = 61] = \"F3\";\n    KeyCode[KeyCode[\"F4\"] = 62] = \"F4\";\n    KeyCode[KeyCode[\"F5\"] = 63] = \"F5\";\n    KeyCode[KeyCode[\"F6\"] = 64] = \"F6\";\n    KeyCode[KeyCode[\"F7\"] = 65] = \"F7\";\n    KeyCode[KeyCode[\"F8\"] = 66] = \"F8\";\n    KeyCode[KeyCode[\"F9\"] = 67] = \"F9\";\n    KeyCode[KeyCode[\"F10\"] = 68] = \"F10\";\n    KeyCode[KeyCode[\"F11\"] = 69] = \"F11\";\n    KeyCode[KeyCode[\"F12\"] = 70] = \"F12\";\n    KeyCode[KeyCode[\"F13\"] = 71] = \"F13\";\n    KeyCode[KeyCode[\"F14\"] = 72] = \"F14\";\n    KeyCode[KeyCode[\"F15\"] = 73] = \"F15\";\n    KeyCode[KeyCode[\"F16\"] = 74] = \"F16\";\n    KeyCode[KeyCode[\"F17\"] = 75] = \"F17\";\n    KeyCode[KeyCode[\"F18\"] = 76] = \"F18\";\n    KeyCode[KeyCode[\"F19\"] = 77] = \"F19\";\n    KeyCode[KeyCode[\"F20\"] = 78] = \"F20\";\n    KeyCode[KeyCode[\"F21\"] = 79] = \"F21\";\n    KeyCode[KeyCode[\"F22\"] = 80] = \"F22\";\n    KeyCode[KeyCode[\"F23\"] = 81] = \"F23\";\n    KeyCode[KeyCode[\"F24\"] = 82] = \"F24\";\n    KeyCode[KeyCode[\"NumLock\"] = 83] = \"NumLock\";\n    KeyCode[KeyCode[\"ScrollLock\"] = 84] = \"ScrollLock\";\n    /**\n     * Used for miscellaneous characters; it can vary by keyboard.\n     * For the US standard keyboard, the ';:' key\n     */\n    KeyCode[KeyCode[\"Semicolon\"] = 85] = \"Semicolon\";\n    /**\n     * For any country/region, the '+' key\n     * For the US standard keyboard, the '=+' key\n     */\n    KeyCode[KeyCode[\"Equal\"] = 86] = \"Equal\";\n    /**\n     * For any country/region, the ',' key\n     * For the US standard keyboard, the ',<' key\n     */\n    KeyCode[KeyCode[\"Comma\"] = 87] = \"Comma\";\n    /**\n     * For any country/region, the '-' key\n     * For the US standard keyboard, the '-_' key\n     */\n    KeyCode[KeyCode[\"Minus\"] = 88] = \"Minus\";\n    /**\n     * For any country/region, the '.' key\n     * For the US standard keyboard, the '.>' key\n     */\n    KeyCode[KeyCode[\"Period\"] = 89] = \"Period\";\n    /**\n     * Used for miscellaneous characters; it can vary by keyboard.\n     * For the US standard keyboard, the '/?' key\n     */\n    KeyCode[KeyCode[\"Slash\"] = 90] = \"Slash\";\n    /**\n     * Used for miscellaneous characters; it can vary by keyboard.\n     * For the US standard keyboard, the '`~' key\n     */\n    KeyCode[KeyCode[\"Backquote\"] = 91] = \"Backquote\";\n    /**\n     * Used for miscellaneous characters; it can vary by keyboard.\n     * For the US standard keyboard, the '[{' key\n     */\n    KeyCode[KeyCode[\"BracketLeft\"] = 92] = \"BracketLeft\";\n    /**\n     * Used for miscellaneous characters; it can vary by keyboard.\n     * For the US standard keyboard, the '\\|' key\n     */\n    KeyCode[KeyCode[\"Backslash\"] = 93] = \"Backslash\";\n    /**\n     * Used for miscellaneous characters; it can vary by keyboard.\n     * For the US standard keyboard, the ']}' key\n     */\n    KeyCode[KeyCode[\"BracketRight\"] = 94] = \"BracketRight\";\n    /**\n     * Used for miscellaneous characters; it can vary by keyboard.\n     * For the US standard keyboard, the ''\"' key\n     */\n    KeyCode[KeyCode[\"Quote\"] = 95] = \"Quote\";\n    /**\n     * Used for miscellaneous characters; it can vary by keyboard.\n     */\n    KeyCode[KeyCode[\"OEM_8\"] = 96] = \"OEM_8\";\n    /**\n     * Either the angle bracket key or the backslash key on the RT 102-key keyboard.\n     */\n    KeyCode[KeyCode[\"IntlBackslash\"] = 97] = \"IntlBackslash\";\n    KeyCode[KeyCode[\"Numpad0\"] = 98] = \"Numpad0\";\n    KeyCode[KeyCode[\"Numpad1\"] = 99] = \"Numpad1\";\n    KeyCode[KeyCode[\"Numpad2\"] = 100] = \"Numpad2\";\n    KeyCode[KeyCode[\"Numpad3\"] = 101] = \"Numpad3\";\n    KeyCode[KeyCode[\"Numpad4\"] = 102] = \"Numpad4\";\n    KeyCode[KeyCode[\"Numpad5\"] = 103] = \"Numpad5\";\n    KeyCode[KeyCode[\"Numpad6\"] = 104] = \"Numpad6\";\n    KeyCode[KeyCode[\"Numpad7\"] = 105] = \"Numpad7\";\n    KeyCode[KeyCode[\"Numpad8\"] = 106] = \"Numpad8\";\n    KeyCode[KeyCode[\"Numpad9\"] = 107] = \"Numpad9\";\n    KeyCode[KeyCode[\"NumpadMultiply\"] = 108] = \"NumpadMultiply\";\n    KeyCode[KeyCode[\"NumpadAdd\"] = 109] = \"NumpadAdd\";\n    KeyCode[KeyCode[\"NUMPAD_SEPARATOR\"] = 110] = \"NUMPAD_SEPARATOR\";\n    KeyCode[KeyCode[\"NumpadSubtract\"] = 111] = \"NumpadSubtract\";\n    KeyCode[KeyCode[\"NumpadDecimal\"] = 112] = \"NumpadDecimal\";\n    KeyCode[KeyCode[\"NumpadDivide\"] = 113] = \"NumpadDivide\";\n    /**\n     * Cover all key codes when IME is processing input.\n     */\n    KeyCode[KeyCode[\"KEY_IN_COMPOSITION\"] = 114] = \"KEY_IN_COMPOSITION\";\n    KeyCode[KeyCode[\"ABNT_C1\"] = 115] = \"ABNT_C1\";\n    KeyCode[KeyCode[\"ABNT_C2\"] = 116] = \"ABNT_C2\";\n    KeyCode[KeyCode[\"AudioVolumeMute\"] = 117] = \"AudioVolumeMute\";\n    KeyCode[KeyCode[\"AudioVolumeUp\"] = 118] = \"AudioVolumeUp\";\n    KeyCode[KeyCode[\"AudioVolumeDown\"] = 119] = \"AudioVolumeDown\";\n    KeyCode[KeyCode[\"BrowserSearch\"] = 120] = \"BrowserSearch\";\n    KeyCode[KeyCode[\"BrowserHome\"] = 121] = \"BrowserHome\";\n    KeyCode[KeyCode[\"BrowserBack\"] = 122] = \"BrowserBack\";\n    KeyCode[KeyCode[\"BrowserForward\"] = 123] = \"BrowserForward\";\n    KeyCode[KeyCode[\"MediaTrackNext\"] = 124] = \"MediaTrackNext\";\n    KeyCode[KeyCode[\"MediaTrackPrevious\"] = 125] = \"MediaTrackPrevious\";\n    KeyCode[KeyCode[\"MediaStop\"] = 126] = \"MediaStop\";\n    KeyCode[KeyCode[\"MediaPlayPause\"] = 127] = \"MediaPlayPause\";\n    KeyCode[KeyCode[\"LaunchMediaPlayer\"] = 128] = \"LaunchMediaPlayer\";\n    KeyCode[KeyCode[\"LaunchMail\"] = 129] = \"LaunchMail\";\n    KeyCode[KeyCode[\"LaunchApp2\"] = 130] = \"LaunchApp2\";\n    /**\n     * VK_CLEAR, 0x0C, CLEAR key\n     */\n    KeyCode[KeyCode[\"Clear\"] = 131] = \"Clear\";\n    /**\n     * Placed last to cover the length of the enum.\n     * Please do not depend on this value!\n     */\n    KeyCode[KeyCode[\"MAX_VALUE\"] = 132] = \"MAX_VALUE\";\n})(KeyCode || (exports.KeyCode = KeyCode = {}));\n/**\n * keyboardEvent.code\n */\nvar ScanCode;\n(function (ScanCode) {\n    ScanCode[ScanCode[\"DependsOnKbLayout\"] = -1] = \"DependsOnKbLayout\";\n    ScanCode[ScanCode[\"None\"] = 0] = \"None\";\n    ScanCode[ScanCode[\"Hyper\"] = 1] = \"Hyper\";\n    ScanCode[ScanCode[\"Super\"] = 2] = \"Super\";\n    ScanCode[ScanCode[\"Fn\"] = 3] = \"Fn\";\n    ScanCode[ScanCode[\"FnLock\"] = 4] = \"FnLock\";\n    ScanCode[ScanCode[\"Suspend\"] = 5] = \"Suspend\";\n    ScanCode[ScanCode[\"Resume\"] = 6] = \"Resume\";\n    ScanCode[ScanCode[\"Turbo\"] = 7] = \"Turbo\";\n    ScanCode[ScanCode[\"Sleep\"] = 8] = \"Sleep\";\n    ScanCode[ScanCode[\"WakeUp\"] = 9] = \"WakeUp\";\n    ScanCode[ScanCode[\"KeyA\"] = 10] = \"KeyA\";\n    ScanCode[ScanCode[\"KeyB\"] = 11] = \"KeyB\";\n    ScanCode[ScanCode[\"KeyC\"] = 12] = \"KeyC\";\n    ScanCode[ScanCode[\"KeyD\"] = 13] = \"KeyD\";\n    ScanCode[ScanCode[\"KeyE\"] = 14] = \"KeyE\";\n    ScanCode[ScanCode[\"KeyF\"] = 15] = \"KeyF\";\n    ScanCode[ScanCode[\"KeyG\"] = 16] = \"KeyG\";\n    ScanCode[ScanCode[\"KeyH\"] = 17] = \"KeyH\";\n    ScanCode[ScanCode[\"KeyI\"] = 18] = \"KeyI\";\n    ScanCode[ScanCode[\"KeyJ\"] = 19] = \"KeyJ\";\n    ScanCode[ScanCode[\"KeyK\"] = 20] = \"KeyK\";\n    ScanCode[ScanCode[\"KeyL\"] = 21] = \"KeyL\";\n    ScanCode[ScanCode[\"KeyM\"] = 22] = \"KeyM\";\n    ScanCode[ScanCode[\"KeyN\"] = 23] = \"KeyN\";\n    ScanCode[ScanCode[\"KeyO\"] = 24] = \"KeyO\";\n    ScanCode[ScanCode[\"KeyP\"] = 25] = \"KeyP\";\n    ScanCode[ScanCode[\"KeyQ\"] = 26] = \"KeyQ\";\n    ScanCode[ScanCode[\"KeyR\"] = 27] = \"KeyR\";\n    ScanCode[ScanCode[\"KeyS\"] = 28] = \"KeyS\";\n    ScanCode[ScanCode[\"KeyT\"] = 29] = \"KeyT\";\n    ScanCode[ScanCode[\"KeyU\"] = 30] = \"KeyU\";\n    ScanCode[ScanCode[\"KeyV\"] = 31] = \"KeyV\";\n    ScanCode[ScanCode[\"KeyW\"] = 32] = \"KeyW\";\n    ScanCode[ScanCode[\"KeyX\"] = 33] = \"KeyX\";\n    ScanCode[ScanCode[\"KeyY\"] = 34] = \"KeyY\";\n    ScanCode[ScanCode[\"KeyZ\"] = 35] = \"KeyZ\";\n    ScanCode[ScanCode[\"Digit1\"] = 36] = \"Digit1\";\n    ScanCode[ScanCode[\"Digit2\"] = 37] = \"Digit2\";\n    ScanCode[ScanCode[\"Digit3\"] = 38] = \"Digit3\";\n    ScanCode[ScanCode[\"Digit4\"] = 39] = \"Digit4\";\n    ScanCode[ScanCode[\"Digit5\"] = 40] = \"Digit5\";\n    ScanCode[ScanCode[\"Digit6\"] = 41] = \"Digit6\";\n    ScanCode[ScanCode[\"Digit7\"] = 42] = \"Digit7\";\n    ScanCode[ScanCode[\"Digit8\"] = 43] = \"Digit8\";\n    ScanCode[ScanCode[\"Digit9\"] = 44] = \"Digit9\";\n    ScanCode[ScanCode[\"Digit0\"] = 45] = \"Digit0\";\n    ScanCode[ScanCode[\"Enter\"] = 46] = \"Enter\";\n    ScanCode[ScanCode[\"Escape\"] = 47] = \"Escape\";\n    ScanCode[ScanCode[\"Backspace\"] = 48] = \"Backspace\";\n    ScanCode[ScanCode[\"Tab\"] = 49] = \"Tab\";\n    ScanCode[ScanCode[\"Space\"] = 50] = \"Space\";\n    ScanCode[ScanCode[\"Minus\"] = 51] = \"Minus\";\n    ScanCode[ScanCode[\"Equal\"] = 52] = \"Equal\";\n    ScanCode[ScanCode[\"BracketLeft\"] = 53] = \"BracketLeft\";\n    ScanCode[ScanCode[\"BracketRight\"] = 54] = \"BracketRight\";\n    ScanCode[ScanCode[\"Backslash\"] = 55] = \"Backslash\";\n    ScanCode[ScanCode[\"IntlHash\"] = 56] = \"IntlHash\";\n    ScanCode[ScanCode[\"Semicolon\"] = 57] = \"Semicolon\";\n    ScanCode[ScanCode[\"Quote\"] = 58] = \"Quote\";\n    ScanCode[ScanCode[\"Backquote\"] = 59] = \"Backquote\";\n    ScanCode[ScanCode[\"Comma\"] = 60] = \"Comma\";\n    ScanCode[ScanCode[\"Period\"] = 61] = \"Period\";\n    ScanCode[ScanCode[\"Slash\"] = 62] = \"Slash\";\n    ScanCode[ScanCode[\"CapsLock\"] = 63] = \"CapsLock\";\n    ScanCode[ScanCode[\"F1\"] = 64] = \"F1\";\n    ScanCode[ScanCode[\"F2\"] = 65] = \"F2\";\n    ScanCode[ScanCode[\"F3\"] = 66] = \"F3\";\n    ScanCode[ScanCode[\"F4\"] = 67] = \"F4\";\n    ScanCode[ScanCode[\"F5\"] = 68] = \"F5\";\n    ScanCode[ScanCode[\"F6\"] = 69] = \"F6\";\n    ScanCode[ScanCode[\"F7\"] = 70] = \"F7\";\n    ScanCode[ScanCode[\"F8\"] = 71] = \"F8\";\n    ScanCode[ScanCode[\"F9\"] = 72] = \"F9\";\n    ScanCode[ScanCode[\"F10\"] = 73] = \"F10\";\n    ScanCode[ScanCode[\"F11\"] = 74] = \"F11\";\n    ScanCode[ScanCode[\"F12\"] = 75] = \"F12\";\n    ScanCode[ScanCode[\"PrintScreen\"] = 76] = \"PrintScreen\";\n    ScanCode[ScanCode[\"ScrollLock\"] = 77] = \"ScrollLock\";\n    ScanCode[ScanCode[\"Pause\"] = 78] = \"Pause\";\n    ScanCode[ScanCode[\"Insert\"] = 79] = \"Insert\";\n    ScanCode[ScanCode[\"Home\"] = 80] = \"Home\";\n    ScanCode[ScanCode[\"PageUp\"] = 81] = \"PageUp\";\n    ScanCode[ScanCode[\"Delete\"] = 82] = \"Delete\";\n    ScanCode[ScanCode[\"End\"] = 83] = \"End\";\n    ScanCode[ScanCode[\"PageDown\"] = 84] = \"PageDown\";\n    ScanCode[ScanCode[\"ArrowRight\"] = 85] = \"ArrowRight\";\n    ScanCode[ScanCode[\"ArrowLeft\"] = 86] = \"ArrowLeft\";\n    ScanCode[ScanCode[\"ArrowDown\"] = 87] = \"ArrowDown\";\n    ScanCode[ScanCode[\"ArrowUp\"] = 88] = \"ArrowUp\";\n    ScanCode[ScanCode[\"NumLock\"] = 89] = \"NumLock\";\n    ScanCode[ScanCode[\"NumpadDivide\"] = 90] = \"NumpadDivide\";\n    ScanCode[ScanCode[\"NumpadMultiply\"] = 91] = \"NumpadMultiply\";\n    ScanCode[ScanCode[\"NumpadSubtract\"] = 92] = \"NumpadSubtract\";\n    ScanCode[ScanCode[\"NumpadAdd\"] = 93] = \"NumpadAdd\";\n    ScanCode[ScanCode[\"NumpadEnter\"] = 94] = \"NumpadEnter\";\n    ScanCode[ScanCode[\"Numpad1\"] = 95] = \"Numpad1\";\n    ScanCode[ScanCode[\"Numpad2\"] = 96] = \"Numpad2\";\n    ScanCode[ScanCode[\"Numpad3\"] = 97] = \"Numpad3\";\n    ScanCode[ScanCode[\"Numpad4\"] = 98] = \"Numpad4\";\n    ScanCode[ScanCode[\"Numpad5\"] = 99] = \"Numpad5\";\n    ScanCode[ScanCode[\"Numpad6\"] = 100] = \"Numpad6\";\n    ScanCode[ScanCode[\"Numpad7\"] = 101] = \"Numpad7\";\n    ScanCode[ScanCode[\"Numpad8\"] = 102] = \"Numpad8\";\n    ScanCode[ScanCode[\"Numpad9\"] = 103] = \"Numpad9\";\n    ScanCode[ScanCode[\"Numpad0\"] = 104] = \"Numpad0\";\n    ScanCode[ScanCode[\"NumpadDecimal\"] = 105] = \"NumpadDecimal\";\n    ScanCode[ScanCode[\"IntlBackslash\"] = 106] = \"IntlBackslash\";\n    ScanCode[ScanCode[\"ContextMenu\"] = 107] = \"ContextMenu\";\n    ScanCode[ScanCode[\"Power\"] = 108] = \"Power\";\n    ScanCode[ScanCode[\"NumpadEqual\"] = 109] = \"NumpadEqual\";\n    ScanCode[ScanCode[\"F13\"] = 110] = \"F13\";\n    ScanCode[ScanCode[\"F14\"] = 111] = \"F14\";\n    ScanCode[ScanCode[\"F15\"] = 112] = \"F15\";\n    ScanCode[ScanCode[\"F16\"] = 113] = \"F16\";\n    ScanCode[ScanCode[\"F17\"] = 114] = \"F17\";\n    ScanCode[ScanCode[\"F18\"] = 115] = \"F18\";\n    ScanCode[ScanCode[\"F19\"] = 116] = \"F19\";\n    ScanCode[ScanCode[\"F20\"] = 117] = \"F20\";\n    ScanCode[ScanCode[\"F21\"] = 118] = \"F21\";\n    ScanCode[ScanCode[\"F22\"] = 119] = \"F22\";\n    ScanCode[ScanCode[\"F23\"] = 120] = \"F23\";\n    ScanCode[ScanCode[\"F24\"] = 121] = \"F24\";\n    ScanCode[ScanCode[\"Open\"] = 122] = \"Open\";\n    ScanCode[ScanCode[\"Help\"] = 123] = \"Help\";\n    ScanCode[ScanCode[\"Select\"] = 124] = \"Select\";\n    ScanCode[ScanCode[\"Again\"] = 125] = \"Again\";\n    ScanCode[ScanCode[\"Undo\"] = 126] = \"Undo\";\n    ScanCode[ScanCode[\"Cut\"] = 127] = \"Cut\";\n    ScanCode[ScanCode[\"Copy\"] = 128] = \"Copy\";\n    ScanCode[ScanCode[\"Paste\"] = 129] = \"Paste\";\n    ScanCode[ScanCode[\"Find\"] = 130] = \"Find\";\n    ScanCode[ScanCode[\"AudioVolumeMute\"] = 131] = \"AudioVolumeMute\";\n    ScanCode[ScanCode[\"AudioVolumeUp\"] = 132] = \"AudioVolumeUp\";\n    ScanCode[ScanCode[\"AudioVolumeDown\"] = 133] = \"AudioVolumeDown\";\n    ScanCode[ScanCode[\"NumpadComma\"] = 134] = \"NumpadComma\";\n    ScanCode[ScanCode[\"IntlRo\"] = 135] = \"IntlRo\";\n    ScanCode[ScanCode[\"KanaMode\"] = 136] = \"KanaMode\";\n    ScanCode[ScanCode[\"IntlYen\"] = 137] = \"IntlYen\";\n    ScanCode[ScanCode[\"Convert\"] = 138] = \"Convert\";\n    ScanCode[ScanCode[\"NonConvert\"] = 139] = \"NonConvert\";\n    ScanCode[ScanCode[\"Lang1\"] = 140] = \"Lang1\";\n    ScanCode[ScanCode[\"Lang2\"] = 141] = \"Lang2\";\n    ScanCode[ScanCode[\"Lang3\"] = 142] = \"Lang3\";\n    ScanCode[ScanCode[\"Lang4\"] = 143] = \"Lang4\";\n    ScanCode[ScanCode[\"Lang5\"] = 144] = \"Lang5\";\n    ScanCode[ScanCode[\"Abort\"] = 145] = \"Abort\";\n    ScanCode[ScanCode[\"Props\"] = 146] = \"Props\";\n    ScanCode[ScanCode[\"NumpadParenLeft\"] = 147] = \"NumpadParenLeft\";\n    ScanCode[ScanCode[\"NumpadParenRight\"] = 148] = \"NumpadParenRight\";\n    ScanCode[ScanCode[\"NumpadBackspace\"] = 149] = \"NumpadBackspace\";\n    ScanCode[ScanCode[\"NumpadMemoryStore\"] = 150] = \"NumpadMemoryStore\";\n    ScanCode[ScanCode[\"NumpadMemoryRecall\"] = 151] = \"NumpadMemoryRecall\";\n    ScanCode[ScanCode[\"NumpadMemoryClear\"] = 152] = \"NumpadMemoryClear\";\n    ScanCode[ScanCode[\"NumpadMemoryAdd\"] = 153] = \"NumpadMemoryAdd\";\n    ScanCode[ScanCode[\"NumpadMemorySubtract\"] = 154] = \"NumpadMemorySubtract\";\n    ScanCode[ScanCode[\"NumpadClear\"] = 155] = \"NumpadClear\";\n    ScanCode[ScanCode[\"NumpadClearEntry\"] = 156] = \"NumpadClearEntry\";\n    ScanCode[ScanCode[\"ControlLeft\"] = 157] = \"ControlLeft\";\n    ScanCode[ScanCode[\"ShiftLeft\"] = 158] = \"ShiftLeft\";\n    ScanCode[ScanCode[\"AltLeft\"] = 159] = \"AltLeft\";\n    ScanCode[ScanCode[\"MetaLeft\"] = 160] = \"MetaLeft\";\n    ScanCode[ScanCode[\"ControlRight\"] = 161] = \"ControlRight\";\n    ScanCode[ScanCode[\"ShiftRight\"] = 162] = \"ShiftRight\";\n    ScanCode[ScanCode[\"AltRight\"] = 163] = \"AltRight\";\n    ScanCode[ScanCode[\"MetaRight\"] = 164] = \"MetaRight\";\n    ScanCode[ScanCode[\"BrightnessUp\"] = 165] = \"BrightnessUp\";\n    ScanCode[ScanCode[\"BrightnessDown\"] = 166] = \"BrightnessDown\";\n    ScanCode[ScanCode[\"MediaPlay\"] = 167] = \"MediaPlay\";\n    ScanCode[ScanCode[\"MediaRecord\"] = 168] = \"MediaRecord\";\n    ScanCode[ScanCode[\"MediaFastForward\"] = 169] = \"MediaFastForward\";\n    ScanCode[ScanCode[\"MediaRewind\"] = 170] = \"MediaRewind\";\n    ScanCode[ScanCode[\"MediaTrackNext\"] = 171] = \"MediaTrackNext\";\n    ScanCode[ScanCode[\"MediaTrackPrevious\"] = 172] = \"MediaTrackPrevious\";\n    ScanCode[ScanCode[\"MediaStop\"] = 173] = \"MediaStop\";\n    ScanCode[ScanCode[\"Eject\"] = 174] = \"Eject\";\n    ScanCode[ScanCode[\"MediaPlayPause\"] = 175] = \"MediaPlayPause\";\n    ScanCode[ScanCode[\"MediaSelect\"] = 176] = \"MediaSelect\";\n    ScanCode[ScanCode[\"LaunchMail\"] = 177] = \"LaunchMail\";\n    ScanCode[ScanCode[\"LaunchApp2\"] = 178] = \"LaunchApp2\";\n    ScanCode[ScanCode[\"LaunchApp1\"] = 179] = \"LaunchApp1\";\n    ScanCode[ScanCode[\"SelectTask\"] = 180] = \"SelectTask\";\n    ScanCode[ScanCode[\"LaunchScreenSaver\"] = 181] = \"LaunchScreenSaver\";\n    ScanCode[ScanCode[\"BrowserSearch\"] = 182] = \"BrowserSearch\";\n    ScanCode[ScanCode[\"BrowserHome\"] = 183] = \"BrowserHome\";\n    ScanCode[ScanCode[\"BrowserBack\"] = 184] = \"BrowserBack\";\n    ScanCode[ScanCode[\"BrowserForward\"] = 185] = \"BrowserForward\";\n    ScanCode[ScanCode[\"BrowserStop\"] = 186] = \"BrowserStop\";\n    ScanCode[ScanCode[\"BrowserRefresh\"] = 187] = \"BrowserRefresh\";\n    ScanCode[ScanCode[\"BrowserFavorites\"] = 188] = \"BrowserFavorites\";\n    ScanCode[ScanCode[\"ZoomToggle\"] = 189] = \"ZoomToggle\";\n    ScanCode[ScanCode[\"MailReply\"] = 190] = \"MailReply\";\n    ScanCode[ScanCode[\"MailForward\"] = 191] = \"MailForward\";\n    ScanCode[ScanCode[\"MailSend\"] = 192] = \"MailSend\";\n    ScanCode[ScanCode[\"MAX_VALUE\"] = 193] = \"MAX_VALUE\";\n})(ScanCode || (exports.ScanCode = ScanCode = {}));\nclass KeyCodeStrMap {\n    constructor() {\n        this._keyCodeToStr = [];\n        this._strToKeyCode = Object.create(null);\n    }\n    define(keyCode, str) {\n        this._keyCodeToStr[keyCode] = str;\n        this._strToKeyCode[str.toLowerCase()] = keyCode;\n    }\n    keyCodeToStr(keyCode) {\n        return this._keyCodeToStr[keyCode];\n    }\n    strToKeyCode(str) {\n        return this._strToKeyCode[str.toLowerCase()] || KeyCode.Unknown;\n    }\n}\nconst uiMap = new KeyCodeStrMap();\nconst userSettingsUSMap = new KeyCodeStrMap();\nconst userSettingsGeneralMap = new KeyCodeStrMap();\nexports.EVENT_KEY_CODE_MAP = new Array(230);\nexports.NATIVE_WINDOWS_KEY_CODE_TO_KEY_CODE = {};\nconst scanCodeIntToStr = [];\nconst scanCodeStrToInt = Object.create(null);\nconst scanCodeLowerCaseStrToInt = Object.create(null);\nexports.ScanCodeUtils = {\n    lowerCaseToEnum: (scanCode) => scanCodeLowerCaseStrToInt[scanCode] || ScanCode.None,\n    toEnum: (scanCode) => scanCodeStrToInt[scanCode] || ScanCode.None,\n    toString: (scanCode) => scanCodeIntToStr[scanCode] || 'None'\n};\nvar KeyCodeUtils;\n(function (KeyCodeUtils) {\n    function toString(keyCode) {\n        return uiMap.keyCodeToStr(keyCode);\n    }\n    KeyCodeUtils.toString = toString;\n    function fromString(key) {\n        return uiMap.strToKeyCode(key);\n    }\n    KeyCodeUtils.fromString = fromString;\n    function toUserSettingsUS(keyCode) {\n        return userSettingsUSMap.keyCodeToStr(keyCode);\n    }\n    KeyCodeUtils.toUserSettingsUS = toUserSettingsUS;\n    function toUserSettingsGeneral(keyCode) {\n        return userSettingsGeneralMap.keyCodeToStr(keyCode);\n    }\n    KeyCodeUtils.toUserSettingsGeneral = toUserSettingsGeneral;\n    function fromUserSettings(key) {\n        return userSettingsUSMap.strToKeyCode(key) || userSettingsGeneralMap.strToKeyCode(key);\n    }\n    KeyCodeUtils.fromUserSettings = fromUserSettings;\n    function toElectronAccelerator(keyCode) {\n        if (keyCode >= KeyCode.Numpad0 && keyCode <= KeyCode.NumpadDivide) {\n            // [Electron Accelerators] Electron is able to parse numpad keys, but unfortunately it\n            // renders them just as regular keys in menus. For example, num0 is rendered as \"0\",\n            // numdiv is rendered as \"/\", numsub is rendered as \"-\".\n            //\n            // This can lead to incredible confusion, as it makes numpad based keybindings indistinguishable\n            // from keybindings based on regular keys.\n            //\n            // We therefore need to fall back to custom rendering for numpad keys.\n            return null;\n        }\n        switch (keyCode) {\n            case KeyCode.UpArrow:\n                return 'Up';\n            case KeyCode.DownArrow:\n                return 'Down';\n            case KeyCode.LeftArrow:\n                return 'Left';\n            case KeyCode.RightArrow:\n                return 'Right';\n        }\n        return uiMap.keyCodeToStr(keyCode);\n    }\n    KeyCodeUtils.toElectronAccelerator = toElectronAccelerator;\n})(KeyCodeUtils || (exports.KeyCodeUtils = KeyCodeUtils = {}));\nvar KeyMod;\n(function (KeyMod) {\n    KeyMod[KeyMod[\"CtrlCmd\"] = 2048] = \"CtrlCmd\";\n    KeyMod[KeyMod[\"Shift\"] = 1024] = \"Shift\";\n    KeyMod[KeyMod[\"Alt\"] = 512] = \"Alt\";\n    KeyMod[KeyMod[\"WinCtrl\"] = 256] = \"WinCtrl\";\n})(KeyMod || (exports.KeyMod = KeyMod = {}));\nfunction KeyChord(firstPart, secondPart) {\n    const chordPart = ((secondPart & 0x0000FFFF) << 16) >>> 0;\n    return (firstPart | chordPart) >>> 0;\n}\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ResolvedKeybinding = exports.ResolvedChord = exports.Keybinding = exports.ScanCodeChord = exports.KeyCodeChord = void 0;\nexports.decodeKeybinding = decodeKeybinding;\nexports.createSimpleKeybinding = createSimpleKeybinding;\nconst errors_1 = require(\"vs/base/common/errors\");\nconst keyCodes_1 = require(\"vs/base/common/keyCodes\");\nconst platform_1 = require(\"vs/base/common/platform\");\n/**\n * Binary encoding strategy:\n * ```\n *    1111 11\n *    5432 1098 7654 3210\n *    ---- CSAW KKKK KKKK\n *  C = bit 11 = ctrlCmd flag\n *  S = bit 10 = shift flag\n *  A = bit 9 = alt flag\n *  W = bit 8 = winCtrl flag\n *  K = bits 0-7 = key code\n * ```\n */\nvar BinaryKeybindingsMask;\n(function (BinaryKeybindingsMask) {\n    BinaryKeybindingsMask[BinaryKeybindingsMask[\"CtrlCmd\"] = 2048] = \"CtrlCmd\";\n    BinaryKeybindingsMask[BinaryKeybindingsMask[\"Shift\"] = 1024] = \"Shift\";\n    BinaryKeybindingsMask[BinaryKeybindingsMask[\"Alt\"] = 512] = \"Alt\";\n    BinaryKeybindingsMask[BinaryKeybindingsMask[\"WinCtrl\"] = 256] = \"WinCtrl\";\n    BinaryKeybindingsMask[BinaryKeybindingsMask[\"KeyCode\"] = 255] = \"KeyCode\";\n})(BinaryKeybindingsMask || (BinaryKeybindingsMask = {}));\nfunction decodeKeybinding(keybinding, OS) {\n    if (typeof keybinding === 'number') {\n        if (keybinding === 0) {\n            return null;\n        }\n        const firstChord = (keybinding & 0x0000FFFF) >>> 0;\n        const secondChord = (keybinding & 0xFFFF0000) >>> 16;\n        if (secondChord !== 0) {\n            return new Keybinding([\n                createSimpleKeybinding(firstChord, OS),\n                createSimpleKeybinding(secondChord, OS)\n            ]);\n        }\n        return new Keybinding([createSimpleKeybinding(firstChord, OS)]);\n    }\n    else {\n        const chords = [];\n        for (let i = 0; i < keybinding.length; i++) {\n            chords.push(createSimpleKeybinding(keybinding[i], OS));\n        }\n        return new Keybinding(chords);\n    }\n}\nfunction createSimpleKeybinding(keybinding, OS) {\n    const ctrlCmd = (keybinding & BinaryKeybindingsMask.CtrlCmd ? true : false);\n    const winCtrl = (keybinding & BinaryKeybindingsMask.WinCtrl ? true : false);\n    const ctrlKey = (OS === platform_1.OperatingSystem.Macintosh ? winCtrl : ctrlCmd);\n    const shiftKey = (keybinding & BinaryKeybindingsMask.Shift ? true : false);\n    const altKey = (keybinding & BinaryKeybindingsMask.Alt ? true : false);\n    const metaKey = (OS === platform_1.OperatingSystem.Macintosh ? ctrlCmd : winCtrl);\n    const keyCode = (keybinding & BinaryKeybindingsMask.KeyCode);\n    return new KeyCodeChord(ctrlKey, shiftKey, altKey, metaKey, keyCode);\n}\n/**\n * Represents a chord which uses the `keyCode` field of keyboard events.\n * A chord is a combination of keys pressed simultaneously.\n */\nclass KeyCodeChord {\n    constructor(ctrlKey, shiftKey, altKey, metaKey, keyCode) {\n        this.ctrlKey = ctrlKey;\n        this.shiftKey = shiftKey;\n        this.altKey = altKey;\n        this.metaKey = metaKey;\n        this.keyCode = keyCode;\n    }\n    equals(other) {\n        return (other instanceof KeyCodeChord\n            && this.ctrlKey === other.ctrlKey\n            && this.shiftKey === other.shiftKey\n            && this.altKey === other.altKey\n            && this.metaKey === other.metaKey\n            && this.keyCode === other.keyCode);\n    }\n    getHashCode() {\n        const ctrl = this.ctrlKey ? '1' : '0';\n        const shift = this.shiftKey ? '1' : '0';\n        const alt = this.altKey ? '1' : '0';\n        const meta = this.metaKey ? '1' : '0';\n        return `K${ctrl}${shift}${alt}${meta}${this.keyCode}`;\n    }\n    isModifierKey() {\n        return (this.keyCode === keyCodes_1.KeyCode.Unknown\n            || this.keyCode === keyCodes_1.KeyCode.Ctrl\n            || this.keyCode === keyCodes_1.KeyCode.Meta\n            || this.keyCode === keyCodes_1.KeyCode.Alt\n            || this.keyCode === keyCodes_1.KeyCode.Shift);\n    }\n    toKeybinding() {\n        return new Keybinding([this]);\n    }\n    /**\n     * Does this keybinding refer to the key code of a modifier and it also has the modifier flag?\n     */\n    isDuplicateModifierCase() {\n        return ((this.ctrlKey && this.keyCode === keyCodes_1.KeyCode.Ctrl)\n            || (this.shiftKey && this.keyCode === keyCodes_1.KeyCode.Shift)\n            || (this.altKey && this.keyCode === keyCodes_1.KeyCode.Alt)\n            || (this.metaKey && this.keyCode === keyCodes_1.KeyCode.Meta));\n    }\n}\nexports.KeyCodeChord = KeyCodeChord;\n/**\n * Represents a chord which uses the `code` field of keyboard events.\n * A chord is a combination of keys pressed simultaneously.\n */\nclass ScanCodeChord {\n    constructor(ctrlKey, shiftKey, altKey, metaKey, scanCode) {\n        this.ctrlKey = ctrlKey;\n        this.shiftKey = shiftKey;\n        this.altKey = altKey;\n        this.metaKey = metaKey;\n        this.scanCode = scanCode;\n    }\n    equals(other) {\n        return (other instanceof ScanCodeChord\n            && this.ctrlKey === other.ctrlKey\n            && this.shiftKey === other.shiftKey\n            && this.altKey === other.altKey\n            && this.metaKey === other.metaKey\n            && this.scanCode === other.scanCode);\n    }\n    getHashCode() {\n        const ctrl = this.ctrlKey ? '1' : '0';\n        const shift = this.shiftKey ? '1' : '0';\n        const alt = this.altKey ? '1' : '0';\n        const meta = this.metaKey ? '1' : '0';\n        return `S${ctrl}${shift}${alt}${meta}${this.scanCode}`;\n    }\n    /**\n     * Does this keybinding refer to the key code of a modifier and it also has the modifier flag?\n     */\n    isDuplicateModifierCase() {\n        return ((this.ctrlKey && (this.scanCode === keyCodes_1.ScanCode.ControlLeft || this.scanCode === keyCodes_1.ScanCode.ControlRight))\n            || (this.shiftKey && (this.scanCode === keyCodes_1.ScanCode.ShiftLeft || this.scanCode === keyCodes_1.ScanCode.ShiftRight))\n            || (this.altKey && (this.scanCode === keyCodes_1.ScanCode.AltLeft || this.scanCode === keyCodes_1.ScanCode.AltRight))\n            || (this.metaKey && (this.scanCode === keyCodes_1.ScanCode.MetaLeft || this.scanCode === keyCodes_1.ScanCode.MetaRight)));\n    }\n}\nexports.ScanCodeChord = ScanCodeChord;\n/**\n * A keybinding is a sequence of chords.\n */\nclass Keybinding {\n    constructor(chords) {\n        if (chords.length === 0) {\n            throw (0, errors_1.illegalArgument)(`chords`);\n        }\n        this.chords = chords;\n    }\n    getHashCode() {\n        let result = '';\n        for (let i = 0, len = this.chords.length; i < len; i++) {\n            if (i !== 0) {\n                result += ';';\n            }\n            result += this.chords[i].getHashCode();\n        }\n        return result;\n    }\n    equals(other) {\n        if (other === null) {\n            return false;\n        }\n        if (this.chords.length !== other.chords.length) {\n            return false;\n        }\n        for (let i = 0; i < this.chords.length; i++) {\n            if (!this.chords[i].equals(other.chords[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\nexports.Keybinding = Keybinding;\nclass ResolvedChord {\n    constructor(ctrlKey, shiftKey, altKey, metaKey, keyLabel, keyAriaLabel) {\n        this.ctrlKey = ctrlKey;\n        this.shiftKey = shiftKey;\n        this.altKey = altKey;\n        this.metaKey = metaKey;\n        this.keyLabel = keyLabel;\n        this.keyAriaLabel = keyAriaLabel;\n    }\n}\nexports.ResolvedChord = ResolvedChord;\n/**\n * A resolved keybinding. Consists of one or multiple chords.\n */\nclass ResolvedKeybinding {\n}\nexports.ResolvedKeybinding = ResolvedKeybinding;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Lazy = void 0;\nclass Lazy {\n    constructor(executor) {\n        this.executor = executor;\n        this._didRun = false;\n    }\n    /**\n     * True if the lazy value has been resolved.\n     */\n    get hasValue() { return this._didRun; }\n    /**\n     * Get the wrapped value.\n     *\n     * This will force evaluation of the lazy value if it has not been resolved yet. Lazy values are only\n     * resolved once. `getValue` will re-throw exceptions that are hit while resolving the value\n     */\n    get value() {\n        if (!this._didRun) {\n            try {\n                this._value = this.executor();\n            }\n            catch (err) {\n                this._error = err;\n            }\n            finally {\n                this._didRun = true;\n            }\n        }\n        if (this._error) {\n            throw this._error;\n        }\n        return this._value;\n    }\n    /**\n     * Get the wrapped value without forcing evaluation.\n     */\n    get rawValue() { return this._value; }\n}\nexports.Lazy = Lazy;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DisposableMap = exports.ImmortalReference = exports.AsyncReferenceCollection = exports.ReferenceCollection = exports.SafeDisposable = exports.RefCountedDisposable = exports.MandatoryMutableDisposable = exports.MutableDisposable = exports.Disposable = exports.DisposableStore = exports.DisposableTracker = void 0;\nexports.setDisposableTracker = setDisposableTracker;\nexports.trackDisposable = trackDisposable;\nexports.markAsDisposed = markAsDisposed;\nexports.markAsSingleton = markAsSingleton;\nexports.isDisposable = isDisposable;\nexports.dispose = dispose;\nexports.disposeIfDisposable = disposeIfDisposable;\nexports.combinedDisposable = combinedDisposable;\nexports.toDisposable = toDisposable;\nexports.disposeOnReturn = disposeOnReturn;\nconst arrays_1 = require(\"vs/base/common/arrays\");\nconst collections_1 = require(\"vs/base/common/collections\");\nconst map_1 = require(\"./map\");\nconst functional_1 = require(\"vs/base/common/functional\");\nconst iterator_1 = require(\"vs/base/common/iterator\");\n// #region Disposable Tracking\n/**\n * Enables logging of potentially leaked disposables.\n *\n * A disposable is considered leaked if it is not disposed or not registered as the child of\n * another disposable. This tracking is very simple an only works for classes that either\n * extend Disposable or use a DisposableStore. This means there are a lot of false positives.\n */\nconst TRACK_DISPOSABLES = false;\nlet disposableTracker = null;\nclass DisposableTracker {\n    constructor() {\n        this.livingDisposables = new Map();\n    }\n    static { this.idx = 0; }\n    getDisposableData(d) {\n        let val = this.livingDisposables.get(d);\n        if (!val) {\n            val = { parent: null, source: null, isSingleton: false, value: d, idx: DisposableTracker.idx++ };\n            this.livingDisposables.set(d, val);\n        }\n        return val;\n    }\n    trackDisposable(d) {\n        const data = this.getDisposableData(d);\n        if (!data.source) {\n            data.source =\n                new Error().stack;\n        }\n    }\n    setParent(child, parent) {\n        const data = this.getDisposableData(child);\n        data.parent = parent;\n    }\n    markAsDisposed(x) {\n        this.livingDisposables.delete(x);\n    }\n    markAsSingleton(disposable) {\n        this.getDisposableData(disposable).isSingleton = true;\n    }\n    getRootParent(data, cache) {\n        const cacheValue = cache.get(data);\n        if (cacheValue) {\n            return cacheValue;\n        }\n        const result = data.parent ? this.getRootParent(this.getDisposableData(data.parent), cache) : data;\n        cache.set(data, result);\n        return result;\n    }\n    getTrackedDisposables() {\n        const rootParentCache = new Map();\n        const leaking = [...this.livingDisposables.entries()]\n            .filter(([, v]) => v.source !== null && !this.getRootParent(v, rootParentCache).isSingleton)\n            .flatMap(([k]) => k);\n        return leaking;\n    }\n    computeLeakingDisposables(maxReported = 10, preComputedLeaks) {\n        let uncoveredLeakingObjs;\n        if (preComputedLeaks) {\n            uncoveredLeakingObjs = preComputedLeaks;\n        }\n        else {\n            const rootParentCache = new Map();\n            const leakingObjects = [...this.livingDisposables.values()]\n                .filter((info) => info.source !== null && !this.getRootParent(info, rootParentCache).isSingleton);\n            if (leakingObjects.length === 0) {\n                return;\n            }\n            const leakingObjsSet = new Set(leakingObjects.map(o => o.value));\n            // Remove all objects that are a child of other leaking objects. Assumes there are no cycles.\n            uncoveredLeakingObjs = leakingObjects.filter(l => {\n                return !(l.parent && leakingObjsSet.has(l.parent));\n            });\n            if (uncoveredLeakingObjs.length === 0) {\n                throw new Error('There are cyclic diposable chains!');\n            }\n        }\n        if (!uncoveredLeakingObjs) {\n            return undefined;\n        }\n        function getStackTracePath(leaking) {\n            function removePrefix(array, linesToRemove) {\n                while (array.length > 0 && linesToRemove.some(regexp => typeof regexp === 'string' ? regexp === array[0] : array[0].match(regexp))) {\n                    array.shift();\n                }\n            }\n            const lines = leaking.source.split('\\n').map(p => p.trim().replace('at ', '')).filter(l => l !== '');\n            removePrefix(lines, ['Error', /^trackDisposable \\(.*\\)$/, /^DisposableTracker.trackDisposable \\(.*\\)$/]);\n            return lines.reverse();\n        }\n        const stackTraceStarts = new map_1.SetMap();\n        for (const leaking of uncoveredLeakingObjs) {\n            const stackTracePath = getStackTracePath(leaking);\n            for (let i = 0; i <= stackTracePath.length; i++) {\n                stackTraceStarts.add(stackTracePath.slice(0, i).join('\\n'), leaking);\n            }\n        }\n        // Put earlier leaks first\n        uncoveredLeakingObjs.sort((0, arrays_1.compareBy)(l => l.idx, arrays_1.numberComparator));\n        let message = '';\n        let i = 0;\n        for (const leaking of uncoveredLeakingObjs.slice(0, maxReported)) {\n            i++;\n            const stackTracePath = getStackTracePath(leaking);\n            const stackTraceFormattedLines = [];\n            for (let i = 0; i < stackTracePath.length; i++) {\n                let line = stackTracePath[i];\n                const starts = stackTraceStarts.get(stackTracePath.slice(0, i + 1).join('\\n'));\n                line = `(shared with ${starts.size}/${uncoveredLeakingObjs.length} leaks) at ${line}`;\n                const prevStarts = stackTraceStarts.get(stackTracePath.slice(0, i).join('\\n'));\n                const continuations = (0, collections_1.groupBy)([...prevStarts].map(d => getStackTracePath(d)[i]), v => v);\n                delete continuations[stackTracePath[i]];\n                for (const [cont, set] of Object.entries(continuations)) {\n                    stackTraceFormattedLines.unshift(`    - stacktraces of ${set.length} other leaks continue with ${cont}`);\n                }\n                stackTraceFormattedLines.unshift(line);\n            }\n            message += `\\n\\n\\n==================== Leaking disposable ${i}/${uncoveredLeakingObjs.length}: ${leaking.value.constructor.name} ====================\\n${stackTraceFormattedLines.join('\\n')}\\n============================================================\\n\\n`;\n        }\n        if (uncoveredLeakingObjs.length > maxReported) {\n            message += `\\n\\n\\n... and ${uncoveredLeakingObjs.length - maxReported} more leaking disposables\\n\\n`;\n        }\n        return { leaks: uncoveredLeakingObjs, details: message };\n    }\n}\nexports.DisposableTracker = DisposableTracker;\nfunction setDisposableTracker(tracker) {\n    disposableTracker = tracker;\n}\nif (TRACK_DISPOSABLES) {\n    const __is_disposable_tracked__ = '__is_disposable_tracked__';\n    setDisposableTracker(new class {\n        trackDisposable(x) {\n            const stack = new Error('Potentially leaked disposable').stack;\n            setTimeout(() => {\n                if (!x[__is_disposable_tracked__]) {\n                    console.log(stack);\n                }\n            }, 3000);\n        }\n        setParent(child, parent) {\n            if (child && child !== Disposable.None) {\n                try {\n                    child[__is_disposable_tracked__] = true;\n                }\n                catch {\n                    // noop\n                }\n            }\n        }\n        markAsDisposed(disposable) {\n            if (disposable && disposable !== Disposable.None) {\n                try {\n                    disposable[__is_disposable_tracked__] = true;\n                }\n                catch {\n                    // noop\n                }\n            }\n        }\n        markAsSingleton(disposable) { }\n    });\n}\nfunction trackDisposable(x) {\n    disposableTracker?.trackDisposable(x);\n    return x;\n}\nfunction markAsDisposed(disposable) {\n    disposableTracker?.markAsDisposed(disposable);\n}\nfunction setParentOfDisposable(child, parent) {\n    disposableTracker?.setParent(child, parent);\n}\nfunction setParentOfDisposables(children, parent) {\n    if (!disposableTracker) {\n        return;\n    }\n    for (const child of children) {\n        disposableTracker.setParent(child, parent);\n    }\n}\n/**\n * Indicates that the given object is a singleton which does not need to be disposed.\n*/\nfunction markAsSingleton(singleton) {\n    disposableTracker?.markAsSingleton(singleton);\n    return singleton;\n}\n/**\n * Check if `thing` is {@link IDisposable disposable}.\n */\nfunction isDisposable(thing) {\n    return typeof thing === 'object' && thing !== null && typeof thing.dispose === 'function' && thing.dispose.length === 0;\n}\nfunction dispose(arg) {\n    if (iterator_1.Iterable.is(arg)) {\n        const errors = [];\n        for (const d of arg) {\n            if (d) {\n                try {\n                    d.dispose();\n                }\n                catch (e) {\n                    errors.push(e);\n                }\n            }\n        }\n        if (errors.length === 1) {\n            throw errors[0];\n        }\n        else if (errors.length > 1) {\n            throw new AggregateError(errors, 'Encountered errors while disposing of store');\n        }\n        return Array.isArray(arg) ? [] : arg;\n    }\n    else if (arg) {\n        arg.dispose();\n        return arg;\n    }\n}\nfunction disposeIfDisposable(disposables) {\n    for (const d of disposables) {\n        if (isDisposable(d)) {\n            d.dispose();\n        }\n    }\n    return [];\n}\n/**\n * Combine multiple disposable values into a single {@link IDisposable}.\n */\nfunction combinedDisposable(...disposables) {\n    const parent = toDisposable(() => dispose(disposables));\n    setParentOfDisposables(disposables, parent);\n    return parent;\n}\n/**\n * Turn a function that implements dispose into an {@link IDisposable}.\n *\n * @param fn Clean up function, guaranteed to be called only **once**.\n */\nfunction toDisposable(fn) {\n    const self = trackDisposable({\n        dispose: (0, functional_1.createSingleCallFunction)(() => {\n            markAsDisposed(self);\n            fn();\n        })\n    });\n    return self;\n}\n/**\n * Manages a collection of disposable values.\n *\n * This is the preferred way to manage multiple disposables. A `DisposableStore` is safer to work with than an\n * `IDisposable[]` as it considers edge cases, such as registering the same value multiple times or adding an item to a\n * store that has already been disposed of.\n */\nclass DisposableStore {\n    static { this.DISABLE_DISPOSED_WARNING = false; }\n    constructor() {\n        this._toDispose = new Set();\n        this._isDisposed = false;\n        trackDisposable(this);\n    }\n    /**\n     * Dispose of all registered disposables and mark this object as disposed.\n     *\n     * Any future disposables added to this object will be disposed of on `add`.\n     */\n    dispose() {\n        if (this._isDisposed) {\n            return;\n        }\n        markAsDisposed(this);\n        this._isDisposed = true;\n        this.clear();\n    }\n    /**\n     * @return `true` if this object has been disposed of.\n     */\n    get isDisposed() {\n        return this._isDisposed;\n    }\n    /**\n     * Dispose of all registered disposables but do not mark this object as disposed.\n     */\n    clear() {\n        if (this._toDispose.size === 0) {\n            return;\n        }\n        try {\n            dispose(this._toDispose);\n        }\n        finally {\n            this._toDispose.clear();\n        }\n    }\n    /**\n     * Add a new {@link IDisposable disposable} to the collection.\n     */\n    add(o) {\n        if (!o) {\n            return o;\n        }\n        if (o === this) {\n            throw new Error('Cannot register a disposable on itself!');\n        }\n        setParentOfDisposable(o, this);\n        if (this._isDisposed) {\n            if (!DisposableStore.DISABLE_DISPOSED_WARNING) {\n                console.warn(new Error('Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!').stack);\n            }\n        }\n        else {\n            this._toDispose.add(o);\n        }\n        return o;\n    }\n    /**\n     * Deletes a disposable from store and disposes of it. This will not throw or warn and proceed to dispose the\n     * disposable even when the disposable is not part in the store.\n     */\n    delete(o) {\n        if (!o) {\n            return;\n        }\n        if (o === this) {\n            throw new Error('Cannot dispose a disposable on itself!');\n        }\n        this._toDispose.delete(o);\n        o.dispose();\n    }\n    /**\n     * Deletes the value from the store, but does not dispose it.\n     */\n    deleteAndLeak(o) {\n        if (!o) {\n            return;\n        }\n        if (this._toDispose.has(o)) {\n            this._toDispose.delete(o);\n            setParentOfDisposable(o, null);\n        }\n    }\n}\nexports.DisposableStore = DisposableStore;\n/**\n * Abstract base class for a {@link IDisposable disposable} object.\n *\n * Subclasses can {@linkcode _register} disposables that will be automatically cleaned up when this object is disposed of.\n */\nclass Disposable {\n    /**\n     * A disposable that does nothing when it is disposed of.\n     *\n     * TODO: This should not be a static property.\n     */\n    static { this.None = Object.freeze({ dispose() { } }); }\n    constructor() {\n        this._store = new DisposableStore();\n        trackDisposable(this);\n        setParentOfDisposable(this._store, this);\n    }\n    dispose() {\n        markAsDisposed(this);\n        this._store.dispose();\n    }\n    /**\n     * Adds `o` to the collection of disposables managed by this object.\n     */\n    _register(o) {\n        if (o === this) {\n            throw new Error('Cannot register a disposable on itself!');\n        }\n        return this._store.add(o);\n    }\n}\nexports.Disposable = Disposable;\n/**\n * Manages the lifecycle of a disposable value that may be changed.\n *\n * This ensures that when the disposable value is changed, the previously held disposable is disposed of. You can\n * also register a `MutableDisposable` on a `Disposable` to ensure it is automatically cleaned up.\n */\nclass MutableDisposable {\n    constructor() {\n        this._isDisposed = false;\n        trackDisposable(this);\n    }\n    get value() {\n        return this._isDisposed ? undefined : this._value;\n    }\n    set value(value) {\n        if (this._isDisposed || value === this._value) {\n            return;\n        }\n        this._value?.dispose();\n        if (value) {\n            setParentOfDisposable(value, this);\n        }\n        this._value = value;\n    }\n    /**\n     * Resets the stored value and disposed of the previously stored value.\n     */\n    clear() {\n        this.value = undefined;\n    }\n    dispose() {\n        this._isDisposed = true;\n        markAsDisposed(this);\n        this._value?.dispose();\n        this._value = undefined;\n    }\n    /**\n     * Clears the value, but does not dispose it.\n     * The old value is returned.\n    */\n    clearAndLeak() {\n        const oldValue = this._value;\n        this._value = undefined;\n        if (oldValue) {\n            setParentOfDisposable(oldValue, null);\n        }\n        return oldValue;\n    }\n}\nexports.MutableDisposable = MutableDisposable;\n/**\n * Manages the lifecycle of a disposable value that may be changed like {@link MutableDisposable}, but the value must\n * exist and cannot be undefined.\n */\nclass MandatoryMutableDisposable {\n    constructor(initialValue) {\n        this._disposable = new MutableDisposable();\n        this._isDisposed = false;\n        this._disposable.value = initialValue;\n    }\n    get value() {\n        return this._disposable.value;\n    }\n    set value(value) {\n        if (this._isDisposed || value === this._disposable.value) {\n            return;\n        }\n        this._disposable.value = value;\n    }\n    dispose() {\n        this._isDisposed = true;\n        this._disposable.dispose();\n    }\n}\nexports.MandatoryMutableDisposable = MandatoryMutableDisposable;\nclass RefCountedDisposable {\n    constructor(_disposable) {\n        this._disposable = _disposable;\n        this._counter = 1;\n    }\n    acquire() {\n        this._counter++;\n        return this;\n    }\n    release() {\n        if (--this._counter === 0) {\n            this._disposable.dispose();\n        }\n        return this;\n    }\n}\nexports.RefCountedDisposable = RefCountedDisposable;\n/**\n * A safe disposable can be `unset` so that a leaked reference (listener)\n * can be cut-off.\n */\nclass SafeDisposable {\n    constructor() {\n        this.dispose = () => { };\n        this.unset = () => { };\n        this.isset = () => false;\n        trackDisposable(this);\n    }\n    set(fn) {\n        let callback = fn;\n        this.unset = () => callback = undefined;\n        this.isset = () => callback !== undefined;\n        this.dispose = () => {\n            if (callback) {\n                callback();\n                callback = undefined;\n                markAsDisposed(this);\n            }\n        };\n        return this;\n    }\n}\nexports.SafeDisposable = SafeDisposable;\nclass ReferenceCollection {\n    constructor() {\n        this.references = new Map();\n    }\n    acquire(key, ...args) {\n        let reference = this.references.get(key);\n        if (!reference) {\n            reference = { counter: 0, object: this.createReferencedObject(key, ...args) };\n            this.references.set(key, reference);\n        }\n        const { object } = reference;\n        const dispose = (0, functional_1.createSingleCallFunction)(() => {\n            if (--reference.counter === 0) {\n                this.destroyReferencedObject(key, reference.object);\n                this.references.delete(key);\n            }\n        });\n        reference.counter++;\n        return { object, dispose };\n    }\n}\nexports.ReferenceCollection = ReferenceCollection;\n/**\n * Unwraps a reference collection of promised values. Makes sure\n * references are disposed whenever promises get rejected.\n */\nclass AsyncReferenceCollection {\n    constructor(referenceCollection) {\n        this.referenceCollection = referenceCollection;\n    }\n    async acquire(key, ...args) {\n        const ref = this.referenceCollection.acquire(key, ...args);\n        try {\n            const object = await ref.object;\n            return {\n                object,\n                dispose: () => ref.dispose()\n            };\n        }\n        catch (error) {\n            ref.dispose();\n            throw error;\n        }\n    }\n}\nexports.AsyncReferenceCollection = AsyncReferenceCollection;\nclass ImmortalReference {\n    constructor(object) {\n        this.object = object;\n    }\n    dispose() { }\n}\nexports.ImmortalReference = ImmortalReference;\nfunction disposeOnReturn(fn) {\n    const store = new DisposableStore();\n    try {\n        fn(store);\n    }\n    finally {\n        store.dispose();\n    }\n}\n/**\n * A map the manages the lifecycle of the values that it stores.\n */\nclass DisposableMap {\n    constructor() {\n        this._store = new Map();\n        this._isDisposed = false;\n        trackDisposable(this);\n    }\n    /**\n     * Disposes of all stored values and mark this object as disposed.\n     *\n     * Trying to use this object after it has been disposed of is an error.\n     */\n    dispose() {\n        markAsDisposed(this);\n        this._isDisposed = true;\n        this.clearAndDisposeAll();\n    }\n    /**\n     * Disposes of all stored values and clear the map, but DO NOT mark this object as disposed.\n     */\n    clearAndDisposeAll() {\n        if (!this._store.size) {\n            return;\n        }\n        try {\n            dispose(this._store.values());\n        }\n        finally {\n            this._store.clear();\n        }\n    }\n    has(key) {\n        return this._store.has(key);\n    }\n    get size() {\n        return this._store.size;\n    }\n    get(key) {\n        return this._store.get(key);\n    }\n    set(key, value, skipDisposeOnOverwrite = false) {\n        if (this._isDisposed) {\n            console.warn(new Error('Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!').stack);\n        }\n        if (!skipDisposeOnOverwrite) {\n            this._store.get(key)?.dispose();\n        }\n        this._store.set(key, value);\n    }\n    /**\n     * Delete the value stored for `key` from this map and also dispose of it.\n     */\n    deleteAndDispose(key) {\n        this._store.get(key)?.dispose();\n        this._store.delete(key);\n    }\n    /**\n     * Delete the value stored for `key` from this map but return it. The caller is\n     * responsible for disposing of the value.\n     */\n    deleteAndLeak(key) {\n        const value = this._store.get(key);\n        this._store.delete(key);\n        return value;\n    }\n    keys() {\n        return this._store.keys();\n    }\n    values() {\n        return this._store.values();\n    }\n    [Symbol.iterator]() {\n        return this._store[Symbol.iterator]();\n    }\n}\nexports.DisposableMap = DisposableMap;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LinkedList = void 0;\nclass Node {\n    static { this.Undefined = new Node(undefined); }\n    constructor(element) {\n        this.element = element;\n        this.next = Node.Undefined;\n        this.prev = Node.Undefined;\n    }\n}\nclass LinkedList {\n    constructor() {\n        this._first = Node.Undefined;\n        this._last = Node.Undefined;\n        this._size = 0;\n    }\n    get size() {\n        return this._size;\n    }\n    isEmpty() {\n        return this._first === Node.Undefined;\n    }\n    clear() {\n        let node = this._first;\n        while (node !== Node.Undefined) {\n            const next = node.next;\n            node.prev = Node.Undefined;\n            node.next = Node.Undefined;\n            node = next;\n        }\n        this._first = Node.Undefined;\n        this._last = Node.Undefined;\n        this._size = 0;\n    }\n    unshift(element) {\n        return this._insert(element, false);\n    }\n    push(element) {\n        return this._insert(element, true);\n    }\n    _insert(element, atTheEnd) {\n        const newNode = new Node(element);\n        if (this._first === Node.Undefined) {\n            this._first = newNode;\n            this._last = newNode;\n        }\n        else if (atTheEnd) {\n            // push\n            const oldLast = this._last;\n            this._last = newNode;\n            newNode.prev = oldLast;\n            oldLast.next = newNode;\n        }\n        else {\n            // unshift\n            const oldFirst = this._first;\n            this._first = newNode;\n            newNode.next = oldFirst;\n            oldFirst.prev = newNode;\n        }\n        this._size += 1;\n        let didRemove = false;\n        return () => {\n            if (!didRemove) {\n                didRemove = true;\n                this._remove(newNode);\n            }\n        };\n    }\n    shift() {\n        if (this._first === Node.Undefined) {\n            return undefined;\n        }\n        else {\n            const res = this._first.element;\n            this._remove(this._first);\n            return res;\n        }\n    }\n    pop() {\n        if (this._last === Node.Undefined) {\n            return undefined;\n        }\n        else {\n            const res = this._last.element;\n            this._remove(this._last);\n            return res;\n        }\n    }\n    _remove(node) {\n        if (node.prev !== Node.Undefined && node.next !== Node.Undefined) {\n            // middle\n            const anchor = node.prev;\n            anchor.next = node.next;\n            node.next.prev = anchor;\n        }\n        else if (node.prev === Node.Undefined && node.next === Node.Undefined) {\n            // only node\n            this._first = Node.Undefined;\n            this._last = Node.Undefined;\n        }\n        else if (node.next === Node.Undefined) {\n            // last\n            this._last = this._last.prev;\n            this._last.next = Node.Undefined;\n        }\n        else if (node.prev === Node.Undefined) {\n            // first\n            this._first = this._first.next;\n            this._first.prev = Node.Undefined;\n        }\n        // done\n        this._size -= 1;\n    }\n    *[Symbol.iterator]() {\n        let node = this._first;\n        while (node !== Node.Undefined) {\n            yield node.element;\n            node = node.next;\n        }\n    }\n}\nexports.LinkedList = LinkedList;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SetMap = exports.BidirectionalMap = exports.CounterSet = exports.Touch = void 0;\nexports.getOrSet = getOrSet;\nexports.mapToString = mapToString;\nexports.setToString = setToString;\nexports.mapsStrictEqualIgnoreOrder = mapsStrictEqualIgnoreOrder;\nfunction getOrSet(map, key, value) {\n    let result = map.get(key);\n    if (result === undefined) {\n        result = value;\n        map.set(key, result);\n    }\n    return result;\n}\nfunction mapToString(map) {\n    const entries = [];\n    map.forEach((value, key) => {\n        entries.push(`${key} => ${value}`);\n    });\n    return `Map(${map.size}) {${entries.join(', ')}}`;\n}\nfunction setToString(set) {\n    const entries = [];\n    set.forEach(value => {\n        entries.push(value);\n    });\n    return `Set(${set.size}) {${entries.join(', ')}}`;\n}\nvar Touch;\n(function (Touch) {\n    Touch[Touch[\"None\"] = 0] = \"None\";\n    Touch[Touch[\"AsOld\"] = 1] = \"AsOld\";\n    Touch[Touch[\"AsNew\"] = 2] = \"AsNew\";\n})(Touch || (exports.Touch = Touch = {}));\nclass CounterSet {\n    constructor() {\n        this.map = new Map();\n    }\n    add(value) {\n        this.map.set(value, (this.map.get(value) || 0) + 1);\n        return this;\n    }\n    delete(value) {\n        let counter = this.map.get(value) || 0;\n        if (counter === 0) {\n            return false;\n        }\n        counter--;\n        if (counter === 0) {\n            this.map.delete(value);\n        }\n        else {\n            this.map.set(value, counter);\n        }\n        return true;\n    }\n    has(value) {\n        return this.map.has(value);\n    }\n}\nexports.CounterSet = CounterSet;\n/**\n * A map that allows access both by keys and values.\n * **NOTE**: values need to be unique.\n */\nclass BidirectionalMap {\n    constructor(entries) {\n        this._m1 = new Map();\n        this._m2 = new Map();\n        if (entries) {\n            for (const [key, value] of entries) {\n                this.set(key, value);\n            }\n        }\n    }\n    clear() {\n        this._m1.clear();\n        this._m2.clear();\n    }\n    set(key, value) {\n        this._m1.set(key, value);\n        this._m2.set(value, key);\n    }\n    get(key) {\n        return this._m1.get(key);\n    }\n    getKey(value) {\n        return this._m2.get(value);\n    }\n    delete(key) {\n        const value = this._m1.get(key);\n        if (value === undefined) {\n            return false;\n        }\n        this._m1.delete(key);\n        this._m2.delete(value);\n        return true;\n    }\n    forEach(callbackfn, thisArg) {\n        this._m1.forEach((value, key) => {\n            callbackfn.call(thisArg, value, key, this);\n        });\n    }\n    keys() {\n        return this._m1.keys();\n    }\n    values() {\n        return this._m1.values();\n    }\n}\nexports.BidirectionalMap = BidirectionalMap;\nclass SetMap {\n    constructor() {\n        this.map = new Map();\n    }\n    add(key, value) {\n        let values = this.map.get(key);\n        if (!values) {\n            values = new Set();\n            this.map.set(key, values);\n        }\n        values.add(value);\n    }\n    delete(key, value) {\n        const values = this.map.get(key);\n        if (!values) {\n            return;\n        }\n        values.delete(value);\n        if (values.size === 0) {\n            this.map.delete(key);\n        }\n    }\n    forEach(key, fn) {\n        const values = this.map.get(key);\n        if (!values) {\n            return;\n        }\n        values.forEach(fn);\n    }\n    get(key) {\n        const values = this.map.get(key);\n        if (!values) {\n            return new Set();\n        }\n        return values;\n    }\n}\nexports.SetMap = SetMap;\nfunction mapsStrictEqualIgnoreOrder(a, b) {\n    if (a === b) {\n        return true;\n    }\n    if (a.size !== b.size) {\n        return false;\n    }\n    for (const [key, value] of a) {\n        if (!b.has(key) || b.get(key) !== value) {\n            return false;\n        }\n    }\n    for (const [key] of b) {\n        if (!a.has(key)) {\n            return false;\n        }\n    }\n    return true;\n}\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SlidingWindowAverage = exports.MovingAverage = exports.Counter = void 0;\nexports.clamp = clamp;\nexports.rot = rot;\nexports.isPointWithinTriangle = isPointWithinTriangle;\nfunction clamp(value, min, max) {\n    return Math.min(Math.max(value, min), max);\n}\nfunction rot(index, modulo) {\n    return (modulo + (index % modulo)) % modulo;\n}\nclass Counter {\n    constructor() {\n        this._next = 0;\n    }\n    getNext() {\n        return this._next++;\n    }\n}\nexports.Counter = Counter;\nclass MovingAverage {\n    constructor() {\n        this._n = 1;\n        this._val = 0;\n    }\n    update(value) {\n        this._val = this._val + (value - this._val) / this._n;\n        this._n += 1;\n        return this._val;\n    }\n    get value() {\n        return this._val;\n    }\n}\nexports.MovingAverage = MovingAverage;\nclass SlidingWindowAverage {\n    constructor(size) {\n        this._n = 0;\n        this._val = 0;\n        this._values = [];\n        this._index = 0;\n        this._sum = 0;\n        this._values = new Array(size);\n        this._values.fill(0, 0, size);\n    }\n    update(value) {\n        const oldValue = this._values[this._index];\n        this._values[this._index] = value;\n        this._index = (this._index + 1) % this._values.length;\n        this._sum -= oldValue;\n        this._sum += value;\n        if (this._n < this._values.length) {\n            this._n += 1;\n        }\n        this._val = this._sum / this._n;\n        return this._val;\n    }\n    get value() {\n        return this._val;\n    }\n}\nexports.SlidingWindowAverage = SlidingWindowAverage;\n/** Returns whether the point is within the triangle formed by the following 6 x/y point pairs */\nfunction isPointWithinTriangle(x, y, ax, ay, bx, by, cx, cy) {\n    const v0x = cx - ax;\n    const v0y = cy - ay;\n    const v1x = bx - ax;\n    const v1y = by - ay;\n    const v2x = x - ax;\n    const v2y = y - ay;\n    const dot00 = v0x * v0x + v0y * v0y;\n    const dot01 = v0x * v1x + v0y * v1y;\n    const dot02 = v0x * v2x + v0y * v2y;\n    const dot11 = v1x * v1x + v1y * v1y;\n    const dot12 = v1x * v2x + v1y * v2y;\n    const invDenom = 1 / (dot00 * dot11 - dot01 * dot01);\n    const u = (dot11 * dot02 - dot01 * dot12) * invDenom;\n    const v = (dot00 * dot12 - dot01 * dot02) * invDenom;\n    return u >= 0 && v >= 0 && u + v < 1;\n}\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isAndroid = exports.isEdge = exports.isSafari = exports.isFirefox = exports.isChrome = exports.OS = exports.OperatingSystem = exports.setTimeout0 = exports.setTimeout0IsFaster = exports.translationsConfigFile = exports.platformLocale = exports.locale = exports.Language = exports.language = exports.userAgent = exports.platform = exports.isCI = exports.isMobile = exports.isIOS = exports.webWorkerOrigin = exports.isWebWorker = exports.isWeb = exports.isElectron = exports.isNative = exports.isLinuxSnap = exports.isLinux = exports.isMacintosh = exports.isWindows = exports.Platform = exports.LANGUAGE_DEFAULT = void 0;\nexports.PlatformToString = PlatformToString;\nexports.isLittleEndian = isLittleEndian;\nexports.isBigSurOrNewer = isBigSurOrNewer;\nexports.LANGUAGE_DEFAULT = 'en';\nlet _isWindows = false;\nlet _isMacintosh = false;\nlet _isLinux = false;\nlet _isLinuxSnap = false;\nlet _isNative = false;\nlet _isWeb = false;\nlet _isElectron = false;\nlet _isIOS = false;\nlet _isCI = false;\nlet _isMobile = false;\nlet _locale = undefined;\nlet _language = exports.LANGUAGE_DEFAULT;\nlet _platformLocale = exports.LANGUAGE_DEFAULT;\nlet _translationsConfigFile = undefined;\nlet _userAgent = undefined;\nconst $globalThis = globalThis;\nlet nodeProcess = undefined;\nif (typeof $globalThis.vscode !== 'undefined' && typeof $globalThis.vscode.process !== 'undefined') {\n    // Native environment (sandboxed)\n    nodeProcess = $globalThis.vscode.process;\n}\nelse if (typeof process !== 'undefined' && typeof process?.versions?.node === 'string') {\n    // Native environment (non-sandboxed)\n    nodeProcess = process;\n}\nconst isElectronProcess = typeof nodeProcess?.versions?.electron === 'string';\nconst isElectronRenderer = isElectronProcess && nodeProcess?.type === 'renderer';\n// Native environment\nif (typeof nodeProcess === 'object') {\n    _isWindows = (nodeProcess.platform === 'win32');\n    _isMacintosh = (nodeProcess.platform === 'darwin');\n    _isLinux = (nodeProcess.platform === 'linux');\n    _isLinuxSnap = _isLinux && !!nodeProcess.env['SNAP'] && !!nodeProcess.env['SNAP_REVISION'];\n    _isElectron = isElectronProcess;\n    _isCI = !!nodeProcess.env['CI'] || !!nodeProcess.env['BUILD_ARTIFACTSTAGINGDIRECTORY'];\n    _locale = exports.LANGUAGE_DEFAULT;\n    _language = exports.LANGUAGE_DEFAULT;\n    const rawNlsConfig = nodeProcess.env['VSCODE_NLS_CONFIG'];\n    if (rawNlsConfig) {\n        try {\n            const nlsConfig = JSON.parse(rawNlsConfig);\n            _locale = nlsConfig.userLocale;\n            _platformLocale = nlsConfig.osLocale;\n            _language = nlsConfig.resolvedLanguage || exports.LANGUAGE_DEFAULT;\n            _translationsConfigFile = nlsConfig.languagePack?.translationsConfigFile;\n        }\n        catch (e) {\n        }\n    }\n    _isNative = true;\n}\n// Web environment\nelse if (typeof navigator === 'object' && !isElectronRenderer) {\n    _userAgent = navigator.userAgent;\n    _isWindows = _userAgent.indexOf('Windows') >= 0;\n    _isMacintosh = _userAgent.indexOf('Macintosh') >= 0;\n    _isIOS = (_userAgent.indexOf('Macintosh') >= 0 || _userAgent.indexOf('iPad') >= 0 || _userAgent.indexOf('iPhone') >= 0) && !!navigator.maxTouchPoints && navigator.maxTouchPoints > 0;\n    _isLinux = _userAgent.indexOf('Linux') >= 0;\n    _isMobile = _userAgent?.indexOf('Mobi') >= 0;\n    _isWeb = true;\n    // VSCODE_GLOBALS: NLS\n    _language = globalThis._VSCODE_NLS_LANGUAGE || exports.LANGUAGE_DEFAULT;\n    _locale = navigator.language.toLowerCase();\n    _platformLocale = _locale;\n}\n// Unknown environment\nelse {\n    console.error('Unable to resolve platform.');\n}\nvar Platform;\n(function (Platform) {\n    Platform[Platform[\"Web\"] = 0] = \"Web\";\n    Platform[Platform[\"Mac\"] = 1] = \"Mac\";\n    Platform[Platform[\"Linux\"] = 2] = \"Linux\";\n    Platform[Platform[\"Windows\"] = 3] = \"Windows\";\n})(Platform || (exports.Platform = Platform = {}));\nfunction PlatformToString(platform) {\n    switch (platform) {\n        case Platform.Web: return 'Web';\n        case Platform.Mac: return 'Mac';\n        case Platform.Linux: return 'Linux';\n        case Platform.Windows: return 'Windows';\n    }\n}\nlet _platform = Platform.Web;\nif (_isMacintosh) {\n    _platform = Platform.Mac;\n}\nelse if (_isWindows) {\n    _platform = Platform.Windows;\n}\nelse if (_isLinux) {\n    _platform = Platform.Linux;\n}\nexports.isWindows = _isWindows;\nexports.isMacintosh = _isMacintosh;\nexports.isLinux = _isLinux;\nexports.isLinuxSnap = _isLinuxSnap;\nexports.isNative = _isNative;\nexports.isElectron = _isElectron;\nexports.isWeb = _isWeb;\nexports.isWebWorker = (_isWeb && typeof $globalThis.importScripts === 'function');\nexports.webWorkerOrigin = exports.isWebWorker ? $globalThis.origin : undefined;\nexports.isIOS = _isIOS;\nexports.isMobile = _isMobile;\n/**\n * Whether we run inside a CI environment, such as\n * GH actions or Azure Pipelines.\n */\nexports.isCI = _isCI;\nexports.platform = _platform;\nexports.userAgent = _userAgent;\n/**\n * The language used for the user interface. The format of\n * the string is all lower case (e.g. zh-tw for Traditional\n * Chinese or de for German)\n */\nexports.language = _language;\nvar Language;\n(function (Language) {\n    function value() {\n        return exports.language;\n    }\n    Language.value = value;\n    function isDefaultVariant() {\n        if (exports.language.length === 2) {\n            return exports.language === 'en';\n        }\n        else if (exports.language.length >= 3) {\n            return exports.language[0] === 'e' && exports.language[1] === 'n' && exports.language[2] === '-';\n        }\n        else {\n            return false;\n        }\n    }\n    Language.isDefaultVariant = isDefaultVariant;\n    function isDefault() {\n        return exports.language === 'en';\n    }\n    Language.isDefault = isDefault;\n})(Language || (exports.Language = Language = {}));\n/**\n * Desktop: The OS locale or the locale specified by --locale or `argv.json`.\n * Web: matches `platformLocale`.\n *\n * The UI is not necessarily shown in the provided locale.\n */\nexports.locale = _locale;\n/**\n * This will always be set to the OS/browser's locale regardless of\n * what was specified otherwise. The format of the string is all\n * lower case (e.g. zh-tw for Traditional Chinese). The UI is not\n * necessarily shown in the provided locale.\n */\nexports.platformLocale = _platformLocale;\n/**\n * The translations that are available through language packs.\n */\nexports.translationsConfigFile = _translationsConfigFile;\nexports.setTimeout0IsFaster = (typeof $globalThis.postMessage === 'function' && !$globalThis.importScripts);\n/**\n * See https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#:~:text=than%204%2C%20then-,set%20timeout%20to%204,-.\n *\n * Works similarly to `setTimeout(0)` but doesn't suffer from the 4ms artificial delay\n * that browsers set when the nesting level is > 5.\n */\nexports.setTimeout0 = (() => {\n    if (exports.setTimeout0IsFaster) {\n        const pending = [];\n        $globalThis.addEventListener('message', (e) => {\n            if (e.data && e.data.vscodeScheduleAsyncWork) {\n                for (let i = 0, len = pending.length; i < len; i++) {\n                    const candidate = pending[i];\n                    if (candidate.id === e.data.vscodeScheduleAsyncWork) {\n                        pending.splice(i, 1);\n                        candidate.callback();\n                        return;\n                    }\n                }\n            }\n        });\n        let lastId = 0;\n        return (callback) => {\n            const myId = ++lastId;\n            pending.push({\n                id: myId,\n                callback: callback\n            });\n            $globalThis.postMessage({ vscodeScheduleAsyncWork: myId }, '*');\n        };\n    }\n    return (callback) => setTimeout(callback);\n})();\nvar OperatingSystem;\n(function (OperatingSystem) {\n    OperatingSystem[OperatingSystem[\"Windows\"] = 1] = \"Windows\";\n    OperatingSystem[OperatingSystem[\"Macintosh\"] = 2] = \"Macintosh\";\n    OperatingSystem[OperatingSystem[\"Linux\"] = 3] = \"Linux\";\n})(OperatingSystem || (exports.OperatingSystem = OperatingSystem = {}));\nexports.OS = (_isMacintosh || _isIOS ? OperatingSystem.Macintosh : (_isWindows ? OperatingSystem.Windows : OperatingSystem.Linux));\nlet _isLittleEndian = true;\nlet _isLittleEndianComputed = false;\nfunction isLittleEndian() {\n    if (!_isLittleEndianComputed) {\n        _isLittleEndianComputed = true;\n        const test = new Uint8Array(2);\n        test[0] = 1;\n        test[1] = 2;\n        const view = new Uint16Array(test.buffer);\n        _isLittleEndian = (view[0] === (2 << 8) + 1);\n    }\n    return _isLittleEndian;\n}\nexports.isChrome = !!(exports.userAgent && exports.userAgent.indexOf('Chrome') >= 0);\nexports.isFirefox = !!(exports.userAgent && exports.userAgent.indexOf('Firefox') >= 0);\nexports.isSafari = !!(!exports.isChrome && (exports.userAgent && exports.userAgent.indexOf('Safari') >= 0));\nexports.isEdge = !!(exports.userAgent && exports.userAgent.indexOf('Edg/') >= 0);\nexports.isAndroid = !!(exports.userAgent && exports.userAgent.indexOf('Android') >= 0);\nfunction isBigSurOrNewer(osVersion) {\n    return parseFloat(osVersion) >= 20;\n}\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StopWatch = void 0;\nconst hasPerformanceNow = (globalThis.performance && typeof globalThis.performance.now === 'function');\nclass StopWatch {\n    static create(highResolution) {\n        return new StopWatch(highResolution);\n    }\n    constructor(highResolution) {\n        this._now = hasPerformanceNow && highResolution === false ? Date.now : globalThis.performance.now.bind(globalThis.performance);\n        this._startTime = this._now();\n        this._stopTime = -1;\n    }\n    stop() {\n        this._stopTime = this._now();\n    }\n    reset() {\n        this._startTime = this._now();\n        this._stopTime = -1;\n    }\n    elapsed() {\n        if (this._stopTime !== -1) {\n            return this._stopTime - this._startTime;\n        }\n        return this._now() - this._startTime;\n    }\n}\nexports.StopWatch = StopWatch;\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.noBreakWhitespace = exports.CodePointIterator = void 0;\nexports.isFalsyOrWhitespace = isFalsyOrWhitespace;\nexports.format = format;\nexports.format2 = format2;\nexports.htmlAttributeEncodeValue = htmlAttributeEncodeValue;\nexports.escape = escape;\nexports.escapeRegExpCharacters = escapeRegExpCharacters;\nexports.count = count;\nexports.truncate = truncate;\nexports.truncateMiddle = truncateMiddle;\nexports.trim = trim;\nexports.ltrim = ltrim;\nexports.rtrim = rtrim;\nexports.convertSimple2RegExpPattern = convertSimple2RegExpPattern;\nexports.stripWildcards = stripWildcards;\nexports.createRegExp = createRegExp;\nexports.regExpLeadsToEndlessLoop = regExpLeadsToEndlessLoop;\nexports.splitLines = splitLines;\nexports.splitLinesIncludeSeparators = splitLinesIncludeSeparators;\nexports.firstNonWhitespaceIndex = firstNonWhitespaceIndex;\nexports.getLeadingWhitespace = getLeadingWhitespace;\nexports.lastNonWhitespaceIndex = lastNonWhitespaceIndex;\nexports.replaceAsync = replaceAsync;\nexports.compare = compare;\nexports.compareSubstring = compareSubstring;\nexports.compareIgnoreCase = compareIgnoreCase;\nexports.compareSubstringIgnoreCase = compareSubstringIgnoreCase;\nexports.isAsciiDigit = isAsciiDigit;\nexports.isLowerAsciiLetter = isLowerAsciiLetter;\nexports.isUpperAsciiLetter = isUpperAsciiLetter;\nexports.equalsIgnoreCase = equalsIgnoreCase;\nexports.startsWithIgnoreCase = startsWithIgnoreCase;\nexports.commonPrefixLength = commonPrefixLength;\nexports.commonSuffixLength = commonSuffixLength;\nexports.isHighSurrogate = isHighSurrogate;\nexports.isLowSurrogate = isLowSurrogate;\nexports.computeCodePoint = computeCodePoint;\nexports.getNextCodePoint = getNextCodePoint;\nconst charCode_1 = require(\"vs/base/common/charCode\");\nconst uint_1 = require(\"vs/base/common/uint\");\nfunction isFalsyOrWhitespace(str) {\n    if (!str || typeof str !== 'string') {\n        return true;\n    }\n    return str.trim().length === 0;\n}\nconst _formatRegexp = /{(\\d+)}/g;\n/**\n * Helper to produce a string with a variable number of arguments. Insert variable segments\n * into the string using the {n} notation where N is the index of the argument following the string.\n * @param value string to which formatting is applied\n * @param args replacements for {n}-entries\n */\nfunction format(value, ...args) {\n    if (args.length === 0) {\n        return value;\n    }\n    return value.replace(_formatRegexp, function (match, group) {\n        const idx = parseInt(group, 10);\n        return isNaN(idx) || idx < 0 || idx >= args.length ?\n            match :\n            args[idx];\n    });\n}\nconst _format2Regexp = /{([^}]+)}/g;\n/**\n * Helper to create a string from a template and a string record.\n * Similar to `format` but with objects instead of positional arguments.\n */\nfunction format2(template, values) {\n    if (Object.keys(values).length === 0) {\n        return template;\n    }\n    return template.replace(_format2Regexp, (match, group) => (values[group] ?? match));\n}\n/**\n * Encodes the given value so that it can be used as literal value in html attributes.\n *\n * In other words, computes `$val`, such that `attr` in `<div attr=\"$val\" />` has the runtime value `value`.\n * This prevents XSS injection.\n */\nfunction htmlAttributeEncodeValue(value) {\n    return value.replace(/[<>\"'&]/g, ch => {\n        switch (ch) {\n            case '<': return '&lt;';\n            case '>': return '&gt;';\n            case '\"': return '&quot;';\n            case '\\'': return '&apos;';\n            case '&': return '&amp;';\n        }\n        return ch;\n    });\n}\n/**\n * Converts HTML characters inside the string to use entities instead. Makes the string safe from\n * being used e.g. in HTMLElement.innerHTML.\n */\nfunction escape(html) {\n    return html.replace(/[<>&]/g, function (match) {\n        switch (match) {\n            case '<': return '&lt;';\n            case '>': return '&gt;';\n            case '&': return '&amp;';\n            default: return match;\n        }\n    });\n}\n/**\n * Escapes regular expression characters in a given string\n */\nfunction escapeRegExpCharacters(value) {\n    return value.replace(/[\\\\\\{\\}\\*\\+\\?\\|\\^\\$\\.\\[\\]\\(\\)]/g, '\\\\$&');\n}\n/**\n * Counts how often `substr` occurs inside `value`.\n */\nfunction count(value, substr) {\n    let result = 0;\n    let index = value.indexOf(substr);\n    while (index !== -1) {\n        result++;\n        index = value.indexOf(substr, index + substr.length);\n    }\n    return result;\n}\nfunction truncate(value, maxLength, suffix = '') {\n    if (value.length <= maxLength) {\n        return value;\n    }\n    return `${value.substr(0, maxLength)}${suffix}`;\n}\nfunction truncateMiddle(value, maxLength, suffix = '') {\n    if (value.length <= maxLength) {\n        return value;\n    }\n    const prefixLength = Math.ceil(maxLength / 2) - suffix.length / 2;\n    const suffixLength = Math.floor(maxLength / 2) - suffix.length / 2;\n    return `${value.substr(0, prefixLength)}${suffix}${value.substr(value.length - suffixLength)}`;\n}\n/**\n * Removes all occurrences of needle from the beginning and end of haystack.\n * @param haystack string to trim\n * @param needle the thing to trim (default is a blank)\n */\nfunction trim(haystack, needle = ' ') {\n    const trimmed = ltrim(haystack, needle);\n    return rtrim(trimmed, needle);\n}\n/**\n * Removes all occurrences of needle from the beginning of haystack.\n * @param haystack string to trim\n * @param needle the thing to trim\n */\nfunction ltrim(haystack, needle) {\n    if (!haystack || !needle) {\n        return haystack;\n    }\n    const needleLen = needle.length;\n    if (needleLen === 0 || haystack.length === 0) {\n        return haystack;\n    }\n    let offset = 0;\n    while (haystack.indexOf(needle, offset) === offset) {\n        offset = offset + needleLen;\n    }\n    return haystack.substring(offset);\n}\n/**\n * Removes all occurrences of needle from the end of haystack.\n * @param haystack string to trim\n * @param needle the thing to trim\n */\nfunction rtrim(haystack, needle) {\n    if (!haystack || !needle) {\n        return haystack;\n    }\n    const needleLen = needle.length, haystackLen = haystack.length;\n    if (needleLen === 0 || haystackLen === 0) {\n        return haystack;\n    }\n    let offset = haystackLen, idx = -1;\n    while (true) {\n        idx = haystack.lastIndexOf(needle, offset - 1);\n        if (idx === -1 || idx + needleLen !== offset) {\n            break;\n        }\n        if (idx === 0) {\n            return '';\n        }\n        offset = idx;\n    }\n    return haystack.substring(0, offset);\n}\nfunction convertSimple2RegExpPattern(pattern) {\n    return pattern.replace(/[\\-\\\\\\{\\}\\+\\?\\|\\^\\$\\.\\,\\[\\]\\(\\)\\#\\s]/g, '\\\\$&').replace(/[\\*]/g, '.*');\n}\nfunction stripWildcards(pattern) {\n    return pattern.replace(/\\*/g, '');\n}\nfunction createRegExp(searchString, isRegex, options = {}) {\n    if (!searchString) {\n        throw new Error('Cannot create regex from empty string');\n    }\n    if (!isRegex) {\n        searchString = escapeRegExpCharacters(searchString);\n    }\n    if (options.wholeWord) {\n        if (!/\\B/.test(searchString.charAt(0))) {\n            searchString = '\\\\b' + searchString;\n        }\n        if (!/\\B/.test(searchString.charAt(searchString.length - 1))) {\n            searchString = searchString + '\\\\b';\n        }\n    }\n    let modifiers = '';\n    if (options.global) {\n        modifiers += 'g';\n    }\n    if (!options.matchCase) {\n        modifiers += 'i';\n    }\n    if (options.multiline) {\n        modifiers += 'm';\n    }\n    if (options.unicode) {\n        modifiers += 'u';\n    }\n    return new RegExp(searchString, modifiers);\n}\nfunction regExpLeadsToEndlessLoop(regexp) {\n    // Exit early if it's one of these special cases which are meant to match\n    // against an empty string\n    if (regexp.source === '^' || regexp.source === '^$' || regexp.source === '$' || regexp.source === '^\\\\s*$') {\n        return false;\n    }\n    // We check against an empty string. If the regular expression doesn't advance\n    // (e.g. ends in an endless loop) it will match an empty string.\n    const match = regexp.exec('');\n    return !!(match && regexp.lastIndex === 0);\n}\nfunction splitLines(str) {\n    return str.split(/\\r\\n|\\r|\\n/);\n}\nfunction splitLinesIncludeSeparators(str) {\n    const linesWithSeparators = [];\n    const splitLinesAndSeparators = str.split(/(\\r\\n|\\r|\\n)/);\n    for (let i = 0; i < Math.ceil(splitLinesAndSeparators.length / 2); i++) {\n        linesWithSeparators.push(splitLinesAndSeparators[2 * i] + (splitLinesAndSeparators[2 * i + 1] ?? ''));\n    }\n    return linesWithSeparators;\n}\n/**\n * Returns first index of the string that is not whitespace.\n * If string is empty or contains only whitespaces, returns -1\n */\nfunction firstNonWhitespaceIndex(str) {\n    for (let i = 0, len = str.length; i < len; i++) {\n        const chCode = str.charCodeAt(i);\n        if (chCode !== charCode_1.CharCode.Space && chCode !== charCode_1.CharCode.Tab) {\n            return i;\n        }\n    }\n    return -1;\n}\n/**\n * Returns the leading whitespace of the string.\n * If the string contains only whitespaces, returns entire string\n */\nfunction getLeadingWhitespace(str, start = 0, end = str.length) {\n    for (let i = start; i < end; i++) {\n        const chCode = str.charCodeAt(i);\n        if (chCode !== charCode_1.CharCode.Space && chCode !== charCode_1.CharCode.Tab) {\n            return str.substring(start, i);\n        }\n    }\n    return str.substring(start, end);\n}\n/**\n * Returns last index of the string that is not whitespace.\n * If string is empty or contains only whitespaces, returns -1\n */\nfunction lastNonWhitespaceIndex(str, startIndex = str.length - 1) {\n    for (let i = startIndex; i >= 0; i--) {\n        const chCode = str.charCodeAt(i);\n        if (chCode !== charCode_1.CharCode.Space && chCode !== charCode_1.CharCode.Tab) {\n            return i;\n        }\n    }\n    return -1;\n}\n/**\n * Function that works identically to String.prototype.replace, except, the\n * replace function is allowed to be async and return a Promise.\n */\nfunction replaceAsync(str, search, replacer) {\n    const parts = [];\n    let last = 0;\n    for (const match of str.matchAll(search)) {\n        parts.push(str.slice(last, match.index));\n        if (match.index === undefined) {\n            throw new Error('match.index should be defined');\n        }\n        last = match.index + match[0].length;\n        parts.push(replacer(match[0], ...match.slice(1), match.index, str, match.groups));\n    }\n    parts.push(str.slice(last));\n    return Promise.all(parts).then(p => p.join(''));\n}\nfunction compare(a, b) {\n    if (a < b) {\n        return -1;\n    }\n    else if (a > b) {\n        return 1;\n    }\n    else {\n        return 0;\n    }\n}\nfunction compareSubstring(a, b, aStart = 0, aEnd = a.length, bStart = 0, bEnd = b.length) {\n    for (; aStart < aEnd && bStart < bEnd; aStart++, bStart++) {\n        const codeA = a.charCodeAt(aStart);\n        const codeB = b.charCodeAt(bStart);\n        if (codeA < codeB) {\n            return -1;\n        }\n        else if (codeA > codeB) {\n            return 1;\n        }\n    }\n    const aLen = aEnd - aStart;\n    const bLen = bEnd - bStart;\n    if (aLen < bLen) {\n        return -1;\n    }\n    else if (aLen > bLen) {\n        return 1;\n    }\n    return 0;\n}\nfunction compareIgnoreCase(a, b) {\n    return compareSubstringIgnoreCase(a, b, 0, a.length, 0, b.length);\n}\nfunction compareSubstringIgnoreCase(a, b, aStart = 0, aEnd = a.length, bStart = 0, bEnd = b.length) {\n    for (; aStart < aEnd && bStart < bEnd; aStart++, bStart++) {\n        let codeA = a.charCodeAt(aStart);\n        let codeB = b.charCodeAt(bStart);\n        if (codeA === codeB) {\n            // equal\n            continue;\n        }\n        if (codeA >= 128 || codeB >= 128) {\n            // not ASCII letters -> fallback to lower-casing strings\n            return compareSubstring(a.toLowerCase(), b.toLowerCase(), aStart, aEnd, bStart, bEnd);\n        }\n        // mapper lower-case ascii letter onto upper-case varinats\n        // [97-122] (lower ascii) --> [65-90] (upper ascii)\n        if (isLowerAsciiLetter(codeA)) {\n            codeA -= 32;\n        }\n        if (isLowerAsciiLetter(codeB)) {\n            codeB -= 32;\n        }\n        // compare both code points\n        const diff = codeA - codeB;\n        if (diff === 0) {\n            continue;\n        }\n        return diff;\n    }\n    const aLen = aEnd - aStart;\n    const bLen = bEnd - bStart;\n    if (aLen < bLen) {\n        return -1;\n    }\n    else if (aLen > bLen) {\n        return 1;\n    }\n    return 0;\n}\nfunction isAsciiDigit(code) {\n    return code >= charCode_1.CharCode.Digit0 && code <= charCode_1.CharCode.Digit9;\n}\nfunction isLowerAsciiLetter(code) {\n    return code >= charCode_1.CharCode.a && code <= charCode_1.CharCode.z;\n}\nfunction isUpperAsciiLetter(code) {\n    return code >= charCode_1.CharCode.A && code <= charCode_1.CharCode.Z;\n}\nfunction equalsIgnoreCase(a, b) {\n    return a.length === b.length && compareSubstringIgnoreCase(a, b) === 0;\n}\nfunction startsWithIgnoreCase(str, candidate) {\n    const candidateLength = candidate.length;\n    if (candidate.length > str.length) {\n        return false;\n    }\n    return compareSubstringIgnoreCase(str, candidate, 0, candidateLength) === 0;\n}\n/**\n * @returns the length of the common prefix of the two strings.\n */\nfunction commonPrefixLength(a, b) {\n    const len = Math.min(a.length, b.length);\n    let i;\n    for (i = 0; i < len; i++) {\n        if (a.charCodeAt(i) !== b.charCodeAt(i)) {\n            return i;\n        }\n    }\n    return len;\n}\n/**\n * @returns the length of the common suffix of the two strings.\n */\nfunction commonSuffixLength(a, b) {\n    const len = Math.min(a.length, b.length);\n    let i;\n    const aLastIndex = a.length - 1;\n    const bLastIndex = b.length - 1;\n    for (i = 0; i < len; i++) {\n        if (a.charCodeAt(aLastIndex - i) !== b.charCodeAt(bLastIndex - i)) {\n            return i;\n        }\n    }\n    return len;\n}\n/**\n * See http://en.wikipedia.org/wiki/Surrogate_pair\n */\nfunction isHighSurrogate(charCode) {\n    return (0xD800 <= charCode && charCode <= 0xDBFF);\n}\n/**\n * See http://en.wikipedia.org/wiki/Surrogate_pair\n */\nfunction isLowSurrogate(charCode) {\n    return (0xDC00 <= charCode && charCode <= 0xDFFF);\n}\n/**\n * See http://en.wikipedia.org/wiki/Surrogate_pair\n */\nfunction computeCodePoint(highSurrogate, lowSurrogate) {\n    return ((highSurrogate - 0xD800) << 10) + (lowSurrogate - 0xDC00) + 0x10000;\n}\n/**\n * get the code point that begins at offset `offset`\n */\nfunction getNextCodePoint(str, len, offset) {\n    const charCode = str.charCodeAt(offset);\n    if (isHighSurrogate(charCode) && offset + 1 < len) {\n        const nextCharCode = str.charCodeAt(offset + 1);\n        if (isLowSurrogate(nextCharCode)) {\n            return computeCodePoint(charCode, nextCharCode);\n        }\n    }\n    return charCode;\n}\n/**\n * get the code point that ends right before offset `offset`\n */\nfunction getPrevCodePoint(str, offset) {\n    const charCode = str.charCodeAt(offset - 1);\n    if (isLowSurrogate(charCode) && offset > 1) {\n        const prevCharCode = str.charCodeAt(offset - 2);\n        if (isHighSurrogate(prevCharCode)) {\n            return computeCodePoint(prevCharCode, charCode);\n        }\n    }\n    return charCode;\n}\nclass CodePointIterator {\n    get offset() {\n        return this._offset;\n    }\n    constructor(str, offset = 0) {\n        this._str = str;\n        this._len = str.length;\n        this._offset = offset;\n    }\n    setOffset(offset) {\n        this._offset = offset;\n    }\n    prevCodePoint() {\n        const codePoint = getPrevCodePoint(this._str, this._offset);\n        this._offset -= (codePoint >= uint_1.Constants.UNICODE_SUPPLEMENTARY_PLANE_BEGIN ? 2 : 1);\n        return codePoint;\n    }\n    nextCodePoint() {\n        const codePoint = getNextCodePoint(this._str, this._len, this._offset);\n        this._offset += (codePoint >= uint_1.Constants.UNICODE_SUPPLEMENTARY_PLANE_BEGIN ? 2 : 1);\n        return codePoint;\n    }\n    eol() {\n        return (this._offset >= this._len);\n    }\n}\nexports.CodePointIterator = CodePointIterator;\nexports.noBreakWhitespace = '\\xa0';\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MicrotaskDelay = void 0;\n/**\n * Can be passed into the Delayed to defer using a microtask\n * */\nexports.MicrotaskDelay = Symbol('MicrotaskDelay');\n","\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Constants = void 0;\nexports.toUint8 = toUint8;\nexports.toUint32 = toUint32;\nvar Constants;\n(function (Constants) {\n    /**\n     * MAX SMI (SMall Integer) as defined in v8.\n     * one bit is lost for boxing/unboxing flag.\n     * one bit is lost for sign flag.\n     * See https://thibaultlaurens.github.io/javascript/2013/04/29/how-the-v8-engine-works/#tagged-values\n     */\n    Constants[Constants[\"MAX_SAFE_SMALL_INTEGER\"] = 1073741824] = \"MAX_SAFE_SMALL_INTEGER\";\n    /**\n     * MIN SMI (SMall Integer) as defined in v8.\n     * one bit is lost for boxing/unboxing flag.\n     * one bit is lost for sign flag.\n     * See https://thibaultlaurens.github.io/javascript/2013/04/29/how-the-v8-engine-works/#tagged-values\n     */\n    Constants[Constants[\"MIN_SAFE_SMALL_INTEGER\"] = -1073741824] = \"MIN_SAFE_SMALL_INTEGER\";\n    /**\n     * Max unsigned integer that fits on 8 bits.\n     */\n    Constants[Constants[\"MAX_UINT_8\"] = 255] = \"MAX_UINT_8\";\n    /**\n     * Max unsigned integer that fits on 16 bits.\n     */\n    Constants[Constants[\"MAX_UINT_16\"] = 65535] = \"MAX_UINT_16\";\n    /**\n     * Max unsigned integer that fits on 32 bits.\n     */\n    Constants[Constants[\"MAX_UINT_32\"] = 4294967295] = \"MAX_UINT_32\";\n    Constants[Constants[\"UNICODE_SUPPLEMENTARY_PLANE_BEGIN\"] = 65536] = \"UNICODE_SUPPLEMENTARY_PLANE_BEGIN\";\n})(Constants || (exports.Constants = Constants = {}));\nfunction toUint8(v) {\n    if (v < 0) {\n        return 0;\n    }\n    if (v > Constants.MAX_UINT_8) {\n        return Constants.MAX_UINT_8;\n    }\n    return v | 0;\n}\nfunction toUint32(v) {\n    if (v < 0) {\n        return 0;\n    }\n    if (v > Constants.MAX_UINT_32) {\n        return Constants.MAX_UINT_32;\n    }\n    return v | 0;\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","/**\n * Copyright (c) 2017 The xterm.js authors. All rights reserved.\n * @license MIT\n */\n\nimport type { ITerminalAddon, Terminal } from '@xterm/xterm';\nimport type { WebglAddon as IWebglApi } from '@xterm/addon-webgl';\nimport { ICharacterJoinerService, ICharSizeService, ICoreBrowserService, IRenderService, IThemeService } from 'browser/services/Services';\nimport { ITerminal } from 'browser/Types';\nimport { Disposable, toDisposable } from 'vs/base/common/lifecycle';\nimport { getSafariVersion, isSafari } from 'common/Platform';\nimport { ICoreService, IDecorationService, ILogService, IOptionsService } from 'common/services/Services';\nimport { IWebGL2RenderingContext } from './Types';\nimport { WebglRenderer } from './WebglRenderer';\nimport { setTraceLogger } from 'common/services/LogService';\nimport { Emitter, Event } from 'vs/base/common/event';\n\nexport class WebglAddon extends Disposable implements ITerminalAddon , IWebglApi {\n  private _terminal?: Terminal;\n  private _renderer?: WebglRenderer;\n\n  private readonly _onChangeTextureAtlas = this._register(new Emitter<HTMLCanvasElement>());\n  public readonly onChangeTextureAtlas = this._onChangeTextureAtlas.event;\n  private readonly _onAddTextureAtlasCanvas = this._register(new Emitter<HTMLCanvasElement>());\n  public readonly onAddTextureAtlasCanvas = this._onAddTextureAtlasCanvas.event;\n  private readonly _onRemoveTextureAtlasCanvas = this._register(new Emitter<HTMLCanvasElement>());\n  public readonly onRemoveTextureAtlasCanvas = this._onRemoveTextureAtlasCanvas.event;\n  private readonly _onContextLoss = this._register(new Emitter<void>());\n  public readonly onContextLoss = this._onContextLoss.event;\n\n  constructor(\n    private _preserveDrawingBuffer?: boolean\n  ) {\n    if (isSafari && getSafariVersion() < 16) {\n      // Perform an extra check to determine if Webgl2 is manually enabled in developer settings\n      const contextAttributes = {\n        antialias: false,\n        depth: false,\n        preserveDrawingBuffer: true\n      };\n      const gl = document.createElement('canvas').getContext('webgl2', contextAttributes) as IWebGL2RenderingContext;\n      if (!gl) {\n        throw new Error('Webgl2 is only supported on Safari 16 and above');\n      }\n    }\n    super();\n  }\n\n  public activate(terminal: Terminal): void {\n    const core = (terminal as any)._core as ITerminal;\n    if (!terminal.element) {\n      this._register(core.onWillOpen(() => this.activate(terminal)));\n      return;\n    }\n\n    this._terminal = terminal;\n    const coreService: ICoreService = core.coreService;\n    const optionsService: IOptionsService = core.optionsService;\n\n    const unsafeCore = core as any;\n    const renderService: IRenderService = unsafeCore._renderService;\n    const characterJoinerService: ICharacterJoinerService = unsafeCore._characterJoinerService;\n    const charSizeService: ICharSizeService = unsafeCore._charSizeService;\n    const coreBrowserService: ICoreBrowserService = unsafeCore._coreBrowserService;\n    const decorationService: IDecorationService = unsafeCore._decorationService;\n    const logService: ILogService = unsafeCore._logService;\n    const themeService: IThemeService = unsafeCore._themeService;\n\n    // Set trace logger just in case it hasn't been yet which could happen when the addon is\n    // bundled separately to the core module\n    setTraceLogger(logService);\n\n    this._renderer = this._register(new WebglRenderer(\n      terminal,\n      characterJoinerService,\n      charSizeService,\n      coreBrowserService,\n      coreService,\n      decorationService,\n      optionsService,\n      themeService,\n      this._preserveDrawingBuffer\n    ));\n    this._register(Event.forward(this._renderer.onContextLoss, this._onContextLoss));\n    this._register(Event.forward(this._renderer.onChangeTextureAtlas, this._onChangeTextureAtlas));\n    this._register(Event.forward(this._renderer.onAddTextureAtlasCanvas, this._onAddTextureAtlasCanvas));\n    this._register(Event.forward(this._renderer.onRemoveTextureAtlasCanvas, this._onRemoveTextureAtlasCanvas));\n    renderService.setRenderer(this._renderer);\n\n    this._register(toDisposable(() => {\n      if ((this._terminal as any)._core._store._isDisposed) {\n        return;\n      }\n      const renderService: IRenderService = (this._terminal as any)._core._renderService;\n      renderService.setRenderer((this._terminal as any)._core._createRenderer());\n      renderService.handleResize(terminal.cols, terminal.rows);\n    }));\n  }\n\n  public get textureAtlas(): HTMLCanvasElement | undefined {\n    return this._renderer?.textureAtlas;\n  }\n\n  public clearTextureAtlas(): void {\n    this._renderer?.clearTextureAtlas();\n  }\n}\n"],"names":["root","factory","exports","module","define","amd","globalThis","$colors","$fg","$bg","$hasFg","$hasBg","$isSelected","$variantOffset","constructor","_terminal","_optionService","_selectionRenderModel","_decorationService","_coreBrowserService","_themeService","result","fg","bg","ext","resolve","cell","x","y","deviceCellWidth","this","extended","colors","getCode","NULL_CELL_CODE","underlineStyle","lineWidth","Math","max","floor","rawOptions","fontSize","dpr","round","forEachDecorationAtCell","d","backgroundColorRGB","rgba","foregroundColorRGB","isCellSelected","ansi","foreground","blend","isFocused","selectionBackgroundOpaque","selectionInactiveBackgroundOpaque","selectionForeground","treatGlyphAsBackgroundColor","background","undefined","terminal","options","deviceCellHeight","deviceCharWidth","deviceCharHeight","devicePixelRatio","deviceMaxTextureSize","newConfig","generateConfig","i","charAtlasCache","length","entry","ownedByIndex","ownedBy","indexOf","configEquals","config","atlas","dispose","splice","push","core","_core","newEntry","TextureAtlas","document","unicodeService","index","clonedColors","cursor","NULL_COLOR","cursorAccent","selectionBackgroundTransparent","selectionInactiveBackgroundTransparent","overviewRulerBorder","scrollbarSliderBackground","scrollbarSliderHoverBackground","scrollbarSliderActiveBackground","slice","contrastCache","halfContrastCache","customGlyphs","letterSpacing","lineHeight","fontFamily","fontWeight","fontWeightBold","allowTransparency","drawBoldTextInBrightColors","minimumContrastRatio","a","b","colorCode","DIM_OPACITY","TEXT_BASELINE","isFirefox","isLegacyEdge","_renderCallback","isCursorVisible","_restartInterval","isPaused","_blinkStartTimeout","_blinkInterval","window","clearInterval","clearTimeout","_animationFrame","cancelAnimationFrame","restartBlinkAnimation","_animationTimeRestarted","Date","now","requestAnimationFrame","timeToStart","BLINK_INTERVAL","setTimeout","time","setInterval","pause","resume","ctx","c","xOffset","yOffset","blockElementDefinition","blockElementDefinitions","charDefinition","box","xEighth","yEighth","fillRect","w","h","drawBlockElementChar","patternDefinition","patternCharacterDefinitions","patternSet","cachedPatterns","get","Map","set","fillStyle","Error","pattern","width","height","tmpCanvas","canvas","ownerDocument","createElement","tmpCtx","throwIfFalsy","getContext","imageData","ImageData","r","g","startsWith","parseInt","substring","split","map","e","parseFloat","data","putImageData","createPattern","drawPatternChar","boxDrawingDefinition","boxDrawingDefinitions","strokeStyle","instructions","Object","entries","actualInstructions","beginPath","Number","instruction","type","f","svgToCanvasInstructionMap","console","error","args","translateArgs","stroke","closePath","drawBoxDrawingChar","powerlineDefinition","powerlineDefinitions","clipRegion","Path2D","rect","clip","cssLineWidth","leftPadding","rightPadding","fill","drawPowerlineChar","xp","yp","clamp","value","min","bezierCurveTo","lineTo","moveTo","cellWidth","cellHeight","doClamp","element","parentWindow","callback","observer","ResizeObserver","find","target","disconnect","devicePixelContentBoxSize","inlineSize","blockSize","observe","toDisposable","INDICES_PER_CELL","BYTES_PER_CELL","Float32Array","BYTES_PER_ELEMENT","$glyph","$i","$leftCellPadding","$clippedPixels","GlyphRenderer","Disposable","_gl","_dimensions","_optionsService","super","_activeBuffer","_vertices","count","attributes","attributesBuffers","gl","maxAtlasPages","getParameter","MAX_TEXTURE_IMAGE_UNITS","maxTextureSize","MAX_TEXTURE_SIZE","_program","createProgram","maxFragmentShaderTextureUnits","textureConditionals","createFragmentShaderSource","_register","deleteProgram","_projectionLocation","getUniformLocation","_resolutionLocation","_textureLocation","_vertexArrayObject","createVertexArray","bindVertexArray","unitQuadVertices","unitQuadVerticesBuffer","createBuffer","deleteBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","enableVertexAttribArray","vertexAttribPointer","FLOAT","unitQuadElementIndices","Uint8Array","elementIndicesBuffer","ELEMENT_ARRAY_BUFFER","_attributesBuffer","vertexAttribDivisor","useProgram","textureUnits","Int32Array","uniform1iv","uniformMatrix4fv","PROJECTION_MATRIX","_atlasTextures","glTexture","GLTexture","createTexture","deleteTexture","texture","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","texImage2D","RGBA","UNSIGNED_BYTE","enable","BLEND","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","handleResize","beginFrame","_atlas","updateCell","code","chars","lastBg","_updateCell","array","cols","getRasterizedGlyphCombinedChar","getRasterizedGlyph","device","char","offset","left","top","size","texturePage","texturePositionClipSpace","pages","sizeClipSpace","rescaleOverlappingGlyphs","allowRescaling","clear","newCount","rows","viewport","uniform2f","render","renderModel","activeBuffer","bufferLength","lineLengths","si","sub","subarray","STREAM_DRAW","version","_bindAtlasPageTexture","drawElementsInstanced","TRIANGLE_STRIP","setAtlas","generateMipmap","setDimensions","dimensions","BYTES_PER_RECTANGLE","Vertices","$rgba","$x1","$y1","$r","$g","$b","$a","RectangleRenderer","_verticesCursor","_updateCachedColors","onChangeColors","_updateViewportRectangle","renderBackgrounds","_renderVertices","renderCursor","vertices","DYNAMIC_DRAW","_bgFloat","_colorToFloat32Array","_cursorFloat","_addRectangleFloat","updateBackgrounds","model","currentStartX","currentBg","currentFg","currentInverse","modelIndex","inverse","rectangleCount","RENDER_MODEL_INDICIES_PER_CELL","cells","RENDER_MODEL_BG_OFFSET","RENDER_MODEL_FG_OFFSET","_updateRectangle","updateCursor","style","cursorWidth","startX","endX","expandFloat32Array","_addRectangle","x1","y1","color","RENDER_MODEL_EXT_OFFSET","COMBINED_CHAR_BIT_MASK","Uint32Array","selection","createSelectionRenderModel","resize","indexCount","NULL_RASTERIZED_GLYPH","texturePosition","_pages","_document","_config","_unicodeService","_didWarmUp","_cacheMap","FourKeyMap","_cacheMapCombined","_activePages","_workBoundingBox","bottom","right","_workAttributeData","AttributeData","_textureSize","_onAddTextureAtlasCanvas","Emitter","onAddTextureAtlasCanvas","event","_onRemoveTextureAtlasCanvas","onRemoveTextureAtlasCanvas","_requestClearModel","_createNewPage","_tmpCanvas","createCanvas","TMP_CANVAS_GLYPH_PADDING","_tmpCtx","alpha","willReadFrequently","remove","page","warmUp","_doWarmUp","queue","IdleTaskQueue","enqueue","DEFAULT_COLOR","DEFAULT_EXT","rasterizedGlyph","_drawToCache","clearTexture","currentRow","pagesBySize","filter","sort","percentageUsed","sameSizeI","mergingPages","sortedMergingPagesIndexes","glyphs","mergedPageIndex","mergedPage","_mergePages","_deletePage","fire","newPage","AtlasPage","mergedSize","p","drawImage","pageIndex","j","adjustingPage","restrictToCellHeight","domContainer","_getFromCacheMap","cacheMap","key","_getColorFromAnsiIndex","idx","_getBackgroundColor","bgColorMode","bgColor","dim","arr","toColorRGB","channels","toColor","opaque","_getForegroundColor","fgColorMode","fgColor","bold","excludeFromContrastRatioDemands","minimumContrastColor","_getMinimumContrastColor","multiplyOpacity","_resolveBackgroundRgba","_resolveForegroundRgba","cache","_getContrastCache","adjustedColor","getColor","bgRgba","fgRgba","ensureContrastRatio","setColor","codeOrChars","String","fromCharCode","parentElement","display","append","allowedWidth","allowedHeight","save","isInvisible","isBold","isInverse","isDim","italic","isItalic","underline","isUnderline","strikethrough","isStrikethrough","overline","isOverline","getFgColor","getFgColorMode","getBgColor","getBgColorMode","temp","temp2","backgroundColor","globalCompositeOperation","css","fontStyle","font","textBaseline","powerlineGlyph","isPowerlineGlyph","charCodeAt","restrictedPowerlineGlyph","isRestrictedPowerlineGlyph","foregroundColor","padding","customGlyph","tryDrawCustomChar","chWidth","enableClearThresholdCheck","wcwidth","getStringCellWidth","isUnderlineColorDefault","isUnderlineColorRGB","getUnderlineColor","join","xLeft","yTop","ceil","yMid","yBot","nextOffset","getUnderlineVariantOffset","xChLeft","xChRight","xChMid","yCurlyBot","yCurlyTop","offsetWidth","setLineDash","computeNextVariantOffset","lineRatio","gapRatio","xChWidth","line","gap","end","restore","metrics","measureText","actualBoundingBoxDescent","strokeText","fillText","isBeyondCellBounds","clearColor","getImageData","isEmpty","checkCompletelyTransparent","_findGlyphBoundingBox","activePage","activeRow","row","fixedRows","_overflowSizePage","wasPageAndRowFound","candidatePage","addGlyph","boundingBox","restrictedGlyph","found","alphaOffset","_usedPixels","_glyphs","glyph","sourcePages","clearRect","enableThresholdCheck","fgR","fgG","fgB","threshold","abs","WebglRenderer","_characterJoinerService","_charSizeService","_coreService","preserveDrawingBuffer","_cursorBlinkStateManager","MutableDisposable","_charAtlasDisposable","_observerDisposable","_model","RenderModel","_workCell","CellData","_workCell2","_rectangleRenderer","_glyphRenderer","_onChangeTextureAtlas","onChangeTextureAtlas","_onRequestRedraw","onRequestRedraw","_onContextLoss","onContextLoss","_canvas","mainDocument","contextAttributes","antialias","depth","_handleColorChange","_cellColorResolver","CellColorResolver","_renderLayers","LinkRenderLayer","screenElement","linkifier","createRenderDimensions","_devicePixelRatio","_updateDimensions","_updateCursorBlink","onOptionChange","_handleOptionsChanged","_deviceMaxTextureSize","addDisposableListener","log","preventDefault","_contextRestorationTimeout","warn","removeTerminalFromCache","_initializeWebGLState","_requestRedrawViewport","observeDevicePixelDimensions","_setCanvasDevicePixelDimensions","onWindowChange","appendChild","_isAttached","isConnected","l","removeChild","textureAtlas","_charAtlas","_refreshCharAtlas","_clearModel","handleDevicePixelRatioChange","handleCharSizeChanged","handleBlur","handleFocus","handleSelectionChanged","start","columnSelectMode","update","handleCursorMove","acquireTextureAtlas","combinedDisposable","Event","forward","clearGlyphRenderer","clearTextureAtlas","reset","renderRows","handleGridChanged","_updateModel","decPrivateModes","cursorBlink","CursorBlinkStateManager","_requestRedrawCursor","joinedRanges","isJoined","lastCharX","range","isCursorRow","skipJoinedCheckUntilX","isValidJoinRange","cursorStyle","cursorY","buffer","active","baseY","viewportRelativeCursorY","ydisp","cursorX","lastCursorX","isCursorInitialized","isCursorHidden","modelUpdated","lines","getJoinedCharacters","loadCell","shift","firstSelectionState","JoinedCellData","translateToString","getChars","getWidth","cursorInactiveStyle","NULL_CELL_CHAR","firstCell","content","combinedData","_width","isCombined","setFromCharData","getAsCharData","vertexSource","fragmentSource","program","attachShader","createShader","VERTEX_SHADER","FRAGMENT_SHADER","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","source","newLength","newArray","shader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","BaseRenderLayer","_container","id","zIndex","_alpha","_deviceCharWidth","_deviceCharHeight","_deviceCellWidth","_deviceCellHeight","_deviceCharLeft","_deviceCharTop","classList","add","toString","_initCanvas","_ctx","_clearAll","startRow","endRow","_setTransparency","oldCanvas","cloneNode","replaceChild","colorSet","_fillBottomLineAtCells","_clearCells","_fillCharTrueColor","_getFont","_clipCell","container","linkifier2","coreBrowserService","optionsService","themeService","onShowLinkUnderline","_handleShowLinkUnderline","onHideLinkUnderline","_handleHideLinkUnderline","_state","_clearCurrentLink","middleRowCount","y2","x2","INVERTED_DEFAULT_COLOR","is256Color","codepoint","isEmoji","glyphSizeX","isNerdFontGlyph","isBoxOrBlockGlyph","currentOffset","SelectionRenderModel","hasSelection","viewportStartRow","viewportEndRow","viewportCappedStartRow","viewportCappedEndRow","startCol","endCol","selectionStart","selectionEnd","viewportY","buffers","rgb","toPaddedHex","s","contrastRatio","l1","l2","toCss","toRgba","opacity","toChannels","bgR","bgG","bgB","isOpaque","ratio","rgbaColor","factor","$ctx","$litmusColor","createLinearGradient","match","repeat","rgbaMatch","relativeLuminance2","rs","gs","bs","pow","relativeLuminance","reduceLuminance","cr","increaseLuminance","bgL","fgL","resultA","resultARatio","resultB","TwoKeyMap","_data","first","second","third","fourth","isSafari","majorVersion","userAgent","isNode","process","navigator","platform","includes","test","isMac","isIpad","isIphone","isWindows","isLinux","isChromeOS","TaskQueue","_tasks","_i","task","_start","flush","_idleCallback","_cancelCallback","_requestCallback","_process","bind","deadline","taskDuration","longestTask","lastDeadlineRemaining","timeRemaining","deadlineRemaining","performance","PriorityTaskQueue","_createDeadline","identifier","duration","requestIdleCallback","cancelIdleCallback","_queue","ExtendedAttrs","fromColorRGB","clone","newObj","hasExtendedAttrs","isBlink","isProtected","isFgRGB","isBgRGB","isFgPalette","isBgPalette","isFgDefault","isBgDefault","isAttributeDefault","updateExtended","underlineColor","getUnderlineColorMode","isUnderlineColorPalette","getUnderlineStyle","underlineVariantOffset","_urlId","_ext","urlId","val","fromCharData","obj","stringFromCodePoint","CHAR_DATA_ATTR_INDEX","combined","CHAR_DATA_CHAR_INDEX","CHAR_DATA_WIDTH_INDEX","DEFAULT_ATTR","CHAR_DATA_CODE_INDEX","NULL_CELL_WIDTH","WHITESPACE_CELL_CHAR","WHITESPACE_CELL_WIDTH","WHITESPACE_CELL_CODE","codePoint","_interim","decode","input","startPos","interim","byte1","byte2","byte3","byte4","discardInterim","cp","tmp","pos","missing","fourStop","logger","traceLogger","_target","descriptor","fn","logLevel","LogLevelEnum","TRACE","apply","trace","name","JSON","stringify","optionsKeyToLogLevel","debug","DEBUG","info","INFO","WARN","ERROR","off","OFF","LogService","_logLevel","_updateLogLevel","onSpecificOptionChange","_evalLazyOptionalParams","optionalParams","_log","message","call","IOptionsService","ctor","DI_DEPENDENCIES","serviceRegistry","has","decorator","arguments","DI_TARGET","storeServiceDependency","_id","IBufferService","createDecorator","ICoreMouseService","ICoreService","ICharsetService","IInstantiationService","ILogService","IOscLinkService","IUnicodeService","IDecorationService","defineProperty","isAndroid","isElectron","isWebkitWebView","isChrome","isWebKit","onDidChangeFullscreen","onDidChangeZoomLevel","addMatchMediaChangeListener","setZoomLevel","zoomLevel","targetWindow","WindowManager","INSTANCE","getZoomLevel","getZoomFactor","setZoomFactor","zoomFactor","setFullscreen","fullscreen","isFullscreen","isStandalone","standalone","isWCOEnabled","windowControlsOverlay","visible","getWCOBoundingRect","getTitlebarAreaRect","window_1","event_1","mapWindowIdToZoomLevel","_onDidChangeZoomLevel","mapWindowIdToZoomFactor","_onDidChangeFullscreen","mapWindowIdToFullScreen","getWindowId","targetWindowId","windowId","vscodeWindowId","query","matchMedia","addEventListener","mainWindow","standaloneMatchMedia","fullScreenMatchMedia","matches","__createBinding","create","o","m","k","k2","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","__setModuleDefault","v","__importStar","mod","prototype","hasOwnProperty","BrowserFeatures","KeyboardSupport","browser","safeNavigator","clipboard","writeText","isNative","queryCommandSupported","readText","keyboard","Always","FullScreen","None","touch","maxTouchPoints","pointerEvents","PointerEvent","_a","SafeTriangle","DragAndDropObserver","ModifierKeyEmitter","DetectedFullscreenMode","Namespace","EventHelper","EventType","sharedMutationObserver","Dimension","WindowIntervalTimer","scheduleAtNextAnimationFrame","runAtThisOrScheduleAtNextAnimationFrame","WindowIdleValue","addStandardDisposableGenericMouseUpListener","addStandardDisposableGenericMouseDownListener","addStandardDisposableListener","onDidUnregisterWindow","onWillUnregisterWindow","onDidRegisterWindow","hasWindow","getWindowById","getWindowsCount","getWindows","getDocument","getWindow","registerWindow","clearNode","node","firstChild","clearNodeRecursively","domNode","addDisposableGenericMouseDownListener","addDisposableGenericMouseMoveListener","handler","useCapture","isIOS","canIUse_1","POINTER_MOVE","MOUSE_MOVE","addDisposableGenericMouseUpListener","runWhenWindowIdle","timeout","async_1","_runWhenIdle","disposableWindowInterval","interval","iterations","iteration","timer","disposable","lifecycle_1","measure","modify","addDisposableThrottledListener","eventMerger","minimumTimeMs","TimeoutThrottledDomListener","getComputedStyle","getClientArea","fallback","elWindow","elDocument","body","clientWidth","clientHeight","visualViewport","innerWidth","innerHeight","documentElement","getTopLeftOffset","position","getDomNodePagePosition","bb","getBoundingClientRect","scrollX","scrollY","getDomNodeZoomLevel","testElement","zoom","elementZoomLevel","getTotalWidth","getContentWidth","border","SizeUtils","getBorderLeftWidth","getBorderRightWidth","getPaddingLeft","getPaddingRight","getTotalScrollWidth","getContentHeight","getBorderTopWidth","getBorderBottomWidth","getPaddingTop","getPaddingBottom","offsetHeight","getTotalHeight","margin","getMarginTop","getMarginBottom","getLargestChildWidth","parent","children","childWidths","child","elementPosition","parentPosition","getRelativeLeft","isAncestor","setParentFlowTo","fromChildElement","toParentElement","dataset","parentFlowToDataKey","isAncestorUsingFlowTo","testChild","testAncestor","isHTMLElement","flowToParentElement","getParentFlowToElement","parentNode","findParentWithClass","hasParentWithClass","clazz","stopAtClazzOrNode","isShadowRoot","isInShadowDOM","getShadowRoot","getActiveElement","isActiveElement","isAncestorOfActiveElement","ancestor","isActiveDocument","getActiveDocument","getActiveWindow","defaultView","isGlobalStylesheet","globalStylesheets","createStyleSheet2","WrappedStyleElement","createStyleSheet","cloneGlobalStylesheets","disposables","DisposableStore","globalStylesheet","clonedGlobalStylesheets","cloneGlobalStyleSheet","createMetaElement","head","createHeadElement","createLinkElement","createCSSRule","selector","cssText","getSharedStyleSheet","sheet","insertRule","clonedGlobalStylesheet","removeCSSRulesContainingSelector","ruleName","rules","getDynamicStyleSheetRules","toDelete","rule","isCSSStyleRule","selectorText","deleteRule","isHTMLAnchorElement","HTMLAnchorElement","isHTMLSpanElement","HTMLSpanElement","isHTMLTextAreaElement","HTMLTextAreaElement","isHTMLInputElement","HTMLInputElement","isHTMLButtonElement","HTMLButtonElement","isHTMLDivElement","HTMLDivElement","isSVGElement","SVGElement","isMouseEvent","MouseEvent","isKeyboardEvent","KeyboardEvent","isPointerEvent","isDragEvent","DragEvent","isEventLike","candidate","stopPropagation","saveParentsScrollTop","nodeType","ELEMENT_NODE","scrollTop","restoreParentsScrollTop","state","trackFocus","FocusTracker","after","sibling","prepend","insertBefore","innerText","$","nodes","separator","forEach","Node","createTextNode","setVisibility","elements","show","hide","removeTabIndexAndUpdateFocus","hasAttribute","activeElement","parentFocusable","findParentWithAttribute","focus","removeAttribute","finalHandler","domContentLoaded","Promise","readyState","listener","removeEventListener","computeScreenAwareSize","cssPx","screenPx","windowOpenNoOpener","url","open","windowOpenPopup","screenLeft","popupWidth","screenTop","popupHeight","windowOpenWithSuccess","noOpener","newTab","opener","location","href","animate","step","stepDisposable","asCSSPropertyValue","replace","asCssValueWithDefault","cssPropertyValue","dflt","variableMatch","varArguments","trim","detectFullscreen","fullscreenElement","webkitFullscreenElement","webkitIsFullScreen","mode","DOCUMENT","guess","screen","BROWSER","isMacintosh","outerHeight","outerWidth","multibyteAwareBtoa","str","btoa","codeUnits","Uint16Array","binary","uint8array","toBinary","getCookieValue","cookie","pop","tag","Array","isArray","H_REGEX","exec","groups","tagName","el","classNames","className","assign","cssKey","cssValue","setProperty","camelCaseToHyphenCase","tabIndex","setAttribute","svgElem","createElementNS","copyAttributes","trackAttributes","from","to","attributeFilter","mutations","mutation","attributeName","copyAttribute","keyboardEvent_1","mouseEvent_1","errors_1","keyCodes_1","hash_1","numbers_1","windows","ensureCodeWindow","mainWindowRegistration","registeredWindow","delete","BEFORE_UNLOAD","values","fallbackToMain","candidateNode","candidateEvent","view","DomListener","_node","_type","_handler","_options","useCaptureOrOptions","_wrapAsStandardMouseEvent","StandardMouseEvent","POINTER_DOWN","MOUSE_DOWN","POINTER_UP","MOUSE_UP","wrapHandler","StandardKeyboardEvent","_wrapAsStandardKeyboardEvent","AbstractIdleValue","executor","IntervalTimer","defaultTarget","cancelAndSet","runner","AnimationFrameQueueItem","priority","_runner","_canceled","execute","onUnexpectedError","NEXT_QUEUE","CURRENT_QUEUE","animFrameRequested","inAnimationFrameRunner","item","nextQueue","currentQueue","animationFrameRunner","DEFAULT_EVENT_MERGER","lastEvent","currentEvent","lastHandlerTime","TimeoutTimer","invokeHandler","getTime","elapsedTime","cancel","setIfNotSet","convertToPixels","getDimension","cssPropertyName","jsPropertyName","computedStyle","getPropertyValue","getMarginLeft","getMarginRight","is","lift","equals","offsetParent","offsetTop","offsetLeft","direction","scrollLeft","scrollWidth","Boolean","contains","flowToParentId","getElementById","host","shadowRoot","doc","hasFocus","_currentCssStyle","_styleSheet","setStyle","cssStyle","beforeAppend","disposableStore","media","globalStylesheetClones","Set","cloneDisposable","cssRules","childList","textContent","mutationObservers","mutationObserversPerTarget","optionsHash","hash","mutationObserverPerOptions","users","onDidMutate","MutationObserver","resolvedMutationObserverPerOptions","_sharedStyleSheet","HTMLElement","CLICK","AUXCLICK","DBLCLICK","MOUSE_OVER","MOUSE_OUT","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_WHEEL","POINTER_LEAVE","CONTEXT_MENU","WHEEL","KEY_DOWN","KEY_PRESS","KEY_UP","LOAD","UNLOAD","PAGE_SHOW","PAGE_HIDE","PASTE","ABORT","RESIZE","SCROLL","FULLSCREEN_CHANGE","WK_FULLSCREEN_CHANGE","SELECT","CHANGE","SUBMIT","RESET","FOCUS","FOCUS_IN","FOCUS_OUT","BLUR","INPUT","STORAGE","DRAG_START","DRAG","DRAG_ENTER","DRAG_LEAVE","DRAG_OVER","DROP","DRAG_END","ANIMATION_START","ANIMATION_END","ANIMATION_ITERATION","stop","cancelBubble","hasFocusWithin","_onDidFocus","onDidFocus","_onDidBlur","onDidBlur","loosingFocus","onFocus","onBlur","_refreshStateHandler","refreshState","SELECTOR_REGEX","_$","namespace","description","attrs","HTML","SVG","_subscriptions","_keyStatus","altKey","shiftKey","ctrlKey","metaKey","runAndSubscribe","registerListeners","defaultPrevented","keyCode","KeyCode","Alt","lastKeyPressed","lastKeyReleased","buttons","resetKeyStatus","keyStatus","isModifierPressed","doResetKeyStatus","getInstance","instance","callbacks","counter","dragStartTime","onDragStart","onDrag","timeStamp","onDragEnter","onDragOver","onDragLeave","onDragEnd","onDrop","toLowerCase","getAttribute","originX","originY","triangles","t","isPointWithinTriangle","IframeUtils","parentOriginHash","async","parentOrigin","salt","crypto","subtle","strData","arrData","TextEncoder","encode","bytes","hexArray","padStart","BigInt","sha256AsBase32","digest","sameOriginWindowChainCache","WeakMap","getParentWindowIfSameOrigin","parentLocation","origin","getSameOriginWindowChain","windowChainCache","WeakRef","iframeElement","frameElement","getPositionOfChildWindowRelativeToAncestorWindow","childWindow","ancestorWindow","windowChain","windowChainEl","windowInChain","deref","boundingRect","printKeyboardEvent","modifiers","printStandardKeyboardEvent","KeyCodeUtils","keybindings_1","ctrlKeyMod","KeyMod","WinCtrl","CtrlCmd","altKeyMod","shiftKeyMod","Shift","metaKeyMod","_standardKeyboardEventBrand","browserEvent","altGraphKey","getModifierState","charCode","toUpperCase","fromString","PauseBreak","Semicolon","IntlBackslash","Equal","NumpadAdd","NumpadSubtract","Minus","Meta","EVENT_KEY_CODE_MAP","Unknown","extractKeyCode","Ctrl","_asKeybinding","_computeKeybinding","_asKeyCodeChord","_computeKeyCodeChord","toKeyCodeChord","other","KeyCodeChord","StandardWheelEvent","DragMouseEvent","iframe_1","timestamp","leftButton","button","middleButton","rightButton","detail","pageX","posx","posy","pageY","clientX","clientY","iframeOffsets","dataTransfer","deltaX","deltaY","targetNode","srcElement","shouldFactorDPR","chromeVersionMatch","e1","e2","wheelDeltaY","VERTICAL_AXIS","axis","ev","deltaMode","DOM_DELTA_LINE","wheelDeltaX","HORIZONTAL_AXIS","wheelDelta","fallbackWindowId","Permutation","CallbackIterable","ArrayQueue","booleanComparator","numberComparator","CompareResult","tail","n","tail2","one","itemEquals","len","removeFastWithoutKeepingOrder","last","binarySearch","comparator","binarySearch2","quickSelect","nth","compare","TypeError","pivotValue","random","lower","higher","pivots","groupBy","currentGroup","groupAdjacentBy","items","shouldBeGrouped","forEachAdjacent","forEachWithNeighbors","sortedDiff","delta","before","splices","removed","added","deleteCount","toInsert","topStep","topAsync","batch","token","reject","isCancellationRequested","CancellationError","then","coalesce","coalesceInPlace","move","isFalsyOrEmpty","isNonEmptyArray","distinct","keyFn","seen","uniqueFilter","firstOrDefault","notFoundValue","lastOrDefault","commonPrefixLength","arg","indexer","mapper","reduce","insert","arrayInsert","insertIndex","insertArr","concat","shuffle","_seed","rand","seed","sin","pushToStart","unshift","pushToEnd","pushMany","mapArrayOrNot","asArray","getRandomElement","insertInto","newItems","getActualStartIndex","compareBy","tieBreakComparators","comparators","item1","item2","isNeitherLessOrGreaterThan","neitherLessOrGreaterThan","reverseOrder","arraysFind_1","compareToKey","low","high","mid","comp","pushSplice","latest","beforeIdx","afterIdx","beforeElement","afterElement","findFirstIdxMonotonousOrArrLen","startIdx","originalLength","newItemsLength","isLessThan","isLessThanOrEqual","isGreaterThan","greaterThan","lessThan","firstIdx","lastIdx","takeWhile","predicate","takeFromEndWhile","endIdx","peek","peekLast","dequeue","removeLast","takeCount","empty","_callback","iterate","toArray","cb","mapFn","some","findFirst","findLast","findLastMaxBy","_indexMap","createSortPermutation","compareFn","sortIndices","keys","index1","index2","_","inverseIndexMap","findLastIdx","fromIndex","findLastIdxMonotonous","endIdxEx","MonotonousArray","findLastMonotonous","findFirstMonotonous","findFirstIdxMonotonous","findFirstMax","findLastMax","findFirstMin","findMaxIdx","maxIdx","mapFindFirst","mapped","assertInvariants","_array","_findLastMonotonousLastIdx","_prevFindLastPredicate","AsyncIterableSource","CancelableAsyncIterableObject","AsyncIterableObject","LazyStatefulPromise","StatefulPromise","Promises","DeferredPromise","IntervalCounter","TaskSequentializer","GlobalIdleValue","runWhenGlobalIdle","ThrottledWorker","RunOnceWorker","ProcessTimeRunOnceScheduler","RunOnceScheduler","LimitedQueue","Queue","Limiter","AutoOpenBarrier","Barrier","ThrottledDelayer","Delayer","SequencerByKey","Sequencer","Throttler","isThenable","createCancelablePromise","raceCancellation","promise","defaultValue","ref","onCancellationRequested","finally","raceCancellationError","raceCancellablePromises","cancellablePromises","resolvedPromiseIndex","promises","race","cancellablePromise","raceTimeout","onTimeout","promiseResolve","asPromise","promiseWithResolvers","disposableTimeout","store","deleteAndLeak","sequence","promiseFactories","results","thenHandler","shouldStop","loop","firstParallel","promiseList","todo","finish","catch","err","retry","delay","retries","lastError","createCancelableAsyncIterable","cancellation_1","CancellationTokenSource","innerIterable","emitter","subscription","emitOne","platform_1","symbols_1","lazy_1","thenable","onfinally","res","rej","isDisposed","activePromise","queuedPromise","queuedPromiseFactory","promiseFactory","onComplete","current","promiseTask","promiseMap","newPromise","defaultDelay","deferred","completionPromise","doResolve","doReject","trigger","cancelTimeout","MicrotaskDelay","scheduled","queueMicrotask","isTriggered","microtaskDeferred","handle","timeoutDeferred","delayer","throttler","_isOpen","_promise","_completePromise","isOpen","wait","millis","autoOpenTimeMs","_timeout","maxDegreeOfParalellism","_size","_isDisposed","outstandingPromises","runningPromises","_onDrained","whenIdle","toPromise","onDrained","consume","iLimitedTask","consumed","sequentializer","tasks","isRunning","run","_token","BugIndicatingError","context","timeoutToken","timeoutHandler","isScheduled","schedule","doRun","intervalToken","intervalHandler","onInterval","units","work","unit","pendingWork","disposed","pending","maxBufferedWork","maxWorkChunkSize","doWork","throttleDelay","_targetWindow","setTimeout0","didTimeout","freeze","_didRun","_executor","_value","_error","_handle","isInitialized","taskId","_running","running","cancelRunning","onCancel","doneRunning","runQueued","_queued","queued","promiseReject","hasQueued","DeferredOutcome","AsyncIterableSourceState","nowFn","lastIncrementTime","increment","isRejected","outcome","Rejected","isResolved","Resolved","isSettled","completeCallback","errorCallback","complete","settled","firstError","all","withAsyncBody","bodyFn","_isResolved","requireValue","_compute","Lazy","getPromise","currentValue","rawValue","fromArray","writer","emitMany","fromPromise","fromPromises","merge","iterables","iterable","EMPTY","onReturn","Initial","_results","_onReturn","_onStateChanged","Symbol","asyncIterator","next","DoneError","done","DoneOK","return","filterFn","_source","earlyError","earlyItems","_deferred","_asyncIterable","_errorFn","_emitFn","asyncIterable","CancellationToken","cancelOnDispose","shortcutEvent","isCancellationToken","thing","Cancelled","MutableToken","_isCancelled","_emitter","_parentListener","CharCode","SetWithKey","groupFn","diffSets","diffMaps","intersection","setA","setB","elem","toStringTag","toKey","_map","callbackfn","thisArg","iterator","ErrorNoTelemetry","ExpectedError","NotSupportedError","NotImplementedError","ReadonlyError","errorHandler","ErrorHandler","setUnexpectedErrorHandler","newUnexpectedErrorHandler","isSigPipeError","cast","syscall","isCancellationError","onUnexpectedExternalError","transformErrorForSerialization","$isError","stack","stacktrace","noTelemetry","isErrorNoTelemetry","transformErrorFromSerialization","canceled","canceledName","illegalArgument","illegalState","getErrorMessage","listeners","unexpectedErrorHandler","addListener","_removeListener","emit","getUnexpectedErrorHandler","isExpected","msg","fromError","setPrototypeOf","ValueWithChangeEvent","Relay","EventBufferer","DynamicListEventMultiplexer","EventMultiplexer","MicrotaskEmitter","DebounceEmitter","PauseableEmitter","AsyncEmitter","createEventDeliveryQueue","ListenerRefusalError","ListenerLeakError","EventProfiling","setGlobalLeakWarningThreshold","oldValue","_globalLeakWarningThreshold","functional_1","linkedList_1","stopwatch_1","once","thisArgs","didFire","snapshot","onWillAddFirstListener","onDidRemoveLastListener","debounce","leading","flushOnListenerRemove","leakWarningThreshold","output","doFire","numDebouncedCalls","cur","_output","onWillRemoveListener","defer","each","signal","any","events","initial","accumulate","latch","firstCall","shouldEmit","isT","flushAfterTimeout","_buffer","onDidAddFirstListener","chain","sythensize","cs","ChainableSynthesis","evaluate","HaltChainable","steps","fromNodeEventEmitter","eventName","on","removeListener","fromDOMEventEmitter","EmitterObserver","_observable","_counter","_hasChanged","addObserver","removeObserver","beginUpdate","handlePossibleChange","handleChange","_change","endUpdate","reportChanges","fromObservable","obs","fromObservableLight","observable","didChange","_idPool","listenerCount","invocationCount","elapsedOverall","durations","_stopWatch","StopWatch","elapsed","LeakageMonitor","_errorHandler","_warnCountdown","_stacks","check","topStack","topCount","getMostFrequentStack","Stacktrace","print","UniqueContainer","_leakageMon","onListenerError","_perfMon","_profName","_deliveryQueue","deliveryQueue","_disposed","_listeners","_event","tuple","contained","removeMonitor","EventDeliveryQueuePrivate","adjustDeliveryQueue","_deliver","_deliverQueue","dq","hasListeners","fireAsync","promiseJoin","_asyncDeliveryQueue","LinkedList","forEachListener","thenables","waitUntil","isFrozen","allSettled","status","reason","_isPaused","_eventQueue","_mergeFn","_delay","_queuedEvents","onFirstListenerAdd","onLastListenerRemove","hook","createSingleCallFunction","unhook","onAddItem","onRemoveItem","getEvent","_store","multiplexer","itemListeners","DisposableMap","addItem","deleteAndDispose","wrapEvent","reduceData","reducedResult","bufferEvents","listening","inputEvent","inputEventListener","ConstValueWithChangeEvent","_onDidChange","onDidChange","fnDidRunCallback","_this","didCall","StringSHA1","Hasher","doHash","numberHash","stringHash","toHexString","strings","hashVal","initialHashVal","objectHash","booleanHash","SHA1Constant","leftRotate","bits","totalBits","dest","byteLength","bufferOrValue","bitsize","ArrayBuffer","leftPad","_bigBlock32","DataView","_h0","_h1","_h2","_h3","_h4","_buff","BLOCK_SIZE","_buffDV","_buffLen","_totalLen","_leftoverHighSurrogate","_finished","strLen","buff","buffLen","leftoverHighSurrogate","isHighSurrogate","nextCharCode","isLowSurrogate","computeCodePoint","UNICODE_REPLACEMENT","_push","_step","_wrapUp","ml","setUint32","bigBlock32","getUint32","Iterable","_empty","single","wrap","iterableOrElement","reverse","flatMap","reducer","initialValue","atMost","POSITIVE_INFINITY","asyncToArray","ScanCode","ScanCodeUtils","NATIVE_WINDOWS_KEY_CODE_TO_KEY_CODE","KeyChord","firstPart","secondPart","KeyCodeStrMap","_keyCodeToStr","_strToKeyCode","keyCodeToStr","strToKeyCode","uiMap","userSettingsUSMap","userSettingsGeneralMap","scanCodeIntToStr","scanCodeStrToInt","scanCodeLowerCaseStrToInt","lowerCaseToEnum","scanCode","toEnum","toUserSettingsUS","toUserSettingsGeneral","fromUserSettings","toElectronAccelerator","Numpad0","NumpadDivide","UpArrow","DownArrow","LeftArrow","RightArrow","ResolvedKeybinding","ResolvedChord","Keybinding","ScanCodeChord","decodeKeybinding","keybinding","OS","firstChord","secondChord","createSimpleKeybinding","chords","BinaryKeybindingsMask","ctrlCmd","winCtrl","OperatingSystem","Macintosh","getHashCode","isModifierKey","toKeybinding","isDuplicateModifierCase","ControlLeft","ControlRight","ShiftLeft","ShiftRight","AltLeft","AltRight","MetaLeft","MetaRight","keyLabel","keyAriaLabel","hasValue","ImmortalReference","AsyncReferenceCollection","ReferenceCollection","SafeDisposable","RefCountedDisposable","MandatoryMutableDisposable","DisposableTracker","setDisposableTracker","tracker","disposableTracker","trackDisposable","markAsDisposed","markAsSingleton","singleton","isDisposable","disposeIfDisposable","setParent","setParentOfDisposables","disposeOnReturn","arrays_1","collections_1","map_1","iterator_1","livingDisposables","getDisposableData","isSingleton","getRootParent","cacheValue","getTrackedDisposables","rootParentCache","computeLeakingDisposables","maxReported","preComputedLeaks","uncoveredLeakingObjs","leakingObjects","leakingObjsSet","getStackTracePath","leaking","linesToRemove","regexp","removePrefix","stackTraceStarts","SetMap","stackTracePath","stackTraceFormattedLines","prevStarts","continuations","cont","leaks","details","setParentOfDisposable","errors","AggregateError","self","DISABLE_DISPOSED_WARNING","_toDispose","clearAndLeak","_disposable","acquire","release","unset","isset","references","reference","object","createReferencedObject","destroyReferencedObject","referenceCollection","clearAndDisposeAll","skipDisposeOnOverwrite","Undefined","prev","_first","_last","_insert","atTheEnd","newNode","oldLast","oldFirst","didRemove","_remove","anchor","Touch","BidirectionalMap","CounterSet","getOrSet","mapToString","setToString","mapsStrictEqualIgnoreOrder","_m1","_m2","getKey","SlidingWindowAverage","MovingAverage","Counter","rot","modulo","ax","ay","bx","by","cx","cy","v0x","v0y","v1x","v1y","v2x","v2y","dot00","dot01","dot02","dot11","dot12","invDenom","u","_next","getNext","_n","_val","_values","_index","_sum","isEdge","setTimeout0IsFaster","translationsConfigFile","platformLocale","locale","Language","language","isCI","isMobile","webWorkerOrigin","isWebWorker","isWeb","isLinuxSnap","Platform","LANGUAGE_DEFAULT","PlatformToString","Web","Mac","Linux","Windows","isLittleEndian","_isLittleEndianComputed","_isLittleEndian","isBigSurOrNewer","osVersion","_locale","_translationsConfigFile","_userAgent","_isWindows","_isMacintosh","_isLinux","_isLinuxSnap","_isNative","_isWeb","_isElectron","_isIOS","_isCI","_isMobile","_language","_platformLocale","$globalThis","nodeProcess","vscode","versions","isElectronProcess","electron","isElectronRenderer","env","rawNlsConfig","nlsConfig","parse","userLocale","osLocale","resolvedLanguage","languagePack","_VSCODE_NLS_LANGUAGE","_platform","importScripts","isDefaultVariant","isDefault","postMessage","vscodeScheduleAsyncWork","lastId","myId","hasPerformanceNow","highResolution","_now","_startTime","_stopTime","noBreakWhitespace","CodePointIterator","isFalsyOrWhitespace","format","_formatRegexp","group","isNaN","format2","template","_format2Regexp","htmlAttributeEncodeValue","ch","escape","html","escapeRegExpCharacters","substr","truncate","maxLength","suffix","truncateMiddle","prefixLength","suffixLength","haystack","needle","rtrim","ltrim","convertSimple2RegExpPattern","stripWildcards","createRegExp","searchString","isRegex","wholeWord","charAt","global","matchCase","multiline","unicode","RegExp","regExpLeadsToEndlessLoop","lastIndex","splitLines","splitLinesIncludeSeparators","linesWithSeparators","splitLinesAndSeparators","firstNonWhitespaceIndex","chCode","charCode_1","Space","Tab","getLeadingWhitespace","lastNonWhitespaceIndex","startIndex","replaceAsync","search","replacer","parts","matchAll","compareSubstring","compareIgnoreCase","compareSubstringIgnoreCase","isAsciiDigit","Digit0","Digit9","isLowerAsciiLetter","isUpperAsciiLetter","A","Z","equalsIgnoreCase","startsWithIgnoreCase","candidateLength","commonSuffixLength","aLastIndex","bLastIndex","getNextCodePoint","uint_1","needleLen","haystackLen","lastIndexOf","aStart","aEnd","bStart","bEnd","codeA","codeB","aLen","bLen","diff","z","highSurrogate","lowSurrogate","_offset","_str","_len","setOffset","prevCodePoint","prevCharCode","getPrevCodePoint","Constants","UNICODE_SUPPLEMENTARY_PLANE_BEGIN","nextCodePoint","eol","toUint8","MAX_UINT_8","toUint32","MAX_UINT_32","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","WebglAddon","_preserveDrawingBuffer","getSafariVersion","activate","onWillOpen","coreService","unsafeCore","renderService","_renderService","characterJoinerService","charSizeService","decorationService","logService","_logService","setTraceLogger","_renderer","setRenderer","_createRenderer"],"sourceRoot":""}