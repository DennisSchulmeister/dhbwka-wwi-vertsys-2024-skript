import ErrorWithLoc from '../lib/error-with-loc';
import { CompiledModule, CompiledStmt } from './compiled-code';
import { RuntimePlatform } from './runtime';
/** Options for compiled program execution. */
export interface ExecutionOpts {
    /** Delay before executing each statement, in microseconds. */
    stmtExecutionDelayUs?: number;
}
export declare class ExecutionError extends ErrorWithLoc {
    constructor(message: string, { module, stmt, cause, }?: {
        module?: CompiledModule | null;
        stmt?: CompiledStmt;
        cause?: Error;
    });
}
/** Manages the execution of a compiled program. */
export default class Executor {
    private readonly platform;
    constructor(platform: RuntimePlatform, { stmtExecutionDelayUs }?: ExecutionOpts);
    /** Executes a compiled module. */
    executeModule(moduleOrCode: CompiledModule | string): Promise<void>;
    /** Sets flag to stop execution. */
    stopExecution(): void;
    private executeProc;
    private initVars;
    private executeStmts;
    private read;
    private getNextDataItem;
    private restore;
    private buildLabelIndexMaps;
    private buildLabelIndexMap;
    /** Delay before executing each statement, in microseconds. */
    private readonly stmtExecutionDelayUs;
    /** Current module being executed. */
    private currentModule;
    /** Static vars, indexed by proc name. */
    private localStaticVarsMap;
    /** Label index map for module-level statements. */
    private moduleLabelIndexMap;
    /** Label index map for procs. */
    private procLabelIndexMap;
    /** Cursor for READ. */
    private dataCursor;
}
