import { DataTypeSpec } from '../lib/types';
import { CompiledModule, PrintArg, Ptr } from './compiled-code';
import ansiStyles from 'ansi-styles';
import roundHalfToEven from '../lib/round-half-to-even';
/** Interface for platform-specific runtime functionality. */
export declare abstract class RuntimePlatform {
    /** Default statement execution delay in microseconds for this platform. */
    abstract defaultStmtExecutionDelayUs: number;
    /** Load a compiled module from output code.
     *
     * Warning: This will execute any module-level code with side effects in the string, so should NOT
     * be used for untrusted input. Compiled code from qbjc does not have any module-level code with
     * side effects.
     */
    abstract loadCompiledModule(code: string): Promise<CompiledModule>;
    /** Delay for the specified number of microseconds. */
    abstract delay(delayInUs: number): Promise<void>;
    /** Print a string to stdout. */
    abstract print(s: string): Promise<void>;
    /** Reads a line of text from stdin. */
    abstract inputLine(): Promise<string>;
    /** Gets a single char from stdin, or return null if no pending input.
     *
     * (This is basically INKEY$.)
     */
    abstract getChar(): Promise<string | null>;
    /** Moves cursor to the specified location. */
    abstract moveCursorTo(x: number, y: number): Promise<void>;
    /** Gets current cursor position. */
    abstract getCursorPosition(): Promise<{
        x: number;
        y: number;
    }>;
    /** Gets the terminal size. */
    abstract getScreenSize(): Promise<{
        rows: number;
        cols: number;
    }>;
    /** Shows / hides cursor. */
    abstract setCursorVisibility(isCursorVisible: boolean): Promise<void>;
    /** Clears the screen. */
    abstract clearScreen(): Promise<void>;
    /** Sets the foreground color. */
    abstract setFgColor(colorName: ColorName): Promise<void>;
    /** Sets the background color. */
    abstract setBgColor(colorName: ColorName): Promise<void>;
    /** BEEPs in the terminal. */
    abstract beep(): Promise<void>;
    /** Flag indicating we should stop executing.
     *
     * Setting this flag will cause blocking methods like `inputLine()` to exit early.
     */
    shouldStopExecution: boolean;
}
export declare type ColorName = keyof ansiStyles.ForegroundColor;
/** SCREEN mode definition. */
export interface ScreenModeConfig {
    mode: number;
    textModeDimensions: Array<{
        rows: number;
        cols: number;
    }>;
    colorMap: Array<ColorName>;
}
export declare const SCREEN_MODE_CONFIGS: Array<ScreenModeConfig>;
/** Runtime support library.
 *
 * This class provides the interface invoked by compiled code. It is platform-agnostic, and wraps
 * the low-level, platform-dependent functionality in the injected RuntimePlatform.
 */
export default class Runtime {
    private readonly platform;
    constructor(platform: RuntimePlatform);
    readonly roundHalfToEven: typeof roundHalfToEven;
    executeBuiltinProc(name: string, argTypeSpecs: Array<DataTypeSpec>, ...args: Array<Ptr>): Promise<any>;
    print(formatString: string | null, ...args: Array<PrintArg>): Promise<void>;
    /** Implements PRINT USING format strings.
     *
     * This is a VERY incomplete implementation. Supported:
     *
     *   - Formatting numbers with ##.##
     *   - Formatting string with &
     */
    private printWithFormatString;
    private readonly printFormatStringLexer;
    private printWithDefaultFormat;
    inputLine(prompt: string): Promise<string>;
    input(prompt: string, ...resultTypes: Array<DataTypeSpec>): Promise<Array<string | number>>;
    private lexInput;
    /** Lexer for input(). */
    private readonly inputLexer;
    setScreenMode(n: number): void;
    get currentScreenModeConfig(): ScreenModeConfig;
    private currentScreenMode;
}
